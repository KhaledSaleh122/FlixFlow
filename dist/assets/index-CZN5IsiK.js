function zw(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Vw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function os(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Ww={exports:{}},Oh={},Kw={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uc=Symbol.for("react.element"),aI=Symbol.for("react.portal"),lI=Symbol.for("react.fragment"),uI=Symbol.for("react.strict_mode"),cI=Symbol.for("react.profiler"),dI=Symbol.for("react.provider"),fI=Symbol.for("react.context"),hI=Symbol.for("react.forward_ref"),pI=Symbol.for("react.suspense"),mI=Symbol.for("react.memo"),gI=Symbol.for("react.lazy"),qS=Symbol.iterator;function yI(t){return t===null||typeof t!="object"?null:(t=qS&&t[qS]||t["@@iterator"],typeof t=="function"?t:null)}var qw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yw=Object.assign,Xw={};function hl(t,e,n){this.props=t,this.context=e,this.refs=Xw,this.updater=n||qw}hl.prototype.isReactComponent={};hl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qw(){}Qw.prototype=hl.prototype;function Vy(t,e,n){this.props=t,this.context=e,this.refs=Xw,this.updater=n||qw}var Gy=Vy.prototype=new Qw;Gy.constructor=Vy;Yw(Gy,hl.prototype);Gy.isPureReactComponent=!0;var YS=Array.isArray,Jw=Object.prototype.hasOwnProperty,Wy={current:null},Zw={key:!0,ref:!0,__self:!0,__source:!0};function eR(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Jw.call(e,r)&&!Zw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:uc,type:t,key:s,ref:o,props:i,_owner:Wy.current}}function vI(t,e){return{$$typeof:uc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ky(t){return typeof t=="object"&&t!==null&&t.$$typeof===uc}function xI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var XS=/\/+/g;function im(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xI(""+t.key):e.toString(36)}function Wd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case uc:case aI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+im(o,0):r,YS(i)?(n="",t!=null&&(n=t.replace(XS,"$&/")+"/"),Wd(i,e,n,"",function(u){return u})):i!=null&&(Ky(i)&&(i=vI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(XS,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",YS(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+im(s,a);o+=Wd(s,e,n,l,i)}else if(l=yI(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+im(s,a++),o+=Wd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qc(t,e,n){if(t==null)return t;var r=[],i=0;return Wd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function SI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tn={current:null},Kd={transition:null},EI={ReactCurrentDispatcher:Tn,ReactCurrentBatchConfig:Kd,ReactCurrentOwner:Wy};Ce.Children={map:qc,forEach:function(t,e,n){qc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qc(t,function(){e++}),e},toArray:function(t){return qc(t,function(e){return e})||[]},only:function(t){if(!Ky(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=hl;Ce.Fragment=lI;Ce.Profiler=cI;Ce.PureComponent=Vy;Ce.StrictMode=uI;Ce.Suspense=pI;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EI;Ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Yw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Wy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Jw.call(e,l)&&!Zw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:uc,type:t.type,key:i,ref:s,props:r,_owner:o}};Ce.createContext=function(t){return t={$$typeof:fI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dI,_context:t},t.Consumer=t};Ce.createElement=eR;Ce.createFactory=function(t){var e=eR.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:hI,render:t}};Ce.isValidElement=Ky;Ce.lazy=function(t){return{$$typeof:gI,_payload:{_status:-1,_result:t},_init:SI}};Ce.memo=function(t,e){return{$$typeof:mI,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=Kd.transition;Kd.transition={};try{t()}finally{Kd.transition=e}};Ce.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ce.useCallback=function(t,e){return Tn.current.useCallback(t,e)};Ce.useContext=function(t){return Tn.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return Tn.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return Tn.current.useEffect(t,e)};Ce.useId=function(){return Tn.current.useId()};Ce.useImperativeHandle=function(t,e,n){return Tn.current.useImperativeHandle(t,e,n)};Ce.useInsertionEffect=function(t,e){return Tn.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return Tn.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return Tn.current.useMemo(t,e)};Ce.useReducer=function(t,e,n){return Tn.current.useReducer(t,e,n)};Ce.useRef=function(t){return Tn.current.useRef(t)};Ce.useState=function(t){return Tn.current.useState(t)};Ce.useSyncExternalStore=function(t,e,n){return Tn.current.useSyncExternalStore(t,e,n)};Ce.useTransition=function(){return Tn.current.useTransition()};Ce.version="18.2.0";Kw.exports=Ce;var A=Kw.exports;const be=Gw(A),za=zw({__proto__:null,default:be},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bI=A,TI=Symbol.for("react.element"),wI=Symbol.for("react.fragment"),RI=Object.prototype.hasOwnProperty,AI=bI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_I={key:!0,ref:!0,__self:!0,__source:!0};function tR(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)RI.call(e,r)&&!_I.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:TI,type:t,key:s,ref:o,props:i,_owner:AI.current}}Oh.Fragment=wI;Oh.jsx=tR;Oh.jsxs=tR;Ww.exports=Oh;var S=Ww.exports,Ng={},nR={exports:{}},Qn={},rR={exports:{}},iR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,$){var B=U.length;U.push($);e:for(;0<B;){var te=B-1>>>1,Z=U[te];if(0<i(Z,$))U[te]=$,U[B]=Z,B=te;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var $=U[0],B=U.pop();if(B!==$){U[0]=B;e:for(var te=0,Z=U.length,de=Z>>>1;te<de;){var oe=2*(te+1)-1,ge=U[oe],ye=oe+1,Oe=U[ye];if(0>i(ge,B))ye<Z&&0>i(Oe,ge)?(U[te]=Oe,U[ye]=B,te=ye):(U[te]=ge,U[oe]=B,te=oe);else if(ye<Z&&0>i(Oe,B))U[te]=Oe,U[ye]=B,te=ye;else break e}}return $}function i(U,$){var B=U.sortIndex-$.sortIndex;return B!==0?B:U.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,m=!1,h=!1,p=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(U){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=U)r(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function b(U){if(p=!1,x(U),!h)if(n(l)!==null)h=!0,W(E);else{var $=n(u);$!==null&&X(b,$.startTime-U)}}function E(U,$){h=!1,p&&(p=!1,y(_),_=-1),m=!0;var B=f;try{for(x($),d=n(l);d!==null&&(!(d.expirationTime>$)||U&&!P());){var te=d.callback;if(typeof te=="function"){d.callback=null,f=d.priorityLevel;var Z=te(d.expirationTime<=$);$=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(l)&&r(l),x($)}else r(l);d=n(l)}if(d!==null)var de=!0;else{var oe=n(u);oe!==null&&X(b,oe.startTime-$),de=!1}return de}finally{d=null,f=B,m=!1}}var T=!1,w=null,_=-1,k=5,L=-1;function P(){return!(t.unstable_now()-L<k)}function H(){if(w!==null){var U=t.unstable_now();L=U;var $=!0;try{$=w(!0,U)}finally{$?F():(T=!1,w=null)}}else T=!1}var F;if(typeof g=="function")F=function(){g(H)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,K=Y.port2;Y.port1.onmessage=H,F=function(){K.postMessage(null)}}else F=function(){v(H,0)};function W(U){w=U,T||(T=!0,F())}function X(U,$){_=v(function(){U(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){h||m||(h=!0,W(E))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var B=f;f=$;try{return U()}finally{f=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var B=f;f=U;try{return $()}finally{f=B}},t.unstable_scheduleCallback=function(U,$,B){var te=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?te+B:te):B=te,U){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=B+Z,U={id:c++,callback:$,priorityLevel:U,startTime:B,expirationTime:Z,sortIndex:-1},B>te?(U.sortIndex=B,e(u,U),n(l)===null&&U===n(u)&&(p?(y(_),_=-1):p=!0,X(b,B-te))):(U.sortIndex=Z,e(l,U),h||m||(h=!0,W(E))),U},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(U){var $=f;return function(){var B=f;f=$;try{return U.apply(this,arguments)}finally{f=B}}}})(iR);rR.exports=iR;var CI=rR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sR=A,Kn=CI;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oR=new Set,Au={};function Wo(t,e){Va(t,e),Va(t+"Capture",e)}function Va(t,e){for(Au[t]=e,t=0;t<e.length;t++)oR.add(e[t])}var Ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fg=Object.prototype.hasOwnProperty,LI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,QS={},JS={};function kI(t){return Fg.call(JS,t)?!0:Fg.call(QS,t)?!1:LI.test(t)?JS[t]=!0:(QS[t]=!0,!1)}function PI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function II(t,e,n,r){if(e===null||typeof e>"u"||PI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var an={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){an[t]=new wn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];an[e]=new wn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){an[t]=new wn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){an[t]=new wn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){an[t]=new wn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){an[t]=new wn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){an[t]=new wn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){an[t]=new wn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){an[t]=new wn(t,5,!1,t.toLowerCase(),null,!1,!1)});var qy=/[\-:]([a-z])/g;function Yy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qy,Yy);an[e]=new wn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qy,Yy);an[e]=new wn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qy,Yy);an[e]=new wn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){an[t]=new wn(t,1,!1,t.toLowerCase(),null,!1,!1)});an.xlinkHref=new wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){an[t]=new wn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xy(t,e,n,r){var i=an.hasOwnProperty(e)?an[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(II(e,n,i,r)&&(n=null),r||i===null?kI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var as=sR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yc=Symbol.for("react.element"),ma=Symbol.for("react.portal"),ga=Symbol.for("react.fragment"),Qy=Symbol.for("react.strict_mode"),$g=Symbol.for("react.profiler"),aR=Symbol.for("react.provider"),lR=Symbol.for("react.context"),Jy=Symbol.for("react.forward_ref"),Bg=Symbol.for("react.suspense"),Ug=Symbol.for("react.suspense_list"),Zy=Symbol.for("react.memo"),Ts=Symbol.for("react.lazy"),uR=Symbol.for("react.offscreen"),ZS=Symbol.iterator;function Al(t){return t===null||typeof t!="object"?null:(t=ZS&&t[ZS]||t["@@iterator"],typeof t=="function"?t:null)}var mt=Object.assign,sm;function Ql(t){if(sm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sm=e&&e[1]||""}return`
`+sm+t}var om=!1;function am(t,e){if(!t||om)return"";om=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{om=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ql(t):""}function DI(t){switch(t.tag){case 5:return Ql(t.type);case 16:return Ql("Lazy");case 13:return Ql("Suspense");case 19:return Ql("SuspenseList");case 0:case 2:case 15:return t=am(t.type,!1),t;case 11:return t=am(t.type.render,!1),t;case 1:return t=am(t.type,!0),t;default:return""}}function jg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ga:return"Fragment";case ma:return"Portal";case $g:return"Profiler";case Qy:return"StrictMode";case Bg:return"Suspense";case Ug:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lR:return(t.displayName||"Context")+".Consumer";case aR:return(t._context.displayName||"Context")+".Provider";case Jy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zy:return e=t.displayName||null,e!==null?e:jg(t.type)||"Memo";case Ts:e=t._payload,t=t._init;try{return jg(t(e))}catch{}}return null}function OI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jg(e);case 8:return e===Qy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function MI(t){var e=cR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xc(t){t._valueTracker||(t._valueTracker=MI(t))}function dR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Pf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hg(t,e){var n=e.checked;return mt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function eE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=zs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fR(t,e){e=e.checked,e!=null&&Xy(t,"checked",e,!1)}function zg(t,e){fR(t,e);var n=zs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vg(t,e.type,zs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function tE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vg(t,e,n){(e!=="number"||Pf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Jl=Array.isArray;function Ia(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+zs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Gg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return mt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function nE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(Jl(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:zs(n)}}function hR(t,e){var n=zs(e.value),r=zs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function rE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qc,mR=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qc=Qc||document.createElement("div"),Qc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _u(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var au={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NI=["Webkit","ms","Moz","O"];Object.keys(au).forEach(function(t){NI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),au[e]=au[t]})});function gR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||au.hasOwnProperty(t)&&au[t]?(""+e).trim():e+"px"}function yR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=gR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var FI=mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kg(t,e){if(e){if(FI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function qg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yg=null;function ev(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xg=null,Da=null,Oa=null;function iE(t){if(t=fc(t)){if(typeof Xg!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Bh(e),Xg(t.stateNode,t.type,e))}}function vR(t){Da?Oa?Oa.push(t):Oa=[t]:Da=t}function xR(){if(Da){var t=Da,e=Oa;if(Oa=Da=null,iE(t),e)for(t=0;t<e.length;t++)iE(e[t])}}function SR(t,e){return t(e)}function ER(){}var lm=!1;function bR(t,e,n){if(lm)return t(e,n);lm=!0;try{return SR(t,e,n)}finally{lm=!1,(Da!==null||Oa!==null)&&(ER(),xR())}}function Cu(t,e){var n=t.stateNode;if(n===null)return null;var r=Bh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var Qg=!1;if(Ji)try{var _l={};Object.defineProperty(_l,"passive",{get:function(){Qg=!0}}),window.addEventListener("test",_l,_l),window.removeEventListener("test",_l,_l)}catch{Qg=!1}function $I(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var lu=!1,If=null,Df=!1,Jg=null,BI={onError:function(t){lu=!0,If=t}};function UI(t,e,n,r,i,s,o,a,l){lu=!1,If=null,$I.apply(BI,arguments)}function jI(t,e,n,r,i,s,o,a,l){if(UI.apply(this,arguments),lu){if(lu){var u=If;lu=!1,If=null}else throw Error(q(198));Df||(Df=!0,Jg=u)}}function Ko(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function TR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sE(t){if(Ko(t)!==t)throw Error(q(188))}function HI(t){var e=t.alternate;if(!e){if(e=Ko(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return sE(i),t;if(s===r)return sE(i),e;s=s.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function wR(t){return t=HI(t),t!==null?RR(t):null}function RR(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=RR(t);if(e!==null)return e;t=t.sibling}return null}var AR=Kn.unstable_scheduleCallback,oE=Kn.unstable_cancelCallback,zI=Kn.unstable_shouldYield,VI=Kn.unstable_requestPaint,Rt=Kn.unstable_now,GI=Kn.unstable_getCurrentPriorityLevel,tv=Kn.unstable_ImmediatePriority,_R=Kn.unstable_UserBlockingPriority,Of=Kn.unstable_NormalPriority,WI=Kn.unstable_LowPriority,CR=Kn.unstable_IdlePriority,Mh=null,gi=null;function KI(t){if(gi&&typeof gi.onCommitFiberRoot=="function")try{gi.onCommitFiberRoot(Mh,t,void 0,(t.current.flags&128)===128)}catch{}}var Kr=Math.clz32?Math.clz32:XI,qI=Math.log,YI=Math.LN2;function XI(t){return t>>>=0,t===0?32:31-(qI(t)/YI|0)|0}var Jc=64,Zc=4194304;function Zl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Zl(a):(s&=o,s!==0&&(r=Zl(s)))}else o=n&~i,o!==0?r=Zl(o):s!==0&&(r=Zl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kr(e),i=1<<n,r|=t[n],e&=~i;return r}function QI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Kr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=QI(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Zg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function LR(){var t=Jc;return Jc<<=1,!(Jc&4194240)&&(Jc=64),t}function um(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function cc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kr(e),t[e]=n}function ZI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Kr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function nv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ve=0;function kR(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var PR,rv,IR,DR,OR,e0=!1,ed=[],Ms=null,Ns=null,Fs=null,Lu=new Map,ku=new Map,_s=[],eD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function aE(t,e){switch(t){case"focusin":case"focusout":Ms=null;break;case"dragenter":case"dragleave":Ns=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":Lu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ku.delete(e.pointerId)}}function Cl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=fc(e),e!==null&&rv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function tD(t,e,n,r,i){switch(e){case"focusin":return Ms=Cl(Ms,t,e,n,r,i),!0;case"dragenter":return Ns=Cl(Ns,t,e,n,r,i),!0;case"mouseover":return Fs=Cl(Fs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Lu.set(s,Cl(Lu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ku.set(s,Cl(ku.get(s)||null,t,e,n,r,i)),!0}return!1}function MR(t){var e=To(t.target);if(e!==null){var n=Ko(e);if(n!==null){if(e=n.tag,e===13){if(e=TR(n),e!==null){t.blockedOn=e,OR(t.priority,function(){IR(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=t0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Yg=r,n.target.dispatchEvent(r),Yg=null}else return e=fc(n),e!==null&&rv(e),t.blockedOn=n,!1;e.shift()}return!0}function lE(t,e,n){qd(t)&&n.delete(e)}function nD(){e0=!1,Ms!==null&&qd(Ms)&&(Ms=null),Ns!==null&&qd(Ns)&&(Ns=null),Fs!==null&&qd(Fs)&&(Fs=null),Lu.forEach(lE),ku.forEach(lE)}function Ll(t,e){t.blockedOn===e&&(t.blockedOn=null,e0||(e0=!0,Kn.unstable_scheduleCallback(Kn.unstable_NormalPriority,nD)))}function Pu(t){function e(i){return Ll(i,t)}if(0<ed.length){Ll(ed[0],t);for(var n=1;n<ed.length;n++){var r=ed[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ms!==null&&Ll(Ms,t),Ns!==null&&Ll(Ns,t),Fs!==null&&Ll(Fs,t),Lu.forEach(e),ku.forEach(e),n=0;n<_s.length;n++)r=_s[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_s.length&&(n=_s[0],n.blockedOn===null);)MR(n),n.blockedOn===null&&_s.shift()}var Ma=as.ReactCurrentBatchConfig,Nf=!0;function rD(t,e,n,r){var i=Ve,s=Ma.transition;Ma.transition=null;try{Ve=1,iv(t,e,n,r)}finally{Ve=i,Ma.transition=s}}function iD(t,e,n,r){var i=Ve,s=Ma.transition;Ma.transition=null;try{Ve=4,iv(t,e,n,r)}finally{Ve=i,Ma.transition=s}}function iv(t,e,n,r){if(Nf){var i=t0(t,e,n,r);if(i===null)xm(t,e,r,Ff,n),aE(t,r);else if(tD(i,t,e,n,r))r.stopPropagation();else if(aE(t,r),e&4&&-1<eD.indexOf(t)){for(;i!==null;){var s=fc(i);if(s!==null&&PR(s),s=t0(t,e,n,r),s===null&&xm(t,e,r,Ff,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else xm(t,e,r,null,n)}}var Ff=null;function t0(t,e,n,r){if(Ff=null,t=ev(r),t=To(t),t!==null)if(e=Ko(t),e===null)t=null;else if(n=e.tag,n===13){if(t=TR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ff=t,null}function NR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GI()){case tv:return 1;case _R:return 4;case Of:case WI:return 16;case CR:return 536870912;default:return 16}default:return 16}}var Ps=null,sv=null,Yd=null;function FR(){if(Yd)return Yd;var t,e=sv,n=e.length,r,i="value"in Ps?Ps.value:Ps.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Yd=i.slice(t,1<r?1-r:void 0)}function Xd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function td(){return!0}function uE(){return!1}function Jn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?td:uE,this.isPropagationStopped=uE,this}return mt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=td)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=td)},persist:function(){},isPersistent:td}),e}var pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ov=Jn(pl),dc=mt({},pl,{view:0,detail:0}),sD=Jn(dc),cm,dm,kl,Nh=mt({},dc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:av,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==kl&&(kl&&t.type==="mousemove"?(cm=t.screenX-kl.screenX,dm=t.screenY-kl.screenY):dm=cm=0,kl=t),cm)},movementY:function(t){return"movementY"in t?t.movementY:dm}}),cE=Jn(Nh),oD=mt({},Nh,{dataTransfer:0}),aD=Jn(oD),lD=mt({},dc,{relatedTarget:0}),fm=Jn(lD),uD=mt({},pl,{animationName:0,elapsedTime:0,pseudoElement:0}),cD=Jn(uD),dD=mt({},pl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fD=Jn(dD),hD=mt({},pl,{data:0}),dE=Jn(hD),pD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gD[t])?!!e[t]:!1}function av(){return yD}var vD=mt({},dc,{key:function(t){if(t.key){var e=pD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:av,charCode:function(t){return t.type==="keypress"?Xd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xD=Jn(vD),SD=mt({},Nh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fE=Jn(SD),ED=mt({},dc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:av}),bD=Jn(ED),TD=mt({},pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),wD=Jn(TD),RD=mt({},Nh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),AD=Jn(RD),_D=[9,13,27,32],lv=Ji&&"CompositionEvent"in window,uu=null;Ji&&"documentMode"in document&&(uu=document.documentMode);var CD=Ji&&"TextEvent"in window&&!uu,$R=Ji&&(!lv||uu&&8<uu&&11>=uu),hE=" ",pE=!1;function BR(t,e){switch(t){case"keyup":return _D.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ya=!1;function LD(t,e){switch(t){case"compositionend":return UR(e);case"keypress":return e.which!==32?null:(pE=!0,hE);case"textInput":return t=e.data,t===hE&&pE?null:t;default:return null}}function kD(t,e){if(ya)return t==="compositionend"||!lv&&BR(t,e)?(t=FR(),Yd=sv=Ps=null,ya=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $R&&e.locale!=="ko"?null:e.data;default:return null}}var PD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PD[t.type]:e==="textarea"}function jR(t,e,n,r){vR(r),e=$f(e,"onChange"),0<e.length&&(n=new ov("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var cu=null,Iu=null;function ID(t){JR(t,0)}function Fh(t){var e=Sa(t);if(dR(e))return t}function DD(t,e){if(t==="change")return e}var HR=!1;if(Ji){var hm;if(Ji){var pm="oninput"in document;if(!pm){var gE=document.createElement("div");gE.setAttribute("oninput","return;"),pm=typeof gE.oninput=="function"}hm=pm}else hm=!1;HR=hm&&(!document.documentMode||9<document.documentMode)}function yE(){cu&&(cu.detachEvent("onpropertychange",zR),Iu=cu=null)}function zR(t){if(t.propertyName==="value"&&Fh(Iu)){var e=[];jR(e,Iu,t,ev(t)),bR(ID,e)}}function OD(t,e,n){t==="focusin"?(yE(),cu=e,Iu=n,cu.attachEvent("onpropertychange",zR)):t==="focusout"&&yE()}function MD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fh(Iu)}function ND(t,e){if(t==="click")return Fh(e)}function FD(t,e){if(t==="input"||t==="change")return Fh(e)}function $D(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yr=typeof Object.is=="function"?Object.is:$D;function Du(t,e){if(Yr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Fg.call(e,i)||!Yr(t[i],e[i]))return!1}return!0}function vE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xE(t,e){var n=vE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vE(n)}}function VR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?VR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function GR(){for(var t=window,e=Pf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Pf(t.document)}return e}function uv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function BD(t){var e=GR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&VR(n.ownerDocument.documentElement,n)){if(r!==null&&uv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=xE(n,s);var o=xE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var UD=Ji&&"documentMode"in document&&11>=document.documentMode,va=null,n0=null,du=null,r0=!1;function SE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;r0||va==null||va!==Pf(r)||(r=va,"selectionStart"in r&&uv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),du&&Du(du,r)||(du=r,r=$f(n0,"onSelect"),0<r.length&&(e=new ov("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=va)))}function nd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xa={animationend:nd("Animation","AnimationEnd"),animationiteration:nd("Animation","AnimationIteration"),animationstart:nd("Animation","AnimationStart"),transitionend:nd("Transition","TransitionEnd")},mm={},WR={};Ji&&(WR=document.createElement("div").style,"AnimationEvent"in window||(delete xa.animationend.animation,delete xa.animationiteration.animation,delete xa.animationstart.animation),"TransitionEvent"in window||delete xa.transitionend.transition);function $h(t){if(mm[t])return mm[t];if(!xa[t])return t;var e=xa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in WR)return mm[t]=e[n];return t}var KR=$h("animationend"),qR=$h("animationiteration"),YR=$h("animationstart"),XR=$h("transitionend"),QR=new Map,EE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xs(t,e){QR.set(t,e),Wo(e,[t])}for(var gm=0;gm<EE.length;gm++){var ym=EE[gm],jD=ym.toLowerCase(),HD=ym[0].toUpperCase()+ym.slice(1);Xs(jD,"on"+HD)}Xs(KR,"onAnimationEnd");Xs(qR,"onAnimationIteration");Xs(YR,"onAnimationStart");Xs("dblclick","onDoubleClick");Xs("focusin","onFocus");Xs("focusout","onBlur");Xs(XR,"onTransitionEnd");Va("onMouseEnter",["mouseout","mouseover"]);Va("onMouseLeave",["mouseout","mouseover"]);Va("onPointerEnter",["pointerout","pointerover"]);Va("onPointerLeave",["pointerout","pointerover"]);Wo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zD=new Set("cancel close invalid load scroll toggle".split(" ").concat(eu));function bE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jI(r,e,void 0,t),t.currentTarget=null}function JR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;bE(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;bE(i,a,u),s=l}}}if(Df)throw t=Jg,Df=!1,Jg=null,t}function rt(t,e){var n=e[l0];n===void 0&&(n=e[l0]=new Set);var r=t+"__bubble";n.has(r)||(ZR(e,t,2,!1),n.add(r))}function vm(t,e,n){var r=0;e&&(r|=4),ZR(n,t,r,e)}var rd="_reactListening"+Math.random().toString(36).slice(2);function Ou(t){if(!t[rd]){t[rd]=!0,oR.forEach(function(n){n!=="selectionchange"&&(zD.has(n)||vm(n,!1,t),vm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rd]||(e[rd]=!0,vm("selectionchange",!1,e))}}function ZR(t,e,n,r){switch(NR(e)){case 1:var i=rD;break;case 4:i=iD;break;default:i=iv}n=i.bind(null,e,n,t),i=void 0,!Qg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function xm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=To(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}bR(function(){var u=s,c=ev(n),d=[];e:{var f=QR.get(t);if(f!==void 0){var m=ov,h=t;switch(t){case"keypress":if(Xd(n)===0)break e;case"keydown":case"keyup":m=xD;break;case"focusin":h="focus",m=fm;break;case"focusout":h="blur",m=fm;break;case"beforeblur":case"afterblur":m=fm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=cE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=aD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=bD;break;case KR:case qR:case YR:m=cD;break;case XR:m=wD;break;case"scroll":m=sD;break;case"wheel":m=AD;break;case"copy":case"cut":case"paste":m=fD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=fE}var p=(e&4)!==0,v=!p&&t==="scroll",y=p?f!==null?f+"Capture":null:f;p=[];for(var g=u,x;g!==null;){x=g;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,y!==null&&(b=Cu(g,y),b!=null&&p.push(Mu(g,b,x)))),v)break;g=g.return}0<p.length&&(f=new m(f,h,null,n,c),d.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Yg&&(h=n.relatedTarget||n.fromElement)&&(To(h)||h[Zi]))break e;if((m||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,m?(h=n.relatedTarget||n.toElement,m=u,h=h?To(h):null,h!==null&&(v=Ko(h),h!==v||h.tag!==5&&h.tag!==6)&&(h=null)):(m=null,h=u),m!==h)){if(p=cE,b="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(p=fE,b="onPointerLeave",y="onPointerEnter",g="pointer"),v=m==null?f:Sa(m),x=h==null?f:Sa(h),f=new p(b,g+"leave",m,n,c),f.target=v,f.relatedTarget=x,b=null,To(c)===u&&(p=new p(y,g+"enter",h,n,c),p.target=x,p.relatedTarget=v,b=p),v=b,m&&h)t:{for(p=m,y=h,g=0,x=p;x;x=Qo(x))g++;for(x=0,b=y;b;b=Qo(b))x++;for(;0<g-x;)p=Qo(p),g--;for(;0<x-g;)y=Qo(y),x--;for(;g--;){if(p===y||y!==null&&p===y.alternate)break t;p=Qo(p),y=Qo(y)}p=null}else p=null;m!==null&&TE(d,f,m,p,!1),h!==null&&v!==null&&TE(d,v,h,p,!0)}}e:{if(f=u?Sa(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var E=DD;else if(mE(f))if(HR)E=FD;else{E=MD;var T=OD}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=ND);if(E&&(E=E(t,u))){jR(d,E,n,c);break e}T&&T(t,f,u),t==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&Vg(f,"number",f.value)}switch(T=u?Sa(u):window,t){case"focusin":(mE(T)||T.contentEditable==="true")&&(va=T,n0=u,du=null);break;case"focusout":du=n0=va=null;break;case"mousedown":r0=!0;break;case"contextmenu":case"mouseup":case"dragend":r0=!1,SE(d,n,c);break;case"selectionchange":if(UD)break;case"keydown":case"keyup":SE(d,n,c)}var w;if(lv)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ya?BR(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&($R&&n.locale!=="ko"&&(ya||_!=="onCompositionStart"?_==="onCompositionEnd"&&ya&&(w=FR()):(Ps=c,sv="value"in Ps?Ps.value:Ps.textContent,ya=!0)),T=$f(u,_),0<T.length&&(_=new dE(_,t,null,n,c),d.push({event:_,listeners:T}),w?_.data=w:(w=UR(n),w!==null&&(_.data=w)))),(w=CD?LD(t,n):kD(t,n))&&(u=$f(u,"onBeforeInput"),0<u.length&&(c=new dE("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=w))}JR(d,e)})}function Mu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $f(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Cu(t,n),s!=null&&r.unshift(Mu(t,s,i)),s=Cu(t,e),s!=null&&r.push(Mu(t,s,i))),t=t.return}return r}function Qo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function TE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Cu(n,s),l!=null&&o.unshift(Mu(n,l,a))):i||(l=Cu(n,s),l!=null&&o.push(Mu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var VD=/\r\n?/g,GD=/\u0000|\uFFFD/g;function wE(t){return(typeof t=="string"?t:""+t).replace(VD,`
`).replace(GD,"")}function id(t,e,n){if(e=wE(e),wE(t)!==e&&n)throw Error(q(425))}function Bf(){}var i0=null,s0=null;function o0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var a0=typeof setTimeout=="function"?setTimeout:void 0,WD=typeof clearTimeout=="function"?clearTimeout:void 0,RE=typeof Promise=="function"?Promise:void 0,KD=typeof queueMicrotask=="function"?queueMicrotask:typeof RE<"u"?function(t){return RE.resolve(null).then(t).catch(qD)}:a0;function qD(t){setTimeout(function(){throw t})}function Sm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Pu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Pu(e)}function $s(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function AE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ml=Math.random().toString(36).slice(2),ui="__reactFiber$"+ml,Nu="__reactProps$"+ml,Zi="__reactContainer$"+ml,l0="__reactEvents$"+ml,YD="__reactListeners$"+ml,XD="__reactHandles$"+ml;function To(t){var e=t[ui];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zi]||n[ui]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=AE(t);t!==null;){if(n=t[ui])return n;t=AE(t)}return e}t=n,n=t.parentNode}return null}function fc(t){return t=t[ui]||t[Zi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Bh(t){return t[Nu]||null}var u0=[],Ea=-1;function Qs(t){return{current:t}}function st(t){0>Ea||(t.current=u0[Ea],u0[Ea]=null,Ea--)}function et(t,e){Ea++,u0[Ea]=t.current,t.current=e}var Vs={},vn=Qs(Vs),Pn=Qs(!1),$o=Vs;function Ga(t,e){var n=t.type.contextTypes;if(!n)return Vs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function In(t){return t=t.childContextTypes,t!=null}function Uf(){st(Pn),st(vn)}function _E(t,e,n){if(vn.current!==Vs)throw Error(q(168));et(vn,e),et(Pn,n)}function eA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(q(108,OI(t)||"Unknown",i));return mt({},n,r)}function jf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vs,$o=vn.current,et(vn,t),et(Pn,Pn.current),!0}function CE(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=eA(t,e,$o),r.__reactInternalMemoizedMergedChildContext=t,st(Pn),st(vn),et(vn,t)):st(Pn),et(Pn,n)}var zi=null,Uh=!1,Em=!1;function tA(t){zi===null?zi=[t]:zi.push(t)}function QD(t){Uh=!0,tA(t)}function Js(){if(!Em&&zi!==null){Em=!0;var t=0,e=Ve;try{var n=zi;for(Ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zi=null,Uh=!1}catch(i){throw zi!==null&&(zi=zi.slice(t+1)),AR(tv,Js),i}finally{Ve=e,Em=!1}}return null}var ba=[],Ta=0,Hf=null,zf=0,fr=[],hr=0,Bo=null,Ki=1,qi="";function ho(t,e){ba[Ta++]=zf,ba[Ta++]=Hf,Hf=t,zf=e}function nA(t,e,n){fr[hr++]=Ki,fr[hr++]=qi,fr[hr++]=Bo,Bo=t;var r=Ki;t=qi;var i=32-Kr(r)-1;r&=~(1<<i),n+=1;var s=32-Kr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ki=1<<32-Kr(e)+i|n<<i|r,qi=s+t}else Ki=1<<s|n<<i|r,qi=t}function cv(t){t.return!==null&&(ho(t,1),nA(t,1,0))}function dv(t){for(;t===Hf;)Hf=ba[--Ta],ba[Ta]=null,zf=ba[--Ta],ba[Ta]=null;for(;t===Bo;)Bo=fr[--hr],fr[hr]=null,qi=fr[--hr],fr[hr]=null,Ki=fr[--hr],fr[hr]=null}var Gn=null,zn=null,at=!1,Vr=null;function rA(t,e){var n=gr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function LE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gn=t,zn=$s(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gn=t,zn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Bo!==null?{id:Ki,overflow:qi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gn=t,zn=null,!0):!1;default:return!1}}function c0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function d0(t){if(at){var e=zn;if(e){var n=e;if(!LE(t,e)){if(c0(t))throw Error(q(418));e=$s(n.nextSibling);var r=Gn;e&&LE(t,e)?rA(r,n):(t.flags=t.flags&-4097|2,at=!1,Gn=t)}}else{if(c0(t))throw Error(q(418));t.flags=t.flags&-4097|2,at=!1,Gn=t}}}function kE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gn=t}function sd(t){if(t!==Gn)return!1;if(!at)return kE(t),at=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!o0(t.type,t.memoizedProps)),e&&(e=zn)){if(c0(t))throw iA(),Error(q(418));for(;e;)rA(t,e),e=$s(e.nextSibling)}if(kE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zn=$s(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zn=null}}else zn=Gn?$s(t.stateNode.nextSibling):null;return!0}function iA(){for(var t=zn;t;)t=$s(t.nextSibling)}function Wa(){zn=Gn=null,at=!1}function fv(t){Vr===null?Vr=[t]:Vr.push(t)}var JD=as.ReactCurrentBatchConfig;function Ur(t,e){if(t&&t.defaultProps){e=mt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Vf=Qs(null),Gf=null,wa=null,hv=null;function pv(){hv=wa=Gf=null}function mv(t){var e=Vf.current;st(Vf),t._currentValue=e}function f0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Na(t,e){Gf=t,hv=wa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kn=!0),t.firstContext=null)}function Er(t){var e=t._currentValue;if(hv!==t)if(t={context:t,memoizedValue:e,next:null},wa===null){if(Gf===null)throw Error(q(308));wa=t,Gf.dependencies={lanes:0,firstContext:t}}else wa=wa.next=t;return e}var wo=null;function gv(t){wo===null?wo=[t]:wo.push(t)}function sA(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,gv(e)):(n.next=i.next,i.next=n),e.interleaved=n,es(t,r)}function es(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ws=!1;function yv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,De&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,es(t,n)}return i=r.interleaved,i===null?(e.next=e,gv(r)):(e.next=i.next,i.next=e),r.interleaved=e,es(t,n)}function Qd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nv(t,n)}}function PE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wf(t,e,n,r){var i=t.updateQueue;ws=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var h=t,p=a;switch(f=e,m=n,p.tag){case 1:if(h=p.payload,typeof h=="function"){d=h.call(m,d,f);break e}d=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=p.payload,f=typeof h=="function"?h.call(m,d,f):h,f==null)break e;d=mt({},d,f);break e;case 2:ws=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=d):c=c.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);jo|=o,t.lanes=o,t.memoizedState=d}}function IE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var aA=new sR.Component().refs;function h0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:mt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jh={isMounted:function(t){return(t=t._reactInternals)?Ko(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=bn(),i=js(t),s=Xi(r,i);s.payload=e,n!=null&&(s.callback=n),e=Bs(t,s,i),e!==null&&(qr(e,t,i,r),Qd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=bn(),i=js(t),s=Xi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Bs(t,s,i),e!==null&&(qr(e,t,i,r),Qd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=bn(),r=js(t),i=Xi(n,r);i.tag=2,e!=null&&(i.callback=e),e=Bs(t,i,r),e!==null&&(qr(e,t,r,n),Qd(e,t,r))}};function DE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Du(n,r)||!Du(i,s):!0}function lA(t,e,n){var r=!1,i=Vs,s=e.contextType;return typeof s=="object"&&s!==null?s=Er(s):(i=In(e)?$o:vn.current,r=e.contextTypes,s=(r=r!=null)?Ga(t,i):Vs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function OE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&jh.enqueueReplaceState(e,e.state,null)}function p0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=aA,yv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Er(s):(s=In(e)?$o:vn.current,i.context=Ga(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(h0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&jh.enqueueReplaceState(i,i.state,null),Wf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Pl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===aA&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function od(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ME(t){var e=t._init;return e(t._payload)}function uA(t){function e(y,g){if(t){var x=y.deletions;x===null?(y.deletions=[g],y.flags|=16):x.push(g)}}function n(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=Hs(y,g),y.index=0,y.sibling=null,y}function s(y,g,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<g?(y.flags|=2,g):x):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,g,x,b){return g===null||g.tag!==6?(g=Cm(x,y.mode,b),g.return=y,g):(g=i(g,x),g.return=y,g)}function l(y,g,x,b){var E=x.type;return E===ga?c(y,g,x.props.children,b,x.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ts&&ME(E)===g.type)?(b=i(g,x.props),b.ref=Pl(y,g,x),b.return=y,b):(b=rf(x.type,x.key,x.props,null,y.mode,b),b.ref=Pl(y,g,x),b.return=y,b)}function u(y,g,x,b){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=Lm(x,y.mode,b),g.return=y,g):(g=i(g,x.children||[]),g.return=y,g)}function c(y,g,x,b,E){return g===null||g.tag!==7?(g=Oo(x,y.mode,b,E),g.return=y,g):(g=i(g,x),g.return=y,g)}function d(y,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Cm(""+g,y.mode,x),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Yc:return x=rf(g.type,g.key,g.props,null,y.mode,x),x.ref=Pl(y,null,g),x.return=y,x;case ma:return g=Lm(g,y.mode,x),g.return=y,g;case Ts:var b=g._init;return d(y,b(g._payload),x)}if(Jl(g)||Al(g))return g=Oo(g,y.mode,x,null),g.return=y,g;od(y,g)}return null}function f(y,g,x,b){var E=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return E!==null?null:a(y,g,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Yc:return x.key===E?l(y,g,x,b):null;case ma:return x.key===E?u(y,g,x,b):null;case Ts:return E=x._init,f(y,g,E(x._payload),b)}if(Jl(x)||Al(x))return E!==null?null:c(y,g,x,b,null);od(y,x)}return null}function m(y,g,x,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(x)||null,a(g,y,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Yc:return y=y.get(b.key===null?x:b.key)||null,l(g,y,b,E);case ma:return y=y.get(b.key===null?x:b.key)||null,u(g,y,b,E);case Ts:var T=b._init;return m(y,g,x,T(b._payload),E)}if(Jl(b)||Al(b))return y=y.get(x)||null,c(g,y,b,E,null);od(g,b)}return null}function h(y,g,x,b){for(var E=null,T=null,w=g,_=g=0,k=null;w!==null&&_<x.length;_++){w.index>_?(k=w,w=null):k=w.sibling;var L=f(y,w,x[_],b);if(L===null){w===null&&(w=k);break}t&&w&&L.alternate===null&&e(y,w),g=s(L,g,_),T===null?E=L:T.sibling=L,T=L,w=k}if(_===x.length)return n(y,w),at&&ho(y,_),E;if(w===null){for(;_<x.length;_++)w=d(y,x[_],b),w!==null&&(g=s(w,g,_),T===null?E=w:T.sibling=w,T=w);return at&&ho(y,_),E}for(w=r(y,w);_<x.length;_++)k=m(w,y,_,x[_],b),k!==null&&(t&&k.alternate!==null&&w.delete(k.key===null?_:k.key),g=s(k,g,_),T===null?E=k:T.sibling=k,T=k);return t&&w.forEach(function(P){return e(y,P)}),at&&ho(y,_),E}function p(y,g,x,b){var E=Al(x);if(typeof E!="function")throw Error(q(150));if(x=E.call(x),x==null)throw Error(q(151));for(var T=E=null,w=g,_=g=0,k=null,L=x.next();w!==null&&!L.done;_++,L=x.next()){w.index>_?(k=w,w=null):k=w.sibling;var P=f(y,w,L.value,b);if(P===null){w===null&&(w=k);break}t&&w&&P.alternate===null&&e(y,w),g=s(P,g,_),T===null?E=P:T.sibling=P,T=P,w=k}if(L.done)return n(y,w),at&&ho(y,_),E;if(w===null){for(;!L.done;_++,L=x.next())L=d(y,L.value,b),L!==null&&(g=s(L,g,_),T===null?E=L:T.sibling=L,T=L);return at&&ho(y,_),E}for(w=r(y,w);!L.done;_++,L=x.next())L=m(w,y,_,L.value,b),L!==null&&(t&&L.alternate!==null&&w.delete(L.key===null?_:L.key),g=s(L,g,_),T===null?E=L:T.sibling=L,T=L);return t&&w.forEach(function(H){return e(y,H)}),at&&ho(y,_),E}function v(y,g,x,b){if(typeof x=="object"&&x!==null&&x.type===ga&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Yc:e:{for(var E=x.key,T=g;T!==null;){if(T.key===E){if(E=x.type,E===ga){if(T.tag===7){n(y,T.sibling),g=i(T,x.props.children),g.return=y,y=g;break e}}else if(T.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ts&&ME(E)===T.type){n(y,T.sibling),g=i(T,x.props),g.ref=Pl(y,T,x),g.return=y,y=g;break e}n(y,T);break}else e(y,T);T=T.sibling}x.type===ga?(g=Oo(x.props.children,y.mode,b,x.key),g.return=y,y=g):(b=rf(x.type,x.key,x.props,null,y.mode,b),b.ref=Pl(y,g,x),b.return=y,y=b)}return o(y);case ma:e:{for(T=x.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){n(y,g.sibling),g=i(g,x.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else e(y,g);g=g.sibling}g=Lm(x,y.mode,b),g.return=y,y=g}return o(y);case Ts:return T=x._init,v(y,g,T(x._payload),b)}if(Jl(x))return h(y,g,x,b);if(Al(x))return p(y,g,x,b);od(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(n(y,g.sibling),g=i(g,x),g.return=y,y=g):(n(y,g),g=Cm(x,y.mode,b),g.return=y,y=g),o(y)):n(y,g)}return v}var Ka=uA(!0),cA=uA(!1),hc={},yi=Qs(hc),Fu=Qs(hc),$u=Qs(hc);function Ro(t){if(t===hc)throw Error(q(174));return t}function vv(t,e){switch(et($u,e),et(Fu,t),et(yi,hc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wg(e,t)}st(yi),et(yi,e)}function qa(){st(yi),st(Fu),st($u)}function dA(t){Ro($u.current);var e=Ro(yi.current),n=Wg(e,t.type);e!==n&&(et(Fu,t),et(yi,n))}function xv(t){Fu.current===t&&(st(yi),st(Fu))}var ht=Qs(0);function Kf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bm=[];function Sv(){for(var t=0;t<bm.length;t++)bm[t]._workInProgressVersionPrimary=null;bm.length=0}var Jd=as.ReactCurrentDispatcher,Tm=as.ReactCurrentBatchConfig,Uo=0,pt=null,Bt=null,Gt=null,qf=!1,fu=!1,Bu=0,ZD=0;function dn(){throw Error(q(321))}function Ev(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yr(t[n],e[n]))return!1;return!0}function bv(t,e,n,r,i,s){if(Uo=s,pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jd.current=t===null||t.memoizedState===null?rO:iO,t=n(r,i),fu){s=0;do{if(fu=!1,Bu=0,25<=s)throw Error(q(301));s+=1,Gt=Bt=null,e.updateQueue=null,Jd.current=sO,t=n(r,i)}while(fu)}if(Jd.current=Yf,e=Bt!==null&&Bt.next!==null,Uo=0,Gt=Bt=pt=null,qf=!1,e)throw Error(q(300));return t}function Tv(){var t=Bu!==0;return Bu=0,t}function ri(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?pt.memoizedState=Gt=t:Gt=Gt.next=t,Gt}function br(){if(Bt===null){var t=pt.alternate;t=t!==null?t.memoizedState:null}else t=Bt.next;var e=Gt===null?pt.memoizedState:Gt.next;if(e!==null)Gt=e,Bt=t;else{if(t===null)throw Error(q(310));Bt=t,t={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Gt===null?pt.memoizedState=Gt=t:Gt=Gt.next=t}return Gt}function Uu(t,e){return typeof e=="function"?e(t):e}function wm(t){var e=br(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=Bt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Uo&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,pt.lanes|=c,jo|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Yr(r,e.memoizedState)||(kn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,pt.lanes|=s,jo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Rm(t){var e=br(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Yr(s,e.memoizedState)||(kn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function fA(){}function hA(t,e){var n=pt,r=br(),i=e(),s=!Yr(r.memoizedState,i);if(s&&(r.memoizedState=i,kn=!0),r=r.queue,wv(gA.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Gt!==null&&Gt.memoizedState.tag&1){if(n.flags|=2048,ju(9,mA.bind(null,n,r,i,e),void 0,null),Yt===null)throw Error(q(349));Uo&30||pA(n,e,i)}return i}function pA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mA(t,e,n,r){e.value=n,e.getSnapshot=r,yA(e)&&vA(t)}function gA(t,e,n){return n(function(){yA(e)&&vA(t)})}function yA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yr(t,n)}catch{return!0}}function vA(t){var e=es(t,1);e!==null&&qr(e,t,1,-1)}function NE(t){var e=ri();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uu,lastRenderedState:t},e.queue=t,t=t.dispatch=nO.bind(null,pt,t),[e.memoizedState,t]}function ju(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function xA(){return br().memoizedState}function Zd(t,e,n,r){var i=ri();pt.flags|=t,i.memoizedState=ju(1|e,n,void 0,r===void 0?null:r)}function Hh(t,e,n,r){var i=br();r=r===void 0?null:r;var s=void 0;if(Bt!==null){var o=Bt.memoizedState;if(s=o.destroy,r!==null&&Ev(r,o.deps)){i.memoizedState=ju(e,n,s,r);return}}pt.flags|=t,i.memoizedState=ju(1|e,n,s,r)}function FE(t,e){return Zd(8390656,8,t,e)}function wv(t,e){return Hh(2048,8,t,e)}function SA(t,e){return Hh(4,2,t,e)}function EA(t,e){return Hh(4,4,t,e)}function bA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function TA(t,e,n){return n=n!=null?n.concat([t]):null,Hh(4,4,bA.bind(null,e,t),n)}function Rv(){}function wA(t,e){var n=br();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ev(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function RA(t,e){var n=br();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ev(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function AA(t,e,n){return Uo&21?(Yr(n,e)||(n=LR(),pt.lanes|=n,jo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kn=!0),t.memoizedState=n)}function eO(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var r=Tm.transition;Tm.transition={};try{t(!1),e()}finally{Ve=n,Tm.transition=r}}function _A(){return br().memoizedState}function tO(t,e,n){var r=js(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},CA(t))LA(e,n);else if(n=sA(t,e,n,r),n!==null){var i=bn();qr(n,t,r,i),kA(n,e,r)}}function nO(t,e,n){var r=js(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(CA(t))LA(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Yr(a,o)){var l=e.interleaved;l===null?(i.next=i,gv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=sA(t,e,i,r),n!==null&&(i=bn(),qr(n,t,r,i),kA(n,e,r))}}function CA(t){var e=t.alternate;return t===pt||e!==null&&e===pt}function LA(t,e){fu=qf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nv(t,n)}}var Yf={readContext:Er,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},rO={readContext:Er,useCallback:function(t,e){return ri().memoizedState=[t,e===void 0?null:e],t},useContext:Er,useEffect:FE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zd(4194308,4,bA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zd(4,2,t,e)},useMemo:function(t,e){var n=ri();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ri();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tO.bind(null,pt,t),[r.memoizedState,t]},useRef:function(t){var e=ri();return t={current:t},e.memoizedState=t},useState:NE,useDebugValue:Rv,useDeferredValue:function(t){return ri().memoizedState=t},useTransition:function(){var t=NE(!1),e=t[0];return t=eO.bind(null,t[1]),ri().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=pt,i=ri();if(at){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),Yt===null)throw Error(q(349));Uo&30||pA(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,FE(gA.bind(null,r,s,t),[t]),r.flags|=2048,ju(9,mA.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ri(),e=Yt.identifierPrefix;if(at){var n=qi,r=Ki;n=(r&~(1<<32-Kr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ZD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},iO={readContext:Er,useCallback:wA,useContext:Er,useEffect:wv,useImperativeHandle:TA,useInsertionEffect:SA,useLayoutEffect:EA,useMemo:RA,useReducer:wm,useRef:xA,useState:function(){return wm(Uu)},useDebugValue:Rv,useDeferredValue:function(t){var e=br();return AA(e,Bt.memoizedState,t)},useTransition:function(){var t=wm(Uu)[0],e=br().memoizedState;return[t,e]},useMutableSource:fA,useSyncExternalStore:hA,useId:_A,unstable_isNewReconciler:!1},sO={readContext:Er,useCallback:wA,useContext:Er,useEffect:wv,useImperativeHandle:TA,useInsertionEffect:SA,useLayoutEffect:EA,useMemo:RA,useReducer:Rm,useRef:xA,useState:function(){return Rm(Uu)},useDebugValue:Rv,useDeferredValue:function(t){var e=br();return Bt===null?e.memoizedState=t:AA(e,Bt.memoizedState,t)},useTransition:function(){var t=Rm(Uu)[0],e=br().memoizedState;return[t,e]},useMutableSource:fA,useSyncExternalStore:hA,useId:_A,unstable_isNewReconciler:!1};function Ya(t,e){try{var n="",r=e;do n+=DI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Am(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function m0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var oO=typeof WeakMap=="function"?WeakMap:Map;function PA(t,e,n){n=Xi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Qf||(Qf=!0,R0=r),m0(t,e)},n}function IA(t,e,n){n=Xi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){m0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){m0(t,e),typeof r!="function"&&(Us===null?Us=new Set([this]):Us.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function $E(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new oO;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=SO.bind(null,t,e,n),e.then(t,t))}function BE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function UE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xi(-1,1),e.tag=2,Bs(n,e,1))),n.lanes|=1),t)}var aO=as.ReactCurrentOwner,kn=!1;function En(t,e,n,r){e.child=t===null?cA(e,null,n,r):Ka(e,t.child,n,r)}function jE(t,e,n,r,i){n=n.render;var s=e.ref;return Na(e,i),r=bv(t,e,n,r,s,i),n=Tv(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ts(t,e,i)):(at&&n&&cv(e),e.flags|=1,En(t,e,r,i),e.child)}function HE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Dv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,DA(t,e,s,r,i)):(t=rf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Du,n(o,r)&&t.ref===e.ref)return ts(t,e,i)}return e.flags|=1,t=Hs(s,r),t.ref=e.ref,t.return=e,e.child=t}function DA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Du(s,r)&&t.ref===e.ref)if(kn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(kn=!0);else return e.lanes=t.lanes,ts(t,e,i)}return g0(t,e,n,r,i)}function OA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(Aa,Un),Un|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,et(Aa,Un),Un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,et(Aa,Un),Un|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,et(Aa,Un),Un|=r;return En(t,e,i,n),e.child}function MA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function g0(t,e,n,r,i){var s=In(n)?$o:vn.current;return s=Ga(e,s),Na(e,i),n=bv(t,e,n,r,s,i),r=Tv(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ts(t,e,i)):(at&&r&&cv(e),e.flags|=1,En(t,e,n,i),e.child)}function zE(t,e,n,r,i){if(In(n)){var s=!0;jf(e)}else s=!1;if(Na(e,i),e.stateNode===null)ef(t,e),lA(e,n,r),p0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Er(u):(u=In(n)?$o:vn.current,u=Ga(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&OE(e,o,r,u),ws=!1;var f=e.memoizedState;o.state=f,Wf(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Pn.current||ws?(typeof c=="function"&&(h0(e,n,c,r),l=e.memoizedState),(a=ws||DE(e,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,oA(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ur(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Er(l):(l=In(n)?$o:vn.current,l=Ga(e,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&OE(e,o,r,l),ws=!1,f=e.memoizedState,o.state=f,Wf(e,r,o,i);var h=e.memoizedState;a!==d||f!==h||Pn.current||ws?(typeof m=="function"&&(h0(e,n,m,r),h=e.memoizedState),(u=ws||DE(e,n,u,r,f,h,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,h,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,h,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=h),o.props=r,o.state=h,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return y0(t,e,n,r,s,i)}function y0(t,e,n,r,i,s){MA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&CE(e,n,!1),ts(t,e,s);r=e.stateNode,aO.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ka(e,t.child,null,s),e.child=Ka(e,null,a,s)):En(t,e,a,s),e.memoizedState=r.state,i&&CE(e,n,!0),e.child}function NA(t){var e=t.stateNode;e.pendingContext?_E(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_E(t,e.context,!1),vv(t,e.containerInfo)}function VE(t,e,n,r,i){return Wa(),fv(i),e.flags|=256,En(t,e,n,r),e.child}var v0={dehydrated:null,treeContext:null,retryLane:0};function x0(t){return{baseLanes:t,cachePool:null,transitions:null}}function FA(t,e,n){var r=e.pendingProps,i=ht.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),et(ht,i&1),t===null)return d0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Gh(o,r,0,null),t=Oo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=x0(n),e.memoizedState=v0,t):Av(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return lO(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Hs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Hs(a,s):(s=Oo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?x0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=v0,r}return s=t.child,t=s.sibling,r=Hs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Av(t,e){return e=Gh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ad(t,e,n,r){return r!==null&&fv(r),Ka(e,t.child,null,n),t=Av(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function lO(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Am(Error(q(422))),ad(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Gh({mode:"visible",children:r.children},i,0,null),s=Oo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ka(e,t.child,null,o),e.child.memoizedState=x0(o),e.memoizedState=v0,s);if(!(e.mode&1))return ad(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(q(419)),r=Am(s,r,void 0),ad(t,e,o,r)}if(a=(o&t.childLanes)!==0,kn||a){if(r=Yt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,es(t,i),qr(r,t,i,-1))}return Iv(),r=Am(Error(q(421))),ad(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=EO.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,zn=$s(i.nextSibling),Gn=e,at=!0,Vr=null,t!==null&&(fr[hr++]=Ki,fr[hr++]=qi,fr[hr++]=Bo,Ki=t.id,qi=t.overflow,Bo=e),e=Av(e,r.children),e.flags|=4096,e)}function GE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),f0(t.return,e,n)}function _m(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $A(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(En(t,e,r.children,n),r=ht.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&GE(t,n,e);else if(t.tag===19)GE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(et(ht,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Kf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),_m(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Kf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}_m(e,!0,n,null,s);break;case"together":_m(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ef(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ts(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),jo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=Hs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function uO(t,e,n){switch(e.tag){case 3:NA(e),Wa();break;case 5:dA(e);break;case 1:In(e.type)&&jf(e);break;case 4:vv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;et(Vf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(et(ht,ht.current&1),e.flags|=128,null):n&e.child.childLanes?FA(t,e,n):(et(ht,ht.current&1),t=ts(t,e,n),t!==null?t.sibling:null);et(ht,ht.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $A(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),et(ht,ht.current),r)break;return null;case 22:case 23:return e.lanes=0,OA(t,e,n)}return ts(t,e,n)}var BA,S0,UA,jA;BA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};S0=function(){};UA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ro(yi.current);var s=null;switch(n){case"input":i=Hg(t,i),r=Hg(t,r),s=[];break;case"select":i=mt({},i,{value:void 0}),r=mt({},r,{value:void 0}),s=[];break;case"textarea":i=Gg(t,i),r=Gg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Bf)}Kg(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Au.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Au.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&rt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};jA=function(t,e,n,r){n!==r&&(e.flags|=4)};function Il(t,e){if(!at)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function fn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function cO(t,e,n){var r=e.pendingProps;switch(dv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(e),null;case 1:return In(e.type)&&Uf(),fn(e),null;case 3:return r=e.stateNode,qa(),st(Pn),st(vn),Sv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(sd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vr!==null&&(C0(Vr),Vr=null))),S0(t,e),fn(e),null;case 5:xv(e);var i=Ro($u.current);if(n=e.type,t!==null&&e.stateNode!=null)UA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return fn(e),null}if(t=Ro(yi.current),sd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ui]=e,r[Nu]=s,t=(e.mode&1)!==0,n){case"dialog":rt("cancel",r),rt("close",r);break;case"iframe":case"object":case"embed":rt("load",r);break;case"video":case"audio":for(i=0;i<eu.length;i++)rt(eu[i],r);break;case"source":rt("error",r);break;case"img":case"image":case"link":rt("error",r),rt("load",r);break;case"details":rt("toggle",r);break;case"input":eE(r,s),rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},rt("invalid",r);break;case"textarea":nE(r,s),rt("invalid",r)}Kg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&id(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&id(r.textContent,a,t),i=["children",""+a]):Au.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&rt("scroll",r)}switch(n){case"input":Xc(r),tE(r,s,!0);break;case"textarea":Xc(r),rE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Bf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ui]=e,t[Nu]=r,BA(t,e,!1,!1),e.stateNode=t;e:{switch(o=qg(n,r),n){case"dialog":rt("cancel",t),rt("close",t),i=r;break;case"iframe":case"object":case"embed":rt("load",t),i=r;break;case"video":case"audio":for(i=0;i<eu.length;i++)rt(eu[i],t);i=r;break;case"source":rt("error",t),i=r;break;case"img":case"image":case"link":rt("error",t),rt("load",t),i=r;break;case"details":rt("toggle",t),i=r;break;case"input":eE(t,r),i=Hg(t,r),rt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=mt({},r,{value:void 0}),rt("invalid",t);break;case"textarea":nE(t,r),i=Gg(t,r),rt("invalid",t);break;default:i=r}Kg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?yR(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&mR(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&_u(t,l):typeof l=="number"&&_u(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Au.hasOwnProperty(s)?l!=null&&s==="onScroll"&&rt("scroll",t):l!=null&&Xy(t,s,l,o))}switch(n){case"input":Xc(t),tE(t,r,!1);break;case"textarea":Xc(t),rE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+zs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ia(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ia(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Bf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fn(e),null;case 6:if(t&&e.stateNode!=null)jA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=Ro($u.current),Ro(yi.current),sd(e)){if(r=e.stateNode,n=e.memoizedProps,r[ui]=e,(s=r.nodeValue!==n)&&(t=Gn,t!==null))switch(t.tag){case 3:id(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&id(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ui]=e,e.stateNode=r}return fn(e),null;case 13:if(st(ht),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(at&&zn!==null&&e.mode&1&&!(e.flags&128))iA(),Wa(),e.flags|=98560,s=!1;else if(s=sd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[ui]=e}else Wa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fn(e),s=!1}else Vr!==null&&(C0(Vr),Vr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ht.current&1?jt===0&&(jt=3):Iv())),e.updateQueue!==null&&(e.flags|=4),fn(e),null);case 4:return qa(),S0(t,e),t===null&&Ou(e.stateNode.containerInfo),fn(e),null;case 10:return mv(e.type._context),fn(e),null;case 17:return In(e.type)&&Uf(),fn(e),null;case 19:if(st(ht),s=e.memoizedState,s===null)return fn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Il(s,!1);else{if(jt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Kf(t),o!==null){for(e.flags|=128,Il(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return et(ht,ht.current&1|2),e.child}t=t.sibling}s.tail!==null&&Rt()>Xa&&(e.flags|=128,r=!0,Il(s,!1),e.lanes=4194304)}else{if(!r)if(t=Kf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Il(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!at)return fn(e),null}else 2*Rt()-s.renderingStartTime>Xa&&n!==1073741824&&(e.flags|=128,r=!0,Il(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Rt(),e.sibling=null,n=ht.current,et(ht,r?n&1|2:n&1),e):(fn(e),null);case 22:case 23:return Pv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Un&1073741824&&(fn(e),e.subtreeFlags&6&&(e.flags|=8192)):fn(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function dO(t,e){switch(dv(e),e.tag){case 1:return In(e.type)&&Uf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qa(),st(Pn),st(vn),Sv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xv(e),null;case 13:if(st(ht),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));Wa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return st(ht),null;case 4:return qa(),null;case 10:return mv(e.type._context),null;case 22:case 23:return Pv(),null;case 24:return null;default:return null}}var ld=!1,yn=!1,fO=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Ra(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){xt(t,e,r)}else n.current=null}function E0(t,e,n){try{n()}catch(r){xt(t,e,r)}}var WE=!1;function hO(t,e){if(i0=Nf,t=GR(),uv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(s0={focusedElem:t,selectionRange:n},Nf=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var h=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var p=h.memoizedProps,v=h.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?p:Ur(e.type,p),v);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(b){xt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return h=WE,WE=!1,h}function hu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&E0(e,n,s)}i=i.next}while(i!==r)}}function zh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function b0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function HA(t){var e=t.alternate;e!==null&&(t.alternate=null,HA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ui],delete e[Nu],delete e[l0],delete e[YD],delete e[XD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zA(t){return t.tag===5||t.tag===3||t.tag===4}function KE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function T0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Bf));else if(r!==4&&(t=t.child,t!==null))for(T0(t,e,n),t=t.sibling;t!==null;)T0(t,e,n),t=t.sibling}function w0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(w0(t,e,n),t=t.sibling;t!==null;)w0(t,e,n),t=t.sibling}var nn=null,jr=!1;function ys(t,e,n){for(n=n.child;n!==null;)VA(t,e,n),n=n.sibling}function VA(t,e,n){if(gi&&typeof gi.onCommitFiberUnmount=="function")try{gi.onCommitFiberUnmount(Mh,n)}catch{}switch(n.tag){case 5:yn||Ra(n,e);case 6:var r=nn,i=jr;nn=null,ys(t,e,n),nn=r,jr=i,nn!==null&&(jr?(t=nn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nn.removeChild(n.stateNode));break;case 18:nn!==null&&(jr?(t=nn,n=n.stateNode,t.nodeType===8?Sm(t.parentNode,n):t.nodeType===1&&Sm(t,n),Pu(t)):Sm(nn,n.stateNode));break;case 4:r=nn,i=jr,nn=n.stateNode.containerInfo,jr=!0,ys(t,e,n),nn=r,jr=i;break;case 0:case 11:case 14:case 15:if(!yn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&E0(n,e,o),i=i.next}while(i!==r)}ys(t,e,n);break;case 1:if(!yn&&(Ra(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){xt(n,e,a)}ys(t,e,n);break;case 21:ys(t,e,n);break;case 22:n.mode&1?(yn=(r=yn)||n.memoizedState!==null,ys(t,e,n),yn=r):ys(t,e,n);break;default:ys(t,e,n)}}function qE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new fO),e.forEach(function(r){var i=bO.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Dr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:nn=a.stateNode,jr=!1;break e;case 3:nn=a.stateNode.containerInfo,jr=!0;break e;case 4:nn=a.stateNode.containerInfo,jr=!0;break e}a=a.return}if(nn===null)throw Error(q(160));VA(s,o,i),nn=null,jr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){xt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GA(e,t),e=e.sibling}function GA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dr(e,t),ti(t),r&4){try{hu(3,t,t.return),zh(3,t)}catch(p){xt(t,t.return,p)}try{hu(5,t,t.return)}catch(p){xt(t,t.return,p)}}break;case 1:Dr(e,t),ti(t),r&512&&n!==null&&Ra(n,n.return);break;case 5:if(Dr(e,t),ti(t),r&512&&n!==null&&Ra(n,n.return),t.flags&32){var i=t.stateNode;try{_u(i,"")}catch(p){xt(t,t.return,p)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&fR(i,s),qg(a,o);var u=qg(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?yR(i,d):c==="dangerouslySetInnerHTML"?mR(i,d):c==="children"?_u(i,d):Xy(i,c,d,u)}switch(a){case"input":zg(i,s);break;case"textarea":hR(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ia(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ia(i,!!s.multiple,s.defaultValue,!0):Ia(i,!!s.multiple,s.multiple?[]:"",!1))}i[Nu]=s}catch(p){xt(t,t.return,p)}}break;case 6:if(Dr(e,t),ti(t),r&4){if(t.stateNode===null)throw Error(q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(p){xt(t,t.return,p)}}break;case 3:if(Dr(e,t),ti(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pu(e.containerInfo)}catch(p){xt(t,t.return,p)}break;case 4:Dr(e,t),ti(t);break;case 13:Dr(e,t),ti(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Lv=Rt())),r&4&&qE(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(yn=(u=yn)||c,Dr(e,t),yn=u):Dr(e,t),ti(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(ne=t,c=t.child;c!==null;){for(d=ne=c;ne!==null;){switch(f=ne,m=f.child,f.tag){case 0:case 11:case 14:case 15:hu(4,f,f.return);break;case 1:Ra(f,f.return);var h=f.stateNode;if(typeof h.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,h.props=e.memoizedProps,h.state=e.memoizedState,h.componentWillUnmount()}catch(p){xt(r,n,p)}}break;case 5:Ra(f,f.return);break;case 22:if(f.memoizedState!==null){XE(d);continue}}m!==null?(m.return=f,ne=m):XE(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=gR("display",o))}catch(p){xt(t,t.return,p)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(p){xt(t,t.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Dr(e,t),ti(t),r&4&&qE(t);break;case 21:break;default:Dr(e,t),ti(t)}}function ti(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zA(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_u(i,""),r.flags&=-33);var s=KE(t);w0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=KE(t);T0(t,a,o);break;default:throw Error(q(161))}}catch(l){xt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pO(t,e,n){ne=t,WA(t)}function WA(t,e,n){for(var r=(t.mode&1)!==0;ne!==null;){var i=ne,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ld;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||yn;a=ld;var u=yn;if(ld=o,(yn=l)&&!u)for(ne=i;ne!==null;)o=ne,l=o.child,o.tag===22&&o.memoizedState!==null?QE(i):l!==null?(l.return=o,ne=l):QE(i);for(;s!==null;)ne=s,WA(s),s=s.sibling;ne=i,ld=a,yn=u}YE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ne=s):YE(t)}}function YE(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yn||zh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ur(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&IE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}IE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Pu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}yn||e.flags&512&&b0(e)}catch(f){xt(e,e.return,f)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function XE(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function QE(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zh(4,e)}catch(l){xt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){xt(e,i,l)}}var s=e.return;try{b0(e)}catch(l){xt(e,s,l)}break;case 5:var o=e.return;try{b0(e)}catch(l){xt(e,o,l)}}}catch(l){xt(e,e.return,l)}if(e===t){ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ne=a;break}ne=e.return}}var mO=Math.ceil,Xf=as.ReactCurrentDispatcher,_v=as.ReactCurrentOwner,yr=as.ReactCurrentBatchConfig,De=0,Yt=null,It=null,on=0,Un=0,Aa=Qs(0),jt=0,Hu=null,jo=0,Vh=0,Cv=0,pu=null,Cn=null,Lv=0,Xa=1/0,Ui=null,Qf=!1,R0=null,Us=null,ud=!1,Is=null,Jf=0,mu=0,A0=null,tf=-1,nf=0;function bn(){return De&6?Rt():tf!==-1?tf:tf=Rt()}function js(t){return t.mode&1?De&2&&on!==0?on&-on:JD.transition!==null?(nf===0&&(nf=LR()),nf):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:NR(t.type)),t):1}function qr(t,e,n,r){if(50<mu)throw mu=0,A0=null,Error(q(185));cc(t,n,r),(!(De&2)||t!==Yt)&&(t===Yt&&(!(De&2)&&(Vh|=n),jt===4&&Cs(t,on)),Dn(t,r),n===1&&De===0&&!(e.mode&1)&&(Xa=Rt()+500,Uh&&Js()))}function Dn(t,e){var n=t.callbackNode;JI(t,e);var r=Mf(t,t===Yt?on:0);if(r===0)n!==null&&oE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&oE(n),e===1)t.tag===0?QD(JE.bind(null,t)):tA(JE.bind(null,t)),KD(function(){!(De&6)&&Js()}),n=null;else{switch(kR(r)){case 1:n=tv;break;case 4:n=_R;break;case 16:n=Of;break;case 536870912:n=CR;break;default:n=Of}n=e_(n,KA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function KA(t,e){if(tf=-1,nf=0,De&6)throw Error(q(327));var n=t.callbackNode;if(Fa()&&t.callbackNode!==n)return null;var r=Mf(t,t===Yt?on:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Zf(t,r);else{e=r;var i=De;De|=2;var s=YA();(Yt!==t||on!==e)&&(Ui=null,Xa=Rt()+500,Do(t,e));do try{vO();break}catch(a){qA(t,a)}while(!0);pv(),Xf.current=s,De=i,It!==null?e=0:(Yt=null,on=0,e=jt)}if(e!==0){if(e===2&&(i=Zg(t),i!==0&&(r=i,e=_0(t,i))),e===1)throw n=Hu,Do(t,0),Cs(t,r),Dn(t,Rt()),n;if(e===6)Cs(t,r);else{if(i=t.current.alternate,!(r&30)&&!gO(i)&&(e=Zf(t,r),e===2&&(s=Zg(t),s!==0&&(r=s,e=_0(t,s))),e===1))throw n=Hu,Do(t,0),Cs(t,r),Dn(t,Rt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:po(t,Cn,Ui);break;case 3:if(Cs(t,r),(r&130023424)===r&&(e=Lv+500-Rt(),10<e)){if(Mf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){bn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=a0(po.bind(null,t,Cn,Ui),e);break}po(t,Cn,Ui);break;case 4:if(Cs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Kr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mO(r/1960))-r,10<r){t.timeoutHandle=a0(po.bind(null,t,Cn,Ui),r);break}po(t,Cn,Ui);break;case 5:po(t,Cn,Ui);break;default:throw Error(q(329))}}}return Dn(t,Rt()),t.callbackNode===n?KA.bind(null,t):null}function _0(t,e){var n=pu;return t.current.memoizedState.isDehydrated&&(Do(t,e).flags|=256),t=Zf(t,e),t!==2&&(e=Cn,Cn=n,e!==null&&C0(e)),t}function C0(t){Cn===null?Cn=t:Cn.push.apply(Cn,t)}function gO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Yr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cs(t,e){for(e&=~Cv,e&=~Vh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kr(e),r=1<<n;t[n]=-1,e&=~r}}function JE(t){if(De&6)throw Error(q(327));Fa();var e=Mf(t,0);if(!(e&1))return Dn(t,Rt()),null;var n=Zf(t,e);if(t.tag!==0&&n===2){var r=Zg(t);r!==0&&(e=r,n=_0(t,r))}if(n===1)throw n=Hu,Do(t,0),Cs(t,e),Dn(t,Rt()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,po(t,Cn,Ui),Dn(t,Rt()),null}function kv(t,e){var n=De;De|=1;try{return t(e)}finally{De=n,De===0&&(Xa=Rt()+500,Uh&&Js())}}function Ho(t){Is!==null&&Is.tag===0&&!(De&6)&&Fa();var e=De;De|=1;var n=yr.transition,r=Ve;try{if(yr.transition=null,Ve=1,t)return t()}finally{Ve=r,yr.transition=n,De=e,!(De&6)&&Js()}}function Pv(){Un=Aa.current,st(Aa)}function Do(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,WD(n)),It!==null)for(n=It.return;n!==null;){var r=n;switch(dv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Uf();break;case 3:qa(),st(Pn),st(vn),Sv();break;case 5:xv(r);break;case 4:qa();break;case 13:st(ht);break;case 19:st(ht);break;case 10:mv(r.type._context);break;case 22:case 23:Pv()}n=n.return}if(Yt=t,It=t=Hs(t.current,null),on=Un=e,jt=0,Hu=null,Cv=Vh=jo=0,Cn=pu=null,wo!==null){for(e=0;e<wo.length;e++)if(n=wo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}wo=null}return t}function qA(t,e){do{var n=It;try{if(pv(),Jd.current=Yf,qf){for(var r=pt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}qf=!1}if(Uo=0,Gt=Bt=pt=null,fu=!1,Bu=0,_v.current=null,n===null||n.return===null){jt=1,Hu=e,It=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=on,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=BE(o);if(m!==null){m.flags&=-257,UE(m,o,a,s,e),m.mode&1&&$E(s,u,e),e=m,l=u;var h=e.updateQueue;if(h===null){var p=new Set;p.add(l),e.updateQueue=p}else h.add(l);break e}else{if(!(e&1)){$E(s,u,e),Iv();break e}l=Error(q(426))}}else if(at&&a.mode&1){var v=BE(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),UE(v,o,a,s,e),fv(Ya(l,a));break e}}s=l=Ya(l,a),jt!==4&&(jt=2),pu===null?pu=[s]:pu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=PA(s,l,e);PE(s,y);break e;case 1:a=l;var g=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Us===null||!Us.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=IA(s,a,e);PE(s,b);break e}}s=s.return}while(s!==null)}QA(n)}catch(E){e=E,It===n&&n!==null&&(It=n=n.return);continue}break}while(!0)}function YA(){var t=Xf.current;return Xf.current=Yf,t===null?Yf:t}function Iv(){(jt===0||jt===3||jt===2)&&(jt=4),Yt===null||!(jo&268435455)&&!(Vh&268435455)||Cs(Yt,on)}function Zf(t,e){var n=De;De|=2;var r=YA();(Yt!==t||on!==e)&&(Ui=null,Do(t,e));do try{yO();break}catch(i){qA(t,i)}while(!0);if(pv(),De=n,Xf.current=r,It!==null)throw Error(q(261));return Yt=null,on=0,jt}function yO(){for(;It!==null;)XA(It)}function vO(){for(;It!==null&&!zI();)XA(It)}function XA(t){var e=ZA(t.alternate,t,Un);t.memoizedProps=t.pendingProps,e===null?QA(t):It=e,_v.current=null}function QA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=dO(n,e),n!==null){n.flags&=32767,It=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jt=6,It=null;return}}else if(n=cO(n,e,Un),n!==null){It=n;return}if(e=e.sibling,e!==null){It=e;return}It=e=t}while(e!==null);jt===0&&(jt=5)}function po(t,e,n){var r=Ve,i=yr.transition;try{yr.transition=null,Ve=1,xO(t,e,n,r)}finally{yr.transition=i,Ve=r}return null}function xO(t,e,n,r){do Fa();while(Is!==null);if(De&6)throw Error(q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ZI(t,s),t===Yt&&(It=Yt=null,on=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ud||(ud=!0,e_(Of,function(){return Fa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=yr.transition,yr.transition=null;var o=Ve;Ve=1;var a=De;De|=4,_v.current=null,hO(t,n),GA(n,t),BD(s0),Nf=!!i0,s0=i0=null,t.current=n,pO(n),VI(),De=a,Ve=o,yr.transition=s}else t.current=n;if(ud&&(ud=!1,Is=t,Jf=i),s=t.pendingLanes,s===0&&(Us=null),KI(n.stateNode),Dn(t,Rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Qf)throw Qf=!1,t=R0,R0=null,t;return Jf&1&&t.tag!==0&&Fa(),s=t.pendingLanes,s&1?t===A0?mu++:(mu=0,A0=t):mu=0,Js(),null}function Fa(){if(Is!==null){var t=kR(Jf),e=yr.transition,n=Ve;try{if(yr.transition=null,Ve=16>t?16:t,Is===null)var r=!1;else{if(t=Is,Is=null,Jf=0,De&6)throw Error(q(331));var i=De;for(De|=4,ne=t.current;ne!==null;){var s=ne,o=s.child;if(ne.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ne=u;ne!==null;){var c=ne;switch(c.tag){case 0:case 11:case 15:hu(8,c,s)}var d=c.child;if(d!==null)d.return=c,ne=d;else for(;ne!==null;){c=ne;var f=c.sibling,m=c.return;if(HA(c),c===u){ne=null;break}if(f!==null){f.return=m,ne=f;break}ne=m}}}var h=s.alternate;if(h!==null){var p=h.child;if(p!==null){h.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(p!==null)}}ne=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ne=o;else e:for(;ne!==null;){if(s=ne,s.flags&2048)switch(s.tag){case 0:case 11:case 15:hu(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ne=y;break e}ne=s.return}}var g=t.current;for(ne=g;ne!==null;){o=ne;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ne=x;else e:for(o=g;ne!==null;){if(a=ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zh(9,a)}}catch(E){xt(a,a.return,E)}if(a===o){ne=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,ne=b;break e}ne=a.return}}if(De=i,Js(),gi&&typeof gi.onPostCommitFiberRoot=="function")try{gi.onPostCommitFiberRoot(Mh,t)}catch{}r=!0}return r}finally{Ve=n,yr.transition=e}}return!1}function ZE(t,e,n){e=Ya(n,e),e=PA(t,e,1),t=Bs(t,e,1),e=bn(),t!==null&&(cc(t,1,e),Dn(t,e))}function xt(t,e,n){if(t.tag===3)ZE(t,t,n);else for(;e!==null;){if(e.tag===3){ZE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Us===null||!Us.has(r))){t=Ya(n,t),t=IA(e,t,1),e=Bs(e,t,1),t=bn(),e!==null&&(cc(e,1,t),Dn(e,t));break}}e=e.return}}function SO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=bn(),t.pingedLanes|=t.suspendedLanes&n,Yt===t&&(on&n)===n&&(jt===4||jt===3&&(on&130023424)===on&&500>Rt()-Lv?Do(t,0):Cv|=n),Dn(t,e)}function JA(t,e){e===0&&(t.mode&1?(e=Zc,Zc<<=1,!(Zc&130023424)&&(Zc=4194304)):e=1);var n=bn();t=es(t,e),t!==null&&(cc(t,e,n),Dn(t,n))}function EO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),JA(t,n)}function bO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),JA(t,n)}var ZA;ZA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pn.current)kn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kn=!1,uO(t,e,n);kn=!!(t.flags&131072)}else kn=!1,at&&e.flags&1048576&&nA(e,zf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ef(t,e),t=e.pendingProps;var i=Ga(e,vn.current);Na(e,n),i=bv(null,e,r,t,i,n);var s=Tv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,In(r)?(s=!0,jf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,yv(e),i.updater=jh,e.stateNode=i,i._reactInternals=e,p0(e,r,t,n),e=y0(null,e,r,!0,s,n)):(e.tag=0,at&&s&&cv(e),En(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ef(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=wO(r),t=Ur(r,t),i){case 0:e=g0(null,e,r,t,n);break e;case 1:e=zE(null,e,r,t,n);break e;case 11:e=jE(null,e,r,t,n);break e;case 14:e=HE(null,e,r,Ur(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ur(r,i),g0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ur(r,i),zE(t,e,r,i,n);case 3:e:{if(NA(e),t===null)throw Error(q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,oA(t,e),Wf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ya(Error(q(423)),e),e=VE(t,e,r,n,i);break e}else if(r!==i){i=Ya(Error(q(424)),e),e=VE(t,e,r,n,i);break e}else for(zn=$s(e.stateNode.containerInfo.firstChild),Gn=e,at=!0,Vr=null,n=cA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wa(),r===i){e=ts(t,e,n);break e}En(t,e,r,n)}e=e.child}return e;case 5:return dA(e),t===null&&d0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,o0(r,i)?o=null:s!==null&&o0(r,s)&&(e.flags|=32),MA(t,e),En(t,e,o,n),e.child;case 6:return t===null&&d0(e),null;case 13:return FA(t,e,n);case 4:return vv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ka(e,null,r,n):En(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ur(r,i),jE(t,e,r,i,n);case 7:return En(t,e,e.pendingProps,n),e.child;case 8:return En(t,e,e.pendingProps.children,n),e.child;case 12:return En(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,et(Vf,r._currentValue),r._currentValue=o,s!==null)if(Yr(s.value,o)){if(s.children===i.children&&!Pn.current){e=ts(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Xi(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),f0(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),f0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}En(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Na(e,n),i=Er(i),r=r(i),e.flags|=1,En(t,e,r,n),e.child;case 14:return r=e.type,i=Ur(r,e.pendingProps),i=Ur(r.type,i),HE(t,e,r,i,n);case 15:return DA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ur(r,i),ef(t,e),e.tag=1,In(r)?(t=!0,jf(e)):t=!1,Na(e,n),lA(e,r,i),p0(e,r,i,n),y0(null,e,r,!0,t,n);case 19:return $A(t,e,n);case 22:return OA(t,e,n)}throw Error(q(156,e.tag))};function e_(t,e){return AR(t,e)}function TO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(t,e,n,r){return new TO(t,e,n,r)}function Dv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wO(t){if(typeof t=="function")return Dv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jy)return 11;if(t===Zy)return 14}return 2}function Hs(t,e){var n=t.alternate;return n===null?(n=gr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function rf(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Dv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ga:return Oo(n.children,i,s,e);case Qy:o=8,i|=8;break;case $g:return t=gr(12,n,e,i|2),t.elementType=$g,t.lanes=s,t;case Bg:return t=gr(13,n,e,i),t.elementType=Bg,t.lanes=s,t;case Ug:return t=gr(19,n,e,i),t.elementType=Ug,t.lanes=s,t;case uR:return Gh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case aR:o=10;break e;case lR:o=9;break e;case Jy:o=11;break e;case Zy:o=14;break e;case Ts:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=gr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Oo(t,e,n,r){return t=gr(7,t,r,e),t.lanes=n,t}function Gh(t,e,n,r){return t=gr(22,t,r,e),t.elementType=uR,t.lanes=n,t.stateNode={isHidden:!1},t}function Cm(t,e,n){return t=gr(6,t,null,e),t.lanes=n,t}function Lm(t,e,n){return e=gr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function RO(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=um(0),this.expirationTimes=um(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=um(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ov(t,e,n,r,i,s,o,a,l){return t=new RO(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=gr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yv(s),t}function AO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ma,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function t_(t){if(!t)return Vs;t=t._reactInternals;e:{if(Ko(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(In(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(In(n))return eA(t,n,e)}return e}function n_(t,e,n,r,i,s,o,a,l){return t=Ov(n,r,!0,t,i,s,o,a,l),t.context=t_(null),n=t.current,r=bn(),i=js(n),s=Xi(r,i),s.callback=e??null,Bs(n,s,i),t.current.lanes=i,cc(t,i,r),Dn(t,r),t}function Wh(t,e,n,r){var i=e.current,s=bn(),o=js(i);return n=t_(n),e.context===null?e.context=n:e.pendingContext=n,e=Xi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bs(i,e,o),t!==null&&(qr(t,i,o,s),Qd(t,i,o)),o}function eh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function eb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mv(t,e){eb(t,e),(t=t.alternate)&&eb(t,e)}function _O(){return null}var r_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nv(t){this._internalRoot=t}Kh.prototype.render=Nv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));Wh(t,e,null,null)};Kh.prototype.unmount=Nv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ho(function(){Wh(null,t,null,null)}),e[Zi]=null}};function Kh(t){this._internalRoot=t}Kh.prototype.unstable_scheduleHydration=function(t){if(t){var e=DR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_s.length&&e!==0&&e<_s[n].priority;n++);_s.splice(n,0,t),n===0&&MR(t)}};function Fv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function qh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tb(){}function CO(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=eh(o);s.call(u)}}var o=n_(e,r,t,0,null,!1,!1,"",tb);return t._reactRootContainer=o,t[Zi]=o.current,Ou(t.nodeType===8?t.parentNode:t),Ho(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=eh(l);a.call(u)}}var l=Ov(t,0,!1,null,null,!1,!1,"",tb);return t._reactRootContainer=l,t[Zi]=l.current,Ou(t.nodeType===8?t.parentNode:t),Ho(function(){Wh(e,l,n,r)}),l}function Yh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=eh(o);a.call(l)}}Wh(e,o,t,i)}else o=CO(n,e,t,i,r);return eh(o)}PR=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zl(e.pendingLanes);n!==0&&(nv(e,n|1),Dn(e,Rt()),!(De&6)&&(Xa=Rt()+500,Js()))}break;case 13:Ho(function(){var r=es(t,1);if(r!==null){var i=bn();qr(r,t,1,i)}}),Mv(t,1)}};rv=function(t){if(t.tag===13){var e=es(t,134217728);if(e!==null){var n=bn();qr(e,t,134217728,n)}Mv(t,134217728)}};IR=function(t){if(t.tag===13){var e=js(t),n=es(t,e);if(n!==null){var r=bn();qr(n,t,e,r)}Mv(t,e)}};DR=function(){return Ve};OR=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};Xg=function(t,e,n){switch(e){case"input":if(zg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Bh(r);if(!i)throw Error(q(90));dR(r),zg(r,i)}}}break;case"textarea":hR(t,n);break;case"select":e=n.value,e!=null&&Ia(t,!!n.multiple,e,!1)}};SR=kv;ER=Ho;var LO={usingClientEntryPoint:!1,Events:[fc,Sa,Bh,vR,xR,kv]},Dl={findFiberByHostInstance:To,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},kO={bundleType:Dl.bundleType,version:Dl.version,rendererPackageName:Dl.rendererPackageName,rendererConfig:Dl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:as.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wR(t),t===null?null:t.stateNode},findFiberByHostInstance:Dl.findFiberByHostInstance||_O,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cd.isDisabled&&cd.supportsFiber)try{Mh=cd.inject(kO),gi=cd}catch{}}Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LO;Qn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fv(e))throw Error(q(200));return AO(t,e,null,n)};Qn.createRoot=function(t,e){if(!Fv(t))throw Error(q(299));var n=!1,r="",i=r_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ov(t,1,!1,null,null,n,!1,r,i),t[Zi]=e.current,Ou(t.nodeType===8?t.parentNode:t),new Nv(e)};Qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=wR(e),t=t===null?null:t.stateNode,t};Qn.flushSync=function(t){return Ho(t)};Qn.hydrate=function(t,e,n){if(!qh(e))throw Error(q(200));return Yh(null,t,e,!0,n)};Qn.hydrateRoot=function(t,e,n){if(!Fv(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=r_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=n_(e,null,t,1,n??null,i,!1,s,o),t[Zi]=e.current,Ou(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Kh(e)};Qn.render=function(t,e,n){if(!qh(e))throw Error(q(200));return Yh(null,t,e,!1,n)};Qn.unmountComponentAtNode=function(t){if(!qh(t))throw Error(q(40));return t._reactRootContainer?(Ho(function(){Yh(null,null,t,!1,function(){t._reactRootContainer=null,t[Zi]=null})}),!0):!1};Qn.unstable_batchedUpdates=kv;Qn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!qh(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return Yh(t,e,n,!1,r)};Qn.version="18.2.0-next-9e3b772b8-20220608";function i_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i_)}catch(t){console.error(t)}}i_(),nR.exports=Qn;var pc=nR.exports;const tu=Gw(pc),PO=zw({__proto__:null,default:tu},[pc]);var nb=pc;Ng.createRoot=nb.createRoot,Ng.hydrateRoot=nb.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ft(){return ft=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ft.apply(this,arguments)}var Tt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Tt||(Tt={}));const rb="popstate";function IO(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return zu("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Gs(i)}return OO(e,n,null,t)}function Se(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qa(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DO(){return Math.random().toString(36).substr(2,8)}function ib(t,e){return{usr:t.state,key:t.key,idx:e}}function zu(t,e,n,r){return n===void 0&&(n=null),ft({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ls(e):e,{state:n,key:e&&e.key||r||DO()})}function Gs(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ls(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function OO(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Tt.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(ft({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=Tt.Pop;let v=c(),y=v==null?null:v-u;u=v,l&&l({action:a,location:p.location,delta:y})}function f(v,y){a=Tt.Push;let g=zu(p.location,v,y);n&&n(g,v),u=c()+1;let x=ib(g,u),b=p.createHref(g);try{o.pushState(x,"",b)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(b)}s&&l&&l({action:a,location:p.location,delta:1})}function m(v,y){a=Tt.Replace;let g=zu(p.location,v,y);n&&n(g,v),u=c();let x=ib(g,u),b=p.createHref(g);o.replaceState(x,"",b),s&&l&&l({action:a,location:p.location,delta:0})}function h(v){let y=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof v=="string"?v:Gs(v);return g=g.replace(/ $/,"%20"),Se(y,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,y)}let p={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(rb,d),l=v,()=>{i.removeEventListener(rb,d),l=null}},createHref(v){return e(i,v)},createURL:h,encodeLocation(v){let y=h(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:m,go(v){return o.go(v)}};return p}var vt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(vt||(vt={}));const MO=new Set(["lazy","caseSensitive","path","id","index","children"]);function NO(t){return t.index===!0}function L0(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,s],a=typeof i.id=="string"?i.id:o.join("-");if(Se(i.index!==!0||!i.children,"Cannot specify children on an index route"),Se(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),NO(i)){let l=ft({},i,e(i),{id:a});return r[a]=l,l}else{let l=ft({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=L0(i.children,e,o,r)),l}})}function _a(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?ls(e):e,i=Xr(r.pathname||"/",n);if(i==null)return null;let s=s_(t);$O(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=YO(i);o=KO(s[a],l)}return o}function FO(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function s_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Se(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=vi([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(Se(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),s_(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:GO(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of o_(s.path))i(s,o,l)}),e}function o_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=o_(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function $O(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:WO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const BO=/^:[\w-]+$/,UO=3,jO=2,HO=1,zO=10,VO=-2,sb=t=>t==="*";function GO(t,e){let n=t.split("/"),r=n.length;return n.some(sb)&&(r+=VO),e&&(r+=jO),n.filter(i=>!sb(i)).reduce((i,s)=>i+(BO.test(s)?UO:s===""?HO:zO),r)}function WO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function KO(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=k0({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let d=a.route;s.push({params:r,pathname:vi([i,c.pathname]),pathnameBase:JO(vi([i,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(i=vi([i,c.pathnameBase]))}return s}function k0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=qO(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:f,isOptional:m}=c;if(f==="*"){let p=a[d]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const h=a[d];return m&&!h?u[f]=void 0:u[f]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function qO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Qa(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function YO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qa(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Xr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function XO(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ls(t):t;return{pathname:n?n.startsWith("/")?n:QO(n,e):e,search:ZO(r),hash:eM(i)}}function QO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function km(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function a_(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $v(t,e){let n=a_(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Bv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ls(t):(i=ft({},t),Se(!i.pathname||!i.pathname.includes("?"),km("?","pathname","search",i)),Se(!i.pathname||!i.pathname.includes("#"),km("#","pathname","hash",i)),Se(!i.search||!i.search.includes("#"),km("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=XO(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const vi=t=>t.join("/").replace(/\/\/+/g,"/"),JO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ZO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,eM=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class P0 extends Error{}class tM{constructor(e,n){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],Se(e&&typeof e=="object"&&!Array.isArray(e),"defer() only accepts plain objects");let r;this.abortPromise=new Promise((s,o)=>r=o),this.controller=new AbortController;let i=()=>r(new P0("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",i),this.controller.signal.addEventListener("abort",i),this.data=Object.entries(e).reduce((s,o)=>{let[a,l]=o;return Object.assign(s,{[a]:this.trackPromise(a,l)})},{}),this.done&&this.unlistenAbortSignal(),this.init=n}trackPromise(e,n){if(!(n instanceof Promise))return n;this.deferredKeys.push(e),this.pendingKeysSet.add(e);let r=Promise.race([n,this.abortPromise]).then(i=>this.onSettle(r,e,void 0,i),i=>this.onSettle(r,e,i));return r.catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),r}onSettle(e,n,r,i){if(this.controller.signal.aborted&&r instanceof P0)return this.unlistenAbortSignal(),Object.defineProperty(e,"_error",{get:()=>r}),Promise.reject(r);if(this.pendingKeysSet.delete(n),this.done&&this.unlistenAbortSignal(),r===void 0&&i===void 0){let s=new Error('Deferred data for key "'+n+'" resolved/rejected with `undefined`, you must resolve/reject with a value or `null`.');return Object.defineProperty(e,"_error",{get:()=>s}),this.emit(!1,n),Promise.reject(s)}return i===void 0?(Object.defineProperty(e,"_error",{get:()=>r}),this.emit(!1,n),Promise.reject(r)):(Object.defineProperty(e,"_data",{get:()=>i}),this.emit(!1,n),i)}emit(e,n){this.subscribers.forEach(r=>r(e,n))}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((e,n)=>this.pendingKeysSet.delete(n)),this.emit(!0)}async resolveData(e){let n=!1;if(!this.done){let r=()=>this.cancel();e.addEventListener("abort",r),n=await new Promise(i=>{this.subscribe(s=>{e.removeEventListener("abort",r),(s||this.done)&&i(s)})})}return n}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return Se(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((e,n)=>{let[r,i]=n;return Object.assign(e,{[r]:rM(i)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function nM(t){return t instanceof Promise&&t._tracked===!0}function rM(t){if(!nM(t))return t;if(t._error)throw t._error;return t._data}const Zn=function(e,n){n===void 0&&(n={});let r=typeof n=="number"?{status:n}:n;return new tM(e,r)},I0=function(e,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let i=new Headers(r.headers);return i.set("Location",e),new Response(null,ft({},r,{headers:i}))};class Uv{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function l_(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const u_=["post","put","patch","delete"],iM=new Set(u_),sM=["get",...u_],oM=new Set(sM),aM=new Set([301,302,303,307,308]),lM=new Set([307,308]),Pm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},uM={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ol={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},c_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cM=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),d_="remix-router-transitions";function dM(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Se(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let I=t.detectErrorBoundary;i=M=>({hasErrorBoundary:I(M)})}else i=cM;let s={},o=L0(t.routes,i,void 0,s),a,l=t.basename||"/",u=ft({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),c=null,d=new Set,f=null,m=null,h=null,p=t.hydrationData!=null,v=_a(o,t.history.location,l),y=null;if(v==null){let I=lr(404,{pathname:t.history.location.pathname}),{matches:M,route:j}=hb(o);v=M,y={[j.id]:I}}let g,x=v.some(I=>I.route.lazy),b=v.some(I=>I.route.loader);if(x)g=!1;else if(!b)g=!0;else if(u.v7_partialHydration){let I=t.hydrationData?t.hydrationData.loaderData:null,M=t.hydrationData?t.hydrationData.errors:null,j=Q=>Q.route.loader?Q.route.loader.hydrate===!0?!1:I&&I[Q.route.id]!==void 0||M&&M[Q.route.id]!==void 0:!0;if(M){let Q=v.findIndex(ie=>M[ie.route.id]!==void 0);g=v.slice(0,Q+1).every(j)}else g=v.every(j)}else g=t.hydrationData!=null;let E,T={historyAction:t.history.action,location:t.history.location,matches:v,initialized:g,navigation:Pm,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||y,fetchers:new Map,blockers:new Map},w=Tt.Pop,_=!1,k,L=!1,P=new Map,H=null,F=!1,Y=!1,K=[],W=[],X=new Map,U=0,$=-1,B=new Map,te=new Set,Z=new Map,de=new Map,oe=new Set,ge=new Map,ye=new Map,Oe=!1;function nt(){if(c=t.history.listen(I=>{let{action:M,location:j,delta:Q}=I;if(Oe){Oe=!1;return}Qa(ye.size===0||Q!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ie=io({currentLocation:T.location,nextLocation:j,historyAction:M});if(ie&&Q!=null){Oe=!0,t.history.go(Q*-1),Ii(ie,{state:"blocked",location:j,proceed(){Ii(ie,{state:"proceeding",proceed:void 0,reset:void 0,location:j}),t.history.go(Q)},reset(){let Te=new Map(T.blockers);Te.set(ie,Ol),Je({blockers:Te})}});return}return Ct(M,j)}),n){bM(e,P);let I=()=>TM(e,P);e.addEventListener("pagehide",I),H=()=>e.removeEventListener("pagehide",I)}return T.initialized||Ct(Tt.Pop,T.location,{initialHydration:!0}),E}function Qe(){c&&c(),H&&H(),d.clear(),k&&k.abort(),T.fetchers.forEach((I,M)=>$n(M)),T.blockers.forEach((I,M)=>wl(M))}function Zr(I){return d.add(I),()=>d.delete(I)}function Je(I,M){M===void 0&&(M={}),T=ft({},T,I);let j=[],Q=[];u.v7_fetcherPersist&&T.fetchers.forEach((ie,Te)=>{ie.state==="idle"&&(oe.has(Te)?Q.push(Te):j.push(Te))}),[...d].forEach(ie=>ie(T,{deletedFetchers:Q,unstable_viewTransitionOpts:M.viewTransitionOpts,unstable_flushSync:M.flushSync===!0})),u.v7_fetcherPersist&&(j.forEach(ie=>T.fetchers.delete(ie)),Q.forEach(ie=>$n(ie)))}function kr(I,M,j){var Q,ie;let{flushSync:Te}=j===void 0?{}:j,fe=T.actionData!=null&&T.navigation.formMethod!=null&&Hr(T.navigation.formMethod)&&T.navigation.state==="loading"&&((Q=I.state)==null?void 0:Q._isRedirect)!==!0,ue;M.actionData?Object.keys(M.actionData).length>0?ue=M.actionData:ue=null:fe?ue=T.actionData:ue=null;let se=M.loaderData?fb(T.loaderData,M.loaderData,M.matches||[],M.errors):T.loaderData,Re=T.blockers;Re.size>0&&(Re=new Map(Re),Re.forEach((Ke,ut)=>Re.set(ut,Ol)));let Ue=_===!0||T.navigation.formMethod!=null&&Hr(T.navigation.formMethod)&&((ie=I.state)==null?void 0:ie._isRedirect)!==!0;a&&(o=a,a=void 0),F||w===Tt.Pop||(w===Tt.Push?t.history.push(I,I.state):w===Tt.Replace&&t.history.replace(I,I.state));let ve;if(w===Tt.Pop){let Ke=P.get(T.location.pathname);Ke&&Ke.has(I.pathname)?ve={currentLocation:T.location,nextLocation:I}:P.has(I.pathname)&&(ve={currentLocation:I,nextLocation:T.location})}else if(L){let Ke=P.get(T.location.pathname);Ke?Ke.add(I.pathname):(Ke=new Set([I.pathname]),P.set(T.location.pathname,Ke)),ve={currentLocation:T.location,nextLocation:I}}Je(ft({},M,{actionData:ue,loaderData:se,historyAction:w,location:I,initialized:!0,navigation:Pm,revalidation:"idle",restoreScrollPosition:Vc(I,M.matches||T.matches),preventScrollReset:Ue,blockers:Re}),{viewTransitionOpts:ve,flushSync:Te===!0}),w=Tt.Pop,_=!1,L=!1,F=!1,Y=!1,K=[],W=[]}async function ki(I,M){if(typeof I=="number"){t.history.go(I);return}let j=D0(T.location,T.matches,l,u.v7_prependBasename,I,u.v7_relativeSplatPath,M==null?void 0:M.fromRouteId,M==null?void 0:M.relative),{path:Q,submission:ie,error:Te}=ob(u.v7_normalizeFormMethod,!1,j,M),fe=T.location,ue=zu(T.location,Q,M&&M.state);ue=ft({},ue,t.history.encodeLocation(ue));let se=M&&M.replace!=null?M.replace:void 0,Re=Tt.Push;se===!0?Re=Tt.Replace:se===!1||ie!=null&&Hr(ie.formMethod)&&ie.formAction===T.location.pathname+T.location.search&&(Re=Tt.Replace);let Ue=M&&"preventScrollReset"in M?M.preventScrollReset===!0:void 0,ve=(M&&M.unstable_flushSync)===!0,Ke=io({currentLocation:fe,nextLocation:ue,historyAction:Re});if(Ke){Ii(Ke,{state:"blocked",location:ue,proceed(){Ii(Ke,{state:"proceeding",proceed:void 0,reset:void 0,location:ue}),ki(I,M)},reset(){let ut=new Map(T.blockers);ut.set(Ke,Ol),Je({blockers:ut})}});return}return await Ct(Re,ue,{submission:ie,pendingError:Te,preventScrollReset:Ue,replace:M&&M.replace,enableViewTransition:M&&M.unstable_viewTransition,flushSync:ve})}function fs(){if(rr(),Je({revalidation:"loading"}),T.navigation.state!=="submitting"){if(T.navigation.state==="idle"){Ct(T.historyAction,T.location,{startUninterruptedRevalidation:!0});return}Ct(w||T.historyAction,T.navigation.location,{overrideNavigation:T.navigation})}}async function Ct(I,M,j){k&&k.abort(),k=null,w=I,F=(j&&j.startUninterruptedRevalidation)===!0,rm(T.location,T.matches),_=(j&&j.preventScrollReset)===!0,L=(j&&j.enableViewTransition)===!0;let Q=a||o,ie=j&&j.overrideNavigation,Te=_a(Q,M,l),fe=(j&&j.flushSync)===!0;if(!Te){let ut=lr(404,{pathname:M.pathname}),{matches:en,route:Et}=hb(Q);so(),kr(M,{matches:en,loaderData:{},errors:{[Et.id]:ut}},{flushSync:fe});return}if(T.initialized&&!Y&&gM(T.location,M)&&!(j&&j.submission&&Hr(j.submission.formMethod))){kr(M,{matches:Te},{flushSync:fe});return}k=new AbortController;let ue=Nl(t.history,M,k.signal,j&&j.submission),se,Re;if(j&&j.pendingError)Re={[gu(Te).route.id]:j.pendingError};else if(j&&j.submission&&Hr(j.submission.formMethod)){let ut=await Pi(ue,M,j.submission,Te,{replace:j.replace,flushSync:fe});if(ut.shortCircuited)return;se=ut.pendingActionData,Re=ut.pendingActionError,ie=Im(M,j.submission),fe=!1,ue=new Request(ue.url,{signal:ue.signal})}let{shortCircuited:Ue,loaderData:ve,errors:Ke}=await hs(ue,M,Te,ie,j&&j.submission,j&&j.fetcherSubmission,j&&j.replace,j&&j.initialHydration===!0,fe,se,Re);Ue||(k=null,kr(M,ft({matches:Te},se?{actionData:se}:{},{loaderData:ve,errors:Ke})))}async function Pi(I,M,j,Q,ie){ie===void 0&&(ie={}),rr();let Te=SM(M,j);Je({navigation:Te},{flushSync:ie.flushSync===!0});let fe,ue=M0(Q,M);if(!ue.route.action&&!ue.route.lazy)fe={type:vt.error,error:lr(405,{method:I.method,pathname:M.pathname,routeId:ue.route.id})};else if(fe=await Ml("action",I,ue,Q,s,i,l,u.v7_relativeSplatPath),I.signal.aborted)return{shortCircuited:!0};if(_o(fe)){let se;return ie&&ie.replace!=null?se=ie.replace:se=fe.location===T.location.pathname+T.location.search,await cn(T,fe,{submission:j,replace:se}),{shortCircuited:!0}}if(Ca(fe)){let se=gu(Q,ue.route.id);return(ie&&ie.replace)!==!0&&(w=Tt.Push),{pendingActionData:{},pendingActionError:{[se.route.id]:fe.error}}}if(Ao(fe))throw lr(400,{type:"defer-action"});return{pendingActionData:{[ue.route.id]:fe.data}}}async function hs(I,M,j,Q,ie,Te,fe,ue,se,Re,Ue){let ve=Q||Im(M,ie),Ke=ie||Te||gb(ve),ut=a||o,[en,Et]=ab(t.history,T,j,Ke,M,u.v7_partialHydration&&ue===!0,Y,K,W,oe,Z,te,ut,l,Re,Ue);if(so(Ne=>!(j&&j.some(qe=>qe.route.id===Ne))||en&&en.some(qe=>qe.route.id===Ne)),$=++U,en.length===0&&Et.length===0){let Ne=gs();return kr(M,ft({matches:j,loaderData:{},errors:Ue||null},Re?{actionData:Re}:{},Ne?{fetchers:new Map(T.fetchers)}:{}),{flushSync:se}),{shortCircuited:!0}}if(!F&&(!u.v7_partialHydration||!ue)){Et.forEach(qe=>{let Rn=T.fetchers.get(qe.key),Kc=Fl(void 0,Rn?Rn.data:void 0);T.fetchers.set(qe.key,Kc)});let Ne=Re||T.actionData;Je(ft({navigation:ve},Ne?Object.keys(Ne).length===0?{actionData:null}:{actionData:Ne}:{},Et.length>0?{fetchers:new Map(T.fetchers)}:{}),{flushSync:se})}Et.forEach(Ne=>{X.has(Ne.key)&&ae(Ne.key),Ne.controller&&X.set(Ne.key,Ne.controller)});let Di=()=>Et.forEach(Ne=>ae(Ne.key));k&&k.signal.addEventListener("abort",Di);let{results:Xo,loaderResults:Oi,fetcherResults:ei}=await nr(T.matches,j,en,Et,I);if(I.signal.aborted)return{shortCircuited:!0};k&&k.signal.removeEventListener("abort",Di),Et.forEach(Ne=>X.delete(Ne.key));let Mi=pb(Xo);if(Mi){if(Mi.idx>=en.length){let Ne=Et[Mi.idx-en.length].key;te.add(Ne)}return await cn(T,Mi.result,{replace:fe}),{shortCircuited:!0}}let{loaderData:Rl,errors:oo}=db(T,j,en,Oi,Ue,Et,ei,ge);ge.forEach((Ne,qe)=>{Ne.subscribe(Rn=>{(Rn||Ne.done)&&ge.delete(qe)})}),u.v7_partialHydration&&ue&&T.errors&&Object.entries(T.errors).filter(Ne=>{let[qe]=Ne;return!en.some(Rn=>Rn.route.id===qe)}).forEach(Ne=>{let[qe,Rn]=Ne;oo=Object.assign(oo||{},{[qe]:Rn})});let we=gs(),kt=Ir($),Wc=we||kt||Et.length>0;return ft({loaderData:Rl,errors:oo},Wc?{fetchers:new Map(T.fetchers)}:{})}function Pr(I,M,j,Q){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");X.has(I)&&ae(I);let ie=(Q&&Q.unstable_flushSync)===!0,Te=a||o,fe=D0(T.location,T.matches,l,u.v7_prependBasename,j,u.v7_relativeSplatPath,M,Q==null?void 0:Q.relative),ue=_a(Te,fe,l);if(!ue){Ht(I,M,lr(404,{pathname:fe}),{flushSync:ie});return}let{path:se,submission:Re,error:Ue}=ob(u.v7_normalizeFormMethod,!0,fe,Q);if(Ue){Ht(I,M,Ue,{flushSync:ie});return}let ve=M0(ue,se);if(_=(Q&&Q.preventScrollReset)===!0,Re&&Hr(Re.formMethod)){ps(I,M,se,ve,ue,ie,Re);return}Z.set(I,{routeId:M,path:se}),Zt(I,M,se,ve,ue,ie,Re)}async function ps(I,M,j,Q,ie,Te,fe){if(rr(),Z.delete(I),!Q.route.action&&!Q.route.lazy){let qe=lr(405,{method:fe.formMethod,pathname:j,routeId:M});Ht(I,M,qe,{flushSync:Te});return}let ue=T.fetchers.get(I);Lt(I,EM(fe,ue),{flushSync:Te});let se=new AbortController,Re=Nl(t.history,j,se.signal,fe);X.set(I,se);let Ue=U,ve=await Ml("action",Re,Q,ie,s,i,l,u.v7_relativeSplatPath);if(Re.signal.aborted){X.get(I)===se&&X.delete(I);return}if(u.v7_fetcherPersist&&oe.has(I)){if(_o(ve)||Ca(ve)){Lt(I,bs(void 0));return}}else{if(_o(ve))if(X.delete(I),$>Ue){Lt(I,bs(void 0));return}else return te.add(I),Lt(I,Fl(fe)),cn(T,ve,{fetcherSubmission:fe});if(Ca(ve)){Ht(I,M,ve.error);return}}if(Ao(ve))throw lr(400,{type:"defer-action"});let Ke=T.navigation.location||T.location,ut=Nl(t.history,Ke,se.signal),en=a||o,Et=T.navigation.state!=="idle"?_a(en,T.navigation.location,l):T.matches;Se(Et,"Didn't find any matches after fetcher action");let Di=++U;B.set(I,Di);let Xo=Fl(fe,ve.data);T.fetchers.set(I,Xo);let[Oi,ei]=ab(t.history,T,Et,fe,Ke,!1,Y,K,W,oe,Z,te,en,l,{[Q.route.id]:ve.data},void 0);ei.filter(qe=>qe.key!==I).forEach(qe=>{let Rn=qe.key,Kc=T.fetchers.get(Rn),oI=Fl(void 0,Kc?Kc.data:void 0);T.fetchers.set(Rn,oI),X.has(Rn)&&ae(Rn),qe.controller&&X.set(Rn,qe.controller)}),Je({fetchers:new Map(T.fetchers)});let Mi=()=>ei.forEach(qe=>ae(qe.key));se.signal.addEventListener("abort",Mi);let{results:Rl,loaderResults:oo,fetcherResults:we}=await nr(T.matches,Et,Oi,ei,ut);if(se.signal.aborted)return;se.signal.removeEventListener("abort",Mi),B.delete(I),X.delete(I),ei.forEach(qe=>X.delete(qe.key));let kt=pb(Rl);if(kt){if(kt.idx>=Oi.length){let qe=ei[kt.idx-Oi.length].key;te.add(qe)}return cn(T,kt.result)}let{loaderData:Wc,errors:Ne}=db(T,T.matches,Oi,oo,void 0,ei,we,ge);if(T.fetchers.has(I)){let qe=bs(ve.data);T.fetchers.set(I,qe)}Ir(Di),T.navigation.state==="loading"&&Di>$?(Se(w,"Expected pending action"),k&&k.abort(),kr(T.navigation.location,{matches:Et,loaderData:Wc,errors:Ne,fetchers:new Map(T.fetchers)})):(Je({errors:Ne,loaderData:fb(T.loaderData,Wc,Et,Ne),fetchers:new Map(T.fetchers)}),Y=!1)}async function Zt(I,M,j,Q,ie,Te,fe){let ue=T.fetchers.get(I);Lt(I,Fl(fe,ue?ue.data:void 0),{flushSync:Te});let se=new AbortController,Re=Nl(t.history,j,se.signal);X.set(I,se);let Ue=U,ve=await Ml("loader",Re,Q,ie,s,i,l,u.v7_relativeSplatPath);if(Ao(ve)&&(ve=await p_(ve,Re.signal,!0)||ve),X.get(I)===se&&X.delete(I),!Re.signal.aborted){if(oe.has(I)){Lt(I,bs(void 0));return}if(_o(ve))if($>Ue){Lt(I,bs(void 0));return}else{te.add(I),await cn(T,ve);return}if(Ca(ve)){Ht(I,M,ve.error);return}Se(!Ao(ve),"Unhandled fetcher deferred data"),Lt(I,bs(ve.data))}}async function cn(I,M,j){let{submission:Q,fetcherSubmission:ie,replace:Te}=j===void 0?{}:j;M.revalidate&&(Y=!0);let fe=zu(I.location,M.location,{_isRedirect:!0});if(Se(fe,"Expected a location on the redirect navigation"),n){let Ke=!1;if(M.reloadDocument)Ke=!0;else if(c_.test(M.location)){const ut=t.history.createURL(M.location);Ke=ut.origin!==e.location.origin||Xr(ut.pathname,l)==null}if(Ke){Te?e.location.replace(M.location):e.location.assign(M.location);return}}k=null;let ue=Te===!0?Tt.Replace:Tt.Push,{formMethod:se,formAction:Re,formEncType:Ue}=I.navigation;!Q&&!ie&&se&&Re&&Ue&&(Q=gb(I.navigation));let ve=Q||ie;if(lM.has(M.status)&&ve&&Hr(ve.formMethod))await Ct(ue,fe,{submission:ft({},ve,{formAction:M.location}),preventScrollReset:_});else{let Ke=Im(fe,Q);await Ct(ue,fe,{overrideNavigation:Ke,fetcherSubmission:ie,preventScrollReset:_})}}async function nr(I,M,j,Q,ie){let Te=await Promise.all([...j.map(se=>Ml("loader",ie,se,M,s,i,l,u.v7_relativeSplatPath)),...Q.map(se=>se.matches&&se.match&&se.controller?Ml("loader",Nl(t.history,se.path,se.controller.signal),se.match,se.matches,s,i,l,u.v7_relativeSplatPath):{type:vt.error,error:lr(404,{pathname:se.path})})]),fe=Te.slice(0,j.length),ue=Te.slice(j.length);return await Promise.all([mb(I,j,fe,fe.map(()=>ie.signal),!1,T.loaderData),mb(I,Q.map(se=>se.match),ue,Q.map(se=>se.controller?se.controller.signal:null),!0)]),{results:Te,loaderResults:fe,fetcherResults:ue}}function rr(){Y=!0,K.push(...so()),Z.forEach((I,M)=>{X.has(M)&&(W.push(M),ae(M))})}function Lt(I,M,j){j===void 0&&(j={}),T.fetchers.set(I,M),Je({fetchers:new Map(T.fetchers)},{flushSync:(j&&j.flushSync)===!0})}function Ht(I,M,j,Q){Q===void 0&&(Q={});let ie=gu(T.matches,M);$n(I),Je({errors:{[ie.route.id]:j},fetchers:new Map(T.fetchers)},{flushSync:(Q&&Q.flushSync)===!0})}function ir(I){return u.v7_fetcherPersist&&(de.set(I,(de.get(I)||0)+1),oe.has(I)&&oe.delete(I)),T.fetchers.get(I)||uM}function $n(I){let M=T.fetchers.get(I);X.has(I)&&!(M&&M.state==="loading"&&B.has(I))&&ae(I),Z.delete(I),B.delete(I),te.delete(I),oe.delete(I),T.fetchers.delete(I)}function ms(I){if(u.v7_fetcherPersist){let M=(de.get(I)||0)-1;M<=0?(de.delete(I),oe.add(I)):de.set(I,M)}else $n(I);Je({fetchers:new Map(T.fetchers)})}function ae(I){let M=X.get(I);Se(M,"Expected fetch controller: "+I),M.abort(),X.delete(I)}function xn(I){for(let M of I){let j=ir(M),Q=bs(j.data);T.fetchers.set(M,Q)}}function gs(){let I=[],M=!1;for(let j of te){let Q=T.fetchers.get(j);Se(Q,"Expected fetcher: "+j),Q.state==="loading"&&(te.delete(j),I.push(j),M=!0)}return xn(I),M}function Ir(I){let M=[];for(let[j,Q]of B)if(Q<I){let ie=T.fetchers.get(j);Se(ie,"Expected fetcher: "+j),ie.state==="loading"&&(ae(j),B.delete(j),M.push(j))}return xn(M),M.length>0}function ro(I,M){let j=T.blockers.get(I)||Ol;return ye.get(I)!==M&&ye.set(I,M),j}function wl(I){T.blockers.delete(I),ye.delete(I)}function Ii(I,M){let j=T.blockers.get(I)||Ol;Se(j.state==="unblocked"&&M.state==="blocked"||j.state==="blocked"&&M.state==="blocked"||j.state==="blocked"&&M.state==="proceeding"||j.state==="blocked"&&M.state==="unblocked"||j.state==="proceeding"&&M.state==="unblocked","Invalid blocker state transition: "+j.state+" -> "+M.state);let Q=new Map(T.blockers);Q.set(I,M),Je({blockers:Q})}function io(I){let{currentLocation:M,nextLocation:j,historyAction:Q}=I;if(ye.size===0)return;ye.size>1&&Qa(!1,"A router only supports one blocker at a time");let ie=Array.from(ye.entries()),[Te,fe]=ie[ie.length-1],ue=T.blockers.get(Te);if(!(ue&&ue.state==="proceeding")&&fe({currentLocation:M,nextLocation:j,historyAction:Q}))return Te}function so(I){let M=[];return ge.forEach((j,Q)=>{(!I||I(Q))&&(j.cancel(),M.push(Q),ge.delete(Q))}),M}function Hc(I,M,j){if(f=I,h=M,m=j||null,!p&&T.navigation===Pm){p=!0;let Q=Vc(T.location,T.matches);Q!=null&&Je({restoreScrollPosition:Q})}return()=>{f=null,h=null,m=null}}function zc(I,M){return m&&m(I,M.map(Q=>FO(Q,T.loaderData)))||I.key}function rm(I,M){if(f&&h){let j=zc(I,M);f[j]=h()}}function Vc(I,M){if(f){let j=zc(I,M),Q=f[j];if(typeof Q=="number")return Q}return null}function Gc(I){s={},a=L0(I,i,void 0,s)}return E={get basename(){return l},get future(){return u},get state(){return T},get routes(){return o},get window(){return e},initialize:nt,subscribe:Zr,enableScrollRestoration:Hc,navigate:ki,fetch:Pr,revalidate:fs,createHref:I=>t.history.createHref(I),encodeLocation:I=>t.history.encodeLocation(I),getFetcher:ir,deleteFetcher:ms,dispose:Qe,getBlocker:ro,deleteBlocker:wl,_internalFetchControllers:X,_internalActiveDeferreds:ge,_internalSetRoutes:Gc},E}function fM(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function D0(t,e,n,r,i,s,o,a){let l,u;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){u=d;break}}else l=e,u=e[e.length-1];let c=Bv(i||".",$v(l,s),Xr(t.pathname,n)||t.pathname,a==="path");return i==null&&(c.search=t.search,c.hash=t.hash),(i==null||i===""||i===".")&&u&&u.route.index&&!jv(c.search)&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(c.pathname=c.pathname==="/"?n:vi([n,c.pathname])),Gs(c)}function ob(t,e,n,r){if(!r||!fM(r))return{path:n};if(r.formMethod&&!xM(r.formMethod))return{path:n,error:lr(405,{method:r.formMethod})};let i=()=>({path:n,error:lr(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=h_(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Hr(o))return i();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((m,h)=>{let[p,v]=h;return""+m+p+"="+v+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!Hr(o))return i();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}Se(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=O0(r.formData),u=r.formData;else if(r.body instanceof FormData)l=O0(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=cb(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=cb(l)}catch{return i()}let c={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(Hr(c.formMethod))return{path:n,submission:c};let d=ls(n);return e&&d.search&&jv(d.search)&&l.append("index",""),d.search="?"+l,{path:Gs(d),submission:c}}function hM(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function ab(t,e,n,r,i,s,o,a,l,u,c,d,f,m,h,p){let v=p?Object.values(p)[0]:h?Object.values(h)[0]:void 0,y=t.createURL(e.location),g=t.createURL(i),x=p?Object.keys(p)[0]:void 0,E=hM(n,x).filter((w,_)=>{let{route:k}=w;if(k.lazy)return!0;if(k.loader==null)return!1;if(s)return k.loader.hydrate?!0:e.loaderData[k.id]===void 0&&(!e.errors||e.errors[k.id]===void 0);if(pM(e.loaderData,e.matches[_],w)||a.some(H=>H===w.route.id))return!0;let L=e.matches[_],P=w;return lb(w,ft({currentUrl:y,currentParams:L.params,nextUrl:g,nextParams:P.params},r,{actionResult:v,defaultShouldRevalidate:o||y.pathname+y.search===g.pathname+g.search||y.search!==g.search||f_(L,P)}))}),T=[];return c.forEach((w,_)=>{if(s||!n.some(F=>F.route.id===w.routeId)||u.has(_))return;let k=_a(f,w.path,m);if(!k){T.push({key:_,routeId:w.routeId,path:w.path,matches:null,match:null,controller:null});return}let L=e.fetchers.get(_),P=M0(k,w.path),H=!1;d.has(_)?H=!1:l.includes(_)?H=!0:L&&L.state!=="idle"&&L.data===void 0?H=o:H=lb(P,ft({currentUrl:y,currentParams:e.matches[e.matches.length-1].params,nextUrl:g,nextParams:n[n.length-1].params},r,{actionResult:v,defaultShouldRevalidate:o})),H&&T.push({key:_,routeId:w.routeId,path:w.path,matches:k,match:P,controller:new AbortController})}),[E,T]}function pM(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function f_(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function lb(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function ub(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Se(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";Qa(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!MO.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,ft({},e(i),{lazy:void 0}))}async function Ml(t,e,n,r,i,s,o,a,l){l===void 0&&(l={});let u,c,d,f=p=>{let v,y=new Promise((g,x)=>v=x);return d=()=>v(),e.signal.addEventListener("abort",d),Promise.race([p({request:e,params:n.params,context:l.requestContext}),y])};try{let p=n.route[t];if(n.route.lazy)if(p){let v,y=await Promise.all([f(p).catch(g=>{v=g}),ub(n.route,s,i)]);if(v)throw v;c=y[0]}else if(await ub(n.route,s,i),p=n.route[t],p)c=await f(p);else if(t==="action"){let v=new URL(e.url),y=v.pathname+v.search;throw lr(405,{method:e.method,pathname:y,routeId:n.route.id})}else return{type:vt.data,data:void 0};else if(p)c=await f(p);else{let v=new URL(e.url),y=v.pathname+v.search;throw lr(404,{pathname:y})}Se(c!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(p){u=vt.error,c=p}finally{d&&e.signal.removeEventListener("abort",d)}if(vM(c)){let p=c.status;if(aM.has(p)){let y=c.headers.get("Location");if(Se(y,"Redirects returned/thrown from loaders/actions must have a Location header"),!c_.test(y))y=D0(new URL(e.url),r.slice(0,r.indexOf(n)+1),o,!0,y,a);else if(!l.isStaticRequest){let g=new URL(e.url),x=y.startsWith("//")?new URL(g.protocol+y):new URL(y),b=Xr(x.pathname,o)!=null;x.origin===g.origin&&b&&(y=x.pathname+x.search+x.hash)}if(l.isStaticRequest)throw c.headers.set("Location",y),c;return{type:vt.redirect,status:p,location:y,revalidate:c.headers.get("X-Remix-Revalidate")!==null,reloadDocument:c.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:u===vt.error?vt.error:vt.data,response:c};let v;try{let y=c.headers.get("Content-Type");y&&/\bapplication\/json\b/.test(y)?c.body==null?v=null:v=await c.json():v=await c.text()}catch(y){return{type:vt.error,error:y}}return u===vt.error?{type:u,error:new Uv(p,c.statusText,v),headers:c.headers}:{type:vt.data,data:v,statusCode:c.status,headers:c.headers}}if(u===vt.error)return{type:u,error:c};if(yM(c)){var m,h;return{type:vt.deferred,deferredData:c,statusCode:(m=c.init)==null?void 0:m.status,headers:((h=c.init)==null?void 0:h.headers)&&new Headers(c.init.headers)}}return{type:vt.data,data:c}}function Nl(t,e,n,r){let i=t.createURL(h_(e)).toString(),s={signal:n};if(r&&Hr(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=O0(r.formData):s.body=r.formData}return new Request(i,s)}function O0(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function cb(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function mM(t,e,n,r,i){let s={},o=null,a,l=!1,u={};return n.forEach((c,d)=>{let f=e[d].route.id;if(Se(!_o(c),"Cannot handle redirect results in processLoaderData"),Ca(c)){let m=gu(t,f),h=c.error;r&&(h=Object.values(r)[0],r=void 0),o=o||{},o[m.route.id]==null&&(o[m.route.id]=h),s[f]=void 0,l||(l=!0,a=l_(c.error)?c.error.status:500),c.headers&&(u[f]=c.headers)}else Ao(c)?(i.set(f,c.deferredData),s[f]=c.deferredData.data):s[f]=c.data,c.statusCode!=null&&c.statusCode!==200&&!l&&(a=c.statusCode),c.headers&&(u[f]=c.headers)}),r&&(o=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:u}}function db(t,e,n,r,i,s,o,a){let{loaderData:l,errors:u}=mM(e,n,r,i,a);for(let c=0;c<s.length;c++){let{key:d,match:f,controller:m}=s[c];Se(o!==void 0&&o[c]!==void 0,"Did not find corresponding fetcher result");let h=o[c];if(!(m&&m.signal.aborted))if(Ca(h)){let p=gu(t.matches,f==null?void 0:f.route.id);u&&u[p.route.id]||(u=ft({},u,{[p.route.id]:h.error})),t.fetchers.delete(d)}else if(_o(h))Se(!1,"Unhandled fetcher revalidation redirect");else if(Ao(h))Se(!1,"Unhandled fetcher deferred data");else{let p=bs(h.data);t.fetchers.set(d,p)}}return{loaderData:l,errors:u}}function fb(t,e,n,r){let i=ft({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function gu(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function hb(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function lr(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new Uv(t||500,o,new Error(a),!0)}function pb(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(_o(n))return{result:n,idx:e}}}function h_(t){let e=typeof t=="string"?ls(t):t;return Gs(ft({},e,{hash:""}))}function gM(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function Ao(t){return t.type===vt.deferred}function Ca(t){return t.type===vt.error}function _o(t){return(t&&t.type)===vt.redirect}function yM(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function vM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function xM(t){return oM.has(t.toLowerCase())}function Hr(t){return iM.has(t.toLowerCase())}async function mb(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let u=t.find(d=>d.route.id===l.route.id),c=u!=null&&!f_(u,l)&&(s&&s[l.route.id])!==void 0;if(Ao(a)&&(i||c)){let d=r[o];Se(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await p_(a,d,i).then(f=>{f&&(n[o]=f||n[o])})}}}async function p_(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:vt.data,data:t.deferredData.unwrappedData}}catch(i){return{type:vt.error,error:i}}return{type:vt.data,data:t.deferredData.data}}}function jv(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function M0(t,e){let n=typeof e=="string"?ls(e).search:e.search;if(t[t.length-1].route.index&&jv(n||""))return t[t.length-1];let r=a_(t);return r[r.length-1]}function gb(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Im(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function SM(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Fl(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function EM(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function bs(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function bM(t,e){try{let n=t.sessionStorage.getItem(d_);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function TM(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(d_,JSON.stringify(n))}catch(r){Qa(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vu(){return Vu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vu.apply(this,arguments)}const mc=A.createContext(null),Hv=A.createContext(null),N0=A.createContext(null),Ai=A.createContext(null),Xh=A.createContext(null),_i=A.createContext({outlet:null,matches:[],isDataRoute:!1}),m_=A.createContext(null);function wM(t,e){let{relative:n}=e===void 0?{}:e;gc()||Se(!1);let{basename:r,navigator:i}=A.useContext(Ai),{hash:s,pathname:o,search:a}=yc(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:vi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function gc(){return A.useContext(Xh)!=null}function Jr(){return gc()||Se(!1),A.useContext(Xh).location}function g_(t){A.useContext(Ai).static||A.useLayoutEffect(t)}function us(){let{isDataRoute:t}=A.useContext(_i);return t?$M():RM()}function RM(){gc()||Se(!1);let t=A.useContext(mc),{basename:e,future:n,navigator:r}=A.useContext(Ai),{matches:i}=A.useContext(_i),{pathname:s}=Jr(),o=JSON.stringify($v(i,n.v7_relativeSplatPath)),a=A.useRef(!1);return g_(()=>{a.current=!0}),A.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=Bv(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:vi([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,o,s,t])}const AM=A.createContext(null);function _M(t){let e=A.useContext(_i).outlet;return e&&A.createElement(AM.Provider,{value:t},e)}function zv(){let{matches:t}=A.useContext(_i),e=t[t.length-1];return e?e.params:{}}function yc(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=A.useContext(Ai),{matches:i}=A.useContext(_i),{pathname:s}=Jr(),o=JSON.stringify($v(i,r.v7_relativeSplatPath));return A.useMemo(()=>Bv(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function CM(t,e,n,r){gc()||Se(!1);let{navigator:i}=A.useContext(Ai),{matches:s}=A.useContext(_i),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Jr(),c;if(e){var d;let v=typeof e=="string"?ls(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||Se(!1),c=v}else c=u;let f=c.pathname||"/",m=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let h=_a(t,{pathname:m}),p=DM(h&&h.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:vi([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:vi([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r);return e&&p?A.createElement(Xh.Provider,{value:{location:Vu({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Tt.Pop}},p):p}function LM(){let t=x_(),e=l_(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,null)}const kM=A.createElement(LM,null);class PM extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(_i.Provider,{value:this.props.routeContext},A.createElement(m_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function IM(t){let{routeContext:e,match:n,children:r}=t,i=A.useContext(mc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(_i.Provider,{value:e},r)}function DM(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));c>=0||Se(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:m}=n,h=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||h){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,f)=>{let m,h=!1,p=null,v=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,p=d.route.errorElement||kM,l&&(u<0&&f===0?(BM("route-fallback",!1),h=!0,v=null):u===f&&(h=!0,v=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),g=()=>{let x;return m?x=p:h?x=v:d.route.Component?x=A.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=c,A.createElement(IM,{match:d,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?A.createElement(PM,{location:n.location,revalidation:n.revalidation,component:p,error:m,children:g(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):g()},null)}var y_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(y_||{}),bi=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(bi||{});function OM(t){let e=A.useContext(mc);return e||Se(!1),e}function Qh(t){let e=A.useContext(Hv);return e||Se(!1),e}function MM(t){let e=A.useContext(_i);return e||Se(!1),e}function vc(t){let e=MM(),n=e.matches[e.matches.length-1];return n.route.id||Se(!1),n.route.id}function NM(){return vc(bi.UseRouteId)}function Jh(){return Qh(bi.UseNavigation).navigation}function er(){let t=Qh(bi.UseLoaderData),e=vc(bi.UseLoaderData);if(t.errors&&t.errors[e]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+e+")");return}return t.loaderData[e]}function v_(){let t=Qh(bi.UseActionData),e=vc(bi.UseLoaderData);return t.actionData?t.actionData[e]:void 0}function x_(){var t;let e=A.useContext(m_),n=Qh(bi.UseRouteError),r=vc(bi.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function FM(){let t=A.useContext(N0);return t==null?void 0:t._data}function $M(){let{router:t}=OM(y_.UseNavigateStable),e=vc(bi.UseNavigateStable),n=A.useRef(!1);return g_(()=>{n.current=!0}),A.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Vu({fromRouteId:e},s)))},[t,e])}const yb={};function BM(t,e,n){!e&&!yb[t]&&(yb[t]=!0)}function Vv(t){return _M(t.context)}function UM(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Tt.Pop,navigator:s,static:o=!1,future:a}=t;gc()&&Se(!1);let l=e.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:l,navigator:s,static:o,future:Vu({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=ls(r));let{pathname:c="/",search:d="",hash:f="",state:m=null,key:h="default"}=r,p=A.useMemo(()=>{let v=Xr(c,l);return v==null?null:{location:{pathname:v,search:d,hash:f,state:m,key:h},navigationType:i}},[l,c,d,f,m,h,i]);return p==null?null:A.createElement(Ai.Provider,{value:u},A.createElement(Xh.Provider,{children:n,value:p}))}function Zh(t){let{children:e,errorElement:n,resolve:r}=t;return A.createElement(HM,{resolve:r,errorElement:n},A.createElement(zM,null,e))}var or=function(t){return t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error",t}(or||{});const jM=new Promise(()=>{});class HM extends A.Component{constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,n){console.error("<Await> caught the following error during render",e,n)}render(){let{children:e,errorElement:n,resolve:r}=this.props,i=null,s=or.pending;if(!(r instanceof Promise))s=or.success,i=Promise.resolve(),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_data",{get:()=>r});else if(this.state.error){s=or.error;let o=this.state.error;i=Promise.reject().catch(()=>{}),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_error",{get:()=>o})}else r._tracked?(i=r,s=i._error!==void 0?or.error:i._data!==void 0?or.success:or.pending):(s=or.pending,Object.defineProperty(r,"_tracked",{get:()=>!0}),i=r.then(o=>Object.defineProperty(r,"_data",{get:()=>o}),o=>Object.defineProperty(r,"_error",{get:()=>o})));if(s===or.error&&i._error instanceof P0)throw jM;if(s===or.error&&!n)throw i._error;if(s===or.error)return A.createElement(N0.Provider,{value:i,children:n});if(s===or.success)return A.createElement(N0.Provider,{value:i,children:e});throw i}}function zM(t){let{children:e}=t,n=FM(),r=typeof e=="function"?e(n):e;return A.createElement(A.Fragment,null,r)}function VM(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:A.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:A.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:A.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ws(){return Ws=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ws.apply(this,arguments)}function Gv(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const sf="get",Dm="application/x-www-form-urlencoded";function ep(t){return t!=null&&typeof t.tagName=="string"}function GM(t){return ep(t)&&t.tagName.toLowerCase()==="button"}function WM(t){return ep(t)&&t.tagName.toLowerCase()==="form"}function KM(t){return ep(t)&&t.tagName.toLowerCase()==="input"}function qM(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function YM(t,e){return t.button===0&&(!e||e==="_self")&&!qM(t)}let dd=null;function XM(){if(dd===null)try{new FormData(document.createElement("form"),0),dd=!1}catch{dd=!0}return dd}const QM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Om(t){return t!=null&&!QM.has(t)?null:t}function JM(t,e){let n,r,i,s,o;if(WM(t)){let a=t.getAttribute("action");r=a?Xr(a,e):null,n=t.getAttribute("method")||sf,i=Om(t.getAttribute("enctype"))||Dm,s=new FormData(t)}else if(GM(t)||KM(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Xr(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||sf,i=Om(t.getAttribute("formenctype"))||Om(a.getAttribute("enctype"))||Dm,s=new FormData(a,t),!XM()){let{name:u,type:c,value:d}=t;if(c==="image"){let f=u?u+".":"";s.append(f+"x","0"),s.append(f+"y","0")}else u&&s.append(u,d)}}else{if(ep(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=sf,r=null,i=Dm,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}const ZM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],eN=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],tN=["fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","unstable_viewTransition"],nN="6";try{window.__reactRouterVersion=nN}catch{}function rN(t,e){return dM({basename:e==null?void 0:e.basename,future:Ws({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:IO({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||iN(),routes:t,mapRouteProperties:VM,window:e==null?void 0:e.window}).initialize()}function iN(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Ws({},e,{errors:sN(e.errors)})),e}function sN(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Uv(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const S_=A.createContext({isTransitioning:!1}),oN=A.createContext(new Map),aN="startTransition",vb=za[aN],lN="flushSync",xb=PO[lN];function uN(t){vb?vb(t):t()}function $l(t){xb?xb(t):t()}class cN{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function dN(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=A.useState(n.state),[o,a]=A.useState(),[l,u]=A.useState({isTransitioning:!1}),[c,d]=A.useState(),[f,m]=A.useState(),[h,p]=A.useState(),v=A.useRef(new Map),{v7_startTransition:y}=r||{},g=A.useCallback(w=>{y?uN(w):w()},[y]),x=A.useCallback((w,_)=>{let{deletedFetchers:k,unstable_flushSync:L,unstable_viewTransitionOpts:P}=_;k.forEach(F=>v.current.delete(F)),w.fetchers.forEach((F,Y)=>{F.data!==void 0&&v.current.set(Y,F.data)});let H=n.window==null||typeof n.window.document.startViewTransition!="function";if(!P||H){L?$l(()=>s(w)):g(()=>s(w));return}if(L){$l(()=>{f&&(c&&c.resolve(),f.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let F=n.window.document.startViewTransition(()=>{$l(()=>s(w))});F.finished.finally(()=>{$l(()=>{d(void 0),m(void 0),a(void 0),u({isTransitioning:!1})})}),$l(()=>m(F));return}f?(c&&c.resolve(),f.skipTransition(),p({state:w,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(a(w),u({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[n.window,f,c,v,g]);A.useLayoutEffect(()=>n.subscribe(x),[n,x]),A.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new cN)},[l]),A.useEffect(()=>{if(c&&o&&n.window){let w=o,_=c.promise,k=n.window.document.startViewTransition(async()=>{g(()=>s(w)),await _});k.finished.finally(()=>{d(void 0),m(void 0),a(void 0),u({isTransitioning:!1})}),m(k)}},[g,o,c,n.window]),A.useEffect(()=>{c&&o&&i.location.key===o.location.key&&c.resolve()},[c,f,i.location,o]),A.useEffect(()=>{!l.isTransitioning&&h&&(a(h.state),u({isTransitioning:!0,flushSync:!1,currentLocation:h.currentLocation,nextLocation:h.nextLocation}),p(void 0))},[l.isTransitioning,h]),A.useEffect(()=>{},[]);let b=A.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:w=>n.navigate(w),push:(w,_,k)=>n.navigate(w,{state:_,preventScrollReset:k==null?void 0:k.preventScrollReset}),replace:(w,_,k)=>n.navigate(w,{replace:!0,state:_,preventScrollReset:k==null?void 0:k.preventScrollReset})}),[n]),E=n.basename||"/",T=A.useMemo(()=>({router:n,navigator:b,static:!1,basename:E}),[n,b,E]);return A.createElement(A.Fragment,null,A.createElement(mc.Provider,{value:T},A.createElement(Hv.Provider,{value:i},A.createElement(oN.Provider,{value:v.current},A.createElement(S_.Provider,{value:l},A.createElement(UM,{basename:E,location:i.location,navigationType:i.historyAction,navigator:b,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?A.createElement(fN,{routes:n.routes,future:n.future,state:i}):e))))),null)}function fN(t){let{routes:e,future:n,state:r}=t;return CM(e,void 0,r,n)}const hN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qt=A.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,unstable_viewTransition:d}=e,f=Gv(e,ZM),{basename:m}=A.useContext(Ai),h,p=!1;if(typeof u=="string"&&pN.test(u)&&(h=u,hN))try{let x=new URL(window.location.href),b=u.startsWith("//")?new URL(x.protocol+u):new URL(u),E=Xr(b.pathname,m);b.origin===x.origin&&E!=null?u=E+b.search+b.hash:p=!0}catch{}let v=wM(u,{relative:i}),y=mN(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,unstable_viewTransition:d});function g(x){r&&r(x),x.defaultPrevented||y(x)}return A.createElement("a",Ws({},f,{href:h||v,onClick:p||s?r:g,ref:n,target:l}))}),Bn=A.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,unstable_viewTransition:u,children:c}=e,d=Gv(e,eN),f=yc(l,{relative:d.relative}),m=Jr(),h=A.useContext(Hv),{navigator:p,basename:v}=A.useContext(Ai),y=h!=null&&EN(f)&&u===!0,g=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,x=m.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;i||(x=x.toLowerCase(),b=b?b.toLowerCase():null,g=g.toLowerCase()),b&&v&&(b=Xr(b,v)||b);const E=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let T=x===g||!o&&x.startsWith(g)&&x.charAt(E)==="/",w=b!=null&&(b===g||!o&&b.startsWith(g)&&b.charAt(g.length)==="/"),_={isActive:T,isPending:w,isTransitioning:y},k=T?r:void 0,L;typeof s=="function"?L=s(_):L=[s,T?"active":null,w?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(_):a;return A.createElement(qt,Ws({},d,{"aria-current":k,className:L,ref:n,style:P,to:l,unstable_viewTransition:u}),typeof c=="function"?c(_):c)}),Wv=A.forwardRef((t,e)=>{let{fetcherKey:n,navigate:r,reloadDocument:i,replace:s,state:o,method:a=sf,action:l,onSubmit:u,relative:c,preventScrollReset:d,unstable_viewTransition:f}=t,m=Gv(t,tN),h=xN(),p=SN(l,{relative:c}),v=a.toLowerCase()==="get"?"get":"post",y=g=>{if(u&&u(g),g.defaultPrevented)return;g.preventDefault();let x=g.nativeEvent.submitter,b=(x==null?void 0:x.getAttribute("formmethod"))||a;h(x||g.currentTarget,{fetcherKey:n,method:b,navigate:r,replace:s,state:o,relative:c,preventScrollReset:d,unstable_viewTransition:f})};return A.createElement("form",Ws({ref:e,method:v,action:p,onSubmit:i?u:y},m))});var th;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(th||(th={}));var Sb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Sb||(Sb={}));function E_(t){let e=A.useContext(mc);return e||Se(!1),e}function mN(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=us(),u=Jr(),c=yc(t,{relative:o});return A.useCallback(d=>{if(YM(d,n)){d.preventDefault();let f=r!==void 0?r:Gs(u)===Gs(c);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,c,r,i,n,t,s,o,a])}function gN(){if(typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}let yN=0,vN=()=>"__"+String(++yN)+"__";function xN(){let{router:t}=E_(th.UseSubmit),{basename:e}=A.useContext(Ai),n=NM();return A.useCallback(function(r,i){i===void 0&&(i={}),gN();let{action:s,method:o,encType:a,formData:l,body:u}=JM(r,e);if(i.navigate===!1){let c=i.fetcherKey||vN();t.fetch(c,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,unstable_flushSync:i.unstable_flushSync})}else t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,unstable_flushSync:i.unstable_flushSync,unstable_viewTransition:i.unstable_viewTransition})},[t,e,n])}function SN(t,e){let{relative:n}=e===void 0?{}:e,{basename:r}=A.useContext(Ai),i=A.useContext(_i);i||Se(!1);let[s]=i.matches.slice(-1),o=Ws({},yc(t||".",{relative:n})),a=Jr();if(t==null){o.search=a.search;let l=new URLSearchParams(o.search);l.has("index")&&l.get("index")===""&&(l.delete("index"),o.search=l.toString()?"?"+l.toString():"")}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:vi([r,o.pathname])),Gs(o)}function EN(t,e){e===void 0&&(e={});let n=A.useContext(S_);n==null&&Se(!1);let{basename:r}=E_(th.useViewTransitionState),i=yc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Xr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Xr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return k0(i.pathname,o)!=null||k0(i.pathname,s)!=null}const bN="_top_bar_t9r1x_1",TN="_cards_t9r1x_57",Mm={top_bar:bN,cards:TN},wN="_overlay_ppyr4_1",RN={overlay:wN},Kv=()=>S.jsx("div",{className:RN.overlay}),AN="_card_6lb9i_1",_N="_card_h_6lb9i_13",CN="_card_b_6lb9i_27",LN="_contant_6lb9i_35",kN="_lang_6lb9i_67",PN="_name_6lb9i_81",IN="_fadeInOut_6lb9i_1",ao={card:AN,card_h:_N,card_b:CN,contant:LN,lang:kN,name:PN,fadeInOut:IN},DN=()=>S.jsxs("div",{className:"card "+ao.card,children:[S.jsx("div",{className:ao.card_h}),S.jsxs("div",{className:ao.card_b,children:[S.jsxs("div",{className:ao.contant,children:[S.jsx("span",{className:ao.lang}),S.jsx("div",{children:S.jsx("span",{className:ao.lang})})]}),S.jsx("div",{className:ao.name})]})]}),St="https://flixflow.onrender.com/api/v1",ON="https://flixflow.onrender.com/",qv={padding:"2px",fontSize:"1.8em;",backgroundColor:"white;",border:"white 1px solid;",borderRadius:"50%;"},nh={variant:"success",anchorOrigin:{horizontal:"right",vertical:"bottom"}},b_={variant:"warning",anchorOrigin:{horizontal:"right",vertical:"bottom"}},rh={variant:"error",anchorOrigin:{horizontal:"right",vertical:"bottom"}},Yv={variant:"Info",anchorOrigin:{horizontal:"right",vertical:"bottom"}};function ln(t){var n,r;let e={};return e.err=t.code=="ERR_NETWORK"?"Service temporarily unavailable. Please try again later.":((r=(n=t==null?void 0:t.response)==null?void 0:n.data)==null?void 0:r.err)||t.message,e}const MN="__button_1ksv3_1",NN={_button:MN},T_=({inner:t,to:e})=>S.jsx(qt,{to:e,onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:NN._button,children:t});function w_(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=w_(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function qo(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=w_(t))&&(r&&(r+=" "),r+=e);return r}let FN={data:""},$N=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||FN,BN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,UN=/\/\*[^]*?\*\/|  +/g,Eb=/\n+/g,So=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?So(o,s):s+"{"+So(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=So(o,e?e.replace(/([^,])+/g,a=>s.replace(/(^:.*)|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=So.p?So.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Ni={},R_=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+R_(t[n]);return e}return t},jN=(t,e,n,r,i)=>{let s=R_(t),o=Ni[s]||(Ni[s]=(l=>{let u=0,c=11;for(;u<l.length;)c=101*c+l.charCodeAt(u++)>>>0;return"go"+c})(s));if(!Ni[o]){let l=s!==t?t:(u=>{let c,d,f=[{}];for(;c=BN.exec(u.replace(UN,""));)c[4]?f.shift():c[3]?(d=c[3].replace(Eb," ").trim(),f.unshift(f[0][d]=f[0][d]||{})):f[0][c[1]]=c[2].replace(Eb," ").trim();return f[0]})(t);Ni[o]=So(i?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&Ni.g?Ni.g:null;return n&&(Ni.g=Ni[o]),((l,u,c,d)=>{d?u.data=u.data.replace(d,l):u.data.indexOf(l)===-1&&(u.data=c?l+u.data:u.data+l)})(Ni[o],e,r,a),o},HN=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":So(a,""):a===!1?"":a}return r+i+(o??"")},"");function Xv(t){let e=this||{},n=t.call?t(e.p):t;return jN(n.unshift?n.raw?HN(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,$N(e.target),e.g,e.o,e.k)}Xv.bind({g:1});Xv.bind({k:1});function bb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A_(t,e,n){return e&&bb(t.prototype,e),n&&bb(t,n),t}function Ye(){return Ye=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ye.apply(this,arguments)}function __(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function xc(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Tb(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var wb=function(){return""},C_=be.createContext({enqueueSnackbar:wb,closeSnackbar:wb}),mo={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},Rb=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Qv=function(e){return""+Rb(e.vertical)+Rb(e.horizontal)},fd=function(e){return!!e||e===0},hd="unmounted",Jo="exited",Zo="entering",Bl="entered",Ab="exiting",Jv=function(t){__(e,t);function e(r){var i;i=t.call(this,r)||this;var s=r.appear,o;return i.appearStatus=null,r.in?s?(o=Jo,i.appearStatus=Zo):o=Bl:r.unmountOnExit||r.mountOnEnter?o=hd:o=Jo,i.state={status:o},i.nextCallback=null,i}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===hd?{status:Jo}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Zo&&o!==Bl&&(s=Zo):(o===Zo||o===Bl)&&(s=Ab)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s=i,o=i;return i!=null&&typeof i!="number"&&typeof i!="string"&&(o=i.exit,s=i.enter),{exit:o,enter:s}},n.updateStatus=function(i,s){i===void 0&&(i=!1),s!==null?(this.cancelNextCallback(),s===Zo?this.performEnter(i):this.performExit()):this.props.unmountOnExit&&this.state.status===Jo&&this.setState({status:hd})},n.performEnter=function(i){var s=this,o=this.props.enter,a=i,l=this.getTimeouts();if(!i&&!o){this.safeSetState({status:Bl},function(){s.props.onEntered&&s.props.onEntered(s.node,a)});return}this.props.onEnter&&this.props.onEnter(this.node,a),this.safeSetState({status:Zo},function(){s.props.onEntering&&s.props.onEntering(s.node,a),s.onTransitionEnd(l.enter,function(){s.safeSetState({status:Bl},function(){s.props.onEntered&&s.props.onEntered(s.node,a)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts();if(!s){this.safeSetState({status:Jo},function(){i.props.onExited&&i.props.onExited(i.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:Ab},function(){i.props.onExiting&&i.props.onExiting(i.node),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Jo},function(){i.props.onExited&&i.props.onExited(i.node)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(){o&&(o=!1,s.nextCallback=null,i())},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=i==null&&!this.props.addEndListener;if(!this.node||o){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===hd)return null;var s=this.props,o=s.children,a=xc(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return o(i,a)},A_(e,[{key:"node",get:function(){var i,s=(i=this.props.nodeRef)===null||i===void 0?void 0:i.current;if(!s)throw new Error("notistack - Custom snackbar is not refForwarding");return s}}]),e}(be.Component);function ea(){}Jv.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ea,onEntering:ea,onEntered:ea,onExit:ea,onExiting:ea,onExited:ea};function _b(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function F0(t,e){return A.useMemo(function(){return t==null&&e==null?null:function(n){_b(t,n),_b(e,n)}},[t,e])}function ih(t){var e=t.timeout,n=t.style,r=n===void 0?{}:n,i=t.mode;return{duration:typeof e=="object"?e[i]||0:e,easing:r.transitionTimingFunction,delay:r.transitionDelay}}var $0={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},L_=function(e){e.scrollTop=e.scrollTop},Cb=function(e){return Math.round(e)+"ms"};function La(t,e){t===void 0&&(t=["all"]);var n=e||{},r=n.duration,i=r===void 0?300:r,s=n.easing,o=s===void 0?$0.easeInOut:s,a=n.delay,l=a===void 0?0:a,u=Array.isArray(t)?t:[t];return u.map(function(c){var d=typeof i=="string"?i:Cb(i),f=typeof l=="string"?l:Cb(l);return c+" "+d+" "+o+" "+f}).join(",")}function zN(t){return t&&t.ownerDocument||document}function k_(t){var e=zN(t);return e.defaultView||window}function VN(t,e){e===void 0&&(e=166);var n;function r(){for(var i=this,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];var l=function(){t.apply(i,o)};clearTimeout(n),n=setTimeout(l,e)}return r.clear=function(){clearTimeout(n)},r}function GN(t,e){var n=e.getBoundingClientRect(),r=k_(e),i;if(e.fakeTransform)i=e.fakeTransform;else{var s=r.getComputedStyle(e);i=s.getPropertyValue("-webkit-transform")||s.getPropertyValue("transform")}var o=0,a=0;if(i&&i!=="none"&&typeof i=="string"){var l=i.split("(")[1].split(")")[0].split(",");o=parseInt(l[4],10),a=parseInt(l[5],10)}switch(t){case"left":return"translateX("+(r.innerWidth+o-n.left)+"px)";case"right":return"translateX(-"+(n.left+n.width-o)+"px)";case"up":return"translateY("+(r.innerHeight+a-n.top)+"px)";default:return"translateY(-"+(n.top+n.height-a)+"px)"}}function pd(t,e){if(e){var n=GN(t,e);n&&(e.style.webkitTransform=n,e.style.transform=n)}}var P_=A.forwardRef(function(t,e){var n=t.children,r=t.direction,i=r===void 0?"down":r,s=t.in,o=t.style,a=t.timeout,l=a===void 0?0:a,u=t.onEnter,c=t.onEntered,d=t.onExit,f=t.onExited,m=xc(t,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),h=A.useRef(null),p=F0(n.ref,h),v=F0(p,e),y=function(w,_){pd(i,w),L_(w),u&&u(w,_)},g=function(w){var _=(o==null?void 0:o.transitionTimingFunction)||$0.easeOut,k=ih({timeout:l,mode:"enter",style:Ye({},o,{transitionTimingFunction:_})});w.style.webkitTransition=La("-webkit-transform",k),w.style.transition=La("transform",k),w.style.webkitTransform="none",w.style.transform="none"},x=function(w){var _=(o==null?void 0:o.transitionTimingFunction)||$0.sharp,k=ih({timeout:l,mode:"exit",style:Ye({},o,{transitionTimingFunction:_})});w.style.webkitTransition=La("-webkit-transform",k),w.style.transition=La("transform",k),pd(i,w),d&&d(w)},b=function(w){w.style.webkitTransition="",w.style.transition="",f&&f(w)},E=A.useCallback(function(){h.current&&pd(i,h.current)},[i]);return A.useEffect(function(){if(!(s||i==="down"||i==="right")){var T=VN(function(){h.current&&pd(i,h.current)}),w=k_(h.current);return w.addEventListener("resize",T),function(){T.clear(),w.removeEventListener("resize",T)}}},[i,s]),A.useEffect(function(){s||E()},[s,E]),A.createElement(Jv,Object.assign({appear:!0,nodeRef:h,onEnter:y,onEntered:c,onEntering:g,onExit:x,onExited:b,in:s,timeout:l},m),function(T,w){return A.cloneElement(n,Ye({ref:v,style:Ye({visibility:T==="exited"&&!s?"hidden":void 0},o,{},n.props.style)},w))})});P_.displayName="Slide";var tp=function(e){return be.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},e))},WN=function(){return be.createElement(tp,null,be.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},KN=function(){return be.createElement(tp,null,be.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},qN=function(){return be.createElement(tp,null,be.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},YN=function(){return be.createElement(tp,null,be.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},XN={default:void 0,success:be.createElement(WN,null),warning:be.createElement(KN,null),error:be.createElement(qN,null),info:be.createElement(YN,null)},Mo={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:XN,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:P_,transitionDuration:{enter:225,exit:195}},QN=function(e,n){var r=function(s){return typeof s=="number"||s===null};return r(e)?e:r(n)?n:Mo.autoHideDuration},JN=function(e,n){var r=function(s,o){return o.some(function(a){return typeof s===a})};return r(e,["string","number"])?e:r(e,["object"])?Ye({},Mo.transitionDuration,{},r(n,["object"])&&n,{},e):r(n,["string","number"])?n:r(n,["object"])?Ye({},Mo.transitionDuration,{},n):Mo.transitionDuration},ZN=function(e,n){return function(r,i){return i===void 0&&(i=!1),i?Ye({},Mo[r],{},n[r],{},e[r]):r==="autoHideDuration"?QN(e.autoHideDuration,n.autoHideDuration):r==="transitionDuration"?JN(e.transitionDuration,n.transitionDuration):e[r]||n[r]||Mo[r]}};function Sc(t){return Object.entries(t).reduce(function(e,n){var r,i=n[0],s=n[1];return Ye({},e,(r={},r[i]=Xv(s),r))},{})}var Ja={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(e){return"notistack-MuiContent-"+e}},Lb=Sc({root:{height:0},entered:{height:"auto"}}),Nm="0px",Fm=175,I_=A.forwardRef(function(t,e){var n=t.children,r=t.in,i=t.onExited,s=A.useRef(null),o=A.useRef(null),a=F0(e,o),l=function(){return s.current?s.current.clientHeight:0},u=function(p){p.style.height=Nm},c=function(p){var v=l(),y=ih({timeout:Fm,mode:"enter"}),g=y.duration,x=y.easing;p.style.transitionDuration=typeof g=="string"?g:g+"ms",p.style.height=v+"px",p.style.transitionTimingFunction=x||""},d=function(p){p.style.height="auto"},f=function(p){p.style.height=l()+"px"},m=function(p){L_(p);var v=ih({timeout:Fm,mode:"exit"}),y=v.duration,g=v.easing;p.style.transitionDuration=typeof y=="string"?y:y+"ms",p.style.height=Nm,p.style.transitionTimingFunction=g||""};return A.createElement(Jv,{in:r,unmountOnExit:!0,onEnter:u,onEntered:d,onEntering:c,onExit:f,onExited:i,onExiting:m,nodeRef:o,timeout:Fm},function(h,p){return A.createElement("div",Object.assign({ref:a,className:qo(Lb.root,h==="entered"&&Lb.entered),style:Ye({pointerEvents:"all",overflow:"hidden",minHeight:Nm,transition:La("height")},h==="entered"&&{overflow:"visible"},{},h==="exited"&&!r&&{visibility:"hidden"})},p),A.createElement("div",{ref:s,className:Ja.CollapseWrapper,style:{display:"flex",width:"100%"}},n))})});I_.displayName="Collapse";var kb={right:"left",left:"right",bottom:"up",top:"down"},e2=function(e){return e.horizontal!=="center"?kb[e.horizontal]:kb[e.vertical]},t2=function(e){return"anchorOrigin"+Qv(e)},n2=function(e){e===void 0&&(e={});var n={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(e).filter(function(r){return!n[r]}).reduce(function(r,i){var s;return Ye({},r,(s={},s[i]=e[i],s))},{})},r2=function(){};function yu(t,e){return t.reduce(function(n,r){return r==null?n:function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];var l=[].concat(o);e&&l.indexOf(e)===-1&&l.push(e),n.apply(this,l),r.apply(this,l)}},r2)}var i2=typeof window<"u"?A.useLayoutEffect:A.useEffect;function Pb(t){var e=A.useRef(t);return i2(function(){e.current=t}),A.useCallback(function(){return e.current.apply(void 0,arguments)},[])}var D_=A.forwardRef(function(t,e){var n=t.children,r=t.className,i=t.autoHideDuration,s=t.disableWindowBlurListener,o=s===void 0?!1:s,a=t.onClose,l=t.id,u=t.open,c=t.SnackbarProps,d=c===void 0?{}:c,f=A.useRef(),m=Pb(function(){a&&a.apply(void 0,arguments)}),h=Pb(function(x){!a||x==null||(f.current&&clearTimeout(f.current),f.current=setTimeout(function(){m(null,"timeout",l)},x))});A.useEffect(function(){return u&&h(i),function(){f.current&&clearTimeout(f.current)}},[u,i,h]);var p=function(){f.current&&clearTimeout(f.current)},v=A.useCallback(function(){i!=null&&h(i*.5)},[i,h]),y=function(b){d.onMouseEnter&&d.onMouseEnter(b),p()},g=function(b){d.onMouseLeave&&d.onMouseLeave(b),v()};return A.useEffect(function(){if(!o&&u)return window.addEventListener("focus",v),window.addEventListener("blur",p),function(){window.removeEventListener("focus",v),window.removeEventListener("blur",p)}},[o,v,u]),A.createElement("div",Object.assign({ref:e},d,{className:qo(Ja.Snackbar,r),onMouseEnter:y,onMouseLeave:g}),n)});D_.displayName="Snackbar";var $m,s2=Sc({root:($m={display:"flex",flexWrap:"wrap",flexGrow:1},$m[mo.upSm]={flexGrow:"initial",minWidth:"288px"},$m)}),O_=A.forwardRef(function(t,e){var n=t.className,r=xc(t,["className"]);return be.createElement("div",Object.assign({ref:e,className:qo(s2.root,n)},r))});O_.displayName="SnackbarContent";var Ul=Sc({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),Ib="notistack-snackbar",M_=A.forwardRef(function(t,e){var n=t.id,r=t.message,i=t.action,s=t.iconVariant,o=t.variant,a=t.hideIconVariant,l=t.style,u=t.className,c=s[o],d=i;return typeof d=="function"&&(d=d(n)),be.createElement(O_,{ref:e,role:"alert","aria-describedby":Ib,style:l,className:qo(Ja.MuiContent,Ja.MuiContentVariant(o),Ul.root,Ul[o],u,!a&&c&&Ul.lessPadding)},be.createElement("div",{id:Ib,className:Ul.message},a?null:c,r),d&&be.createElement("div",{className:Ul.action},d))});M_.displayName="MaterialDesignContent";var o2=A.memo(M_),a2=Sc({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),l2=function(e){var n=A.useRef(),r=A.useState(!0),i=r[0],s=r[1],o=yu([e.snack.onClose,e.onClose]),a=function(){e.snack.requestClose&&o(null,"instructed",e.snack.id)},l=A.useCallback(function(){n.current=setTimeout(function(){s(function(k){return!k})},125)},[]);A.useEffect(function(){return function(){n.current&&clearTimeout(n.current)}},[]);var u=e.snack,c=e.classes,d=e.Component,f=d===void 0?o2:d,m=A.useMemo(function(){return n2(c)},[c]),h=u.open,p=u.SnackbarProps,v=u.TransitionComponent,y=u.TransitionProps,g=u.transitionDuration,x=u.disableWindowBlurListener,b=u.content,E=xc(u,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),T=Ye({direction:e2(E.anchorOrigin),timeout:g},y),w=b;typeof w=="function"&&(w=w(E.id,E.message));var _=["onEnter","onEntered","onExit","onExited"].reduce(function(k,L){var P;return Ye({},k,(P={},P[L]=yu([e.snack[L],e[L]],E.id),P))},{});return be.createElement(I_,{in:i,onExited:_.onExited},be.createElement(D_,{open:h,id:E.id,disableWindowBlurListener:x,autoHideDuration:E.autoHideDuration,className:qo(a2.wrappedRoot,m.root,m[t2(E.anchorOrigin)]),SnackbarProps:p,onClose:o},be.createElement(v,Object.assign({},T,{appear:!0,in:h,onExit:_.onExit,onExited:l,onEnter:_.onEnter,onEntered:yu([_.onEntered,a],E.id)}),w||be.createElement(f,Object.assign({},E)))))},jl,Bm,md,gd,Um,Fi={view:{default:20,dense:4},snackbar:{default:6,dense:2}},Db="."+Ja.CollapseWrapper,jm=16,yd=Sc({root:(jl={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:La(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},jl[Db]={padding:Fi.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},jl.maxWidth="calc(100% - "+Fi.view.default*2+"px)",jl[mo.downXs]={width:"100%",maxWidth:"calc(100% - "+jm*2+"px)"},jl),rootDense:(Bm={},Bm[Db]={padding:Fi.snackbar.dense+"px 0px"},Bm),top:{top:Fi.view.default-Fi.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:Fi.view.default-Fi.snackbar.default+"px",flexDirection:"column-reverse"},left:(md={left:Fi.view.default+"px"},md[mo.upSm]={alignItems:"flex-start"},md[mo.downXs]={left:jm+"px"},md),right:(gd={right:Fi.view.default+"px"},gd[mo.upSm]={alignItems:"flex-end"},gd[mo.downXs]={right:jm+"px"},gd),center:(Um={left:"50%",transform:"translateX(-50%)"},Um[mo.upSm]={alignItems:"center"},Um)}),u2=function(e){var n=e.classes,r=n===void 0?{}:n,i=e.anchorOrigin,s=e.dense,o=e.children,a=qo(Ja.SnackbarContainer,yd[i.vertical],yd[i.horizontal],yd.root,r.containerRoot,r["containerAnchorOrigin"+Qv(i)],s&&yd.rootDense);return be.createElement("div",{className:a},o)},c2=A.memo(u2),Ob=function(e){var n=typeof e=="string"||A.isValidElement(e);return!n},Ec,d2=function(t){__(e,t);function e(r){var i;return i=t.call(this,r)||this,i.enqueueSnackbar=function(s,o){if(o===void 0&&(o={}),s==null)throw new Error("enqueueSnackbar called with invalid argument");var a=Ob(s)?s:o,l=Ob(s)?s.message:s,u=a.key,c=a.preventDuplicate,d=xc(a,["key","preventDuplicate"]),f=fd(u),m=f?u:new Date().getTime()+Math.random(),h=ZN(d,i.props),p=Ye({id:m},d,{message:l,open:!0,entered:!1,requestClose:!1,persist:h("persist"),action:h("action"),content:h("content"),variant:h("variant"),anchorOrigin:h("anchorOrigin"),disableWindowBlurListener:h("disableWindowBlurListener"),autoHideDuration:h("autoHideDuration"),hideIconVariant:h("hideIconVariant"),TransitionComponent:h("TransitionComponent"),transitionDuration:h("transitionDuration"),TransitionProps:h("TransitionProps",!0),iconVariant:h("iconVariant",!0),style:h("style",!0),SnackbarProps:h("SnackbarProps",!0),className:qo(i.props.className,d.className)});return p.persist&&(p.autoHideDuration=void 0),i.setState(function(v){if(c===void 0&&i.props.preventDuplicate||c){var y=function(E){return f?E.id===m:E.message===l},g=v.queue.findIndex(y)>-1,x=v.snacks.findIndex(y)>-1;if(g||x)return v}return i.handleDisplaySnack(Ye({},v,{queue:[].concat(v.queue,[p])}))}),m},i.handleDisplaySnack=function(s){var o=s.snacks;return o.length>=i.maxSnack?i.handleDismissOldest(s):i.processQueue(s)},i.processQueue=function(s){var o=s.queue,a=s.snacks;return o.length>0?Ye({},s,{snacks:[].concat(a,[o[0]]),queue:o.slice(1,o.length)}):s},i.handleDismissOldest=function(s){if(s.snacks.some(function(c){return!c.open||c.requestClose}))return s;var o=!1,a=!1,l=s.snacks.reduce(function(c,d){return c+(d.open&&d.persist?1:0)},0);l===i.maxSnack&&(a=!0);var u=s.snacks.map(function(c){return!o&&(!c.persist||a)?(o=!0,c.entered?(c.onClose&&c.onClose(null,"maxsnack",c.id),i.props.onClose&&i.props.onClose(null,"maxsnack",c.id),Ye({},c,{open:!1})):Ye({},c,{requestClose:!0})):Ye({},c)});return Ye({},s,{snacks:u})},i.handleEnteredSnack=function(s,o,a){if(!fd(a))throw new Error("handleEnteredSnack Cannot be called with undefined key");i.setState(function(l){var u=l.snacks;return{snacks:u.map(function(c){return c.id===a?Ye({},c,{entered:!0}):Ye({},c)})}})},i.handleCloseSnack=function(s,o,a){i.props.onClose&&i.props.onClose(s,o,a);var l=a===void 0;i.setState(function(u){var c=u.snacks,d=u.queue;return{snacks:c.map(function(f){return!l&&f.id!==a?Ye({},f):f.entered?Ye({},f,{open:!1}):Ye({},f,{requestClose:!0})}),queue:d.filter(function(f){return f.id!==a})}})},i.closeSnackbar=function(s){var o=i.state.snacks.find(function(a){return a.id===s});fd(s)&&o&&o.onClose&&o.onClose(null,"instructed",s),i.handleCloseSnack(null,"instructed",s)},i.handleExitedSnack=function(s,o){if(!fd(o))throw new Error("handleExitedSnack Cannot be called with undefined key");i.setState(function(a){var l=i.processQueue(Ye({},a,{snacks:a.snacks.filter(function(u){return u.id!==o})}));return l.queue.length===0?l:i.handleDismissOldest(l)})},Ec=i.enqueueSnackbar,i.closeSnackbar,i.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:i.enqueueSnackbar.bind(Tb(i)),closeSnackbar:i.closeSnackbar.bind(Tb(i))}},i}var n=e.prototype;return n.render=function(){var i=this,s=this.state.contextValue,o=this.props,a=o.domRoot,l=o.children,u=o.dense,c=u===void 0?!1:u,d=o.Components,f=d===void 0?{}:d,m=o.classes,h=this.state.snacks.reduce(function(v,y){var g,x=Qv(y.anchorOrigin),b=v[x]||[];return Ye({},v,(g={},g[x]=[].concat(b,[y]),g))},{}),p=Object.keys(h).map(function(v){var y=h[v],g=y[0];return be.createElement(c2,{key:v,dense:c,anchorOrigin:g.anchorOrigin,classes:m},y.map(function(x){return be.createElement(l2,{key:x.id,snack:x,classes:m,Component:f[x.variant],onClose:i.handleCloseSnack,onEnter:i.props.onEnter,onExit:i.props.onExit,onExited:yu([i.handleExitedSnack,i.props.onExited],x.id),onEntered:yu([i.handleEnteredSnack,i.props.onEntered],x.id)})}))});return be.createElement(C_.Provider,{value:s},l,a?pc.createPortal(p,a):p)},A_(e,[{key:"maxSnack",get:function(){return this.props.maxSnack||Mo.maxSnack}}]),e}(A.Component),Zv=function(){return A.useContext(C_)};const f2="__style_30xs7_1",h2={_style:f2};function N_(t,e){return function(){return t.apply(e,arguments)}}const{toString:p2}=Object.prototype,{getPrototypeOf:ex}=Object,np=(t=>e=>{const n=p2.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ci=t=>(t=t.toLowerCase(),e=>np(e)===t),rp=t=>e=>typeof e===t,{isArray:gl}=Array,Gu=rp("undefined");function m2(t){return t!==null&&!Gu(t)&&t.constructor!==null&&!Gu(t.constructor)&&vr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const F_=Ci("ArrayBuffer");function g2(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&F_(t.buffer),e}const y2=rp("string"),vr=rp("function"),$_=rp("number"),ip=t=>t!==null&&typeof t=="object",v2=t=>t===!0||t===!1,of=t=>{if(np(t)!=="object")return!1;const e=ex(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},x2=Ci("Date"),S2=Ci("File"),E2=Ci("Blob"),b2=Ci("FileList"),T2=t=>ip(t)&&vr(t.pipe),w2=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||vr(t.append)&&((e=np(t))==="formdata"||e==="object"&&vr(t.toString)&&t.toString()==="[object FormData]"))},R2=Ci("URLSearchParams"),A2=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function bc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),gl(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function B_(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const U_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,j_=t=>!Gu(t)&&t!==U_;function B0(){const{caseless:t}=j_(this)&&this||{},e={},n=(r,i)=>{const s=t&&B_(e,i)||i;of(e[s])&&of(r)?e[s]=B0(e[s],r):of(r)?e[s]=B0({},r):gl(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&bc(arguments[r],n);return e}const _2=(t,e,n,{allOwnKeys:r}={})=>(bc(e,(i,s)=>{n&&vr(i)?t[s]=N_(i,n):t[s]=i},{allOwnKeys:r}),t),C2=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),L2=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},k2=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&ex(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},P2=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},I2=t=>{if(!t)return null;if(gl(t))return t;let e=t.length;if(!$_(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},D2=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&ex(Uint8Array)),O2=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},M2=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},N2=Ci("HTMLFormElement"),F2=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Mb=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),$2=Ci("RegExp"),H_=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};bc(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},B2=t=>{H_(t,(e,n)=>{if(vr(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(vr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},U2=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return gl(t)?r(t):r(String(t).split(e)),n},j2=()=>{},H2=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Hm="abcdefghijklmnopqrstuvwxyz",Nb="0123456789",z_={DIGIT:Nb,ALPHA:Hm,ALPHA_DIGIT:Hm+Hm.toUpperCase()+Nb},z2=(t=16,e=z_.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function V2(t){return!!(t&&vr(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const G2=t=>{const e=new Array(10),n=(r,i)=>{if(ip(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=gl(r)?[]:{};return bc(r,(o,a)=>{const l=n(o,i+1);!Gu(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},W2=Ci("AsyncFunction"),K2=t=>t&&(ip(t)||vr(t))&&vr(t.then)&&vr(t.catch),z={isArray:gl,isArrayBuffer:F_,isBuffer:m2,isFormData:w2,isArrayBufferView:g2,isString:y2,isNumber:$_,isBoolean:v2,isObject:ip,isPlainObject:of,isUndefined:Gu,isDate:x2,isFile:S2,isBlob:E2,isRegExp:$2,isFunction:vr,isStream:T2,isURLSearchParams:R2,isTypedArray:D2,isFileList:b2,forEach:bc,merge:B0,extend:_2,trim:A2,stripBOM:C2,inherits:L2,toFlatObject:k2,kindOf:np,kindOfTest:Ci,endsWith:P2,toArray:I2,forEachEntry:O2,matchAll:M2,isHTMLForm:N2,hasOwnProperty:Mb,hasOwnProp:Mb,reduceDescriptors:H_,freezeMethods:B2,toObjectSet:U2,toCamelCase:F2,noop:j2,toFiniteNumber:H2,findKey:B_,global:U_,isContextDefined:j_,ALPHABET:z_,generateString:z2,isSpecCompliantForm:V2,toJSONObject:G2,isAsyncFn:W2,isThenable:K2};function Pe(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}z.inherits(Pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:z.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const V_=Pe.prototype,G_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{G_[t]={value:t}});Object.defineProperties(Pe,G_);Object.defineProperty(V_,"isAxiosError",{value:!0});Pe.from=(t,e,n,r,i,s)=>{const o=Object.create(V_);return z.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Pe.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const q2=null;function U0(t){return z.isPlainObject(t)||z.isArray(t)}function W_(t){return z.endsWith(t,"[]")?t.slice(0,-2):t}function Fb(t,e,n){return t?t.concat(e).map(function(i,s){return i=W_(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function Y2(t){return z.isArray(t)&&!t.some(U0)}const X2=z.toFlatObject(z,{},null,function(e){return/^is[A-Z]/.test(e)});function sp(t,e,n){if(!z.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=z.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,v){return!z.isUndefined(v[p])});const r=n.metaTokens,i=n.visitor||c,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&z.isSpecCompliantForm(e);if(!z.isFunction(i))throw new TypeError("visitor must be a function");function u(h){if(h===null)return"";if(z.isDate(h))return h.toISOString();if(!l&&z.isBlob(h))throw new Pe("Blob is not supported. Use a Buffer instead.");return z.isArrayBuffer(h)||z.isTypedArray(h)?l&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function c(h,p,v){let y=h;if(h&&!v&&typeof h=="object"){if(z.endsWith(p,"{}"))p=r?p:p.slice(0,-2),h=JSON.stringify(h);else if(z.isArray(h)&&Y2(h)||(z.isFileList(h)||z.endsWith(p,"[]"))&&(y=z.toArray(h)))return p=W_(p),y.forEach(function(x,b){!(z.isUndefined(x)||x===null)&&e.append(o===!0?Fb([p],b,s):o===null?p:p+"[]",u(x))}),!1}return U0(h)?!0:(e.append(Fb(v,p,s),u(h)),!1)}const d=[],f=Object.assign(X2,{defaultVisitor:c,convertValue:u,isVisitable:U0});function m(h,p){if(!z.isUndefined(h)){if(d.indexOf(h)!==-1)throw Error("Circular reference detected in "+p.join("."));d.push(h),z.forEach(h,function(y,g){(!(z.isUndefined(y)||y===null)&&i.call(e,y,z.isString(g)?g.trim():g,p,f))===!0&&m(y,p?p.concat(g):[g])}),d.pop()}}if(!z.isObject(t))throw new TypeError("data must be an object");return m(t),e}function $b(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function tx(t,e){this._pairs=[],t&&sp(t,this,e)}const K_=tx.prototype;K_.append=function(e,n){this._pairs.push([e,n])};K_.toString=function(e){const n=e?function(r){return e.call(this,r,$b)}:$b;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Q2(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function q_(t,e,n){if(!e)return t;const r=n&&n.encode||Q2,i=n&&n.serialize;let s;if(i?s=i(e,n):s=z.isURLSearchParams(e)?e.toString():new tx(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Bb{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){z.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Y_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},J2=typeof URLSearchParams<"u"?URLSearchParams:tx,Z2=typeof FormData<"u"?FormData:null,eF=typeof Blob<"u"?Blob:null,tF={isBrowser:!0,classes:{URLSearchParams:J2,FormData:Z2,Blob:eF},protocols:["http","https","file","blob","url","data"]},X_=typeof window<"u"&&typeof document<"u",nF=(t=>X_&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),rF=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",iF=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:X_,hasStandardBrowserEnv:nF,hasStandardBrowserWebWorkerEnv:rF},Symbol.toStringTag,{value:"Module"})),di={...iF,...tF};function sF(t,e){return sp(t,new di.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return di.isNode&&z.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function oF(t){return z.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function aF(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function Q_(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&z.isArray(i)?i.length:o,l?(z.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!z.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&z.isArray(i[o])&&(i[o]=aF(i[o])),!a)}if(z.isFormData(t)&&z.isFunction(t.entries)){const n={};return z.forEachEntry(t,(r,i)=>{e(oF(r),i,n,0)}),n}return null}function lF(t,e,n){if(z.isString(t))try{return(e||JSON.parse)(t),z.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const nx={transitional:Y_,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=z.isObject(e);if(s&&z.isHTMLForm(e)&&(e=new FormData(e)),z.isFormData(e))return i?JSON.stringify(Q_(e)):e;if(z.isArrayBuffer(e)||z.isBuffer(e)||z.isStream(e)||z.isFile(e)||z.isBlob(e))return e;if(z.isArrayBufferView(e))return e.buffer;if(z.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return sF(e,this.formSerializer).toString();if((a=z.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return sp(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),lF(e)):e}],transformResponse:[function(e){const n=this.transitional||nx.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&z.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Pe.from(a,Pe.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:di.classes.FormData,Blob:di.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};z.forEach(["delete","get","head","post","put","patch"],t=>{nx.headers[t]={}});const rx=nx,uF=z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),cF=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&uF[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Ub=Symbol("internals");function Hl(t){return t&&String(t).trim().toLowerCase()}function af(t){return t===!1||t==null?t:z.isArray(t)?t.map(af):String(t)}function dF(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const fF=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function zm(t,e,n,r,i){if(z.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!z.isString(e)){if(z.isString(r))return e.indexOf(r)!==-1;if(z.isRegExp(r))return r.test(e)}}function hF(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function pF(t,e){const n=z.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class op{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,u){const c=Hl(l);if(!c)throw new Error("header name must be a non-empty string");const d=z.findKey(i,c);(!d||i[d]===void 0||u===!0||u===void 0&&i[d]!==!1)&&(i[d||l]=af(a))}const o=(a,l)=>z.forEach(a,(u,c)=>s(u,c,l));return z.isPlainObject(e)||e instanceof this.constructor?o(e,n):z.isString(e)&&(e=e.trim())&&!fF(e)?o(cF(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=Hl(e),e){const r=z.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return dF(i);if(z.isFunction(n))return n.call(this,i,r);if(z.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Hl(e),e){const r=z.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||zm(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Hl(o),o){const a=z.findKey(r,o);a&&(!n||zm(r,r[a],a,n))&&(delete r[a],i=!0)}}return z.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||zm(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return z.forEach(this,(i,s)=>{const o=z.findKey(r,s);if(o){n[o]=af(i),delete n[s];return}const a=e?hF(s):String(s).trim();a!==s&&delete n[s],n[a]=af(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return z.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&z.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Ub]=this[Ub]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Hl(o);r[a]||(pF(i,o),r[a]=!0)}return z.isArray(e)?e.forEach(s):s(e),this}}op.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);z.reduceDescriptors(op.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});z.freezeMethods(op);const Qi=op;function Vm(t,e){const n=this||rx,r=e||n,i=Qi.from(r.headers);let s=r.data;return z.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function J_(t){return!!(t&&t.__CANCEL__)}function Tc(t,e,n){Pe.call(this,t??"canceled",Pe.ERR_CANCELED,e,n),this.name="CanceledError"}z.inherits(Tc,Pe,{__CANCEL__:!0});function mF(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Pe("Request failed with status code "+n.status,[Pe.ERR_BAD_REQUEST,Pe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const gF=di.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];z.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),z.isString(r)&&o.push("path="+r),z.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function yF(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function vF(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Z_(t,e){return t&&!yF(e)?vF(t,e):e}const xF=di.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=z.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function SF(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function EF(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=r[s];o||(o=u),n[i]=l,r[i]=u;let d=s,f=0;for(;d!==i;)f+=n[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),u-o<e)return;const m=c&&u-c;return m?Math.round(f*1e3/m):void 0}}function jb(t,e){let n=0;const r=EF(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,l=r(a),u=s<=o;n=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&u?(o-s)/l:void 0,event:i};c[e?"download":"upload"]=!0,t(c)}}const bF=typeof XMLHttpRequest<"u",TF=bF&&function(t){return new Promise(function(n,r){let i=t.data;const s=Qi.from(t.headers).normalize();let{responseType:o,withXSRFToken:a}=t,l;function u(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}let c;if(z.isFormData(i)){if(di.hasStandardBrowserEnv||di.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((c=s.getContentType())!==!1){const[p,...v]=c?c.split(";").map(y=>y.trim()).filter(Boolean):[];s.setContentType([p||"multipart/form-data",...v].join("; "))}}let d=new XMLHttpRequest;if(t.auth){const p=t.auth.username||"",v=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(p+":"+v))}const f=Z_(t.baseURL,t.url);d.open(t.method.toUpperCase(),q_(f,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function m(){if(!d)return;const p=Qi.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),y={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:p,config:t,request:d};mF(function(x){n(x),u()},function(x){r(x),u()},y),d=null}if("onloadend"in d?d.onloadend=m:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(m)},d.onabort=function(){d&&(r(new Pe("Request aborted",Pe.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new Pe("Network Error",Pe.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let v=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const y=t.transitional||Y_;t.timeoutErrorMessage&&(v=t.timeoutErrorMessage),r(new Pe(v,y.clarifyTimeoutError?Pe.ETIMEDOUT:Pe.ECONNABORTED,t,d)),d=null},di.hasStandardBrowserEnv&&(a&&z.isFunction(a)&&(a=a(t)),a||a!==!1&&xF(f))){const p=t.xsrfHeaderName&&t.xsrfCookieName&&gF.read(t.xsrfCookieName);p&&s.set(t.xsrfHeaderName,p)}i===void 0&&s.setContentType(null),"setRequestHeader"in d&&z.forEach(s.toJSON(),function(v,y){d.setRequestHeader(y,v)}),z.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",jb(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",jb(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=p=>{d&&(r(!p||p.type?new Tc(null,t,d):p),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const h=SF(f);if(h&&di.protocols.indexOf(h)===-1){r(new Pe("Unsupported protocol "+h+":",Pe.ERR_BAD_REQUEST,t));return}d.send(i||null)})},j0={http:q2,xhr:TF};z.forEach(j0,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Hb=t=>`- ${t}`,wF=t=>z.isFunction(t)||t===null||t===!1,eC={getAdapter:t=>{t=z.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!wF(n)&&(r=j0[(o=String(n)).toLowerCase()],r===void 0))throw new Pe(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(Hb).join(`
`):" "+Hb(s[0]):"as no adapter specified";throw new Pe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:j0};function Gm(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Tc(null,t)}function zb(t){return Gm(t),t.headers=Qi.from(t.headers),t.data=Vm.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),eC.getAdapter(t.adapter||rx.adapter)(t).then(function(r){return Gm(t),r.data=Vm.call(t,t.transformResponse,r),r.headers=Qi.from(r.headers),r},function(r){return J_(r)||(Gm(t),r&&r.response&&(r.response.data=Vm.call(t,t.transformResponse,r.response),r.response.headers=Qi.from(r.response.headers))),Promise.reject(r)})}const Vb=t=>t instanceof Qi?{...t}:t;function Za(t,e){e=e||{};const n={};function r(u,c,d){return z.isPlainObject(u)&&z.isPlainObject(c)?z.merge.call({caseless:d},u,c):z.isPlainObject(c)?z.merge({},c):z.isArray(c)?c.slice():c}function i(u,c,d){if(z.isUndefined(c)){if(!z.isUndefined(u))return r(void 0,u,d)}else return r(u,c,d)}function s(u,c){if(!z.isUndefined(c))return r(void 0,c)}function o(u,c){if(z.isUndefined(c)){if(!z.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function a(u,c,d){if(d in e)return r(u,c);if(d in t)return r(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c)=>i(Vb(u),Vb(c),!0)};return z.forEach(Object.keys(Object.assign({},t,e)),function(c){const d=l[c]||i,f=d(t[c],e[c],c);z.isUndefined(f)&&d!==a||(n[c]=f)}),n}const tC="1.6.8",ix={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ix[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Gb={};ix.transitional=function(e,n,r){function i(s,o){return"[Axios v"+tC+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Pe(i(o," has been removed"+(n?" in "+n:"")),Pe.ERR_DEPRECATED);return n&&!Gb[o]&&(Gb[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function RF(t,e,n){if(typeof t!="object")throw new Pe("options must be an object",Pe.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Pe("option "+s+" must be "+l,Pe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Pe("Unknown option "+s,Pe.ERR_BAD_OPTION)}}const H0={assertOptions:RF,validators:ix},vs=H0.validators;class sh{constructor(e){this.defaults=e,this.interceptors={request:new Bb,response:new Bb}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Za(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&H0.assertOptions(r,{silentJSONParsing:vs.transitional(vs.boolean),forcedJSONParsing:vs.transitional(vs.boolean),clarifyTimeoutError:vs.transitional(vs.boolean)},!1),i!=null&&(z.isFunction(i)?n.paramsSerializer={serialize:i}:H0.assertOptions(i,{encode:vs.function,serialize:vs.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&z.merge(s.common,s[n.method]);s&&z.forEach(["delete","get","head","post","put","patch","common"],h=>{delete s[h]}),n.headers=Qi.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(n)===!1||(l=l&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});const u=[];this.interceptors.response.forEach(function(p){u.push(p.fulfilled,p.rejected)});let c,d=0,f;if(!l){const h=[zb.bind(this),void 0];for(h.unshift.apply(h,a),h.push.apply(h,u),f=h.length,c=Promise.resolve(n);d<f;)c=c.then(h[d++],h[d++]);return c}f=a.length;let m=n;for(d=0;d<f;){const h=a[d++],p=a[d++];try{m=h(m)}catch(v){p.call(this,v);break}}try{c=zb.call(this,m)}catch(h){return Promise.reject(h)}for(d=0,f=u.length;d<f;)c=c.then(u[d++],u[d++]);return c}getUri(e){e=Za(this.defaults,e);const n=Z_(e.baseURL,e.url);return q_(n,e.params,e.paramsSerializer)}}z.forEach(["delete","get","head","options"],function(e){sh.prototype[e]=function(n,r){return this.request(Za(r||{},{method:e,url:n,data:(r||{}).data}))}});z.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(Za(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}sh.prototype[e]=n(),sh.prototype[e+"Form"]=n(!0)});const lf=sh;class sx{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Tc(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new sx(function(i){e=i}),cancel:e}}}const AF=sx;function _F(t){return function(n){return t.apply(null,n)}}function CF(t){return z.isObject(t)&&t.isAxiosError===!0}const z0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(z0).forEach(([t,e])=>{z0[e]=t});const LF=z0;function nC(t){const e=new lf(t),n=N_(lf.prototype.request,e);return z.extend(n,lf.prototype,e,{allOwnKeys:!0}),z.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return nC(Za(t,i))},n}const Ee=nC(rx);Ee.Axios=lf;Ee.CanceledError=Tc;Ee.CancelToken=AF;Ee.isCancel=J_;Ee.VERSION=tC;Ee.toFormData=sp;Ee.AxiosError=Pe;Ee.Cancel=Ee.CanceledError;Ee.all=function(e){return Promise.all(e)};Ee.spread=_F;Ee.isAxiosError=CF;Ee.mergeConfig=Za;Ee.AxiosHeaders=Qi;Ee.formToJSON=t=>Q_(z.isHTMLForm(t)?new FormData(t):t);Ee.getAdapter=eC.getAdapter;Ee.HttpStatusCode=LF;Ee.default=Ee;var rC={exports:{}},iC={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wc=A;function kF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var PF=typeof Object.is=="function"?Object.is:kF,IF=wc.useSyncExternalStore,DF=wc.useRef,OF=wc.useEffect,MF=wc.useMemo,NF=wc.useDebugValue;iC.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=DF(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=MF(function(){function l(m){if(!u){if(u=!0,c=m,m=r(m),i!==void 0&&o.hasValue){var h=o.value;if(i(h,m))return d=h}return d=m}if(h=d,PF(c,m))return h;var p=r(m);return i!==void 0&&i(h,p)?h:(c=m,d=p)}var u=!1,c,d,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var a=IF(t,s[0],s[1]);return OF(function(){o.hasValue=!0,o.value=a},[a]),NF(a),a};rC.exports=iC;var FF=rC.exports,Vn="default"in za?be:za,Wb=Symbol.for("react-redux-context"),Kb=typeof globalThis<"u"?globalThis:{};function $F(){if(!Vn.createContext)return{};const t=Kb[Wb]??(Kb[Wb]=new Map);let e=t.get(Vn.createContext);return e||(e=Vn.createContext(null),t.set(Vn.createContext,e)),e}var Ks=$F(),BF=()=>{throw new Error("uSES not initialized!")};function ox(t=Ks){return function(){return Vn.useContext(t)}}var sC=ox(),oC=BF,UF=t=>{oC=t},jF=(t,e)=>t===e;function HF(t=Ks){const e=t===Ks?sC:ox(t),n=(r,i={})=>{const{equalityFn:s=jF,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:l,getServerState:u,stabilityCheck:c,identityFunctionCheck:d}=e();Vn.useRef(!0);const f=Vn.useCallback({[r.name](h){return r(h)}}[r.name],[r,c,o.stabilityCheck]),m=oC(l.addNestedSub,a.getState,u||a.getState,f,s);return Vn.useDebugValue(m),m};return Object.assign(n,{withTypes:()=>n}),n}var qs=HF();function zF(t){t()}function VF(){let t=null,e=null;return{clear(){t=null,e=null},notify(){zF(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var qb={notify(){},get:()=>[]};function GF(t,e){let n,r=qb,i=0,s=!1;function o(p){c();const v=r.subscribe(p);let y=!1;return()=>{y||(y=!0,v(),d())}}function a(){r.notify()}function l(){h.onStateChange&&h.onStateChange()}function u(){return s}function c(){i++,n||(n=e?e.addNestedSub(l):t.subscribe(l),r=VF())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=qb)}function f(){s||(s=!0,c())}function m(){s&&(s=!1,d())}const h={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:u,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>r};return h}var WF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",KF=WF?Vn.useLayoutEffect:Vn.useEffect;function qF({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Vn.useMemo(()=>{const u=GF(t);return{store:t,subscription:u,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[t,r,i,s]),a=Vn.useMemo(()=>t.getState(),[t]);KF(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==t.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,a]);const l=e||Ks;return Vn.createElement(l.Provider,{value:o},n)}var YF=qF;function aC(t=Ks){const e=t===Ks?sC:ox(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var XF=aC();function QF(t=Ks){const e=t===Ks?XF:aC(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var ax=QF();UF(FF.useSyncExternalStoreWithSelector);function tn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var JF=typeof Symbol=="function"&&Symbol.observable||"@@observable",Yb=JF,Wm=()=>Math.random().toString(36).substring(7).split("").join("."),ZF={INIT:`@@redux/INIT${Wm()}`,REPLACE:`@@redux/REPLACE${Wm()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Wm()}`},oh=ZF;function lx(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function lC(t,e,n){if(typeof t!="function")throw new Error(tn(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(tn(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(tn(1));return n(lC)(t,e)}let r=t,i=e,s=new Map,o=s,a=0,l=!1;function u(){o===s&&(o=new Map,s.forEach((v,y)=>{o.set(y,v)}))}function c(){if(l)throw new Error(tn(3));return i}function d(v){if(typeof v!="function")throw new Error(tn(4));if(l)throw new Error(tn(5));let y=!0;u();const g=a++;return o.set(g,v),function(){if(y){if(l)throw new Error(tn(6));y=!1,u(),o.delete(g),s=null}}}function f(v){if(!lx(v))throw new Error(tn(7));if(typeof v.type>"u")throw new Error(tn(8));if(typeof v.type!="string")throw new Error(tn(17));if(l)throw new Error(tn(9));try{l=!0,i=r(i,v)}finally{l=!1}return(s=o).forEach(g=>{g()}),v}function m(v){if(typeof v!="function")throw new Error(tn(10));r=v,f({type:oh.REPLACE})}function h(){const v=d;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(tn(11));function g(){const b=y;b.next&&b.next(c())}return g(),{unsubscribe:v(g)}},[Yb](){return this}}}return f({type:oh.INIT}),{dispatch:f,subscribe:d,getState:c,replaceReducer:m,[Yb]:h}}function e$(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:oh.INIT})>"u")throw new Error(tn(12));if(typeof n(void 0,{type:oh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(tn(13))})}function t$(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{e$(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const u={};for(let c=0;c<r.length;c++){const d=r[c],f=n[d],m=o[d],h=f(m,a);if(typeof h>"u")throw a&&a.type,new Error(tn(14));u[d]=h,l=l||h!==m}return l=l||r.length!==Object.keys(o).length,l?u:o}}function ah(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function n$(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(tn(15))};const o={getState:i.getState,dispatch:(l,...u)=>s(l,...u)},a=t.map(l=>l(o));return s=ah(...a)(i.dispatch),{...i,dispatch:s}}}function r$(t){return lx(t)&&"type"in t&&typeof t.type=="string"}var uC=Symbol.for("immer-nothing"),Xb=Symbol.for("immer-draftable"),qn=Symbol.for("immer-state");function Wr(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var el=Object.getPrototypeOf;function Ys(t){return!!t&&!!t[qn]}function ns(t){var e;return t?cC(t)||Array.isArray(t)||!!t[Xb]||!!((e=t.constructor)!=null&&e[Xb])||lp(t)||up(t):!1}var i$=Object.prototype.constructor.toString();function cC(t){if(!t||typeof t!="object")return!1;const e=el(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===i$}function lh(t,e){ap(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function ap(t){const e=t[qn];return e?e.type_:Array.isArray(t)?1:lp(t)?2:up(t)?3:0}function V0(t,e){return ap(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function dC(t,e,n){const r=ap(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function s$(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function lp(t){return t instanceof Map}function up(t){return t instanceof Set}function go(t){return t.copy_||t.base_}function G0(t,e){if(lp(t))return new Map(t);if(up(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&cC(t))return el(t)?{...t}:Object.assign(Object.create(null),t);const n=Object.getOwnPropertyDescriptors(t);delete n[qn];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){const s=r[i],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(el(t),n)}function ux(t,e=!1){return cp(t)||Ys(t)||!ns(t)||(ap(t)>1&&(t.set=t.add=t.clear=t.delete=o$),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>ux(r,!0))),t}function o$(){Wr(2)}function cp(t){return Object.isFrozen(t)}var a$={};function zo(t){const e=a$[t];return e||Wr(0,t),e}var Wu;function fC(){return Wu}function l$(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Qb(t,e){e&&(zo("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function W0(t){K0(t),t.drafts_.forEach(u$),t.drafts_=null}function K0(t){t===Wu&&(Wu=t.parent_)}function Jb(t){return Wu=l$(Wu,t)}function u$(t){const e=t[qn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Zb(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[qn].modified_&&(W0(e),Wr(4)),ns(t)&&(t=uh(e,t),e.parent_||ch(e,t)),e.patches_&&zo("Patches").generateReplacementPatches_(n[qn].base_,t,e.patches_,e.inversePatches_)):t=uh(e,n,[]),W0(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==uC?t:void 0}function uh(t,e,n){if(cp(e))return e;const r=e[qn];if(!r)return lh(e,(i,s)=>eT(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return ch(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),lh(s,(a,l)=>eT(t,r,i,a,l,n,o)),ch(t,i,!1),n&&t.patches_&&zo("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function eT(t,e,n,r,i,s,o){if(Ys(i)){const a=s&&e&&e.type_!==3&&!V0(e.assigned_,r)?s.concat(r):void 0,l=uh(t,i,a);if(dC(n,r,l),Ys(l))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(ns(i)&&!cp(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;uh(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&ch(t,i)}}function ch(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&ux(e,n)}function c$(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:fC(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=cx;n&&(i=[r],s=Ku);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var cx={get(t,e){if(e===qn)return t;const n=go(t);if(!V0(n,e))return d$(t,n,e);const r=n[e];return t.finalized_||!ns(r)?r:r===Km(t.base_,e)?(qm(t),t.copy_[e]=Y0(r,t)):r},has(t,e){return e in go(t)},ownKeys(t){return Reflect.ownKeys(go(t))},set(t,e,n){const r=hC(go(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Km(go(t),e),s=i==null?void 0:i[qn];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(s$(n,i)&&(n!==void 0||V0(t.base_,e)))return!0;qm(t),q0(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Km(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,qm(t),q0(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=go(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Wr(11)},getPrototypeOf(t){return el(t.base_)},setPrototypeOf(){Wr(12)}},Ku={};lh(cx,(t,e)=>{Ku[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Ku.deleteProperty=function(t,e){return Ku.set.call(this,t,e,void 0)};Ku.set=function(t,e,n){return cx.set.call(this,t[0],e,n,t[0])};function Km(t,e){const n=t[qn];return(n?go(n):t)[e]}function d$(t,e,n){var i;const r=hC(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function hC(t,e){if(!(e in t))return;let n=el(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=el(n)}}function q0(t){t.modified_||(t.modified_=!0,t.parent_&&q0(t.parent_))}function qm(t){t.copy_||(t.copy_=G0(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var f$=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...u){return o.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&Wr(6),r!==void 0&&typeof r!="function"&&Wr(7);let i;if(ns(e)){const s=Jb(this),o=Y0(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?W0(s):K0(s)}return Qb(s,r),Zb(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===uC&&(i=void 0),this.autoFreeze_&&ux(i,!0),r){const s=[],o=[];zo("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else Wr(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ns(t)||Wr(8),Ys(t)&&(t=pC(t));const e=Jb(this),n=Y0(t,void 0);return n[qn].isManual_=!0,K0(e),n}finishDraft(t,e){const n=t&&t[qn];(!n||!n.isManual_)&&Wr(9);const{scope_:r}=n;return Qb(r,e),Zb(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=zo("Patches").applyPatches_;return Ys(t)?r(t,e):this.produce(t,i=>r(i,e))}};function Y0(t,e){const n=lp(t)?zo("MapSet").proxyMap_(t,e):up(t)?zo("MapSet").proxySet_(t,e):c$(t,e);return(e?e.scope_:fC()).drafts_.push(n),n}function pC(t){return Ys(t)||Wr(10,t),mC(t)}function mC(t){if(!ns(t)||cp(t))return t;const e=t[qn];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=G0(t,e.scope_.immer_.useStrictShallowCopy_)}else n=G0(t,!0);return lh(n,(r,i)=>{dC(n,r,mC(i))}),e&&(e.finalized_=!1),n}var Yn=new f$,gC=Yn.produce;Yn.produceWithPatches.bind(Yn);Yn.setAutoFreeze.bind(Yn);Yn.setUseStrictShallowCopy.bind(Yn);Yn.applyPatches.bind(Yn);Yn.createDraft.bind(Yn);Yn.finishDraft.bind(Yn);function h$(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function p$(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function m$(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var tT=t=>Array.isArray(t)?t:[t];function g$(t){const e=Array.isArray(t[0])?t[0]:t;return m$(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function y$(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var v$=class{constructor(t){this.value=t}deref(){return this.value}},x$=typeof WeakRef<"u"?WeakRef:v$,S$=0,nT=1;function vd(){return{s:S$,v:void 0,o:null,p:null}}function dx(t,e={}){let n=vd();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var d;let a=n;const{length:l}=arguments;for(let f=0,m=l;f<m;f++){const h=arguments[f];if(typeof h=="function"||typeof h=="object"&&h!==null){let p=a.o;p===null&&(a.o=p=new WeakMap);const v=p.get(h);v===void 0?(a=vd(),p.set(h,a)):a=v}else{let p=a.p;p===null&&(a.p=p=new Map);const v=p.get(h);v===void 0?(a=vd(),p.set(h,a)):a=v}}const u=a;let c;if(a.s===nT?c=a.v:(c=t.apply(null,arguments),s++),u.s=nT,r){const f=((d=i==null?void 0:i.deref)==null?void 0:d.call(i))??i;f!=null&&r(f,c)&&(c=f,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new x$(c):c}return u.v=c,c}return o.clearCache=()=>{n=vd(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function yC(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,a,l={},u=i.pop();typeof u=="object"&&(l=u,u=i.pop()),h$(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const c={...n,...l},{memoize:d,memoizeOptions:f=[],argsMemoize:m=dx,argsMemoizeOptions:h=[],devModeChecks:p={}}=c,v=tT(f),y=tT(h),g=g$(i),x=d(function(){return s++,u.apply(null,arguments)},...v),b=m(function(){o++;const T=y$(g,arguments);return a=x.apply(null,T),a},...y);return Object.assign(b,{resultFunc:u,memoizedResultFunc:x,dependencies:g,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:m})};return Object.assign(r,{withTypes:()=>r}),r}var E$=yC(dx),b$=Object.assign((t,e=E$)=>{p$(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>b$});function vC(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var T$=vC(),w$=vC,R$=(...t)=>{const e=yC(...t),n=Object.assign((...r)=>{const i=e(...r),s=(o,...a)=>i(Ys(o)?pC(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};R$(dx);var A$=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ah:ah.apply(null,arguments)};function tl(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(On(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>r$(r)&&r.type===t,n}var xC=class nu extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,nu.prototype)}static get[Symbol.species](){return nu}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new nu(...e[0].concat(this)):new nu(...e.concat(this))}};function rT(t){return ns(t)?gC(t,()=>{}):t}function iT(t,e,n){if(t.has(e)){let i=t.get(e);return n.update&&(i=n.update(i,e,t),t.set(e,i)),i}if(!n.insert)throw new Error(On(10));const r=n.insert(e,t);return t.set(e,r),r}function _$(t){return typeof t=="boolean"}var C$=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new xC;return n&&(_$(n)?o.push(T$):o.push(w$(n.extraArgument))),o},L$="RTK_autoBatch",SC=t=>e=>{setTimeout(e,t)},k$=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:SC(10),P$=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?k$:t.type==="callback"?t.queueNotification:SC(t.timeout),u=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const d=()=>i&&c(),f=r.subscribe(d);return a.add(c),()=>{f(),a.delete(c)}},dispatch(c){var d;try{return i=!((d=c==null?void 0:c.meta)!=null&&d[L$]),s=!i,s&&(o||(o=!0,l(u))),r.dispatch(c)}finally{i=!0}}})},I$=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new xC(t);return r&&i.push(P$(typeof r=="object"?r:void 0)),i},D$=!0;function O$(t){const e=C$(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(lx(n))a=t$(n);else throw new Error(On(1));let l;typeof r=="function"?l=r(e):l=e();let u=ah;i&&(u=A$({trace:!D$,...typeof i=="object"&&i}));const c=n$(...l),d=I$(c);let f=typeof o=="function"?o(d):d();const m=u(...f);return lC(a,s,m)}function EC(t){const e={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(On(28));if(a in e)throw new Error(On(29));return e[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function M$(t){return typeof t=="function"}function N$(t,e){let[n,r,i]=EC(e),s;if(M$(t))s=()=>rT(t());else{const a=rT(t);s=()=>a}function o(a=s(),l){let u=[n[l.type],...r.filter(({matcher:c})=>c(l)).map(({reducer:c})=>c)];return u.filter(c=>!!c).length===0&&(u=[i]),u.reduce((c,d)=>{if(d)if(Ys(c)){const m=d(c,l);return m===void 0?c:m}else{if(ns(c))return gC(c,f=>d(f,l));{const f=d(c,l);if(f===void 0){if(c===null)return c;throw new Error(On(9))}return f}}return c},a)}return o.getInitialState=s,o}var F$="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",$$=(t=21)=>{let e="",n=t;for(;n--;)e+=F$[Math.random()*64|0];return e},B$=Symbol.for("rtk-slice-createasyncthunk");function U$(t,e){return`${t}/${e}`}function j$({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[B$];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(On(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(z$()):i.reducers)||{},l=Object.keys(a),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(x,b){const E=typeof x=="string"?x:x.type;if(!E)throw new Error(On(12));if(E in u.sliceCaseReducersByType)throw new Error(On(13));return u.sliceCaseReducersByType[E]=b,c},addMatcher(x,b){return u.sliceMatchers.push({matcher:x,reducer:b}),c},exposeAction(x,b){return u.actionCreators[x]=b,c},exposeCaseReducer(x,b){return u.sliceCaseReducersByName[x]=b,c}};l.forEach(x=>{const b=a[x],E={reducerName:x,type:U$(s,x),createNotation:typeof i.reducers=="function"};G$(b)?K$(E,b,c,e):V$(E,b,c)});function d(){const[x={},b=[],E=void 0]=typeof i.extraReducers=="function"?EC(i.extraReducers):[i.extraReducers],T={...x,...u.sliceCaseReducersByType};return N$(i.initialState,w=>{for(let _ in T)w.addCase(_,T[_]);for(let _ of u.sliceMatchers)w.addMatcher(_.matcher,_.reducer);for(let _ of b)w.addMatcher(_.matcher,_.reducer);E&&w.addDefaultCase(E)})}const f=x=>x,m=new Map;let h;function p(x,b){return h||(h=d()),h(x,b)}function v(){return h||(h=d()),h.getInitialState()}function y(x,b=!1){function E(w){let _=w[x];return typeof _>"u"&&b&&(_=v()),_}function T(w=f){const _=iT(m,b,{insert:()=>new WeakMap});return iT(_,w,{insert:()=>{const k={};for(const[L,P]of Object.entries(i.selectors??{}))k[L]=H$(P,w,v,b);return k}})}return{reducerPath:x,getSelectors:T,get selectors(){return T(E)},selectSlice:E}}const g={name:s,reducer:p,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:v,...y(o),injectInto(x,{reducerPath:b,...E}={}){const T=b??o;return x.inject({reducerPath:T,reducer:p},E),{...g,...y(T,!0)}}};return g}}function H$(t,e,n,r){function i(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return i.unwrapped=t,i}var fx=j$();function z$(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function V$({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!W$(r))throw new Error(On(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?tl(t,o):tl(t))}function G$(t){return t._reducerDefinitionType==="asyncThunk"}function W$(t){return t._reducerDefinitionType==="reducerWithPrepare"}function K$({type:t,reducerName:e},n,r,i){if(!i)throw new Error(On(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:u,options:c}=n,d=i(t,s,c);r.exposeAction(e,d),o&&r.addCase(d.fulfilled,o),a&&r.addCase(d.pending,a),l&&r.addCase(d.rejected,l),u&&r.addMatcher(d.settled,u),r.exposeCaseReducer(e,{fulfilled:o||xd,pending:a||xd,rejected:l||xd,settled:u||xd})}function xd(){}var q$=(t,e)=>{if(typeof t!="function")throw new Error(On(32))},hx="listenerMiddleware",Y$=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=tl(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(On(21));return q$(s),{predicate:i,type:e,effect:s}},X$=Object.assign(t=>{const{type:e,predicate:n,effect:r}=Y$(t);return{id:$$(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(On(22))}}},{withTypes:()=>X$}),Q$=Object.assign(tl(`${hx}/add`),{withTypes:()=>Q$});tl(`${hx}/removeAll`);var J$=Object.assign(tl(`${hx}/remove`),{withTypes:()=>J$});function On(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const Z$={data:{},player:null,connected:!1,socket:null,joinRoom:!1},bC=fx({name:"room",initialState:Z$,reducers:{updateRoomInfo:(t,e)=>(console.log("action",e),t.data=e.payload.data,t),setRoomPlayer:(t,e)=>(t.player=e.payload,t),updateRoomConnection:(t,e)=>(t.connected=e.payload.connected,t.socket=e.payload.socket,t),joinTheRoom:t=>(t.joinRoom=!0,t),resetRoomInfo:(t,e)=>(console.log("Room info has back to initial"),{data:{},player:null,connected:!1,socket:null,joinRoom:!1})}}),{updateRoomInfo:px,setRoomPlayer:QX,joinTheRoom:eB,updateRoomConnection:tB,resetRoomInfo:X0}=bC.actions,mx=({inner:t,action:e})=>{const{enqueueSnackbar:n}=Zv(),[r,i]=A.useState(!1),s=qs(d=>d.user.isLogin),o=ax(),a=us();Jr(),A.useEffect(()=>()=>{i(!1)},[e.data]);async function l(){try{const{type:d,data:f,mType:m}=e,h=m==="movie"?"movies":"tv-shows";return(await Ee.post(`${St}/${h}/${f.id||Number(f.tmdbId)}/favorite`)).data}catch(d){return n(`ERROR: ${ln(d).err}`,rh),null}}async function u(){try{const{data:d}=e;return(await Ee.delete(`${St}/user/favorites/${d._id}`)).data}catch(d){return n(`ERROR: ${ln(d).err}`,rh),null}}const c=async d=>{const{type:f,data:m,mType:h,episode:p,season:v,setItems:y}=e;if(console.log(y),i(!0),!s&&f!=="removeFromResume"){n("To access this feature, please log in.",b_);return}f&&(f==="addToFav"&&!r?await l()?n("Success! It's now in your favorites list.",nh):i(!1):f==="addToRoom"?(console.log("season ",v," episode ",p),o(px({data:m,type:h,episode:p,season:v})),a("/user/room")):f==="addToFav"&&r?n("You already added this to your favorites list.",Yv):f==="removeFromFav"&&(await u()?(n("Success! It's removed From your favorites list.",nh),y(g=>g==null?void 0:g.filter(x=>x.tmdbId!==m.tmdbId))):i(!1)))};return S.jsx("button",{onClick:c,className:h2._style,children:t})};const nB=t=>{t.target.src="/loading.jpg",t.onerror=null},rB=({src:t,alt:e="card, img"})=>S.jsx("img",{onError:nB,src:t,alt:e}),iB="_card_1bqr9_1",sB="_info_1bqr9_17",oB="_ibrashira_1bqr9_23",aB="_fadeIN_1bqr9_1",lB="_card_h_1bqr9_53",uB="_card_b_1bqr9_71",cB="_contant_1bqr9_81",dB="_lang_1bqr9_105",fB="_name_1bqr9_129",hB="_extraButtons_1bqr9_145",Or={card:iB,info:sB,ibrashira:oB,fadeIN:aB,card_h:lB,card_b:uB,contant:cB,lang:dB,name:fB,extraButtons:hB};var gx={},TC={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(TC);var Nt=TC.exports,Ym={};function V(){return V=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},V.apply(this,arguments)}function Wi(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function wC(t){if(!Wi(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=wC(t[n])}),e}function xr(t,e,n={clone:!0}){const r=n.clone?V({},t):t;return Wi(t)&&Wi(e)&&Object.keys(e).forEach(i=>{i!=="__proto__"&&(Wi(e[i])&&i in t&&Wi(t[i])?r[i]=xr(t[i],e[i],n):n.clone?r[i]=Wi(e[i])?wC(e[i]):e[i]:r[i]=e[i])}),r}const pB=Object.freeze(Object.defineProperty({__proto__:null,default:xr,isPlainObject:Wi},Symbol.toStringTag,{value:"Module"}));var Xm={exports:{}},Qm,sT;function mB(){if(sT)return Qm;sT=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Qm=t,Qm}var Jm,oT;function gB(){if(oT)return Jm;oT=1;var t=mB();function e(){}function n(){}return n.resetWarningCache=e,Jm=function(){function r(o,a,l,u,c,d){if(d!==t){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},Jm}var aT;function RC(){return aT||(aT=1,Xm.exports=gB()()),Xm.exports}RC();function qu(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const yB=Object.freeze(Object.defineProperty({__proto__:null,default:qu},Symbol.toStringTag,{value:"Module"}));var AC={exports:{}},Ge={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx=Symbol.for("react.element"),vx=Symbol.for("react.portal"),dp=Symbol.for("react.fragment"),fp=Symbol.for("react.strict_mode"),hp=Symbol.for("react.profiler"),pp=Symbol.for("react.provider"),mp=Symbol.for("react.context"),vB=Symbol.for("react.server_context"),gp=Symbol.for("react.forward_ref"),yp=Symbol.for("react.suspense"),vp=Symbol.for("react.suspense_list"),xp=Symbol.for("react.memo"),Sp=Symbol.for("react.lazy"),xB=Symbol.for("react.offscreen"),_C;_C=Symbol.for("react.module.reference");function _r(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case yx:switch(t=t.type,t){case dp:case hp:case fp:case yp:case vp:return t;default:switch(t=t&&t.$$typeof,t){case vB:case mp:case gp:case Sp:case xp:case pp:return t;default:return e}}case vx:return e}}}Ge.ContextConsumer=mp;Ge.ContextProvider=pp;Ge.Element=yx;Ge.ForwardRef=gp;Ge.Fragment=dp;Ge.Lazy=Sp;Ge.Memo=xp;Ge.Portal=vx;Ge.Profiler=hp;Ge.StrictMode=fp;Ge.Suspense=yp;Ge.SuspenseList=vp;Ge.isAsyncMode=function(){return!1};Ge.isConcurrentMode=function(){return!1};Ge.isContextConsumer=function(t){return _r(t)===mp};Ge.isContextProvider=function(t){return _r(t)===pp};Ge.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===yx};Ge.isForwardRef=function(t){return _r(t)===gp};Ge.isFragment=function(t){return _r(t)===dp};Ge.isLazy=function(t){return _r(t)===Sp};Ge.isMemo=function(t){return _r(t)===xp};Ge.isPortal=function(t){return _r(t)===vx};Ge.isProfiler=function(t){return _r(t)===hp};Ge.isStrictMode=function(t){return _r(t)===fp};Ge.isSuspense=function(t){return _r(t)===yp};Ge.isSuspenseList=function(t){return _r(t)===vp};Ge.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===dp||t===hp||t===fp||t===yp||t===vp||t===xB||typeof t=="object"&&t!==null&&(t.$$typeof===Sp||t.$$typeof===xp||t.$$typeof===pp||t.$$typeof===mp||t.$$typeof===gp||t.$$typeof===_C||t.getModuleId!==void 0)};Ge.typeOf=_r;AC.exports=Ge;var lT=AC.exports;const SB=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function CC(t){const e=`${t}`.match(SB);return e&&e[1]||""}function LC(t,e=""){return t.displayName||t.name||CC(t)||e}function uT(t,e,n){const r=LC(e);return t.displayName||(r!==""?`${n}(${r})`:n)}function EB(t){if(t!=null){if(typeof t=="string")return t;if(typeof t=="function")return LC(t,"Component");if(typeof t=="object")switch(t.$$typeof){case lT.ForwardRef:return uT(t,t.render,"ForwardRef");case lT.Memo:return uT(t,t.type,"memo");default:return}}}const bB=Object.freeze(Object.defineProperty({__proto__:null,default:EB,getFunctionName:CC},Symbol.toStringTag,{value:"Module"}));function Ot(t){if(typeof t!="string")throw new Error(qu(7));return t.charAt(0).toUpperCase()+t.slice(1)}const TB=Object.freeze(Object.defineProperty({__proto__:null,default:Ot},Symbol.toStringTag,{value:"Module"}));function wB(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function RB(t,e=166){let n;function r(...i){const s=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(s,e)}return r.clear=()=>{clearTimeout(n)},r}function AB(t,e){return()=>null}function _B(t,e){var n,r;return A.isValidElement(t)&&e.indexOf((n=t.type.muiName)!=null?n:(r=t.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function dh(t){return t&&t.ownerDocument||document}function CB(t){return dh(t).defaultView||window}function LB(t,e){return()=>null}function fh(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const kB=typeof window<"u"?A.useLayoutEffect:A.useEffect,nl=kB;let cT=0;function PB(t){const[e,n]=A.useState(t),r=t||e;return A.useEffect(()=>{e==null&&(cT+=1,n(`mui-${cT}`))},[e]),r}const dT=za.useId;function kC(t){if(dT!==void 0){const e=dT();return t??e}return PB(t)}function IB(t,e,n,r,i){return null}function xx({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=A.useRef(t!==void 0),[s,o]=A.useState(e),a=i?t:s,l=A.useCallback(u=>{i||o(u)},[]);return[a,l]}function Co(t){const e=A.useRef(t);return nl(()=>{e.current=t}),A.useRef((...n)=>(0,e.current)(...n)).current}function rs(...t){return A.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{fh(n,e)})},t)}const fT={};function DB(t,e){const n=A.useRef(fT);return n.current===fT&&(n.current=t(e)),n}const OB=[];function MB(t){A.useEffect(t,OB)}class Rc{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new Rc}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function ka(){const t=DB(Rc.create).current;return MB(t.disposeEffect),t}let Ep=!0,Q0=!1;const NB=new Rc,FB={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function $B(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&FB[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function BB(t){t.metaKey||t.altKey||t.ctrlKey||(Ep=!0)}function Zm(){Ep=!1}function UB(){this.visibilityState==="hidden"&&Q0&&(Ep=!0)}function jB(t){t.addEventListener("keydown",BB,!0),t.addEventListener("mousedown",Zm,!0),t.addEventListener("pointerdown",Zm,!0),t.addEventListener("touchstart",Zm,!0),t.addEventListener("visibilitychange",UB,!0)}function HB(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return Ep||$B(e)}function Sx(){const t=A.useCallback(i=>{i!=null&&jB(i.ownerDocument)},[]),e=A.useRef(!1);function n(){return e.current?(Q0=!0,NB.start(100,()=>{Q0=!1}),e.current=!1,!0):!1}function r(i){return HB(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function PC(t,e){const n=V({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=V({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},s=e[r];n[r]={},!s||!Object.keys(s)?n[r]=i:!i||!Object.keys(i)?n[r]=s:(n[r]=V({},s),Object.keys(i).forEach(o=>{n[r][o]=PC(i[o],s[o])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function Zs(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),r}const hT=t=>t,zB=()=>{let t=hT;return{configure(e){t=e},generate(e){return t(e)},reset(){t=hT}}},IC=zB(),DC={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function eo(t,e,n="Mui"){const r=DC[e];return r?`${n}-${r}`:`${IC.generate(t)}-${e}`}function Yo(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=eo(t,i,n)}),r}function VB(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}const GB=Object.freeze(Object.defineProperty({__proto__:null,default:VB},Symbol.toStringTag,{value:"Module"}));function tt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function OC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=OC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ut(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=OC(t))&&(r&&(r+=" "),r+=e);return r}function WB(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:PC(e.components[n].defaultProps,r)}const KB=["values","unit","step"],qB=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>V({},n,{[r.key]:r.val}),{})};function MC(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=tt(t,KB),s=qB(e),o=Object.keys(s);function a(f){return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${n})`}function l(f){return`@media (max-width:${(typeof e[f]=="number"?e[f]:f)-r/100}${n})`}function u(f,m){const h=o.indexOf(m);return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${n}) and (max-width:${(h!==-1&&typeof e[o[h]]=="number"?e[o[h]]:m)-r/100}${n})`}function c(f){return o.indexOf(f)+1<o.length?u(f,o[o.indexOf(f)+1]):a(f)}function d(f){const m=o.indexOf(f);return m===0?a(o[1]):m===o.length-1?l(o[m]):u(f,o[o.indexOf(f)+1]).replace("@media","@media not all and")}return V({keys:o,values:s,up:a,down:l,between:u,only:c,not:d,unit:n},i)}const YB={borderRadius:4},XB=YB;function vu(t,e){return e?xr(t,e,{clone:!1}):t}const Ex={xs:0,sm:600,md:900,lg:1200,xl:1536},pT={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${Ex[t]}px)`};function Qr(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||pT;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||pT;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||Ex).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function NC(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function FC(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function QB(t,...e){const n=NC(t),r=[n,...e].reduce((i,s)=>xr(i,s),{});return FC(Object.keys(n),r)}function JB(t,e){if(typeof t!="object")return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((i,s)=>{s<t.length&&(n[i]=!0)}):r.forEach(i=>{t[i]!=null&&(n[i]=!0)}),n}function eg({values:t,breakpoints:e,base:n}){const r=n||JB(t,e),i=Object.keys(r);if(i.length===0)return t;let s;return i.reduce((o,a,l)=>(Array.isArray(t)?(o[a]=t[l]!=null?t[l]:t[s],s=l):typeof t=="object"?(o[a]=t[a]!=null?t[a]:t[s],s=a):o[a]=t,o),{})}function bp(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function hh(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=bp(t,n)||r,e&&(i=e(i,r,t)),i}function At(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,u=bp(l,r)||{};return Qr(o,a,d=>{let f=hh(u,i,d);return d===f&&typeof d=="string"&&(f=hh(u,i,`${e}${d==="default"?"":Ot(d)}`,d)),n===!1?f:{[n]:f}})};return s.propTypes={},s.filterProps=[e],s}function ZB(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const eU={m:"margin",p:"padding"},tU={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},mT={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},nU=ZB(t=>{if(t.length>2)if(mT[t])t=mT[t];else return[t];const[e,n]=t.split(""),r=eU[e],i=tU[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),bx=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Tx=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...bx,...Tx];function Ac(t,e,n,r){var i;const s=(i=bp(t,e,!1))!=null?i:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function wx(t){return Ac(t,"spacing",8)}function Vo(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function rU(t,e){return n=>t.reduce((r,i)=>(r[i]=Vo(e,n),r),{})}function iU(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=nU(n),s=rU(i,r),o=t[n];return Qr(t,o,s)}function $C(t,e){const n=wx(t.theme);return Object.keys(t).map(r=>iU(t,e,r,n)).reduce(vu,{})}function gt(t){return $C(t,bx)}gt.propTypes={};gt.filterProps=bx;function yt(t){return $C(t,Tx)}yt.propTypes={};yt.filterProps=Tx;function sU(t=8){if(t.mui)return t;const e=wx({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function Tp(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?vu(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function pr(t){return typeof t!="number"?t:`${t}px solid`}function Cr(t,e){return At({prop:t,themeKey:"borders",transform:e})}const oU=Cr("border",pr),aU=Cr("borderTop",pr),lU=Cr("borderRight",pr),uU=Cr("borderBottom",pr),cU=Cr("borderLeft",pr),dU=Cr("borderColor"),fU=Cr("borderTopColor"),hU=Cr("borderRightColor"),pU=Cr("borderBottomColor"),mU=Cr("borderLeftColor"),gU=Cr("outline",pr),yU=Cr("outlineColor"),wp=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=Ac(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:Vo(e,r)});return Qr(t,t.borderRadius,n)}return null};wp.propTypes={};wp.filterProps=["borderRadius"];Tp(oU,aU,lU,uU,cU,dU,fU,hU,pU,mU,wp,gU,yU);const Rp=t=>{if(t.gap!==void 0&&t.gap!==null){const e=Ac(t.theme,"spacing",8),n=r=>({gap:Vo(e,r)});return Qr(t,t.gap,n)}return null};Rp.propTypes={};Rp.filterProps=["gap"];const Ap=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=Ac(t.theme,"spacing",8),n=r=>({columnGap:Vo(e,r)});return Qr(t,t.columnGap,n)}return null};Ap.propTypes={};Ap.filterProps=["columnGap"];const _p=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=Ac(t.theme,"spacing",8),n=r=>({rowGap:Vo(e,r)});return Qr(t,t.rowGap,n)}return null};_p.propTypes={};_p.filterProps=["rowGap"];const vU=At({prop:"gridColumn"}),xU=At({prop:"gridRow"}),SU=At({prop:"gridAutoFlow"}),EU=At({prop:"gridAutoColumns"}),bU=At({prop:"gridAutoRows"}),TU=At({prop:"gridTemplateColumns"}),wU=At({prop:"gridTemplateRows"}),RU=At({prop:"gridTemplateAreas"}),AU=At({prop:"gridArea"});Tp(Rp,Ap,_p,vU,xU,SU,EU,bU,TU,wU,RU,AU);function $a(t,e){return e==="grey"?e:t}const _U=At({prop:"color",themeKey:"palette",transform:$a}),CU=At({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:$a}),LU=At({prop:"backgroundColor",themeKey:"palette",transform:$a});Tp(_U,CU,LU);function jn(t){return t<=1&&t!==0?`${t*100}%`:t}const kU=At({prop:"width",transform:jn}),Rx=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const s=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||Ex[n];return s?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${s}${t.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:jn(n)}};return Qr(t,t.maxWidth,e)}return null};Rx.filterProps=["maxWidth"];const PU=At({prop:"minWidth",transform:jn}),IU=At({prop:"height",transform:jn}),DU=At({prop:"maxHeight",transform:jn}),OU=At({prop:"minHeight",transform:jn});At({prop:"size",cssProperty:"width",transform:jn});At({prop:"size",cssProperty:"height",transform:jn});const MU=At({prop:"boxSizing"});Tp(kU,Rx,PU,IU,DU,OU,MU);const NU={border:{themeKey:"borders",transform:pr},borderTop:{themeKey:"borders",transform:pr},borderRight:{themeKey:"borders",transform:pr},borderBottom:{themeKey:"borders",transform:pr},borderLeft:{themeKey:"borders",transform:pr},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:pr},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:wp},color:{themeKey:"palette",transform:$a},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:$a},backgroundColor:{themeKey:"palette",transform:$a},p:{style:yt},pt:{style:yt},pr:{style:yt},pb:{style:yt},pl:{style:yt},px:{style:yt},py:{style:yt},padding:{style:yt},paddingTop:{style:yt},paddingRight:{style:yt},paddingBottom:{style:yt},paddingLeft:{style:yt},paddingX:{style:yt},paddingY:{style:yt},paddingInline:{style:yt},paddingInlineStart:{style:yt},paddingInlineEnd:{style:yt},paddingBlock:{style:yt},paddingBlockStart:{style:yt},paddingBlockEnd:{style:yt},m:{style:gt},mt:{style:gt},mr:{style:gt},mb:{style:gt},ml:{style:gt},mx:{style:gt},my:{style:gt},margin:{style:gt},marginTop:{style:gt},marginRight:{style:gt},marginBottom:{style:gt},marginLeft:{style:gt},marginX:{style:gt},marginY:{style:gt},marginInline:{style:gt},marginInlineStart:{style:gt},marginInlineEnd:{style:gt},marginBlock:{style:gt},marginBlockStart:{style:gt},marginBlockEnd:{style:gt},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Rp},rowGap:{style:_p},columnGap:{style:Ap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:jn},maxWidth:{style:Rx},minWidth:{transform:jn},height:{transform:jn},maxHeight:{transform:jn},minHeight:{transform:jn},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},_c=NU;function FU(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function $U(t,e){return typeof t=="function"?t(e):t}function BC(){function t(n,r,i,s){const o={[n]:r,theme:i},a=s[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:u,transform:c,style:d}=a;if(r==null)return null;if(u==="typography"&&r==="inherit")return{[n]:r};const f=bp(i,u)||{};return d?d(o):Qr(o,r,h=>{let p=hh(f,c,h);return h===p&&typeof h=="string"&&(p=hh(f,c,`${n}${h==="default"?"":Ot(h)}`,h)),l===!1?p:{[l]:p}})}function e(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=(r=s.unstable_sxConfig)!=null?r:_c;function a(l){let u=l;if(typeof l=="function")u=l(s);else if(typeof l!="object")return l;if(!u)return null;const c=NC(s.breakpoints),d=Object.keys(c);let f=c;return Object.keys(u).forEach(m=>{const h=$U(u[m],s);if(h!=null)if(typeof h=="object")if(o[m])f=vu(f,t(m,h,s,o));else{const p=Qr({theme:s},h,v=>({[m]:v}));FU(p,h)?f[m]=e({sx:h,theme:s}):f=vu(f,p)}else f=vu(f,t(m,h,s,o))}),FC(d,f)}return Array.isArray(i)?i.map(a):a(i)}return e}const Cc=BC();Cc.filterProps=["sx"];function UC(t,e){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:n.palette.mode===t?e:{}}const BU=["breakpoints","palette","spacing","shape"];function Lc(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=t,o=tt(t,BU),a=MC(n),l=sU(i);let u=xr({breakpoints:a,direction:"ltr",components:{},palette:V({mode:"light"},r),spacing:l,shape:V({},XB,s)},o);return u.applyStyles=UC,u=e.reduce((c,d)=>xr(c,d),u),u.unstable_sxConfig=V({},_c,o==null?void 0:o.unstable_sxConfig),u.unstable_sx=function(d){return Cc({sx:d,theme:this})},u}const UU=Object.freeze(Object.defineProperty({__proto__:null,default:Lc,private_createBreakpoints:MC,unstable_applyStyles:UC},Symbol.toStringTag,{value:"Module"}));function jC(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var jU=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,HU=jC(function(t){return jU.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function zU(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function VU(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var GU=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(VU(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=zU(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),pn="-ms-",ph="-moz-",$e="-webkit-",HC="comm",Ax="rule",_x="decl",WU="@import",zC="@keyframes",KU="@layer",qU=Math.abs,Cp=String.fromCharCode,YU=Object.assign;function XU(t,e){return sn(t,0)^45?(((e<<2^sn(t,0))<<2^sn(t,1))<<2^sn(t,2))<<2^sn(t,3):0}function VC(t){return t.trim()}function QU(t,e){return(t=e.exec(t))?t[0]:t}function Be(t,e,n){return t.replace(e,n)}function J0(t,e){return t.indexOf(e)}function sn(t,e){return t.charCodeAt(e)|0}function Yu(t,e,n){return t.slice(e,n)}function oi(t){return t.length}function Cx(t){return t.length}function Sd(t,e){return e.push(t),t}function JU(t,e){return t.map(e).join("")}var Lp=1,rl=1,GC=0,Fn=0,Pt=0,yl="";function kp(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Lp,column:rl,length:o,return:""}}function zl(t,e){return YU(kp("",null,null,"",null,null,0),t,{length:-t.length},e)}function ZU(){return Pt}function e3(){return Pt=Fn>0?sn(yl,--Fn):0,rl--,Pt===10&&(rl=1,Lp--),Pt}function Wn(){return Pt=Fn<GC?sn(yl,Fn++):0,rl++,Pt===10&&(rl=1,Lp++),Pt}function xi(){return sn(yl,Fn)}function uf(){return Fn}function kc(t,e){return Yu(yl,t,e)}function Xu(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function WC(t){return Lp=rl=1,GC=oi(yl=t),Fn=0,[]}function KC(t){return yl="",t}function cf(t){return VC(kc(Fn-1,Z0(t===91?t+2:t===40?t+1:t)))}function t3(t){for(;(Pt=xi())&&Pt<33;)Wn();return Xu(t)>2||Xu(Pt)>3?"":" "}function n3(t,e){for(;--e&&Wn()&&!(Pt<48||Pt>102||Pt>57&&Pt<65||Pt>70&&Pt<97););return kc(t,uf()+(e<6&&xi()==32&&Wn()==32))}function Z0(t){for(;Wn();)switch(Pt){case t:return Fn;case 34:case 39:t!==34&&t!==39&&Z0(Pt);break;case 40:t===41&&Z0(t);break;case 92:Wn();break}return Fn}function r3(t,e){for(;Wn()&&t+Pt!==57;)if(t+Pt===84&&xi()===47)break;return"/*"+kc(e,Fn-1)+"*"+Cp(t===47?t:Wn())}function i3(t){for(;!Xu(xi());)Wn();return kc(t,Fn)}function s3(t){return KC(df("",null,null,null,[""],t=WC(t),0,[0],t))}function df(t,e,n,r,i,s,o,a,l){for(var u=0,c=0,d=o,f=0,m=0,h=0,p=1,v=1,y=1,g=0,x="",b=i,E=s,T=r,w=x;v;)switch(h=g,g=Wn()){case 40:if(h!=108&&sn(w,d-1)==58){J0(w+=Be(cf(g),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:w+=cf(g);break;case 9:case 10:case 13:case 32:w+=t3(h);break;case 92:w+=n3(uf()-1,7);continue;case 47:switch(xi()){case 42:case 47:Sd(o3(r3(Wn(),uf()),e,n),l);break;default:w+="/"}break;case 123*p:a[u++]=oi(w)*y;case 125*p:case 59:case 0:switch(g){case 0:case 125:v=0;case 59+c:y==-1&&(w=Be(w,/\f/g,"")),m>0&&oi(w)-d&&Sd(m>32?yT(w+";",r,n,d-1):yT(Be(w," ","")+";",r,n,d-2),l);break;case 59:w+=";";default:if(Sd(T=gT(w,e,n,u,c,i,a,x,b=[],E=[],d),s),g===123)if(c===0)df(w,e,T,T,b,s,d,a,E);else switch(f===99&&sn(w,3)===110?100:f){case 100:case 108:case 109:case 115:df(t,T,T,r&&Sd(gT(t,T,T,0,0,i,a,x,i,b=[],d),E),i,E,d,a,r?b:E);break;default:df(w,T,T,T,[""],E,0,a,E)}}u=c=m=0,p=y=1,x=w="",d=o;break;case 58:d=1+oi(w),m=h;default:if(p<1){if(g==123)--p;else if(g==125&&p++==0&&e3()==125)continue}switch(w+=Cp(g),g*p){case 38:y=c>0?1:(w+="\f",-1);break;case 44:a[u++]=(oi(w)-1)*y,y=1;break;case 64:xi()===45&&(w+=cf(Wn())),f=xi(),c=d=oi(x=w+=i3(uf())),g++;break;case 45:h===45&&oi(w)==2&&(p=0)}}return s}function gT(t,e,n,r,i,s,o,a,l,u,c){for(var d=i-1,f=i===0?s:[""],m=Cx(f),h=0,p=0,v=0;h<r;++h)for(var y=0,g=Yu(t,d+1,d=qU(p=o[h])),x=t;y<m;++y)(x=VC(p>0?f[y]+" "+g:Be(g,/&\f/g,f[y])))&&(l[v++]=x);return kp(t,e,n,i===0?Ax:a,l,u,c)}function o3(t,e,n){return kp(t,e,n,HC,Cp(ZU()),Yu(t,2,-2),0)}function yT(t,e,n,r){return kp(t,e,n,_x,Yu(t,0,r),Yu(t,r+1,-1),r)}function Ba(t,e){for(var n="",r=Cx(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function a3(t,e,n,r){switch(t.type){case KU:if(t.children.length)break;case WU:case _x:return t.return=t.return||t.value;case HC:return"";case zC:return t.return=t.value+"{"+Ba(t.children,r)+"}";case Ax:t.value=t.props.join(",")}return oi(n=Ba(t.children,r))?t.return=t.value+"{"+n+"}":""}function l3(t){var e=Cx(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function u3(t){return function(e){e.root||(e=e.return)&&t(e)}}var c3=function(e,n,r){for(var i=0,s=0;i=s,s=xi(),i===38&&s===12&&(n[r]=1),!Xu(s);)Wn();return kc(e,Fn)},d3=function(e,n){var r=-1,i=44;do switch(Xu(i)){case 0:i===38&&xi()===12&&(n[r]=1),e[r]+=c3(Fn-1,n,r);break;case 2:e[r]+=cf(i);break;case 4:if(i===44){e[++r]=xi()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Cp(i)}while(i=Wn());return e},f3=function(e,n){return KC(d3(WC(e),n))},vT=new WeakMap,h3=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!vT.get(r))&&!i){vT.set(e,!0);for(var s=[],o=f3(n,s),a=r.props,l=0,u=0;l<o.length;l++)for(var c=0;c<a.length;c++,u++)e.props[u]=s[l]?o[l].replace(/&\f/g,a[c]):a[c]+" "+o[l]}}},p3=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function qC(t,e){switch(XU(t,e)){case 5103:return $e+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return $e+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return $e+t+ph+t+pn+t+t;case 6828:case 4268:return $e+t+pn+t+t;case 6165:return $e+t+pn+"flex-"+t+t;case 5187:return $e+t+Be(t,/(\w+).+(:[^]+)/,$e+"box-$1$2"+pn+"flex-$1$2")+t;case 5443:return $e+t+pn+"flex-item-"+Be(t,/flex-|-self/,"")+t;case 4675:return $e+t+pn+"flex-line-pack"+Be(t,/align-content|flex-|-self/,"")+t;case 5548:return $e+t+pn+Be(t,"shrink","negative")+t;case 5292:return $e+t+pn+Be(t,"basis","preferred-size")+t;case 6060:return $e+"box-"+Be(t,"-grow","")+$e+t+pn+Be(t,"grow","positive")+t;case 4554:return $e+Be(t,/([^-])(transform)/g,"$1"+$e+"$2")+t;case 6187:return Be(Be(Be(t,/(zoom-|grab)/,$e+"$1"),/(image-set)/,$e+"$1"),t,"")+t;case 5495:case 3959:return Be(t,/(image-set\([^]*)/,$e+"$1$`$1");case 4968:return Be(Be(t,/(.+:)(flex-)?(.*)/,$e+"box-pack:$3"+pn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+$e+t+t;case 4095:case 3583:case 4068:case 2532:return Be(t,/(.+)-inline(.+)/,$e+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(oi(t)-1-e>6)switch(sn(t,e+1)){case 109:if(sn(t,e+4)!==45)break;case 102:return Be(t,/(.+:)(.+)-([^]+)/,"$1"+$e+"$2-$3$1"+ph+(sn(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~J0(t,"stretch")?qC(Be(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(sn(t,e+1)!==115)break;case 6444:switch(sn(t,oi(t)-3-(~J0(t,"!important")&&10))){case 107:return Be(t,":",":"+$e)+t;case 101:return Be(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+$e+(sn(t,14)===45?"inline-":"")+"box$3$1"+$e+"$2$3$1"+pn+"$2box$3")+t}break;case 5936:switch(sn(t,e+11)){case 114:return $e+t+pn+Be(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return $e+t+pn+Be(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return $e+t+pn+Be(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return $e+t+pn+t+t}return t}var m3=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case _x:e.return=qC(e.value,e.length);break;case zC:return Ba([zl(e,{value:Be(e.value,"@","@"+$e)})],i);case Ax:if(e.length)return JU(e.props,function(s){switch(QU(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ba([zl(e,{props:[Be(s,/:(read-\w+)/,":"+ph+"$1")]})],i);case"::placeholder":return Ba([zl(e,{props:[Be(s,/:(plac\w+)/,":"+$e+"input-$1")]}),zl(e,{props:[Be(s,/:(plac\w+)/,":"+ph+"$1")]}),zl(e,{props:[Be(s,/:(plac\w+)/,pn+"input-$1")]})],i)}return""})}},g3=[m3],YC=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(p){var v=p.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(p),p.setAttribute("data-s",""))})}var i=e.stylisPlugins||g3,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(p){for(var v=p.getAttribute("data-emotion").split(" "),y=1;y<v.length;y++)s[v[y]]=!0;a.push(p)});var l,u=[h3,p3];{var c,d=[a3,u3(function(p){c.insert(p)})],f=l3(u.concat(i,d)),m=function(v){return Ba(s3(v),f)};l=function(v,y,g,x){c=g,m(v?v+"{"+y.styles+"}":y.styles),x&&(h.inserted[y.name]=!0)}}var h={key:n,sheet:new GU({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return h.sheet.hydrate(a),h},XC={exports:{}},We={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qt=typeof Symbol=="function"&&Symbol.for,Lx=Qt?Symbol.for("react.element"):60103,kx=Qt?Symbol.for("react.portal"):60106,Pp=Qt?Symbol.for("react.fragment"):60107,Ip=Qt?Symbol.for("react.strict_mode"):60108,Dp=Qt?Symbol.for("react.profiler"):60114,Op=Qt?Symbol.for("react.provider"):60109,Mp=Qt?Symbol.for("react.context"):60110,Px=Qt?Symbol.for("react.async_mode"):60111,Np=Qt?Symbol.for("react.concurrent_mode"):60111,Fp=Qt?Symbol.for("react.forward_ref"):60112,$p=Qt?Symbol.for("react.suspense"):60113,y3=Qt?Symbol.for("react.suspense_list"):60120,Bp=Qt?Symbol.for("react.memo"):60115,Up=Qt?Symbol.for("react.lazy"):60116,v3=Qt?Symbol.for("react.block"):60121,x3=Qt?Symbol.for("react.fundamental"):60117,S3=Qt?Symbol.for("react.responder"):60118,E3=Qt?Symbol.for("react.scope"):60119;function tr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Lx:switch(t=t.type,t){case Px:case Np:case Pp:case Dp:case Ip:case $p:return t;default:switch(t=t&&t.$$typeof,t){case Mp:case Fp:case Up:case Bp:case Op:return t;default:return e}}case kx:return e}}}function QC(t){return tr(t)===Np}We.AsyncMode=Px;We.ConcurrentMode=Np;We.ContextConsumer=Mp;We.ContextProvider=Op;We.Element=Lx;We.ForwardRef=Fp;We.Fragment=Pp;We.Lazy=Up;We.Memo=Bp;We.Portal=kx;We.Profiler=Dp;We.StrictMode=Ip;We.Suspense=$p;We.isAsyncMode=function(t){return QC(t)||tr(t)===Px};We.isConcurrentMode=QC;We.isContextConsumer=function(t){return tr(t)===Mp};We.isContextProvider=function(t){return tr(t)===Op};We.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lx};We.isForwardRef=function(t){return tr(t)===Fp};We.isFragment=function(t){return tr(t)===Pp};We.isLazy=function(t){return tr(t)===Up};We.isMemo=function(t){return tr(t)===Bp};We.isPortal=function(t){return tr(t)===kx};We.isProfiler=function(t){return tr(t)===Dp};We.isStrictMode=function(t){return tr(t)===Ip};We.isSuspense=function(t){return tr(t)===$p};We.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Pp||t===Np||t===Dp||t===Ip||t===$p||t===y3||typeof t=="object"&&t!==null&&(t.$$typeof===Up||t.$$typeof===Bp||t.$$typeof===Op||t.$$typeof===Mp||t.$$typeof===Fp||t.$$typeof===x3||t.$$typeof===S3||t.$$typeof===E3||t.$$typeof===v3)};We.typeOf=tr;XC.exports=We;var b3=XC.exports,JC=b3,T3={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},w3={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ZC={};ZC[JC.ForwardRef]=T3;ZC[JC.Memo]=w3;var R3=!0;function A3(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var eL=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||R3===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},tL=function(e,n,r){eL(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function _3(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var C3={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},L3=/[A-Z]|^ms/g,k3=/_EMO_([^_]+?)_([^]*?)_EMO_/g,nL=function(e){return e.charCodeAt(1)===45},xT=function(e){return e!=null&&typeof e!="boolean"},tg=jC(function(t){return nL(t)?t:t.replace(L3,"-$&").toLowerCase()}),ST=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(k3,function(r,i,s){return ai={name:i,styles:s,next:ai},i})}return C3[e]!==1&&!nL(e)&&typeof n=="number"&&n!==0?n+"px":n};function Qu(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return ai={name:n.name,styles:n.styles,next:ai},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)ai={name:r.name,styles:r.styles,next:ai},r=r.next;var i=n.styles+";";return i}return P3(t,e,n)}case"function":{if(t!==void 0){var s=ai,o=n(t);return ai=s,Qu(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function P3(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Qu(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":xT(o)&&(r+=tg(s)+":"+ST(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)xT(o[a])&&(r+=tg(s)+":"+ST(s,o[a])+";");else{var l=Qu(t,e,o);switch(s){case"animation":case"animationName":{r+=tg(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var ET=/label:\s*([^\s;\n{]+)\s*(;|$)/g,ai,Ix=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";ai=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=Qu(r,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=Qu(r,n,e[a]),i&&(s+=o[a]);ET.lastIndex=0;for(var l="",u;(u=ET.exec(s))!==null;)l+="-"+u[1];var c=_3(s)+l;return{name:c,styles:s,next:ai}},I3=function(e){return e()},rL=za.useInsertionEffect?za.useInsertionEffect:!1,D3=rL||I3,bT=rL||A.useLayoutEffect,iL=A.createContext(typeof HTMLElement<"u"?YC({key:"css"}):null),O3=iL.Provider,sL=function(e){return A.forwardRef(function(n,r){var i=A.useContext(iL);return e(n,i,r)})},jp=A.createContext({}),ng={exports:{}},TT;function oL(){return TT||(TT=1,function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(ng)),ng.exports}oL();var M3=sL(function(t,e){var n=t.styles,r=Ix([n],void 0,A.useContext(jp)),i=A.useRef();return bT(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),bT(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&tL(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function Hp(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ix(e)}var vl=function(){var e=Hp.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},N3=HU,F3=function(e){return e!=="theme"},wT=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?N3:F3},RT=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},$3=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return eL(n,r,i),D3(function(){return tL(n,r,i)}),null},B3=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=RT(e,n,r),l=a||wT(i),u=!l("as");return function(){var c=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&d.push("label:"+s+";"),c[0]==null||c[0].raw===void 0)d.push.apply(d,c);else{d.push(c[0][0]);for(var f=c.length,m=1;m<f;m++)d.push(c[m],c[0][m])}var h=sL(function(p,v,y){var g=u&&p.as||i,x="",b=[],E=p;if(p.theme==null){E={};for(var T in p)E[T]=p[T];E.theme=A.useContext(jp)}typeof p.className=="string"?x=A3(v.registered,b,p.className):p.className!=null&&(x=p.className+" ");var w=Ix(d.concat(b),v.registered,E);x+=v.key+"-"+w.name,o!==void 0&&(x+=" "+o);var _=u&&a===void 0?wT(g):l,k={};for(var L in p)u&&L==="as"||_(L)&&(k[L]=p[L]);return k.className=x,k.ref=y,A.createElement(A.Fragment,null,A.createElement($3,{cache:v,serialized:w,isStringTag:typeof g=="string"}),A.createElement(g,k))});return h.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",h.defaultProps=e.defaultProps,h.__emotion_real=h,h.__emotion_base=i,h.__emotion_styles=d,h.__emotion_forwardProp=a,Object.defineProperty(h,"toString",{value:function(){return"."+o}}),h.withComponent=function(p,v){return t(p,V({},n,v,{shouldForwardProp:RT(h,v,!0)})).apply(void 0,d)},h}},U3=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],ey=B3.bind();U3.forEach(function(t){ey[t]=ey(t)});let ty;typeof document=="object"&&(ty=YC({key:"css",prepend:!0}));function j3(t){const{injectFirst:e,children:n}=t;return e&&ty?S.jsx(O3,{value:ty,children:n}):n}function H3(t){return t==null||Object.keys(t).length===0}function z3(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(H3(i)?n:i):e;return S.jsx(M3,{styles:r})}function aL(t,e){return ey(t,e)}const lL=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},V3=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:z3,StyledEngineProvider:j3,ThemeContext:jp,css:Hp,default:aL,internal_processStyles:lL,keyframes:vl},Symbol.toStringTag,{value:"Module"}));function G3(t){return Object.keys(t).length===0}function W3(t=null){const e=A.useContext(jp);return!e||G3(e)?t:e}const K3=Lc();function uL(t=K3){return W3(t)}function cL({props:t,name:e,defaultTheme:n,themeId:r}){let i=uL(n);return r&&(i=i[r]||i),WB({theme:i,name:e,props:t})}const q3=["sx"],Y3=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:_c;return Object.keys(t).forEach(s=>{i[s]?r.systemProps[s]=t[s]:r.otherProps[s]=t[s]}),r};function dL(t){const{sx:e}=t,n=tt(t,q3),{systemProps:r,otherProps:i}=Y3(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return Wi(a)?V({},r,a):r}:s=V({},r,e),V({},i,{sx:s})}const X3=Object.freeze(Object.defineProperty({__proto__:null,default:Cc,extendSxProp:dL,unstable_createStyleFunctionSx:BC,unstable_defaultSxConfig:_c},Symbol.toStringTag,{value:"Module"}));function Q3(t,e){return V({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}var _t={};const J3=os(yB),Z3=os(GB);var fL=Nt;Object.defineProperty(_t,"__esModule",{value:!0});var Rs=_t.alpha=gL;_t.blend=fj;_t.colorChannel=void 0;var ej=_t.darken=Ox;_t.decomposeColor=Tr;_t.emphasize=dj;var tj=_t.getContrastRatio=aj;_t.getLuminance=mh;_t.hexToRgb=hL;_t.hslToRgb=mL;var nj=_t.lighten=Mx;_t.private_safeAlpha=lj;_t.private_safeColorChannel=void 0;_t.private_safeDarken=uj;_t.private_safeEmphasize=yL;_t.private_safeLighten=cj;_t.recomposeColor=xl;_t.rgbToHex=oj;var AT=fL(J3),rj=fL(Z3);function Dx(t,e=0,n=1){return(0,rj.default)(t,e,n)}function hL(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function ij(t){const e=t.toString(16);return e.length===1?`0${e}`:e}function Tr(t){if(t.type)return t;if(t.charAt(0)==="#")return Tr(hL(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,AT.default)(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error((0,AT.default)(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}const pL=t=>{const e=Tr(t);return e.values.slice(0,3).map((n,r)=>e.type.indexOf("hsl")!==-1&&r!==0?`${n}%`:n).join(" ")};_t.colorChannel=pL;const sj=(t,e)=>{try{return pL(t)}catch{return t}};_t.private_safeColorChannel=sj;function xl(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function oj(t){if(t.indexOf("#")===0)return t;const{values:e}=Tr(t);return`#${e.map((n,r)=>ij(r===3?Math.round(255*n):n)).join("")}`}function mL(t){t=Tr(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(u,c=(u+n/30)%12)=>i-s*Math.max(Math.min(c-3,9-c,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),xl({type:a,values:l})}function mh(t){t=Tr(t);let e=t.type==="hsl"||t.type==="hsla"?Tr(mL(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function aj(t,e){const n=mh(t),r=mh(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function gL(t,e){return t=Tr(t),e=Dx(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,xl(t)}function lj(t,e,n){try{return gL(t,e)}catch{return t}}function Ox(t,e){if(t=Tr(t),e=Dx(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return xl(t)}function uj(t,e,n){try{return Ox(t,e)}catch{return t}}function Mx(t,e){if(t=Tr(t),e=Dx(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return xl(t)}function cj(t,e,n){try{return Mx(t,e)}catch{return t}}function dj(t,e=.15){return mh(t)>.5?Ox(t,e):Mx(t,e)}function yL(t,e,n){try{return yL(t,e)}catch{return t}}function fj(t,e,n,r=1){const i=(l,u)=>Math.round((l**(1/r)*(1-n)+u**(1/r)*n)**r),s=Tr(t),o=Tr(e),a=[i(s.values[0],o.values[0]),i(s.values[1],o.values[1]),i(s.values[2],o.values[2])];return xl({type:"rgb",values:a})}const hj={black:"#000",white:"#fff"},Ju=hj,pj={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},mj=pj,gj={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},ta=gj,yj={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},na=yj,vj={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Vl=vj,xj={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},ra=xj,Sj={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},ia=Sj,Ej={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},sa=Ej,bj=["mode","contrastThreshold","tonalOffset"],_T={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Ju.white,default:Ju.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},rg={text:{primary:Ju.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Ju.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function CT(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=nj(t.main,i):e==="dark"&&(t.dark=ej(t.main,s)))}function Tj(t="light"){return t==="dark"?{main:ra[200],light:ra[50],dark:ra[400]}:{main:ra[700],light:ra[400],dark:ra[800]}}function wj(t="light"){return t==="dark"?{main:ta[200],light:ta[50],dark:ta[400]}:{main:ta[500],light:ta[300],dark:ta[700]}}function Rj(t="light"){return t==="dark"?{main:na[500],light:na[300],dark:na[700]}:{main:na[700],light:na[400],dark:na[800]}}function Aj(t="light"){return t==="dark"?{main:ia[400],light:ia[300],dark:ia[700]}:{main:ia[700],light:ia[500],dark:ia[900]}}function _j(t="light"){return t==="dark"?{main:sa[400],light:sa[300],dark:sa[700]}:{main:sa[800],light:sa[500],dark:sa[900]}}function Cj(t="light"){return t==="dark"?{main:Vl[400],light:Vl[300],dark:Vl[700]}:{main:"#ed6c02",light:Vl[500],dark:Vl[900]}}function Lj(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=tt(t,bj),s=t.primary||Tj(e),o=t.secondary||wj(e),a=t.error||Rj(e),l=t.info||Aj(e),u=t.success||_j(e),c=t.warning||Cj(e);function d(p){return tj(p,rg.text.primary)>=n?rg.text.primary:_T.text.primary}const f=({color:p,name:v,mainShade:y=500,lightShade:g=300,darkShade:x=700})=>{if(p=V({},p),!p.main&&p[y]&&(p.main=p[y]),!p.hasOwnProperty("main"))throw new Error(qu(11,v?` (${v})`:"",y));if(typeof p.main!="string")throw new Error(qu(12,v?` (${v})`:"",JSON.stringify(p.main)));return CT(p,"light",g,r),CT(p,"dark",x,r),p.contrastText||(p.contrastText=d(p.main)),p},m={dark:rg,light:_T};return xr(V({common:V({},Ju),mode:e,primary:f({color:s,name:"primary"}),secondary:f({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:a,name:"error"}),warning:f({color:c,name:"warning"}),info:f({color:l,name:"info"}),success:f({color:u,name:"success"}),grey:mj,contrastThreshold:n,getContrastText:d,augmentColor:f,tonalOffset:r},m[e]),i)}const kj=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Pj(t){return Math.round(t*1e5)/1e5}const LT={textTransform:"uppercase"},kT='"Roboto", "Helvetica", "Arial", sans-serif';function Ij(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=kT,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:u=16,allVariants:c,pxToRem:d}=n,f=tt(n,kj),m=i/14,h=d||(y=>`${y/u*m}rem`),p=(y,g,x,b,E)=>V({fontFamily:r,fontWeight:y,fontSize:h(g),lineHeight:x},r===kT?{letterSpacing:`${Pj(b/g)}em`}:{},E,c),v={h1:p(s,96,1.167,-1.5),h2:p(s,60,1.2,-.5),h3:p(o,48,1.167,0),h4:p(o,34,1.235,.25),h5:p(o,24,1.334,0),h6:p(a,20,1.6,.15),subtitle1:p(o,16,1.75,.15),subtitle2:p(a,14,1.57,.1),body1:p(o,16,1.5,.15),body2:p(o,14,1.43,.15),button:p(a,14,1.75,.4,LT),caption:p(o,12,1.66,.4),overline:p(o,12,2.66,1,LT),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return xr(V({htmlFontSize:u,pxToRem:h,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},v),f,{clone:!1})}const Dj=.2,Oj=.14,Mj=.12;function ot(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${Dj})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${Oj})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${Mj})`].join(",")}const Nj=["none",ot(0,2,1,-1,0,1,1,0,0,1,3,0),ot(0,3,1,-2,0,2,2,0,0,1,5,0),ot(0,3,3,-2,0,3,4,0,0,1,8,0),ot(0,2,4,-1,0,4,5,0,0,1,10,0),ot(0,3,5,-1,0,5,8,0,0,1,14,0),ot(0,3,5,-1,0,6,10,0,0,1,18,0),ot(0,4,5,-2,0,7,10,1,0,2,16,1),ot(0,5,5,-3,0,8,10,1,0,3,14,2),ot(0,5,6,-3,0,9,12,1,0,3,16,2),ot(0,6,6,-3,0,10,14,1,0,4,18,3),ot(0,6,7,-4,0,11,15,1,0,4,20,3),ot(0,7,8,-4,0,12,17,2,0,5,22,4),ot(0,7,8,-4,0,13,19,2,0,5,24,4),ot(0,7,9,-4,0,14,21,2,0,5,26,4),ot(0,8,9,-5,0,15,22,2,0,6,28,5),ot(0,8,10,-5,0,16,24,2,0,6,30,5),ot(0,8,11,-5,0,17,26,2,0,6,32,5),ot(0,9,11,-5,0,18,28,2,0,7,34,6),ot(0,9,12,-6,0,19,29,2,0,7,36,6),ot(0,10,13,-6,0,20,31,3,0,8,38,7),ot(0,10,13,-6,0,21,33,3,0,8,40,7),ot(0,10,14,-6,0,22,35,3,0,8,42,7),ot(0,11,14,-7,0,23,36,3,0,9,44,8),ot(0,11,15,-7,0,24,38,3,0,9,46,8)],Fj=["duration","easing","delay"],$j={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Bj={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function PT(t){return`${Math.round(t)}ms`}function Uj(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function jj(t){const e=V({},$j,t.easing),n=V({},Bj,t.duration);return V({getAutoHeightDuration:Uj,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return tt(s,Fj),(Array.isArray(i)?i:[i]).map(u=>`${u} ${typeof o=="string"?o:PT(o)} ${a} ${typeof l=="string"?l:PT(l)}`).join(",")}},t,{easing:e,duration:n})}const Hj={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},zj=Hj,Vj=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Gj(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=t,o=tt(t,Vj);if(t.vars)throw new Error(qu(18));const a=Lj(r),l=Lc(t);let u=xr(l,{mixins:Q3(l.breakpoints,n),palette:a,shadows:Nj.slice(),typography:Ij(a,s),transitions:jj(i),zIndex:V({},zj)});return u=xr(u,o),u=e.reduce((c,d)=>xr(c,d),u),u.unstable_sxConfig=V({},_c,o==null?void 0:o.unstable_sxConfig),u.unstable_sx=function(d){return Cc({sx:d,theme:this})},u}const Wj=Gj(),Nx=Wj,Fx="$$material";function cs({props:t,name:e}){return cL({props:t,name:e,defaultTheme:Nx,themeId:Fx})}var Pc={},ig={exports:{}},IT;function Kj(){return IT||(IT=1,function(t){function e(n,r){if(n==null)return{};var i={},s=Object.keys(n),o,a;for(a=0;a<s.length;a++)o=s[a],!(r.indexOf(o)>=0)&&(i[o]=n[o]);return i}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(ig)),ig.exports}const vL=os(V3),qj=os(pB),Yj=os(TB),Xj=os(bB),Qj=os(UU),Jj=os(X3);var Sl=Nt;Object.defineProperty(Pc,"__esModule",{value:!0});var Zj=Pc.default=h4,e4=Pc.shouldForwardProp=ff;Pc.systemDefaultTheme=void 0;var ur=Sl(oL()),ny=Sl(Kj()),DT=a4(vL),t4=qj;Sl(Yj);Sl(Xj);var n4=Sl(Qj),r4=Sl(Jj);const i4=["ownerState"],s4=["variants"],o4=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function xL(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(xL=function(r){return r?n:e})(t)}function a4(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=xL(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function l4(t){return Object.keys(t).length===0}function u4(t){return typeof t=="string"&&t.charCodeAt(0)>96}function ff(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const c4=Pc.systemDefaultTheme=(0,n4.default)(),d4=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function Ed({defaultTheme:t,theme:e,themeId:n}){return l4(e)?t:e[n]||e}function f4(t){return t?(e,n)=>n[t]:null}function hf(t,e){let{ownerState:n}=e,r=(0,ny.default)(e,i4);const i=typeof t=="function"?t((0,ur.default)({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap(s=>hf(s,(0,ur.default)({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:s=[]}=i;let a=(0,ny.default)(i,s4);return s.forEach(l=>{let u=!0;typeof l.props=="function"?u=l.props((0,ur.default)({ownerState:n},r,n)):Object.keys(l.props).forEach(c=>{(n==null?void 0:n[c])!==l.props[c]&&r[c]!==l.props[c]&&(u=!1)}),u&&(Array.isArray(a)||(a=[a]),a.push(typeof l.style=="function"?l.style((0,ur.default)({ownerState:n},r,n)):l.style))}),a}return i}function h4(t={}){const{themeId:e,defaultTheme:n=c4,rootShouldForwardProp:r=ff,slotShouldForwardProp:i=ff}=t,s=o=>(0,r4.default)((0,ur.default)({},o,{theme:Ed((0,ur.default)({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{(0,DT.internal_processStyles)(o,E=>E.filter(T=>!(T!=null&&T.__mui_systemSx)));const{name:l,slot:u,skipVariantsResolver:c,skipSx:d,overridesResolver:f=f4(d4(u))}=a,m=(0,ny.default)(a,o4),h=c!==void 0?c:u&&u!=="Root"&&u!=="root"||!1,p=d||!1;let v,y=ff;u==="Root"||u==="root"?y=r:u?y=i:u4(o)&&(y=void 0);const g=(0,DT.default)(o,(0,ur.default)({shouldForwardProp:y,label:v},m)),x=E=>typeof E=="function"&&E.__emotion_real!==E||(0,t4.isPlainObject)(E)?T=>hf(E,(0,ur.default)({},T,{theme:Ed({theme:T.theme,defaultTheme:n,themeId:e})})):E,b=(E,...T)=>{let w=x(E);const _=T?T.map(x):[];l&&f&&_.push(P=>{const H=Ed((0,ur.default)({},P,{defaultTheme:n,themeId:e}));if(!H.components||!H.components[l]||!H.components[l].styleOverrides)return null;const F=H.components[l].styleOverrides,Y={};return Object.entries(F).forEach(([K,W])=>{Y[K]=hf(W,(0,ur.default)({},P,{theme:H}))}),f(P,Y)}),l&&!h&&_.push(P=>{var H;const F=Ed((0,ur.default)({},P,{defaultTheme:n,themeId:e})),Y=F==null||(H=F.components)==null||(H=H[l])==null?void 0:H.variants;return hf({variants:Y},(0,ur.default)({},P,{theme:F}))}),p||_.push(s);const k=_.length-T.length;if(Array.isArray(E)&&k>0){const P=new Array(k).fill("");w=[...E,...P],w.raw=[...E.raw,...P]}const L=g(w,..._);return o.muiName&&(L.muiName=o.muiName),L};return g.withConfig&&(b.withConfig=g.withConfig),b}}const p4=t=>e4(t)&&t!=="classes",un=Zj({themeId:Fx,defaultTheme:Nx,rootShouldForwardProp:p4});function m4(t){return eo("MuiSvgIcon",t)}Yo("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const g4=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],y4=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${Ot(e)}`,`fontSize${Ot(n)}`]};return Zs(i,m4,r)},v4=un("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${Ot(n.color)}`],e[`fontSize${Ot(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,i,s,o,a,l,u,c,d,f,m,h;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=t.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((s=t.typography)==null||(o=s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem",medium:((a=t.typography)==null||(l=a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem",large:((u=t.typography)==null||(c=u.pxToRem)==null?void 0:c.call(u,35))||"2.1875rem"}[e.fontSize],color:(d=(f=(t.vars||t).palette)==null||(f=f[e.color])==null?void 0:f.main)!=null?d:{action:(m=(t.vars||t).palette)==null||(m=m.action)==null?void 0:m.active,disabled:(h=(t.vars||t).palette)==null||(h=h.action)==null?void 0:h.disabled,inherit:void 0}[e.color]}}),ry=A.forwardRef(function(e,n){const r=cs({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:u,inheritViewBox:c=!1,titleAccess:d,viewBox:f="0 0 24 24"}=r,m=tt(r,g4),h=A.isValidElement(i)&&i.type==="svg",p=V({},r,{color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:c,viewBox:f,hasSvgAsChild:h}),v={};c||(v.viewBox=f);const y=y4(p);return S.jsxs(v4,V({as:a,className:Ut(y.root,s),focusable:"false",color:u,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:n},v,m,h&&i.props,{ownerState:p,children:[h?i.props.children:i,d?S.jsx("title",{children:d}):null]}))});ry.muiName="SvgIcon";function Ic(t,e){function n(r,i){return S.jsx(ry,V({"data-testid":`${e}Icon`,ref:i},r,{children:t}))}return n.muiName=ry.muiName,A.memo(A.forwardRef(n))}const x4={configure:t=>{IC.configure(t)}},S4=Object.freeze(Object.defineProperty({__proto__:null,capitalize:Ot,createChainedFunction:wB,createSvgIcon:Ic,debounce:RB,deprecatedPropType:AB,isMuiElement:_B,ownerDocument:dh,ownerWindow:CB,requirePropFactory:LB,setRef:fh,unstable_ClassNameGenerator:x4,unstable_useEnhancedEffect:nl,unstable_useId:kC,unsupportedProp:IB,useControlled:xx,useEventCallback:Co,useForkRef:rs,useIsFocusVisible:Sx},Symbol.toStringTag,{value:"Module"})),E4=os(S4);var OT;function Jt(){return OT||(OT=1,function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=E4}(Ym)),Ym}var b4=Nt;Object.defineProperty(gx,"__esModule",{value:!0});var $x=gx.default=void 0,T4=b4(Jt()),w4=S;$x=gx.default=(0,T4.default)((0,w4.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite");var Bx={},R4=Nt;Object.defineProperty(Bx,"__esModule",{value:!0});var Ux=Bx.default=void 0,A4=R4(Jt()),_4=S;Ux=Bx.default=(0,A4.default)((0,_4.jsx)("path",{d:"M14 6v15H3v-2h2V3h9v1h5v15h2v2h-4V6zm-4 5v2h2v-2z"}),"MeetingRoom");var jx={},C4=Nt;Object.defineProperty(jx,"__esModule",{value:!0});var SL=jx.default=void 0,L4=C4(Jt()),MT=S;SL=jx.default=(0,L4.default)([(0,MT.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,MT.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");var Hx={},k4=Nt;Object.defineProperty(Hx,"__esModule",{value:!0});var EL=Hx.default=void 0,P4=k4(Jt()),I4=S;EL=Hx.default=(0,P4.default)((0,I4.jsx)("path",{d:"M14.43 10 12 2l-2.43 8H2l6.18 4.41L5.83 22 12 17.31 18.18 22l-2.35-7.59L22 10z"}),"StarRate");function D4(t){return typeof t=="string"}function ru(t,e,n){return t===void 0||D4(t)?e:V({},e,{ownerState:V({},e.ownerState,n)})}const O4={disableDefaultClasses:!1},M4=A.createContext(O4);function N4(t){const{disableDefaultClasses:e}=A.useContext(M4);return n=>e?"":t(n)}function F4(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function $4(t,e,n){return typeof t=="function"?t(e,n):t}function bL(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=bL(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function NT(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=bL(t))&&(r&&(r+=" "),r+=e);return r}function FT(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function B4(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=t;if(!e){const m=NT(n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),h=V({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),p=V({},n,i,r);return m.length>0&&(p.className=m),Object.keys(h).length>0&&(p.style=h),{props:p,internalRef:void 0}}const o=F4(V({},i,r)),a=FT(r),l=FT(i),u=e(o),c=NT(u==null?void 0:u.className,n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),d=V({},u==null?void 0:u.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),f=V({},u,n,l,a);return c.length>0&&(f.className=c),Object.keys(d).length>0&&(f.style=d),{props:f,internalRef:u.ref}}const U4=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function j4(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:s=!1}=t,o=tt(t,U4),a=s?{}:$4(r,i),{props:l,internalRef:u}=B4(V({},o,{externalSlotProps:a})),c=rs(u,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return ru(n,V({},l,{ref:c}),i)}const H4=A.createContext(),TL=()=>{const t=A.useContext(H4);return t??!1};function wL(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=wL(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function z4(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=wL(t))&&(r&&(r+=" "),r+=e);return r}const V4=["ownerState"],G4=["variants"],W4=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function K4(t){return Object.keys(t).length===0}function q4(t){return typeof t=="string"&&t.charCodeAt(0)>96}function sg(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const Y4=Lc(),X4=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function bd({defaultTheme:t,theme:e,themeId:n}){return K4(e)?t:e[n]||e}function Q4(t){return t?(e,n)=>n[t]:null}function pf(t,e){let{ownerState:n}=e,r=tt(e,V4);const i=typeof t=="function"?t(V({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap(s=>pf(s,V({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:s=[]}=i;let a=tt(i,G4);return s.forEach(l=>{let u=!0;typeof l.props=="function"?u=l.props(V({ownerState:n},r,n)):Object.keys(l.props).forEach(c=>{(n==null?void 0:n[c])!==l.props[c]&&r[c]!==l.props[c]&&(u=!1)}),u&&(Array.isArray(a)||(a=[a]),a.push(typeof l.style=="function"?l.style(V({ownerState:n},r,n)):l.style))}),a}return i}function J4(t={}){const{themeId:e,defaultTheme:n=Y4,rootShouldForwardProp:r=sg,slotShouldForwardProp:i=sg}=t,s=o=>Cc(V({},o,{theme:bd(V({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{lL(o,E=>E.filter(T=>!(T!=null&&T.__mui_systemSx)));const{name:l,slot:u,skipVariantsResolver:c,skipSx:d,overridesResolver:f=Q4(X4(u))}=a,m=tt(a,W4),h=c!==void 0?c:u&&u!=="Root"&&u!=="root"||!1,p=d||!1;let v,y=sg;u==="Root"||u==="root"?y=r:u?y=i:q4(o)&&(y=void 0);const g=aL(o,V({shouldForwardProp:y,label:v},m)),x=E=>typeof E=="function"&&E.__emotion_real!==E||Wi(E)?T=>pf(E,V({},T,{theme:bd({theme:T.theme,defaultTheme:n,themeId:e})})):E,b=(E,...T)=>{let w=x(E);const _=T?T.map(x):[];l&&f&&_.push(P=>{const H=bd(V({},P,{defaultTheme:n,themeId:e}));if(!H.components||!H.components[l]||!H.components[l].styleOverrides)return null;const F=H.components[l].styleOverrides,Y={};return Object.entries(F).forEach(([K,W])=>{Y[K]=pf(W,V({},P,{theme:H}))}),f(P,Y)}),l&&!h&&_.push(P=>{var H;const F=bd(V({},P,{defaultTheme:n,themeId:e})),Y=F==null||(H=F.components)==null||(H=H[l])==null?void 0:H.variants;return pf({variants:Y},V({},P,{theme:F}))}),p||_.push(s);const k=_.length-T.length;if(Array.isArray(E)&&k>0){const P=new Array(k).fill("");w=[...E,...P],w.raw=[...E.raw,...P]}const L=g(w,..._);return o.muiName&&(L.muiName=o.muiName),L};return g.withConfig&&(b.withConfig=g.withConfig),b}}const Z4=J4(),e5=["component","direction","spacing","divider","children","className","useFlexGap"],t5=Lc(),n5=Z4("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function r5(t){return cL({props:t,name:"MuiStack",defaultTheme:t5})}function i5(t,e){const n=A.Children.toArray(t).filter(Boolean);return n.reduce((r,i,s)=>(r.push(i),s<n.length-1&&r.push(A.cloneElement(e,{key:`separator-${s}`})),r),[])}const s5=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],o5=({ownerState:t,theme:e})=>{let n=V({display:"flex",flexDirection:"column"},Qr({theme:e},eg({values:t.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r})));if(t.spacing){const r=wx(e),i=Object.keys(e.breakpoints.values).reduce((l,u)=>((typeof t.spacing=="object"&&t.spacing[u]!=null||typeof t.direction=="object"&&t.direction[u]!=null)&&(l[u]=!0),l),{}),s=eg({values:t.direction,base:i}),o=eg({values:t.spacing,base:i});typeof s=="object"&&Object.keys(s).forEach((l,u,c)=>{if(!s[l]){const f=u>0?s[c[u-1]]:"column";s[l]=f}}),n=xr(n,Qr({theme:e},o,(l,u)=>t.useFlexGap?{gap:Vo(r,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${s5(u?s[u]:t.direction)}`]:Vo(r,l)}}))}return n=QB(e.breakpoints,n),n};function a5(t={}){const{createStyledComponent:e=n5,useThemeProps:n=r5,componentName:r="MuiStack"}=t,i=()=>Zs({root:["root"]},l=>eo(r,l),{}),s=e(o5);return A.forwardRef(function(l,u){const c=n(l),d=dL(c),{component:f="div",direction:m="column",spacing:h=0,divider:p,children:v,className:y,useFlexGap:g=!1}=d,x=tt(d,e5),b={direction:m,spacing:h,useFlexGap:g},E=i();return S.jsx(s,V({as:f,ownerState:b,ref:u,className:z4(E.root,y)},x,{children:p?i5(v,p):v}))})}function RL(){const t=uL(Nx);return t[Fx]||t}function iy(t,e){return iy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},iy(t,e)}function AL(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,iy(t,e)}const $T={disabled:!1},gh=be.createContext(null);var l5=function(e){return e.scrollTop},iu="unmounted",yo="exited",vo="entering",ha="entered",sy="exiting",ds=function(t){AL(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=yo,s.appearStatus=vo):l=ha:r.unmountOnExit||r.mountOnEnter?l=iu:l=yo,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===iu?{status:yo}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==vo&&o!==ha&&(s=vo):(o===vo||o===ha)&&(s=sy)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===vo){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:tu.findDOMNode(this);o&&l5(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===yo&&this.setState({status:iu})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[tu.findDOMNode(this),a],u=l[0],c=l[1],d=this.getTimeouts(),f=a?d.appear:d.enter;if(!i&&!o||$T.disabled){this.safeSetState({status:ha},function(){s.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:vo},function(){s.props.onEntering(u,c),s.onTransitionEnd(f,function(){s.safeSetState({status:ha},function(){s.props.onEntered(u,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:tu.findDOMNode(this);if(!s||$T.disabled){this.safeSetState({status:yo},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:sy},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:yo},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:tu.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===iu)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=tt(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return be.createElement(gh.Provider,{value:null},typeof o=="function"?o(i,a):be.cloneElement(be.Children.only(o),a))},e}(be.Component);ds.contextType=gh;ds.propTypes={};function oa(){}ds.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:oa,onEntering:oa,onEntered:oa,onExit:oa,onExiting:oa,onExited:oa};ds.UNMOUNTED=iu;ds.EXITED=yo;ds.ENTERING=vo;ds.ENTERED=ha;ds.EXITING=sy;const u5=ds;function c5(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zx(t,e){var n=function(s){return e&&A.isValidElement(s)?e(s):s},r=Object.create(null);return t&&A.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function d5(t,e){t=t||{},e=e||{};function n(c){return c in e?e[c]:t[c]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var u=r[l][o];a[r[l][o]]=n(u)}a[l]=n(l)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function Lo(t,e,n){return n[e]!=null?n[e]:t.props[e]}function f5(t,e){return zx(t.children,function(n){return A.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Lo(n,"appear",t),enter:Lo(n,"enter",t),exit:Lo(n,"exit",t)})})}function h5(t,e,n){var r=zx(t.children),i=d5(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(A.isValidElement(o)){var a=s in e,l=s in r,u=e[s],c=A.isValidElement(u)&&!u.props.in;l&&(!a||c)?i[s]=A.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Lo(o,"exit",t),enter:Lo(o,"enter",t)}):!l&&a&&!c?i[s]=A.cloneElement(o,{in:!1}):l&&a&&A.isValidElement(u)&&(i[s]=A.cloneElement(o,{onExited:n.bind(null,o),in:u.props.in,exit:Lo(o,"exit",t),enter:Lo(o,"enter",t)}))}}),i}var p5=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},m5={component:"div",childFactory:function(e){return e}},Vx=function(t){AL(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=s.handleExited.bind(c5(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?f5(i,a):h5(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=zx(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=V({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=tt(i,["component","childFactory"]),l=this.state.contextValue,u=p5(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?be.createElement(gh.Provider,{value:l},u):be.createElement(gh.Provider,{value:l},be.createElement(s,a,u))},e}(be.Component);Vx.propTypes={};Vx.defaultProps=m5;const g5=Vx,y5=t=>t.scrollTop;function BT(t,e){var n,r;const{timeout:i,easing:s,style:o={}}=t;return{duration:(n=o.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=o.transitionTimingFunction)!=null?r:typeof s=="object"?s[e.mode]:s,delay:o.transitionDelay}}const v5=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function oy(t){return`scale(${t}, ${t**2})`}const x5={entering:{opacity:1,transform:oy(1)},entered:{opacity:1,transform:"none"}},og=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),_L=A.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:s,easing:o,in:a,onEnter:l,onEntered:u,onEntering:c,onExit:d,onExited:f,onExiting:m,style:h,timeout:p="auto",TransitionComponent:v=u5}=e,y=tt(e,v5),g=ka(),x=A.useRef(),b=RL(),E=A.useRef(null),T=rs(E,s.ref,n),w=K=>W=>{if(K){const X=E.current;W===void 0?K(X):K(X,W)}},_=w(c),k=w((K,W)=>{y5(K);const{duration:X,delay:U,easing:$}=BT({style:h,timeout:p,easing:o},{mode:"enter"});let B;p==="auto"?(B=b.transitions.getAutoHeightDuration(K.clientHeight),x.current=B):B=X,K.style.transition=[b.transitions.create("opacity",{duration:B,delay:U}),b.transitions.create("transform",{duration:og?B:B*.666,delay:U,easing:$})].join(","),l&&l(K,W)}),L=w(u),P=w(m),H=w(K=>{const{duration:W,delay:X,easing:U}=BT({style:h,timeout:p,easing:o},{mode:"exit"});let $;p==="auto"?($=b.transitions.getAutoHeightDuration(K.clientHeight),x.current=$):$=W,K.style.transition=[b.transitions.create("opacity",{duration:$,delay:X}),b.transitions.create("transform",{duration:og?$:$*.666,delay:og?X:X||$*.333,easing:U})].join(","),K.style.opacity=0,K.style.transform=oy(.75),d&&d(K)}),F=w(f),Y=K=>{p==="auto"&&g.start(x.current||0,K),r&&r(E.current,K)};return S.jsx(v,V({appear:i,in:a,nodeRef:E,onEnter:k,onEntered:L,onEntering:_,onExit:H,onExited:F,onExiting:P,addEndListener:Y,timeout:p==="auto"?null:p},y,{children:(K,W)=>A.cloneElement(s,V({style:V({opacity:0,transform:oy(.75),visibility:K==="exited"&&!a?"hidden":void 0},x5[K],h,s.props.style),ref:T},W))}))});_L.muiSupportAuto=!0;const UT=_L;var Mn="top",wr="bottom",Rr="right",Nn="left",Gx="auto",Dc=[Mn,wr,Rr,Nn],il="start",Zu="end",S5="clippingParents",CL="viewport",Gl="popper",E5="reference",jT=Dc.reduce(function(t,e){return t.concat([e+"-"+il,e+"-"+Zu])},[]),LL=[].concat(Dc,[Gx]).reduce(function(t,e){return t.concat([e,e+"-"+il,e+"-"+Zu])},[]),b5="beforeRead",T5="read",w5="afterRead",R5="beforeMain",A5="main",_5="afterMain",C5="beforeWrite",L5="write",k5="afterWrite",P5=[b5,T5,w5,R5,A5,_5,C5,L5,k5];function Ti(t){return t?(t.nodeName||"").toLowerCase():null}function Xn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Go(t){var e=Xn(t).Element;return t instanceof e||t instanceof Element}function Sr(t){var e=Xn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Wx(t){if(typeof ShadowRoot>"u")return!1;var e=Xn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function I5(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!Sr(s)||!Ti(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function D5(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,u){return l[u]="",l},{});!Sr(i)||!Ti(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const O5={name:"applyStyles",enabled:!0,phase:"write",fn:I5,effect:D5,requires:["computeStyles"]};function Si(t){return t.split("-")[0]}var No=Math.max,yh=Math.min,sl=Math.round;function ay(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function kL(){return!/^((?!chrome|android).)*safari/i.test(ay())}function ol(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&Sr(t)&&(i=t.offsetWidth>0&&sl(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&sl(r.height)/t.offsetHeight||1);var o=Go(t)?Xn(t):window,a=o.visualViewport,l=!kL()&&n,u=(r.left+(l&&a?a.offsetLeft:0))/i,c=(r.top+(l&&a?a.offsetTop:0))/s,d=r.width/i,f=r.height/s;return{width:d,height:f,top:c,right:u+d,bottom:c+f,left:u,x:u,y:c}}function Kx(t){var e=ol(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function PL(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Wx(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function is(t){return Xn(t).getComputedStyle(t)}function M5(t){return["table","td","th"].indexOf(Ti(t))>=0}function to(t){return((Go(t)?t.ownerDocument:t.document)||window.document).documentElement}function zp(t){return Ti(t)==="html"?t:t.assignedSlot||t.parentNode||(Wx(t)?t.host:null)||to(t)}function HT(t){return!Sr(t)||is(t).position==="fixed"?null:t.offsetParent}function N5(t){var e=/firefox/i.test(ay()),n=/Trident/i.test(ay());if(n&&Sr(t)){var r=is(t);if(r.position==="fixed")return null}var i=zp(t);for(Wx(i)&&(i=i.host);Sr(i)&&["html","body"].indexOf(Ti(i))<0;){var s=is(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Oc(t){for(var e=Xn(t),n=HT(t);n&&M5(n)&&is(n).position==="static";)n=HT(n);return n&&(Ti(n)==="html"||Ti(n)==="body"&&is(n).position==="static")?e:n||N5(t)||e}function qx(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function xu(t,e,n){return No(t,yh(e,n))}function F5(t,e,n){var r=xu(t,e,n);return r>n?n:r}function IL(){return{top:0,right:0,bottom:0,left:0}}function DL(t){return Object.assign({},IL(),t)}function OL(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var $5=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,DL(typeof e!="number"?e:OL(e,Dc))};function B5(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Si(n.placement),l=qx(a),u=[Nn,Rr].indexOf(a)>=0,c=u?"height":"width";if(!(!s||!o)){var d=$5(i.padding,n),f=Kx(s),m=l==="y"?Mn:Nn,h=l==="y"?wr:Rr,p=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],v=o[l]-n.rects.reference[l],y=Oc(s),g=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,x=p/2-v/2,b=d[m],E=g-f[c]-d[h],T=g/2-f[c]/2+x,w=xu(b,T,E),_=l;n.modifiersData[r]=(e={},e[_]=w,e.centerOffset=w-T,e)}}function U5(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||PL(e.elements.popper,i)&&(e.elements.arrow=i))}const j5={name:"arrow",enabled:!0,phase:"main",fn:B5,effect:U5,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function al(t){return t.split("-")[1]}var H5={top:"auto",right:"auto",bottom:"auto",left:"auto"};function z5(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:sl(n*i)/i||0,y:sl(r*i)/i||0}}function zT(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,d=t.isFixed,f=o.x,m=f===void 0?0:f,h=o.y,p=h===void 0?0:h,v=typeof c=="function"?c({x:m,y:p}):{x:m,y:p};m=v.x,p=v.y;var y=o.hasOwnProperty("x"),g=o.hasOwnProperty("y"),x=Nn,b=Mn,E=window;if(u){var T=Oc(n),w="clientHeight",_="clientWidth";if(T===Xn(n)&&(T=to(n),is(T).position!=="static"&&a==="absolute"&&(w="scrollHeight",_="scrollWidth")),T=T,i===Mn||(i===Nn||i===Rr)&&s===Zu){b=wr;var k=d&&T===E&&E.visualViewport?E.visualViewport.height:T[w];p-=k-r.height,p*=l?1:-1}if(i===Nn||(i===Mn||i===wr)&&s===Zu){x=Rr;var L=d&&T===E&&E.visualViewport?E.visualViewport.width:T[_];m-=L-r.width,m*=l?1:-1}}var P=Object.assign({position:a},u&&H5),H=c===!0?z5({x:m,y:p},Xn(n)):{x:m,y:p};if(m=H.x,p=H.y,l){var F;return Object.assign({},P,(F={},F[b]=g?"0":"",F[x]=y?"0":"",F.transform=(E.devicePixelRatio||1)<=1?"translate("+m+"px, "+p+"px)":"translate3d("+m+"px, "+p+"px, 0)",F))}return Object.assign({},P,(e={},e[b]=g?p+"px":"",e[x]=y?m+"px":"",e.transform="",e))}function V5(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,u={placement:Si(e.placement),variation:al(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,zT(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,zT(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const G5={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:V5,data:{}};var Td={passive:!0};function W5(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=Xn(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",n.update,Td)}),a&&l.addEventListener("resize",n.update,Td),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",n.update,Td)}),a&&l.removeEventListener("resize",n.update,Td)}}const K5={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:W5,data:{}};var q5={left:"right",right:"left",bottom:"top",top:"bottom"};function mf(t){return t.replace(/left|right|bottom|top/g,function(e){return q5[e]})}var Y5={start:"end",end:"start"};function VT(t){return t.replace(/start|end/g,function(e){return Y5[e]})}function Yx(t){var e=Xn(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Xx(t){return ol(to(t)).left+Yx(t).scrollLeft}function X5(t,e){var n=Xn(t),r=to(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var u=kL();(u||!u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+Xx(t),y:l}}function Q5(t){var e,n=to(t),r=Yx(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=No(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=No(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+Xx(t),l=-r.scrollTop;return is(i||n).direction==="rtl"&&(a+=No(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function Qx(t){var e=is(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function ML(t){return["html","body","#document"].indexOf(Ti(t))>=0?t.ownerDocument.body:Sr(t)&&Qx(t)?t:ML(zp(t))}function Su(t,e){var n;e===void 0&&(e=[]);var r=ML(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Xn(r),o=i?[s].concat(s.visualViewport||[],Qx(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(Su(zp(o)))}function ly(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function J5(t,e){var n=ol(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function GT(t,e,n){return e===CL?ly(X5(t,n)):Go(e)?J5(e,n):ly(Q5(to(t)))}function Z5(t){var e=Su(zp(t)),n=["absolute","fixed"].indexOf(is(t).position)>=0,r=n&&Sr(t)?Oc(t):t;return Go(r)?e.filter(function(i){return Go(i)&&PL(i,r)&&Ti(i)!=="body"}):[]}function e8(t,e,n,r){var i=e==="clippingParents"?Z5(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,u){var c=GT(t,u,r);return l.top=No(c.top,l.top),l.right=yh(c.right,l.right),l.bottom=yh(c.bottom,l.bottom),l.left=No(c.left,l.left),l},GT(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function NL(t){var e=t.reference,n=t.element,r=t.placement,i=r?Si(r):null,s=r?al(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Mn:l={x:o,y:e.y-n.height};break;case wr:l={x:o,y:e.y+e.height};break;case Rr:l={x:e.x+e.width,y:a};break;case Nn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var u=i?qx(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case il:l[u]=l[u]-(e[c]/2-n[c]/2);break;case Zu:l[u]=l[u]+(e[c]/2-n[c]/2);break}}return l}function ec(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?S5:a,u=n.rootBoundary,c=u===void 0?CL:u,d=n.elementContext,f=d===void 0?Gl:d,m=n.altBoundary,h=m===void 0?!1:m,p=n.padding,v=p===void 0?0:p,y=DL(typeof v!="number"?v:OL(v,Dc)),g=f===Gl?E5:Gl,x=t.rects.popper,b=t.elements[h?g:f],E=e8(Go(b)?b:b.contextElement||to(t.elements.popper),l,c,o),T=ol(t.elements.reference),w=NL({reference:T,element:x,strategy:"absolute",placement:i}),_=ly(Object.assign({},x,w)),k=f===Gl?_:T,L={top:E.top-k.top+y.top,bottom:k.bottom-E.bottom+y.bottom,left:E.left-k.left+y.left,right:k.right-E.right+y.right},P=t.modifiersData.offset;if(f===Gl&&P){var H=P[i];Object.keys(L).forEach(function(F){var Y=[Rr,wr].indexOf(F)>=0?1:-1,K=[Mn,wr].indexOf(F)>=0?"y":"x";L[F]+=H[K]*Y})}return L}function t8(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?LL:l,c=al(r),d=c?a?jT:jT.filter(function(h){return al(h)===c}):Dc,f=d.filter(function(h){return u.indexOf(h)>=0});f.length===0&&(f=d);var m=f.reduce(function(h,p){return h[p]=ec(t,{placement:p,boundary:i,rootBoundary:s,padding:o})[Si(p)],h},{});return Object.keys(m).sort(function(h,p){return m[h]-m[p]})}function n8(t){if(Si(t)===Gx)return[];var e=mf(t);return[VT(t),e,VT(e)]}function r8(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,m=n.flipVariations,h=m===void 0?!0:m,p=n.allowedAutoPlacements,v=e.options.placement,y=Si(v),g=y===v,x=l||(g||!h?[mf(v)]:n8(v)),b=[v].concat(x).reduce(function(oe,ge){return oe.concat(Si(ge)===Gx?t8(e,{placement:ge,boundary:c,rootBoundary:d,padding:u,flipVariations:h,allowedAutoPlacements:p}):ge)},[]),E=e.rects.reference,T=e.rects.popper,w=new Map,_=!0,k=b[0],L=0;L<b.length;L++){var P=b[L],H=Si(P),F=al(P)===il,Y=[Mn,wr].indexOf(H)>=0,K=Y?"width":"height",W=ec(e,{placement:P,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),X=Y?F?Rr:Nn:F?wr:Mn;E[K]>T[K]&&(X=mf(X));var U=mf(X),$=[];if(s&&$.push(W[H]<=0),a&&$.push(W[X]<=0,W[U]<=0),$.every(function(oe){return oe})){k=P,_=!1;break}w.set(P,$)}if(_)for(var B=h?3:1,te=function(ge){var ye=b.find(function(Oe){var nt=w.get(Oe);if(nt)return nt.slice(0,ge).every(function(Qe){return Qe})});if(ye)return k=ye,"break"},Z=B;Z>0;Z--){var de=te(Z);if(de==="break")break}e.placement!==k&&(e.modifiersData[r]._skip=!0,e.placement=k,e.reset=!0)}}const i8={name:"flip",enabled:!0,phase:"main",fn:r8,requiresIfExists:["offset"],data:{_skip:!1}};function WT(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function KT(t){return[Mn,Rr,wr,Nn].some(function(e){return t[e]>=0})}function s8(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=ec(e,{elementContext:"reference"}),a=ec(e,{altBoundary:!0}),l=WT(o,r),u=WT(a,i,s),c=KT(l),d=KT(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const o8={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:s8};function a8(t,e,n){var r=Si(t),i=[Nn,Mn].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Nn,Rr].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function l8(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=LL.reduce(function(c,d){return c[d]=a8(d,e.rects,s),c},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}const u8={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:l8};function c8(t){var e=t.state,n=t.name;e.modifiersData[n]=NL({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const d8={name:"popperOffsets",enabled:!0,phase:"read",fn:c8,data:{}};function f8(t){return t==="x"?"y":"x"}function h8(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,d=n.padding,f=n.tether,m=f===void 0?!0:f,h=n.tetherOffset,p=h===void 0?0:h,v=ec(e,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),y=Si(e.placement),g=al(e.placement),x=!g,b=qx(y),E=f8(b),T=e.modifiersData.popperOffsets,w=e.rects.reference,_=e.rects.popper,k=typeof p=="function"?p(Object.assign({},e.rects,{placement:e.placement})):p,L=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),P=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,H={x:0,y:0};if(T){if(s){var F,Y=b==="y"?Mn:Nn,K=b==="y"?wr:Rr,W=b==="y"?"height":"width",X=T[b],U=X+v[Y],$=X-v[K],B=m?-_[W]/2:0,te=g===il?w[W]:_[W],Z=g===il?-_[W]:-w[W],de=e.elements.arrow,oe=m&&de?Kx(de):{width:0,height:0},ge=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:IL(),ye=ge[Y],Oe=ge[K],nt=xu(0,w[W],oe[W]),Qe=x?w[W]/2-B-nt-ye-L.mainAxis:te-nt-ye-L.mainAxis,Zr=x?-w[W]/2+B+nt+Oe+L.mainAxis:Z+nt+Oe+L.mainAxis,Je=e.elements.arrow&&Oc(e.elements.arrow),kr=Je?b==="y"?Je.clientTop||0:Je.clientLeft||0:0,ki=(F=P==null?void 0:P[b])!=null?F:0,fs=X+Qe-ki-kr,Ct=X+Zr-ki,Pi=xu(m?yh(U,fs):U,X,m?No($,Ct):$);T[b]=Pi,H[b]=Pi-X}if(a){var hs,Pr=b==="x"?Mn:Nn,ps=b==="x"?wr:Rr,Zt=T[E],cn=E==="y"?"height":"width",nr=Zt+v[Pr],rr=Zt-v[ps],Lt=[Mn,Nn].indexOf(y)!==-1,Ht=(hs=P==null?void 0:P[E])!=null?hs:0,ir=Lt?nr:Zt-w[cn]-_[cn]-Ht+L.altAxis,$n=Lt?Zt+w[cn]+_[cn]-Ht-L.altAxis:rr,ms=m&&Lt?F5(ir,Zt,$n):xu(m?ir:nr,Zt,m?$n:rr);T[E]=ms,H[E]=ms-Zt}e.modifiersData[r]=H}}const p8={name:"preventOverflow",enabled:!0,phase:"main",fn:h8,requiresIfExists:["offset"]};function m8(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function g8(t){return t===Xn(t)||!Sr(t)?Yx(t):m8(t)}function y8(t){var e=t.getBoundingClientRect(),n=sl(e.width)/t.offsetWidth||1,r=sl(e.height)/t.offsetHeight||1;return n!==1||r!==1}function v8(t,e,n){n===void 0&&(n=!1);var r=Sr(e),i=Sr(e)&&y8(e),s=to(e),o=ol(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Ti(e)!=="body"||Qx(s))&&(a=g8(e)),Sr(e)?(l=ol(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=Xx(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function x8(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function S8(t){var e=x8(t);return P5.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function E8(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function b8(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var qT={placement:"bottom",modifiers:[],strategy:"absolute"};function YT(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function T8(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?qT:i;return function(a,l,u){u===void 0&&(u=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},qT,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,m={state:c,setOptions:function(y){var g=typeof y=="function"?y(c.options):y;p(),c.options=Object.assign({},s,c.options,g),c.scrollParents={reference:Go(a)?Su(a):a.contextElement?Su(a.contextElement):[],popper:Su(l)};var x=S8(b8([].concat(r,c.options.modifiers)));return c.orderedModifiers=x.filter(function(b){return b.enabled}),h(),m.update()},forceUpdate:function(){if(!f){var y=c.elements,g=y.reference,x=y.popper;if(YT(g,x)){c.rects={reference:v8(g,Oc(x),c.options.strategy==="fixed"),popper:Kx(x)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(L){return c.modifiersData[L.name]=Object.assign({},L.data)});for(var b=0;b<c.orderedModifiers.length;b++){if(c.reset===!0){c.reset=!1,b=-1;continue}var E=c.orderedModifiers[b],T=E.fn,w=E.options,_=w===void 0?{}:w,k=E.name;typeof T=="function"&&(c=T({state:c,options:_,name:k,instance:m})||c)}}}},update:E8(function(){return new Promise(function(v){m.forceUpdate(),v(c)})}),destroy:function(){p(),f=!0}};if(!YT(a,l))return m;m.setOptions(u).then(function(v){!f&&u.onFirstUpdate&&u.onFirstUpdate(v)});function h(){c.orderedModifiers.forEach(function(v){var y=v.name,g=v.options,x=g===void 0?{}:g,b=v.effect;if(typeof b=="function"){var E=b({state:c,name:y,instance:m,options:x}),T=function(){};d.push(E||T)}})}function p(){d.forEach(function(v){return v()}),d=[]}return m}}var w8=[K5,d8,G5,O5,u8,i8,p8,j5,o8],R8=T8({defaultModifiers:w8});function A8(t){return typeof t=="function"?t():t}const _8=A.forwardRef(function(e,n){const{children:r,container:i,disablePortal:s=!1}=e,[o,a]=A.useState(null),l=rs(A.isValidElement(r)?r.ref:null,n);if(nl(()=>{s||a(A8(i)||document.body)},[i,s]),nl(()=>{if(o&&!s)return fh(n,o),()=>{fh(n,null)}},[n,o,s]),s){if(A.isValidElement(r)){const u={ref:l};return A.cloneElement(r,u)}return S.jsx(A.Fragment,{children:r})}return S.jsx(A.Fragment,{children:o&&pc.createPortal(r,o)})}),FL="base";function C8(t){return`${FL}--${t}`}function L8(t,e){return`${FL}-${t}-${e}`}function $L(t,e){const n=DC[e];return n?C8(n):L8(t,e)}function k8(t,e){const n={};return e.forEach(r=>{n[r]=$L(t,r)}),n}const BL="Popper";function P8(t){return $L(BL,t)}k8(BL,["root"]);const I8=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],D8=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function O8(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function uy(t){return typeof t=="function"?t():t}function M8(t){return t.nodeType!==void 0}const N8=()=>Zs({root:["root"]},N4(P8)),F8={},$8=A.forwardRef(function(e,n){var r;const{anchorEl:i,children:s,direction:o,disablePortal:a,modifiers:l,open:u,placement:c,popperOptions:d,popperRef:f,slotProps:m={},slots:h={},TransitionProps:p}=e,v=tt(e,I8),y=A.useRef(null),g=rs(y,n),x=A.useRef(null),b=rs(x,f),E=A.useRef(b);nl(()=>{E.current=b},[b]),A.useImperativeHandle(f,()=>x.current,[]);const T=O8(c,o),[w,_]=A.useState(T),[k,L]=A.useState(uy(i));A.useEffect(()=>{x.current&&x.current.forceUpdate()}),A.useEffect(()=>{i&&L(uy(i))},[i]),nl(()=>{if(!k||!u)return;const K=U=>{_(U.placement)};let W=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:U})=>{K(U)}}];l!=null&&(W=W.concat(l)),d&&d.modifiers!=null&&(W=W.concat(d.modifiers));const X=R8(k,y.current,V({placement:T},d,{modifiers:W}));return E.current(X),()=>{X.destroy(),E.current(null)}},[k,a,l,u,d,T]);const P={placement:w};p!==null&&(P.TransitionProps=p);const H=N8(),F=(r=h.root)!=null?r:"div",Y=j4({elementType:F,externalSlotProps:m.root,externalForwardedProps:v,additionalProps:{role:"tooltip",ref:g},ownerState:e,className:H.root});return S.jsx(F,V({},Y,{children:typeof s=="function"?s(P):s}))}),B8=A.forwardRef(function(e,n){const{anchorEl:r,children:i,container:s,direction:o="ltr",disablePortal:a=!1,keepMounted:l=!1,modifiers:u,open:c,placement:d="bottom",popperOptions:f=F8,popperRef:m,style:h,transition:p=!1,slotProps:v={},slots:y={}}=e,g=tt(e,D8),[x,b]=A.useState(!0),E=()=>{b(!1)},T=()=>{b(!0)};if(!l&&!c&&(!p||x))return null;let w;if(s)w=s;else if(r){const L=uy(r);w=L&&M8(L)?dh(L).body:dh(null).body}const _=!c&&l&&(!p||x)?"none":void 0,k=p?{in:c,onEnter:E,onExited:T}:void 0;return S.jsx(_8,{disablePortal:a,container:w,children:S.jsx($8,V({anchorEl:r,direction:o,disablePortal:a,modifiers:u,ref:n,open:p?!x:c,placement:d,popperOptions:f,popperRef:m,slotProps:v,slots:y},g,{style:V({position:"fixed",top:0,left:0,display:_},h),TransitionProps:k,children:i}))})});var Jx={};Object.defineProperty(Jx,"__esModule",{value:!0});var UL=Jx.default=void 0,U8=H8(A),j8=vL;function jL(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(jL=function(r){return r?n:e})(t)}function H8(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=jL(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function z8(t){return Object.keys(t).length===0}function V8(t=null){const e=U8.useContext(j8.ThemeContext);return!e||z8(e)?t:e}UL=Jx.default=V8;const G8=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],W8=un(B8,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),K8=A.forwardRef(function(e,n){var r;const i=UL(),s=cs({props:e,name:"MuiPopper"}),{anchorEl:o,component:a,components:l,componentsProps:u,container:c,disablePortal:d,keepMounted:f,modifiers:m,open:h,placement:p,popperOptions:v,popperRef:y,transition:g,slots:x,slotProps:b}=s,E=tt(s,G8),T=(r=x==null?void 0:x.root)!=null?r:l==null?void 0:l.Root,w=V({anchorEl:o,container:c,disablePortal:d,keepMounted:f,modifiers:m,open:h,placement:p,popperOptions:v,popperRef:y,transition:g},E);return S.jsx(W8,V({as:a,direction:i==null?void 0:i.direction,slots:{root:T},slotProps:b??u},w,{ref:n}))}),HL=K8;function q8(t){return eo("MuiTooltip",t)}const Y8=Yo("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),Ds=Y8,X8=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function Q8(t){return Math.round(t*1e5)/1e5}const J8=t=>{const{classes:e,disableInteractive:n,arrow:r,touch:i,placement:s}=t,o={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${Ot(s.split("-")[0])}`],arrow:["arrow"]};return Zs(o,q8,e)},Z8=un(HL,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(({theme:t,ownerState:e,open:n})=>V({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!n&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${Ds.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Ds.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Ds.arrow}`]:V({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${Ds.arrow}`]:V({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),e6=un("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${Ot(n.placement.split("-")[0])}`]]}})(({theme:t,ownerState:e})=>V({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:Rs(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${Q8(16/14)}em`,fontWeight:t.typography.fontWeightRegular},{[`.${Ds.popper}[data-popper-placement*="left"] &`]:V({transformOrigin:"right center"},e.isRtl?V({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):V({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${Ds.popper}[data-popper-placement*="right"] &`]:V({transformOrigin:"left center"},e.isRtl?V({marginRight:"14px"},e.touch&&{marginRight:"24px"}):V({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${Ds.popper}[data-popper-placement*="top"] &`]:V({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${Ds.popper}[data-popper-placement*="bottom"] &`]:V({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),t6=un("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:Rs(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let wd=!1;const XT=new Rc;let Wl={x:0,y:0};function Rd(t,e){return(n,...r)=>{e&&e(n,...r),t(n,...r)}}const n6=A.forwardRef(function(e,n){var r,i,s,o,a,l,u,c,d,f,m,h,p,v,y,g,x,b,E;const T=cs({props:e,name:"MuiTooltip"}),{arrow:w=!1,children:_,components:k={},componentsProps:L={},describeChild:P=!1,disableFocusListener:H=!1,disableHoverListener:F=!1,disableInteractive:Y=!1,disableTouchListener:K=!1,enterDelay:W=100,enterNextDelay:X=0,enterTouchDelay:U=700,followCursor:$=!1,id:B,leaveDelay:te=0,leaveTouchDelay:Z=1500,onClose:de,onOpen:oe,open:ge,placement:ye="bottom",PopperComponent:Oe,PopperProps:nt={},slotProps:Qe={},slots:Zr={},title:Je,TransitionComponent:kr=UT,TransitionProps:ki}=T,fs=tt(T,X8),Ct=A.isValidElement(_)?_:S.jsx("span",{children:_}),Pi=RL(),hs=TL(),[Pr,ps]=A.useState(),[Zt,cn]=A.useState(null),nr=A.useRef(!1),rr=Y||$,Lt=ka(),Ht=ka(),ir=ka(),$n=ka(),[ms,ae]=xx({controlled:ge,default:!1,name:"Tooltip",state:"open"});let xn=ms;const gs=kC(B),Ir=A.useRef(),ro=Co(()=>{Ir.current!==void 0&&(document.body.style.WebkitUserSelect=Ir.current,Ir.current=void 0),$n.clear()});A.useEffect(()=>ro,[ro]);const wl=we=>{XT.clear(),wd=!0,ae(!0),oe&&!xn&&oe(we)},Ii=Co(we=>{XT.start(800+te,()=>{wd=!1}),ae(!1),de&&xn&&de(we),Lt.start(Pi.transitions.duration.shortest,()=>{nr.current=!1})}),io=we=>{nr.current&&we.type!=="touchstart"||(Pr&&Pr.removeAttribute("title"),Ht.clear(),ir.clear(),W||wd&&X?Ht.start(wd?X:W,()=>{wl(we)}):wl(we))},so=we=>{Ht.clear(),ir.start(te,()=>{Ii(we)})},{isFocusVisibleRef:Hc,onBlur:zc,onFocus:rm,ref:Vc}=Sx(),[,Gc]=A.useState(!1),I=we=>{zc(we),Hc.current===!1&&(Gc(!1),so(we))},M=we=>{Pr||ps(we.currentTarget),rm(we),Hc.current===!0&&(Gc(!0),io(we))},j=we=>{nr.current=!0;const kt=Ct.props;kt.onTouchStart&&kt.onTouchStart(we)},Q=we=>{j(we),ir.clear(),Lt.clear(),ro(),Ir.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",$n.start(U,()=>{document.body.style.WebkitUserSelect=Ir.current,io(we)})},ie=we=>{Ct.props.onTouchEnd&&Ct.props.onTouchEnd(we),ro(),ir.start(Z,()=>{Ii(we)})};A.useEffect(()=>{if(!xn)return;function we(kt){(kt.key==="Escape"||kt.key==="Esc")&&Ii(kt)}return document.addEventListener("keydown",we),()=>{document.removeEventListener("keydown",we)}},[Ii,xn]);const Te=rs(Ct.ref,Vc,ps,n);!Je&&Je!==0&&(xn=!1);const fe=A.useRef(),ue=we=>{const kt=Ct.props;kt.onMouseMove&&kt.onMouseMove(we),Wl={x:we.clientX,y:we.clientY},fe.current&&fe.current.update()},se={},Re=typeof Je=="string";P?(se.title=!xn&&Re&&!F?Je:null,se["aria-describedby"]=xn?gs:null):(se["aria-label"]=Re?Je:null,se["aria-labelledby"]=xn&&!Re?gs:null);const Ue=V({},se,fs,Ct.props,{className:Ut(fs.className,Ct.props.className),onTouchStart:j,ref:Te},$?{onMouseMove:ue}:{}),ve={};K||(Ue.onTouchStart=Q,Ue.onTouchEnd=ie),F||(Ue.onMouseOver=Rd(io,Ue.onMouseOver),Ue.onMouseLeave=Rd(so,Ue.onMouseLeave),rr||(ve.onMouseOver=io,ve.onMouseLeave=so)),H||(Ue.onFocus=Rd(M,Ue.onFocus),Ue.onBlur=Rd(I,Ue.onBlur),rr||(ve.onFocus=M,ve.onBlur=I));const Ke=A.useMemo(()=>{var we;let kt=[{name:"arrow",enabled:!!Zt,options:{element:Zt,padding:4}}];return(we=nt.popperOptions)!=null&&we.modifiers&&(kt=kt.concat(nt.popperOptions.modifiers)),V({},nt.popperOptions,{modifiers:kt})},[Zt,nt]),ut=V({},T,{isRtl:hs,arrow:w,disableInteractive:rr,placement:ye,PopperComponentProp:Oe,touch:nr.current}),en=J8(ut),Et=(r=(i=Zr.popper)!=null?i:k.Popper)!=null?r:Z8,Di=(s=(o=(a=Zr.transition)!=null?a:k.Transition)!=null?o:kr)!=null?s:UT,Xo=(l=(u=Zr.tooltip)!=null?u:k.Tooltip)!=null?l:e6,Oi=(c=(d=Zr.arrow)!=null?d:k.Arrow)!=null?c:t6,ei=ru(Et,V({},nt,(f=Qe.popper)!=null?f:L.popper,{className:Ut(en.popper,nt==null?void 0:nt.className,(m=(h=Qe.popper)!=null?h:L.popper)==null?void 0:m.className)}),ut),Mi=ru(Di,V({},ki,(p=Qe.transition)!=null?p:L.transition),ut),Rl=ru(Xo,V({},(v=Qe.tooltip)!=null?v:L.tooltip,{className:Ut(en.tooltip,(y=(g=Qe.tooltip)!=null?g:L.tooltip)==null?void 0:y.className)}),ut),oo=ru(Oi,V({},(x=Qe.arrow)!=null?x:L.arrow,{className:Ut(en.arrow,(b=(E=Qe.arrow)!=null?E:L.arrow)==null?void 0:b.className)}),ut);return S.jsxs(A.Fragment,{children:[A.cloneElement(Ct,Ue),S.jsx(Et,V({as:Oe??HL,placement:ye,anchorEl:$?{getBoundingClientRect:()=>({top:Wl.y,left:Wl.x,right:Wl.x,bottom:Wl.y,width:0,height:0})}:Pr,popperRef:fe,open:Pr?xn:!1,id:gs,transition:!0},ve,ei,{popperOptions:Ke,children:({TransitionProps:we})=>S.jsx(Di,V({timeout:Pi.transitions.duration.shorter},we,Mi,{children:S.jsxs(Xo,V({},Rl,{children:[Je,w?S.jsx(Oi,V({},oo,{ref:cn})):null]}))}))}))]})}),tc=n6;var Zx={},r6=Nt;Object.defineProperty(Zx,"__esModule",{value:!0});var zL=Zx.default=void 0,i6=r6(Jt()),s6=S;zL=Zx.default=(0,i6.default)((0,s6.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever");const VL=be.forwardRef(function(e,n){const{item:r,type:i,sx:s,...o}=e;return S.jsx("div",{...o,ref:n,children:S.jsx(mx,{action:{type:"addToFav",data:e.item,mType:e.type},inner:S.jsx($x,{sx:qv})})})}),o6=be.forwardRef(function(e,n){const{item:r,type:i,setItems:s,sx:o,...a}=e;return S.jsx("div",{...a,ref:n,children:S.jsx(mx,{action:{type:"removeFromFav",data:e.item,mType:e.type,setItems:s},inner:S.jsx(zL,{sx:qv})})})}),GL=be.forwardRef(function(e,n){const{item:r,type:i,season:s,episode:o,sx:a,...l}=e;return S.jsx("div",{...l,ref:n,children:S.jsx(mx,{action:{type:"addToRoom",season:s,episode:o,data:e.item,mType:i},inner:S.jsx(Ux,{sx:qv})})})}),a6=({item:t,type:e,setItems:n})=>{const r=t.media_type||t.type||e,i=t.id||t.tmdbId,s=t.media_type==="tv"||e==="tv"||t.type==="tv";return S.jsxs("div",{className:"card "+Or.card,children:[S.jsxs("div",{className:Or.card_h,children:[S.jsxs("div",{className:Or.info,children:[S.jsx("div",{className:Or.ibrashira,children:S.jsx(Kv,{})}),S.jsx(T_,{inner:"Play",to:`/${r}/${i}${s?`/${t.season||1}/${t.episode||1}`:""}`}),S.jsxs("div",{className:Or.extraButtons,children:[e!=="Favorite"&&e!="Resume Watching"&&S.jsx(tc,{title:"Add to my favorite list",arrow:!0,sx:{marginTop:"0px"},placement:"bottom",children:S.jsx(VL,{item:t,type:r})}),e==="Favorite"&&S.jsx(tc,{title:"Remove From my favorite list",arrow:!0,sx:{marginTop:"0px"},placement:"bottom",children:S.jsx(o6,{setItems:n,item:t,type:r})})]})]}),S.jsx(rB,{src:`https://image.tmdb.org/t/p/w500${t.poster_path}`})]}),S.jsxs("div",{className:Or.card_b,children:[S.jsxs("div",{className:Or.contant,children:[S.jsx("span",{className:Or.lang,children:t.season&&t.type==="tv"&&`S${t.season}E${t.episode}`||t.media_type||t.original_language||"En"}),S.jsxs("div",{children:[S.jsxs("span",{className:Or.lang,children:[S.jsx(SL,{className:"yearx",sx:{fontSize:"1em",color:"var(--baseColor)"}}),t.time&&(t.time/60).toFixed(1)+" m"||new Date(t.release_date||t.first_air_date).getFullYear()||"NaN"]}),S.jsxs("span",{className:Or.lang,children:[S.jsx(EL,{sx:{fontSize:"1.2em",color:"var(--baseColor)"}}),t.vote_average&&t.vote_average.toFixed(1)||t.type||"NAN"]})]})]}),S.jsx("div",{className:Or.name,children:t.title||t.name})]})]})},Lr=({shortText:t,headerText:e,TopRight:n,items:r,type:i})=>{const s=Jh(),o=Array.from({length:12},(a,l)=>S.jsx(DN,{},l));return S.jsxs("section",{id:"h_text",className:"container_x",children:[S.jsxs("div",{className:Mm.top_bar,children:[S.jsx("h5",{children:t}),S.jsxs("div",{children:[S.jsx("h1",{children:e}),n||(i==="movie"||i==="tv")&&S.jsx(qt,{to:`/${i}`,children:"View All"})]})]}),s.state==="loading"&&S.jsx("div",{className:Mm.cards,children:o}),s.state==="idle"&&S.jsx("div",{className:Mm.cards,children:S.jsx(A.Suspense,{fallback:o,children:S.jsx(Zh,{resolve:r,children:a=>!a||a.err?S.jsx("h2",{children:a!=null&&a.err?a.err:"-There are currently no items to display."}):!a.result||a.result.length===0?S.jsx("h2",{children:"-There are currently no items to display."}):S.jsx(l6,{items:a.result,type:i})})})})]})},l6=({items:t,type:e})=>{const[n,r]=A.useState(t);return n.map((i,s)=>S.jsx(a6,{setItems:r,item:i,type:e},s))};var WL={},Vp={},eS={},ag={},QT;function u6(){return QT||(QT=1,function(t){(function(e,n){n(t,A,RC())})(Vw,function(e,n,r){Object.defineProperty(e,"__esModule",{value:!0}),e.setHasSupportToCaptureOption=h;var i=o(n),s=o(r);function o(g){return g&&g.__esModule?g:{default:g}}var a=Object.assign||function(g){for(var x=1;x<arguments.length;x++){var b=arguments[x];for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&(g[E]=b[E])}return g};function l(g,x){var b={};for(var E in g)x.indexOf(E)>=0||Object.prototype.hasOwnProperty.call(g,E)&&(b[E]=g[E]);return b}function u(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}var c=function(){function g(x,b){for(var E=0;E<b.length;E++){var T=b[E];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(x,T.key,T)}}return function(x,b,E){return b&&g(x.prototype,b),E&&g(x,E),x}}();function d(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function f(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var m=!1;function h(g){m=g}try{addEventListener("test",null,Object.defineProperty({},"capture",{get:function(){h(!0)}}))}catch{}function p(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{capture:!0};return m?g:g.capture}function v(g){if("touches"in g){var x=g.touches[0],b=x.pageX,E=x.pageY;return{x:b,y:E}}var T=g.screenX,w=g.screenY;return{x:T,y:w}}var y=function(g){f(x,g);function x(){var b;u(this,x);for(var E=arguments.length,T=Array(E),w=0;w<E;w++)T[w]=arguments[w];var _=d(this,(b=x.__proto__||Object.getPrototypeOf(x)).call.apply(b,[this].concat(T)));return _._handleSwipeStart=_._handleSwipeStart.bind(_),_._handleSwipeMove=_._handleSwipeMove.bind(_),_._handleSwipeEnd=_._handleSwipeEnd.bind(_),_._onMouseDown=_._onMouseDown.bind(_),_._onMouseMove=_._onMouseMove.bind(_),_._onMouseUp=_._onMouseUp.bind(_),_._setSwiperRef=_._setSwiperRef.bind(_),_}return c(x,[{key:"componentDidMount",value:function(){this.swiper&&this.swiper.addEventListener("touchmove",this._handleSwipeMove,p({capture:!0,passive:!1}))}},{key:"componentWillUnmount",value:function(){this.swiper&&this.swiper.removeEventListener("touchmove",this._handleSwipeMove,p({capture:!0,passive:!1}))}},{key:"_onMouseDown",value:function(E){this.props.allowMouseEvents&&(this.mouseDown=!0,document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("mousemove",this._onMouseMove),this._handleSwipeStart(E))}},{key:"_onMouseMove",value:function(E){this.mouseDown&&this._handleSwipeMove(E)}},{key:"_onMouseUp",value:function(E){this.mouseDown=!1,document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("mousemove",this._onMouseMove),this._handleSwipeEnd(E)}},{key:"_handleSwipeStart",value:function(E){var T=v(E),w=T.x,_=T.y;this.moveStart={x:w,y:_},this.props.onSwipeStart(E)}},{key:"_handleSwipeMove",value:function(E){if(this.moveStart){var T=v(E),w=T.x,_=T.y,k=w-this.moveStart.x,L=_-this.moveStart.y;this.moving=!0;var P=this.props.onSwipeMove({x:k,y:L},E);P&&E.cancelable&&E.preventDefault(),this.movePosition={deltaX:k,deltaY:L}}}},{key:"_handleSwipeEnd",value:function(E){this.props.onSwipeEnd(E);var T=this.props.tolerance;this.moving&&this.movePosition&&(this.movePosition.deltaX<-T?this.props.onSwipeLeft(1,E):this.movePosition.deltaX>T&&this.props.onSwipeRight(1,E),this.movePosition.deltaY<-T?this.props.onSwipeUp(1,E):this.movePosition.deltaY>T&&this.props.onSwipeDown(1,E)),this.moveStart=null,this.moving=!1,this.movePosition=null}},{key:"_setSwiperRef",value:function(E){this.swiper=E,this.props.innerRef(E)}},{key:"render",value:function(){var E=this.props;E.tagName;var T=E.className,w=E.style,_=E.children;E.allowMouseEvents,E.onSwipeUp,E.onSwipeDown,E.onSwipeLeft,E.onSwipeRight,E.onSwipeStart,E.onSwipeMove,E.onSwipeEnd,E.innerRef,E.tolerance;var k=l(E,["tagName","className","style","children","allowMouseEvents","onSwipeUp","onSwipeDown","onSwipeLeft","onSwipeRight","onSwipeStart","onSwipeMove","onSwipeEnd","innerRef","tolerance"]);return i.default.createElement(this.props.tagName,a({ref:this._setSwiperRef,onMouseDown:this._onMouseDown,onTouchStart:this._handleSwipeStart,onTouchEnd:this._handleSwipeEnd,className:T,style:w},k),_)}}]),x}(n.Component);y.displayName="ReactSwipe",y.propTypes={tagName:s.default.string,className:s.default.string,style:s.default.object,children:s.default.node,allowMouseEvents:s.default.bool,onSwipeUp:s.default.func,onSwipeDown:s.default.func,onSwipeLeft:s.default.func,onSwipeRight:s.default.func,onSwipeStart:s.default.func,onSwipeMove:s.default.func,onSwipeEnd:s.default.func,innerRef:s.default.func,tolerance:s.default.number.isRequired},y.defaultProps={tagName:"div",allowMouseEvents:!1,onSwipeUp:function(){},onSwipeDown:function(){},onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeStart:function(){},onSwipeMove:function(){},onSwipeEnd:function(){},innerRef:function(){},tolerance:0},e.default=y})}(ag)),ag}(function(t){(function(e,n){n(t,u6())})(Vw,function(e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=i(n);function i(s){return s&&s.__esModule?s:{default:s}}e.default=r.default})})(eS);var Mc={},KL={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(KL);var c6=KL.exports;Object.defineProperty(Mc,"__esModule",{value:!0});Mc.default=void 0;var xs=d6(c6);function d6(t){return t&&t.__esModule?t:{default:t}}function f6(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h6={ROOT:function(e){return(0,xs.default)(f6({"carousel-root":!0},e||"",!!e))},CAROUSEL:function(e){return(0,xs.default)({carousel:!0,"carousel-slider":e})},WRAPPER:function(e,n){return(0,xs.default)({"thumbs-wrapper":!e,"slider-wrapper":e,"axis-horizontal":n==="horizontal","axis-vertical":n!=="horizontal"})},SLIDER:function(e,n){return(0,xs.default)({thumbs:!e,slider:e,animated:!n})},ITEM:function(e,n,r){return(0,xs.default)({thumb:!e,slide:e,selected:n,previous:r})},ARROW_PREV:function(e){return(0,xs.default)({"control-arrow control-prev":!0,"control-disabled":e})},ARROW_NEXT:function(e){return(0,xs.default)({"control-arrow control-next":!0,"control-disabled":e})},DOT:function(e){return(0,xs.default)({dot:!0,selected:e})}};Mc.default=h6;var Nc={},Gp={};Object.defineProperty(Gp,"__esModule",{value:!0});Gp.outerWidth=void 0;var p6=function(e){var n=e.offsetWidth,r=getComputedStyle(e);return n+=parseInt(r.marginLeft)+parseInt(r.marginRight),n};Gp.outerWidth=p6;var El={};Object.defineProperty(El,"__esModule",{value:!0});El.default=void 0;var m6=function(e,n,r){var i=e===0?e:e+n,s=r==="horizontal"?[i,0,0]:[0,i,0],o="translate3d",a="("+s.join(",")+")";return o+a};El.default=m6;var Fc={};Object.defineProperty(Fc,"__esModule",{value:!0});Fc.default=void 0;var g6=function(){return window};Fc.default=g6;Object.defineProperty(Nc,"__esModule",{value:!0});Nc.default=void 0;var Mr=x6(A),lo=Wp(Mc),y6=Gp,JT=Wp(El),v6=Wp(eS),Ad=Wp(Fc);function Wp(t){return t&&t.__esModule?t:{default:t}}function qL(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return qL=function(){return t},t}function x6(t){if(t&&t.__esModule)return t;if(t===null||Eu(t)!=="object"&&typeof t!="function")return{default:t};var e=qL();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=r?Object.getOwnPropertyDescriptor(t,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}function Eu(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Eu=function(n){return typeof n}:Eu=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Eu(t)}function cy(){return cy=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cy.apply(this,arguments)}function S6(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E6(t,e,n){return e&&ZT(t.prototype,e),n&&ZT(t,n),t}function b6(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dy(t,e)}function dy(t,e){return dy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},dy(t,e)}function T6(t){var e=R6();return function(){var r=vh(t),i;if(e){var s=vh(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return w6(this,i)}}function w6(t,e){return e&&(Eu(e)==="object"||typeof e=="function")?e:Sn(t)}function Sn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R6(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function vh(t){return vh=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},vh(t)}function mn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A6=function(e){return e.hasOwnProperty("key")},tS=function(t){b6(n,t);var e=T6(n);function n(r){var i;return S6(this,n),i=e.call(this,r),mn(Sn(i),"itemsWrapperRef",void 0),mn(Sn(i),"itemsListRef",void 0),mn(Sn(i),"thumbsRef",void 0),mn(Sn(i),"setItemsWrapperRef",function(s){i.itemsWrapperRef=s}),mn(Sn(i),"setItemsListRef",function(s){i.itemsListRef=s}),mn(Sn(i),"setThumbsRef",function(s,o){i.thumbsRef||(i.thumbsRef=[]),i.thumbsRef[o]=s}),mn(Sn(i),"updateSizes",function(){if(!(!i.props.children||!i.itemsWrapperRef||!i.thumbsRef)){var s=Mr.Children.count(i.props.children),o=i.itemsWrapperRef.clientWidth,a=i.props.thumbWidth?i.props.thumbWidth:(0,y6.outerWidth)(i.thumbsRef[0]),l=Math.floor(o/a),u=l<s,c=u?s-l:0;i.setState(function(d,f){return{itemSize:a,visibleItems:l,firstItem:u?i.getFirstItem(f.selectedItem):0,lastPosition:c,showArrows:u}})}}),mn(Sn(i),"handleClickItem",function(s,o,a){if(!A6(a)||a.key==="Enter"){var l=i.props.onSelectItem;typeof l=="function"&&l(s,o)}}),mn(Sn(i),"onSwipeStart",function(){i.setState({swiping:!0})}),mn(Sn(i),"onSwipeEnd",function(){i.setState({swiping:!1})}),mn(Sn(i),"onSwipeMove",function(s){var o=s.x;if(!i.state.itemSize||!i.itemsWrapperRef||!i.state.visibleItems)return!1;var a=0,l=Mr.Children.count(i.props.children),u=-(i.state.firstItem*100)/i.state.visibleItems,c=Math.max(l-i.state.visibleItems,0),d=-c*100/i.state.visibleItems;u===a&&o>0&&(o=0),u===d&&o<0&&(o=0);var f=i.itemsWrapperRef.clientWidth,m=u+100/(f/o);return i.itemsListRef&&["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(h){i.itemsListRef.style[h]=(0,JT.default)(m,"%",i.props.axis)}),!0}),mn(Sn(i),"slideRight",function(s){i.moveTo(i.state.firstItem-(typeof s=="number"?s:1))}),mn(Sn(i),"slideLeft",function(s){i.moveTo(i.state.firstItem+(typeof s=="number"?s:1))}),mn(Sn(i),"moveTo",function(s){s=s<0?0:s,s=s>=i.state.lastPosition?i.state.lastPosition:s,i.setState({firstItem:s})}),i.state={selectedItem:r.selectedItem,swiping:!1,showArrows:!1,firstItem:0,visibleItems:0,lastPosition:0},i}return E6(n,[{key:"componentDidMount",value:function(){this.setupThumbs()}},{key:"componentDidUpdate",value:function(i){this.props.selectedItem!==this.state.selectedItem&&this.setState({selectedItem:this.props.selectedItem,firstItem:this.getFirstItem(this.props.selectedItem)}),this.props.children!==i.children&&this.updateSizes()}},{key:"componentWillUnmount",value:function(){this.destroyThumbs()}},{key:"setupThumbs",value:function(){(0,Ad.default)().addEventListener("resize",this.updateSizes),(0,Ad.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.updateSizes()}},{key:"destroyThumbs",value:function(){(0,Ad.default)().removeEventListener("resize",this.updateSizes),(0,Ad.default)().removeEventListener("DOMContentLoaded",this.updateSizes)}},{key:"getFirstItem",value:function(i){var s=i;return i>=this.state.lastPosition&&(s=this.state.lastPosition),i<this.state.firstItem+this.state.visibleItems&&(s=this.state.firstItem),i<this.state.firstItem&&(s=i),s}},{key:"renderItems",value:function(){var i=this;return this.props.children.map(function(s,o){var a=lo.default.ITEM(!1,o===i.state.selectedItem),l={key:o,ref:function(c){return i.setThumbsRef(c,o)},className:a,onClick:i.handleClickItem.bind(i,o,i.props.children[o]),onKeyDown:i.handleClickItem.bind(i,o,i.props.children[o]),"aria-label":"".concat(i.props.labels.item," ").concat(o+1),style:{width:i.props.thumbWidth}};return Mr.default.createElement("li",cy({},l,{role:"button",tabIndex:0}),s)})}},{key:"render",value:function(){var i=this;if(!this.props.children)return null;var s=Mr.Children.count(this.props.children)>1,o=this.state.showArrows&&this.state.firstItem>0,a=this.state.showArrows&&this.state.firstItem<this.state.lastPosition,l={},u=-this.state.firstItem*(this.state.itemSize||0),c=(0,JT.default)(u,"px",this.props.axis),d=this.props.transitionTime+"ms";return l={WebkitTransform:c,MozTransform:c,MsTransform:c,OTransform:c,transform:c,msTransform:c,WebkitTransitionDuration:d,MozTransitionDuration:d,MsTransitionDuration:d,OTransitionDuration:d,transitionDuration:d,msTransitionDuration:d},Mr.default.createElement("div",{className:lo.default.CAROUSEL(!1)},Mr.default.createElement("div",{className:lo.default.WRAPPER(!1),ref:this.setItemsWrapperRef},Mr.default.createElement("button",{type:"button",className:lo.default.ARROW_PREV(!o),onClick:function(){return i.slideRight()},"aria-label":this.props.labels.leftArrow}),s?Mr.default.createElement(v6.default,{tagName:"ul",className:lo.default.SLIDER(!1,this.state.swiping),onSwipeLeft:this.slideLeft,onSwipeRight:this.slideRight,onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:l,innerRef:this.setItemsListRef,allowMouseEvents:this.props.emulateTouch},this.renderItems()):Mr.default.createElement("ul",{className:lo.default.SLIDER(!1,this.state.swiping),ref:function(m){return i.setItemsListRef(m)},style:l},this.renderItems()),Mr.default.createElement("button",{type:"button",className:lo.default.ARROW_NEXT(!a),onClick:function(){return i.slideLeft()},"aria-label":this.props.labels.rightArrow})))}}]),n}(Mr.Component);Nc.default=tS;mn(tS,"displayName","Thumbs");mn(tS,"defaultProps",{axis:"horizontal",labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},selectedItem:0,thumbWidth:80,transitionTime:350});var Kp={};Object.defineProperty(Kp,"__esModule",{value:!0});Kp.default=void 0;var _6=function(){return document};Kp.default=_6;var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.setPosition=Hn.getPosition=Hn.isKeyboardEvent=Hn.defaultStatusFormatter=Hn.noop=void 0;var C6=A,L6=k6(El);function k6(t){return t&&t.__esModule?t:{default:t}}var P6=function(){};Hn.noop=P6;var I6=function(e,n){return"".concat(e," of ").concat(n)};Hn.defaultStatusFormatter=I6;var D6=function(e){return e?e.hasOwnProperty("key"):!1};Hn.isKeyboardEvent=D6;var O6=function(e,n){if(n.infiniteLoop&&++e,e===0)return 0;var r=C6.Children.count(n.children);if(n.centerMode&&n.axis==="horizontal"){var i=-e*n.centerSlidePercentage,s=r-1;return e&&(e!==s||n.infiniteLoop)?i+=(100-n.centerSlidePercentage)/2:e===s&&(i+=100-n.centerSlidePercentage),i}return-e*100};Hn.getPosition=O6;var M6=function(e,n){var r={};return["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(i){r[i]=(0,L6.default)(e,"%",n)}),r};Hn.setPosition=M6;var fi={};Object.defineProperty(fi,"__esModule",{value:!0});fi.fadeAnimationHandler=fi.slideStopSwipingHandler=fi.slideSwipeAnimationHandler=fi.slideAnimationHandler=void 0;var YL=A,N6=F6(El),hi=Hn;function F6(t){return t&&t.__esModule?t:{default:t}}function e1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Eo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e1(Object(n),!0).forEach(function(r){$6(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $6(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var B6=function(e,n){var r={},i=n.selectedItem,s=i,o=YL.Children.count(e.children)-1,a=e.infiniteLoop&&(i<0||i>o);if(a)return s<0?e.centerMode&&e.centerSlidePercentage&&e.axis==="horizontal"?r.itemListStyle=(0,hi.setPosition)(-(o+2)*e.centerSlidePercentage-(100-e.centerSlidePercentage)/2,e.axis):r.itemListStyle=(0,hi.setPosition)(-(o+2)*100,e.axis):s>o&&(r.itemListStyle=(0,hi.setPosition)(0,e.axis)),r;var l=(0,hi.getPosition)(i,e),u=(0,N6.default)(l,"%",e.axis),c=e.transitionTime+"ms";return r.itemListStyle={WebkitTransform:u,msTransform:u,OTransform:u,transform:u},n.swiping||(r.itemListStyle=Eo(Eo({},r.itemListStyle),{},{WebkitTransitionDuration:c,MozTransitionDuration:c,OTransitionDuration:c,transitionDuration:c,msTransitionDuration:c})),r};fi.slideAnimationHandler=B6;var U6=function(e,n,r,i){var s={},o=n.axis==="horizontal",a=YL.Children.count(n.children),l=0,u=(0,hi.getPosition)(r.selectedItem,n),c=n.infiniteLoop?(0,hi.getPosition)(a-1,n)-100:(0,hi.getPosition)(a-1,n),d=o?e.x:e.y,f=d;u===l&&d>0&&(f=0),u===c&&d<0&&(f=0);var m=u+100/(r.itemSize/f),h=Math.abs(d)>n.swipeScrollTolerance;return n.infiniteLoop&&h&&(r.selectedItem===0&&m>-100?m-=a*100:r.selectedItem===a-1&&m<-a*100&&(m+=a*100)),(!n.preventMovementUntilSwipeScrollTolerance||h||r.swipeMovementStarted)&&(r.swipeMovementStarted||i({swipeMovementStarted:!0}),s.itemListStyle=(0,hi.setPosition)(m,n.axis)),h&&!r.cancelClick&&i({cancelClick:!0}),s};fi.slideSwipeAnimationHandler=U6;var j6=function(e,n){var r=(0,hi.getPosition)(n.selectedItem,e),i=(0,hi.setPosition)(r,e.axis);return{itemListStyle:i}};fi.slideStopSwipingHandler=j6;var H6=function(e,n){var r=e.transitionTime+"ms",i="ease-in-out",s={position:"absolute",display:"block",zIndex:-2,minHeight:"100%",opacity:0,top:0,right:0,left:0,bottom:0,transitionTimingFunction:i,msTransitionTimingFunction:i,MozTransitionTimingFunction:i,WebkitTransitionTimingFunction:i,OTransitionTimingFunction:i};return n.swiping||(s=Eo(Eo({},s),{},{WebkitTransitionDuration:r,MozTransitionDuration:r,OTransitionDuration:r,transitionDuration:r,msTransitionDuration:r})),{slideStyle:s,selectedStyle:Eo(Eo({},s),{},{opacity:1,position:"relative"}),prevStyle:Eo({},s)}};fi.fadeAnimationHandler=H6;Object.defineProperty(Vp,"__esModule",{value:!0});Vp.default=void 0;var He=G6(A),z6=$c(eS),Vi=$c(Mc),V6=$c(Nc),_d=$c(Kp),Cd=$c(Fc),su=Hn,xh=fi;function $c(t){return t&&t.__esModule?t:{default:t}}function XL(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return XL=function(){return t},t}function G6(t){if(t&&t.__esModule)return t;if(t===null||bu(t)!=="object"&&typeof t!="function")return{default:t};var e=XL();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=r?Object.getOwnPropertyDescriptor(t,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}function bu(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bu=function(n){return typeof n}:bu=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},bu(t)}function fy(){return fy=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fy.apply(this,arguments)}function t1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t1(Object(n),!0).forEach(function(r){Ae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W6(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n1(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function K6(t,e,n){return e&&n1(t.prototype,e),n&&n1(t,n),t}function q6(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hy(t,e)}function hy(t,e){return hy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},hy(t,e)}function Y6(t){var e=Q6();return function(){var r=Sh(t),i;if(e){var s=Sh(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return X6(this,i)}}function X6(t,e){return e&&(bu(e)==="object"||typeof e=="function")?e:_e(t)}function _e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q6(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Sh(t){return Sh=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Sh(t)}function Ae(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var nS=function(t){q6(n,t);var e=Y6(n);function n(r){var i;W6(this,n),i=e.call(this,r),Ae(_e(i),"thumbsRef",void 0),Ae(_e(i),"carouselWrapperRef",void 0),Ae(_e(i),"listRef",void 0),Ae(_e(i),"itemsRef",void 0),Ae(_e(i),"timer",void 0),Ae(_e(i),"animationHandler",void 0),Ae(_e(i),"setThumbsRef",function(o){i.thumbsRef=o}),Ae(_e(i),"setCarouselWrapperRef",function(o){i.carouselWrapperRef=o}),Ae(_e(i),"setListRef",function(o){i.listRef=o}),Ae(_e(i),"setItemsRef",function(o,a){i.itemsRef||(i.itemsRef=[]),i.itemsRef[a]=o}),Ae(_e(i),"autoPlay",function(){He.Children.count(i.props.children)<=1||(i.clearAutoPlay(),i.props.autoPlay&&(i.timer=setTimeout(function(){i.increment()},i.props.interval)))}),Ae(_e(i),"clearAutoPlay",function(){i.timer&&clearTimeout(i.timer)}),Ae(_e(i),"resetAutoPlay",function(){i.clearAutoPlay(),i.autoPlay()}),Ae(_e(i),"stopOnHover",function(){i.setState({isMouseEntered:!0},i.clearAutoPlay)}),Ae(_e(i),"startOnLeave",function(){i.setState({isMouseEntered:!1},i.autoPlay)}),Ae(_e(i),"isFocusWithinTheCarousel",function(){return i.carouselWrapperRef?!!((0,_d.default)().activeElement===i.carouselWrapperRef||i.carouselWrapperRef.contains((0,_d.default)().activeElement)):!1}),Ae(_e(i),"navigateWithKeyboard",function(o){if(i.isFocusWithinTheCarousel()){var a=i.props.axis,l=a==="horizontal",u={ArrowUp:38,ArrowRight:39,ArrowDown:40,ArrowLeft:37},c=l?u.ArrowRight:u.ArrowDown,d=l?u.ArrowLeft:u.ArrowUp;c===o.keyCode?i.increment():d===o.keyCode&&i.decrement()}}),Ae(_e(i),"updateSizes",function(){if(!(!i.state.initialized||!i.itemsRef||i.itemsRef.length===0)){var o=i.props.axis==="horizontal",a=i.itemsRef[0];if(a){var l=o?a.clientWidth:a.clientHeight;i.setState({itemSize:l}),i.thumbsRef&&i.thumbsRef.updateSizes()}}}),Ae(_e(i),"setMountState",function(){i.setState({hasMount:!0}),i.updateSizes()}),Ae(_e(i),"handleClickItem",function(o,a){if(He.Children.count(i.props.children)!==0){if(i.state.cancelClick){i.setState({cancelClick:!1});return}i.props.onClickItem(o,a),o!==i.state.selectedItem&&i.setState({selectedItem:o})}}),Ae(_e(i),"handleOnChange",function(o,a){He.Children.count(i.props.children)<=1||i.props.onChange(o,a)}),Ae(_e(i),"handleClickThumb",function(o,a){i.props.onClickThumb(o,a),i.moveTo(o)}),Ae(_e(i),"onSwipeStart",function(o){i.setState({swiping:!0}),i.props.onSwipeStart(o)}),Ae(_e(i),"onSwipeEnd",function(o){i.setState({swiping:!1,cancelClick:!1,swipeMovementStarted:!1}),i.props.onSwipeEnd(o),i.clearAutoPlay(),i.state.autoPlay&&i.autoPlay()}),Ae(_e(i),"onSwipeMove",function(o,a){i.props.onSwipeMove(a);var l=i.props.swipeAnimationHandler(o,i.props,i.state,i.setState.bind(_e(i)));return i.setState(Nr({},l)),!!Object.keys(l).length}),Ae(_e(i),"decrement",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;i.moveTo(i.state.selectedItem-(typeof o=="number"?o:1))}),Ae(_e(i),"increment",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;i.moveTo(i.state.selectedItem+(typeof o=="number"?o:1))}),Ae(_e(i),"moveTo",function(o){if(typeof o=="number"){var a=He.Children.count(i.props.children)-1;o<0&&(o=i.props.infiniteLoop?a:0),o>a&&(o=i.props.infiniteLoop?0:a),i.selectItem({selectedItem:o}),i.state.autoPlay&&i.state.isMouseEntered===!1&&i.resetAutoPlay()}}),Ae(_e(i),"onClickNext",function(){i.increment(1)}),Ae(_e(i),"onClickPrev",function(){i.decrement(1)}),Ae(_e(i),"onSwipeForward",function(){i.increment(1),i.props.emulateTouch&&i.setState({cancelClick:!0})}),Ae(_e(i),"onSwipeBackwards",function(){i.decrement(1),i.props.emulateTouch&&i.setState({cancelClick:!0})}),Ae(_e(i),"changeItem",function(o){return function(a){(!(0,su.isKeyboardEvent)(a)||a.key==="Enter")&&i.moveTo(o)}}),Ae(_e(i),"selectItem",function(o){i.setState(Nr({previousItem:i.state.selectedItem},o),function(){i.setState(i.animationHandler(i.props,i.state))}),i.handleOnChange(o.selectedItem,He.Children.toArray(i.props.children)[o.selectedItem])}),Ae(_e(i),"getInitialImage",function(){var o=i.props.selectedItem,a=i.itemsRef&&i.itemsRef[o],l=a&&a.getElementsByTagName("img")||[];return l[0]}),Ae(_e(i),"getVariableItemHeight",function(o){var a=i.itemsRef&&i.itemsRef[o];if(i.state.hasMount&&a&&a.children.length){var l=a.children[0].getElementsByTagName("img")||[];if(l.length>0){var u=l[0];if(!u.complete){var c=function m(){i.forceUpdate(),u.removeEventListener("load",m)};u.addEventListener("load",c)}}var d=l[0]||a.children[0],f=d.clientHeight;return f>0?f:null}return null});var s={initialized:!1,previousItem:r.selectedItem,selectedItem:r.selectedItem,hasMount:!1,isMouseEntered:!1,autoPlay:r.autoPlay,swiping:!1,swipeMovementStarted:!1,cancelClick:!1,itemSize:1,itemListStyle:{},slideStyle:{},selectedStyle:{},prevStyle:{}};return i.animationHandler=typeof r.animationHandler=="function"&&r.animationHandler||r.animationHandler==="fade"&&xh.fadeAnimationHandler||xh.slideAnimationHandler,i.state=Nr(Nr({},s),i.animationHandler(r,s)),i}return K6(n,[{key:"componentDidMount",value:function(){this.props.children&&this.setupCarousel()}},{key:"componentDidUpdate",value:function(i,s){!i.children&&this.props.children&&!this.state.initialized&&this.setupCarousel(),!i.autoFocus&&this.props.autoFocus&&this.forceFocus(),s.swiping&&!this.state.swiping&&this.setState(Nr({},this.props.stopSwipingHandler(this.props,this.state))),(i.selectedItem!==this.props.selectedItem||i.centerMode!==this.props.centerMode)&&(this.updateSizes(),this.moveTo(this.props.selectedItem)),i.autoPlay!==this.props.autoPlay&&(this.props.autoPlay?this.setupAutoPlay():this.destroyAutoPlay(),this.setState({autoPlay:this.props.autoPlay}))}},{key:"componentWillUnmount",value:function(){this.destroyCarousel()}},{key:"setupCarousel",value:function(){var i=this;this.bindEvents(),this.state.autoPlay&&He.Children.count(this.props.children)>1&&this.setupAutoPlay(),this.props.autoFocus&&this.forceFocus(),this.setState({initialized:!0},function(){var s=i.getInitialImage();s&&!s.complete?s.addEventListener("load",i.setMountState):i.setMountState()})}},{key:"destroyCarousel",value:function(){this.state.initialized&&(this.unbindEvents(),this.destroyAutoPlay())}},{key:"setupAutoPlay",value:function(){this.autoPlay();var i=this.carouselWrapperRef;this.props.stopOnHover&&i&&(i.addEventListener("mouseenter",this.stopOnHover),i.addEventListener("mouseleave",this.startOnLeave))}},{key:"destroyAutoPlay",value:function(){this.clearAutoPlay();var i=this.carouselWrapperRef;this.props.stopOnHover&&i&&(i.removeEventListener("mouseenter",this.stopOnHover),i.removeEventListener("mouseleave",this.startOnLeave))}},{key:"bindEvents",value:function(){(0,Cd.default)().addEventListener("resize",this.updateSizes),(0,Cd.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.props.useKeyboardArrows&&(0,_d.default)().addEventListener("keydown",this.navigateWithKeyboard)}},{key:"unbindEvents",value:function(){(0,Cd.default)().removeEventListener("resize",this.updateSizes),(0,Cd.default)().removeEventListener("DOMContentLoaded",this.updateSizes);var i=this.getInitialImage();i&&i.removeEventListener("load",this.setMountState),this.props.useKeyboardArrows&&(0,_d.default)().removeEventListener("keydown",this.navigateWithKeyboard)}},{key:"forceFocus",value:function(){var i;(i=this.carouselWrapperRef)===null||i===void 0||i.focus()}},{key:"renderItems",value:function(i){var s=this;return this.props.children?He.Children.map(this.props.children,function(o,a){var l=a===s.state.selectedItem,u=a===s.state.previousItem,c=l&&s.state.selectedStyle||u&&s.state.prevStyle||s.state.slideStyle||{};s.props.centerMode&&s.props.axis==="horizontal"&&(c=Nr(Nr({},c),{},{minWidth:s.props.centerSlidePercentage+"%"})),s.state.swiping&&s.state.swipeMovementStarted&&(c=Nr(Nr({},c),{},{pointerEvents:"none"}));var d={ref:function(m){return s.setItemsRef(m,a)},key:"itemKey"+a+(i?"clone":""),className:Vi.default.ITEM(!0,a===s.state.selectedItem,a===s.state.previousItem),onClick:s.handleClickItem.bind(s,a,o),style:c};return He.default.createElement("li",d,s.props.renderItem(o,{isSelected:a===s.state.selectedItem,isPrevious:a===s.state.previousItem}))}):[]}},{key:"renderControls",value:function(){var i=this,s=this.props,o=s.showIndicators,a=s.labels,l=s.renderIndicator,u=s.children;return o?He.default.createElement("ul",{className:"control-dots"},He.Children.map(u,function(c,d){return l&&l(i.changeItem(d),d===i.state.selectedItem,d,a.item)})):null}},{key:"renderStatus",value:function(){return this.props.showStatus?He.default.createElement("p",{className:"carousel-status"},this.props.statusFormatter(this.state.selectedItem+1,He.Children.count(this.props.children))):null}},{key:"renderThumbs",value:function(){return!this.props.showThumbs||!this.props.children||He.Children.count(this.props.children)===0?null:He.default.createElement(V6.default,{ref:this.setThumbsRef,onSelectItem:this.handleClickThumb,selectedItem:this.state.selectedItem,transitionTime:this.props.transitionTime,thumbWidth:this.props.thumbWidth,labels:this.props.labels,emulateTouch:this.props.emulateTouch},this.props.renderThumbs(this.props.children))}},{key:"render",value:function(){var i=this;if(!this.props.children||He.Children.count(this.props.children)===0)return null;var s=this.props.swipeable&&He.Children.count(this.props.children)>1,o=this.props.axis==="horizontal",a=this.props.showArrows&&He.Children.count(this.props.children)>1,l=a&&(this.state.selectedItem>0||this.props.infiniteLoop)||!1,u=a&&(this.state.selectedItem<He.Children.count(this.props.children)-1||this.props.infiniteLoop)||!1,c=this.renderItems(!0),d=c.shift(),f=c.pop(),m={className:Vi.default.SLIDER(!0,this.state.swiping),onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:this.state.itemListStyle,tolerance:this.props.swipeScrollTolerance},h={};if(o){if(m.onSwipeLeft=this.onSwipeForward,m.onSwipeRight=this.onSwipeBackwards,this.props.dynamicHeight){var p=this.getVariableItemHeight(this.state.selectedItem);h.height=p||"auto"}}else m.onSwipeUp=this.props.verticalSwipe==="natural"?this.onSwipeBackwards:this.onSwipeForward,m.onSwipeDown=this.props.verticalSwipe==="natural"?this.onSwipeForward:this.onSwipeBackwards,m.style=Nr(Nr({},m.style),{},{height:this.state.itemSize}),h.height=this.state.itemSize;return He.default.createElement("div",{"aria-label":this.props.ariaLabel,className:Vi.default.ROOT(this.props.className),ref:this.setCarouselWrapperRef,tabIndex:this.props.useKeyboardArrows?0:void 0},He.default.createElement("div",{className:Vi.default.CAROUSEL(!0),style:{width:this.props.width}},this.renderControls(),this.props.renderArrowPrev(this.onClickPrev,l,this.props.labels.leftArrow),He.default.createElement("div",{className:Vi.default.WRAPPER(!0,this.props.axis),style:h},s?He.default.createElement(z6.default,fy({tagName:"ul",innerRef:this.setListRef},m,{allowMouseEvents:this.props.emulateTouch}),this.props.infiniteLoop&&f,this.renderItems(),this.props.infiniteLoop&&d):He.default.createElement("ul",{className:Vi.default.SLIDER(!0,this.state.swiping),ref:function(y){return i.setListRef(y)},style:this.state.itemListStyle||{}},this.props.infiniteLoop&&f,this.renderItems(),this.props.infiniteLoop&&d)),this.props.renderArrowNext(this.onClickNext,u,this.props.labels.rightArrow),this.renderStatus()),this.renderThumbs())}}]),n}(He.default.Component);Vp.default=nS;Ae(nS,"displayName","Carousel");Ae(nS,"defaultProps",{ariaLabel:void 0,axis:"horizontal",centerSlidePercentage:80,interval:3e3,labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},onClickItem:su.noop,onClickThumb:su.noop,onChange:su.noop,onSwipeStart:function(){},onSwipeEnd:function(){},onSwipeMove:function(){return!1},preventMovementUntilSwipeScrollTolerance:!1,renderArrowPrev:function(e,n,r){return He.default.createElement("button",{type:"button","aria-label":r,className:Vi.default.ARROW_PREV(!n),onClick:e})},renderArrowNext:function(e,n,r){return He.default.createElement("button",{type:"button","aria-label":r,className:Vi.default.ARROW_NEXT(!n),onClick:e})},renderIndicator:function(e,n,r,i){return He.default.createElement("li",{className:Vi.default.DOT(n),onClick:e,onKeyDown:e,value:r,key:r,role:"button",tabIndex:0,"aria-label":"".concat(i," ").concat(r+1)})},renderItem:function(e){return e},renderThumbs:function(e){var n=He.Children.map(e,function(r){var i=r;if(r.type!=="img"&&(i=He.Children.toArray(r.props.children).find(function(s){return s.type==="img"})),!!i)return i});return n.filter(function(r){return r}).length===0?(console.warn("No images found! Can't build the thumb list without images. If you don't need thumbs, set showThumbs={false} in the Carousel. Note that it's not possible to get images rendered inside custom components. More info at https://github.com/leandrowd/react-responsive-carousel/blob/master/TROUBLESHOOTING.md"),[]):n},statusFormatter:su.defaultStatusFormatter,selectedItem:0,showArrows:!0,showIndicators:!0,showStatus:!0,showThumbs:!0,stopOnHover:!0,swipeScrollTolerance:5,swipeable:!0,transitionTime:350,verticalSwipe:"standard",width:"100%",animationHandler:"slide",swipeAnimationHandler:xh.slideSwipeAnimationHandler,stopSwipingHandler:xh.slideStopSwipingHandler});var J6={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Carousel",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"CarouselProps",{enumerable:!0,get:function(){return n.CarouselProps}}),Object.defineProperty(t,"Thumbs",{enumerable:!0,get:function(){return r.default}});var e=i(Vp),n=J6,r=i(Nc);function i(s){return s&&s.__esModule?s:{default:s}}})(WL);var rS={},Z6=Nt;Object.defineProperty(rS,"__esModule",{value:!0});var QL=rS.default=void 0,eH=Z6(Jt()),tH=S;QL=rS.default=(0,eH.default)((0,tH.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");var iS={},nH=Nt;Object.defineProperty(iS,"__esModule",{value:!0});var JL=iS.default=void 0,rH=nH(Jt()),iH=S;JL=iS.default=(0,rH.default)((0,iH.jsx)("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"}),"StarHalf");var sS={},sH=Nt;Object.defineProperty(sS,"__esModule",{value:!0});var ZL=sS.default=void 0,oH=sH(Jt()),aH=S;ZL=sS.default=(0,oH.default)((0,aH.jsx)("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"}),"StarBorder");function ek(t,e){let n=5,r=t/2,i=[];for(;n>=1;)r>=1?(i.push(S.jsx(QL,{sx:{fontSize:e}},n)),r--):r>=.5?(i.push(S.jsx(JL,{sx:{fontSize:e}},n)),r=0):i.push(S.jsx(ZL,{sx:{fontSize:e}},n)),n--;return i}const lH="_backgroundImg_pw0f3_1",uH="_carousel__pw0f3_17",cH="_content_pw0f3_37",dH="_stars_pw0f3_95",fH="_overview_pw0f3_151",hH="_genre_pw0f3_169",pH="_playNow_pw0f3_199",mH="_animRight_pw0f3_269",gH="_slideRight_pw0f3_1",yH="_animTop_pw0f3_281",vH="_slideTop_pw0f3_1",_n={backgroundImg:lH,carousel_:uH,content:cH,stars:dH,overview:fH,genre:hH,playNow:pH,animRight:mH,slideRight:gH,animTop:yH,slideTop:vH};var oS={},xH=Nt;Object.defineProperty(oS,"__esModule",{value:!0});var aS=oS.default=void 0,SH=xH(Jt()),EH=S;aS=oS.default=(0,SH.default)((0,EH.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");function r1({item:t,index:e,selectedIndex:n=1}){return S.jsxs("div",{className:_n.carousel_,children:[S.jsx(Kv,{}),t&&S.jsxs("div",{className:"container_x "+_n.content,children:[S.jsx("h1",{style:{userSelect:"text"},className:`${n===e?_n.animRight:""}`,children:t.title}),S.jsxs("div",{className:`${_n.stars} ${n===e?_n.animRight:""}`,children:[S.jsx("div",{children:ek(t.vote_average,"1.7em")}),S.jsxs("div",{children:[t.vote_average.toFixed(1),S.jsxs("span",{children:["imd",S.jsx("span",{children:"b"})]})," ",S.jsx("span",{children:"Movie"})]})]}),S.jsx("div",{className:`${_n.overview} ${n===e?_n.animTop:""}`,children:t.overview}),S.jsxs("div",{className:_n.genre,children:[S.jsx("span",{children:"Genres:"}),t.genre_ids.map((r,i)=>S.jsxs("span",{children:[r.name," ",i<t.genre_ids.length-1?",":""," "]},r.id))]}),S.jsx("div",{className:`${_n.playNow} ${n===e?_n.animTop:""}`,children:S.jsxs(qt,{to:"movie/"+t.id,children:[S.jsx(aS,{sx:{fontSize:"2em"}}),S.jsx("span",{children:"Play Now"})]})})]}),S.jsx("img",{onError:lS,src:`https://image.tmdb.org/t/p/original${t==null?void 0:t.backdrop_path}`,className:_n.backgroundImg})]},e)}const lS=t=>{t.target.src="/loading-background.jpg",t.onerror=null},i1=({items:t})=>{const[e,n]=A.useState(0),r=i=>{n(i)};return t!=null&&t.err&&Ec(t.err,rh),S.jsx(WL.Carousel,{autoPlay:!0,interval:1e4,infiniteLoop:!0,onChange:r,selectedItem:e,showThumbs:!1,swipeable:!0,verticalSwipe:"natural",preventMovementUntilSwipeScrollTolerance:!0,children:!t||t.err?S.jsx(r1,{index:0}):t==null?void 0:t.map((i,s)=>S.jsx(r1,{selectedIndex:e,item:i,index:s},s))})},bH=()=>{const{newistMovies:t,topRatedMovies:e}=er();return console.log(t),S.jsxs(S.Fragment,{children:[S.jsx(A.Suspense,{fallback:S.jsx(i1,{}),children:S.jsx(Zh,{resolve:t,children:n=>{var r;return S.jsx(i1,{items:(r=n==null?void 0:n.result)==null?void 0:r.slice(0,6)})}})}),S.jsx(Lr,{items:e,shortText:"online Streaming",headerText:"Top Rated Movies",type:"movie"})]})},TH=async()=>Zn({newistMovies:wH(),topRatedMovies:RH()}),wH=async()=>await AH(),RH=async()=>await _H(),AH=async()=>{try{return(await Ee.get(`${St}/movies/newest`)).data}catch(t){return ln(t)}},_H=async()=>{try{return(await Ee.get(`${St}/movies/top_rated`)).data}catch(t){return ln(t)}},CH="_userNav_33x6q_1",LH="_active_33x6q_21",kH="_realign_33x6q_31",PH="_brand_33x6q_57",IH="_h_list_33x6q_81",DH="_signin_button_33x6q_123",OH="_showHiddenList_33x6q_149",MH="_HideShownList_33x6q_167",Fe={userNav:CH,active:LH,realign:kH,"user-navbar":"_user-navbar_33x6q_43",brand:PH,h_list:IH,signin_button:DH,showHiddenList:OH,HideShownList:MH},NH="_dropdown_1ffcu_1",FH={dropdown:NH},bo=({items:t,buttonItem:e,side:n})=>{const[r,i]=A.useState(!1);Jh().state==="loading"&&r&&i(!1);const o=A.useRef(),a=u=>{i(c=>!c)},l=u=>{o.current&&!o.current.contains(u.target)&&i(!1)};return A.useEffect(()=>(r&&document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}),[r]),S.jsx(S.Fragment,{children:S.jsxs("div",{ref:o,className:FH.dropdown,children:[S.jsx("button",{onClick:a,children:e}),r&&S.jsx("ul",{style:n,children:t.map((u,c)=>S.jsx("li",{children:u.item},c))})]})})};var uS={},$H=Nt;Object.defineProperty(uS,"__esModule",{value:!0});var cS=uS.default=void 0,BH=$H(Jt()),UH=S;cS=uS.default=(0,BH.default)((0,UH.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");var dS={},jH=Nt;Object.defineProperty(dS,"__esModule",{value:!0});var tk=dS.default=void 0,HH=jH(Jt()),zH=S;tk=dS.default=(0,HH.default)((0,zH.jsx)("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z"}),"FormatListBulleted");var fS={},VH=Nt;Object.defineProperty(fS,"__esModule",{value:!0});var gf=fS.default=void 0,GH=VH(Jt()),WH=S;gf=fS.default=(0,GH.default)((0,WH.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");const KH="_searchBar_5bqj8_1",qH={searchBar:KH},YH=()=>{const t=A.useRef();return A.useEffect(()=>{t.current.focus()},[t]),S.jsxs(Wv,{method:"get",action:"search",className:qH.searchBar,children:[S.jsx("button",{type:"submit",children:S.jsx(cS,{sx:{fontSize:"2em",color:"white"}})}),S.jsx("input",{id:"searchTextInput",ref:t,required:!0,placeholder:"search...",name:"q",type:"text"})]})};var hS={},XH=Nt;Object.defineProperty(hS,"__esModule",{value:!0});var nk=hS.default=void 0,QH=XH(Jt()),JH=S;nk=hS.default=(0,QH.default)((0,JH.jsx)("path",{d:"M1 18v3h3c0-1.66-1.34-3-3-3m0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7m18-7H5v1.63c3.96 1.28 7.09 4.41 8.37 8.37H19zM1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11m20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"CastConnected");var pS={},ZH=Nt;Object.defineProperty(pS,"__esModule",{value:!0});var rk=pS.default=void 0,ez=ZH(Jt()),tz=S;rk=pS.default=(0,ez.default)((0,tz.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout");const nz=t=>{const e=qs(u=>u.user),n=[{item:S.jsx(Bn,{to:"/movie",className:({isActive:u})=>u?Fe.active:"",end:!0,children:"All"})},{item:S.jsx(Bn,{to:"/movie/top",relative:"route",className:({isActive:u})=>u?Fe.active:"",children:"Top Rated"})},{item:S.jsx(Bn,{to:"/movie/nowplaying",className:({isActive:u})=>u?Fe.active:"",children:"Newest"})},{item:S.jsx(Bn,{to:"/movie/trending",className:({isActive:u})=>u?Fe.active:"",children:"Trending"})}],r=[{item:S.jsx(Bn,{to:"/tv",className:({isActive:u})=>u?Fe.active:"",end:!0,children:"All"})},{item:S.jsx(Bn,{to:"/tv/top",relative:"route",className:({isActive:u})=>u?Fe.active:"",children:"Top Rated"})},{item:S.jsx(Bn,{to:"/tv/trending",className:({isActive:u})=>u?Fe.active:"",children:"Trending"})}],i=[{item:S.jsx(Bn,{to:"/",className:({isActive:u})=>u?Fe.active:"",end:!0,children:"home"})},{item:S.jsx(bo,{side:{top:"160%"},items:n,buttonItem:S.jsxs("span",{className:Fe.realign,children:["Movies",S.jsx(gf,{sx:{fontSize:"2em",color:"white"}})," "]})})},{item:S.jsx(bo,{side:{top:"160%"},items:r,buttonItem:S.jsxs("span",{className:Fe.realign,children:["Tv Shows",S.jsx(gf,{sx:{fontSize:"2em",color:"white"}})," "]})})}],s=[{item:S.jsx(YH,{})}],o=[{item:S.jsxs(Bn,{end:!0,to:"/user/room",className:({isActive:u})=>u?Fe.active+" "+Fe.realign:Fe.realign,children:[" ",S.jsx(Ux,{sx:{color:"var(--baseColor)",marginRight:"0.5rem"}}),"my room"]})},{item:S.jsxs(Bn,{to:"/user/room/guest",className:({isActive:u})=>u?Fe.active+" "+Fe.realign:Fe.realign,children:[S.jsx(nk,{sx:{color:"var(--baseColor)",marginRight:"0.5rem"}}),"join room"]})},{item:S.jsxs(Bn,{to:"/user/fav",className:({isActive:u})=>u?Fe.active+" "+Fe.realign:Fe.realign,children:[S.jsx($x,{sx:{color:"var(--baseColor)",marginRight:"0.5rem"}}),"my favorite"]})},{item:S.jsxs(Bn,{to:"/user/logout",className:({isActive:u})=>u?Fe.active+" "+Fe.realign:Fe.realign,children:[S.jsx(rk,{sx:{color:"var(--baseColor)",marginRight:"0.5rem"}}),"Logout"]})}],a=[{item:S.jsx(bo,{side:{right:"0%"},items:s,buttonItem:S.jsx(cS,{sx:{fontSize:"2.2em",color:"white"}})})},{item:e.isLogin?S.jsx(bo,{side:{right:"0%"},items:o,buttonItem:S.jsxs("span",{className:Fe.realign,children:[e.username,S.jsx(gf,{sx:{fontSize:"2em",color:"white"}})," "]})}):S.jsx(qt,{to:"auth/signin",className:Fe.signin_button,children:"sign in"})}];function l(){const{pathname:u}=Jr();return A.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[u]),null}return S.jsxs("div",{className:Fe.userNav,children:[S.jsx(l,{}),S.jsxs("div",{className:"container_x "+Fe["user-navbar"],children:[S.jsx("div",{className:Fe.showHiddenList,children:S.jsx(bo,{side:{left:0},items:i,buttonItem:S.jsx(tk,{sx:{fontSize:"2em",color:"white"}})})}),S.jsx(qt,{className:Fe.brand,to:"",children:S.jsx("img",{src:"/logo2.png",alt:"logo letswatch"})}),S.jsx("div",{className:`${Fe.h_list} ${Fe.HideShownList}`,children:S.jsx("ul",{children:i.map((u,c)=>S.jsx("li",{children:u.item},c))})}),S.jsx("div",{className:Fe.h_list,children:S.jsx("ul",{children:a.map((u,c)=>S.jsx("li",{children:u.item},c))})})]})]})},rz="_footer_e3xah_1",iz={footer:rz},sz=()=>S.jsx("div",{className:"container_x "+iz.footer,children:S.jsx("div",{children:"© 2023 FlixFlow. All Rights Reserved. Well, maybe not ALL the rights... just the important ones 😉👌"})}),ik=fx({name:"user",initialState:{username:"",subtitle:"",email:"",isLogin:!1},reducers:{logout:()=>(console.log("logedout"),{username:"",subtitle:"",email:"",isLogin:!1}),updateUserInfo:(t,e)=>(t.username=e.payload.username,t.email=e.payload.email,t.subtitle=e.payload.subtitle,t.isLogin=e.payload.isLogin,t)}}),{logout:oz,updateUserInfo:az}=ik.actions,lz={server:3,loading:!1,playerStarted:!1,error:"",tracks:[]},sk=fx({name:"player",initialState:lz,reducers:{changeServer:(t,e)=>(console.log(e.payload),t.server=e.payload,t.playerStarted=!1,t.loading=!1,t.error="",t),updatePlayerStatus:(t,e)=>(t.loading=e.payload.loading,t.playerStarted=e.payload.playerStarted,t.error=e.payload.error,t),updatePlayerTracks:(t,e)=>(t.tracks=e.payload,t),resetPlayer:(t,e)=>(console.log("reset player"),{server:1,loading:!1,playerStarted:!1,error:"",tracks:[]})}});sk.actions;const qp=O$({reducer:{user:ik.reducer,player:sk.reducer,room:bC.reducer},middleware:t=>t({serializableCheck:!1})}),uz=()=>S.jsxs(S.Fragment,{children:[S.jsx("header",{children:S.jsx(nz,{})}),S.jsx("main",{children:S.jsx(Vv,{})}),S.jsx("footer",{children:S.jsx(sz,{})})]}),cz=async()=>(await dz(),null);async function dz(){try{const t=await Ee.get(`${St}/user`);return t.data.isLogin=!0,qp.dispatch(az(t.data)),!0}catch{return!1}}const fz="_topSection_143ko_1",hz="_active_143ko_19",pz="_links_143ko_29",Ld={topSection:fz,active:hz,links:pz},Li=({image:t,title:e,type:n})=>S.jsxs("div",{className:Ld.topSection,children:[S.jsx(Kv,{}),S.jsxs("div",{className:"container_x "+_n.content,children:[S.jsx("h1",{children:e}),S.jsxs("div",{className:Ld.links,children:[S.jsx(qt,{to:"/",children:"home"}),S.jsx("span",{children:"|"}),(n==="movie"||n==="tv")&&S.jsx(Bn,{to:`/${n}`,className:({isActive:r})=>r?Ld.active:"",children:n}),n!=="movie"&&n!=="tv"&&S.jsx(qt,{className:Ld.active,children:n})]})]}),S.jsx("img",{onError:lS,src:t,className:_n.backgroundImg})]}),mz="_list_y0eyn_1",gz="_sort_y0eyn_25",lg={list:mz,sort:gz};var mS={},yz=Nt;Object.defineProperty(mS,"__esModule",{value:!0});var ok=mS.default=void 0,vz=yz(Jt()),xz=S;ok=mS.default=(0,vz.default)((0,xz.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList");var gS={},Sz=Nt;Object.defineProperty(gS,"__esModule",{value:!0});var ak=gS.default=void 0,Ez=Sz(Jt()),bz=S;ak=gS.default=(0,Ez.default)((0,bz.jsx)("path",{d:"m18 4 2 3h-3l-2-3h-2l2 3h-3l-2-3H8l2 3H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4zm-6.75 11.25L10 18l-1.25-2.75L6 14l2.75-1.25L10 10l1.25 2.75L14 14zm5.69-3.31L16 14l-.94-2.06L13 11l2.06-.94L16 8l.94 2.06L19 11z"}),"MovieFilter");const Tz=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"movie Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],wz=[{id:10759,name:"Action & Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:10762,name:"Kids"},{id:9648,name:"Mystery"},{id:10763,name:"News"},{id:10764,name:"Reality"},{id:10765,name:"Sci-Fi & Fantasy"},{id:10766,name:"Soap"},{id:10767,name:"Talk"},{id:10768,name:"War & Politics"},{id:37,name:"Western"}],lk=({type:t})=>{let e;t==="movie"?e=Tz:e=wz;const n=Jr(),r=[{item:S.jsx(qt,{style:Pd(n,"sort","popularity.desc")?{pointerEvents:"none",color:"var(--baseColor)"}:{},to:kd(n,"sort","popularity.desc"),children:"Popularity"})},{item:S.jsx(qt,{style:Pd(n,"sort","vote_average.desc")?{pointerEvents:"none",color:"var(--baseColor)"}:{},to:kd(n,"sort","vote_average.desc"),children:"Rating"})},{item:S.jsx(qt,{style:Pd(n,"sort","primary_release_date.desc")?{pointerEvents:"none",color:"var(--baseColor)"}:{},to:kd(n,"sort","primary_release_date.desc"),children:"Release date"})}],i=e.map(o=>({item:S.jsx(qt,{style:Pd(n,"genres",o.id)?{pointerEvents:"none",color:"var(--baseColor)"}:{},to:kd(n,"genres",o.id),children:o.name})})),s={fontSize:"2em",padding:"0 0.1em"};return S.jsxs("ul",{className:lg.list,children:[S.jsx("li",{children:S.jsx(bo,{items:r,buttonItem:S.jsxs("span",{className:lg.sort,children:["Sort By ",S.jsx(ok,{sx:s})]}),side:{left:"50%",transform:"translate(-50%,0)"}})}),S.jsx("li",{children:S.jsx(bo,{items:i,buttonItem:S.jsxs("span",{className:lg.sort,children:["genres ",S.jsx(ak,{sx:s})]}),side:{right:"0%",maxHeight:"300px",overflowY:"auto"}})})]})},kd=(t,e,n)=>{const r=new URLSearchParams(t.search);return r.set(e,n),r.set("page",1),{...t,search:`?${r.toString()}`}},Pd=(t,e,n)=>new URLSearchParams(t.search).get(e)===n.toString();function Rz(t){return eo("MuiPagination",t)}Yo("MuiPagination",["root","ul","outlined","text"]);const Az=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function _z(t={}){const{boundaryCount:e=1,componentName:n="usePagination",count:r=1,defaultPage:i=1,disabled:s=!1,hideNextButton:o=!1,hidePrevButton:a=!1,onChange:l,page:u,showFirstButton:c=!1,showLastButton:d=!1,siblingCount:f=1}=t,m=tt(t,Az),[h,p]=xx({controlled:u,default:i,name:n,state:"page"}),v=(k,L)=>{u||p(L),l&&l(k,L)},y=(k,L)=>{const P=L-k+1;return Array.from({length:P},(H,F)=>k+F)},g=y(1,Math.min(e,r)),x=y(Math.max(r-e+1,e+1),r),b=Math.max(Math.min(h-f,r-e-f*2-1),e+2),E=Math.min(Math.max(h+f,e+f*2+2),x.length>0?x[0]-2:r-1),T=[...c?["first"]:[],...a?[]:["previous"],...g,...b>e+2?["start-ellipsis"]:e+1<r-e?[e+1]:[],...y(b,E),...E<r-e-1?["end-ellipsis"]:r-e>e?[r-e]:[],...x,...o?[]:["next"],...d?["last"]:[]],w=k=>{switch(k){case"first":return 1;case"previous":return h-1;case"next":return h+1;case"last":return r;default:return null}},_=T.map(k=>typeof k=="number"?{onClick:L=>{v(L,k)},type:"page",page:k,selected:k===h,disabled:s,"aria-current":k===h?"true":void 0}:{onClick:L=>{v(L,w(k))},type:k,page:w(k),selected:!1,disabled:s||k.indexOf("ellipsis")===-1&&(k==="next"||k==="last"?h>=r:h<=1)});return V({items:_},m)}function Cz(t){return eo("MuiPaginationItem",t)}const Lz=Yo("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),ar=Lz;function kz(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:o,in:a,onExited:l,timeout:u}=t,[c,d]=A.useState(!1),f=Ut(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),m={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},h=Ut(n.child,c&&n.childLeaving,r&&n.childPulsate);return!a&&!c&&d(!0),A.useEffect(()=>{if(!a&&l!=null){const p=setTimeout(l,u);return()=>{clearTimeout(p)}}},[l,a,u]),S.jsx("span",{className:f,style:m,children:S.jsx("span",{className:h})})}const dr=Yo("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Pz=["center","classes","className"];let Yp=t=>t,s1,o1,a1,l1;const py=550,Iz=80,Dz=vl(s1||(s1=Yp`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Oz=vl(o1||(o1=Yp`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),Mz=vl(a1||(a1=Yp`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),Nz=un("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Fz=un(kz,{name:"MuiTouchRipple",slot:"Ripple"})(l1||(l1=Yp`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),dr.rippleVisible,Dz,py,({theme:t})=>t.transitions.easing.easeInOut,dr.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,dr.child,dr.childLeaving,Oz,py,({theme:t})=>t.transitions.easing.easeInOut,dr.childPulsate,Mz,({theme:t})=>t.transitions.easing.easeInOut),$z=A.forwardRef(function(e,n){const r=cs({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o}=r,a=tt(r,Pz),[l,u]=A.useState([]),c=A.useRef(0),d=A.useRef(null);A.useEffect(()=>{d.current&&(d.current(),d.current=null)},[l]);const f=A.useRef(!1),m=ka(),h=A.useRef(null),p=A.useRef(null),v=A.useCallback(b=>{const{pulsate:E,rippleX:T,rippleY:w,rippleSize:_,cb:k}=b;u(L=>[...L,S.jsx(Fz,{classes:{ripple:Ut(s.ripple,dr.ripple),rippleVisible:Ut(s.rippleVisible,dr.rippleVisible),ripplePulsate:Ut(s.ripplePulsate,dr.ripplePulsate),child:Ut(s.child,dr.child),childLeaving:Ut(s.childLeaving,dr.childLeaving),childPulsate:Ut(s.childPulsate,dr.childPulsate)},timeout:py,pulsate:E,rippleX:T,rippleY:w,rippleSize:_},c.current)]),c.current+=1,d.current=k},[s]),y=A.useCallback((b={},E={},T=()=>{})=>{const{pulsate:w=!1,center:_=i||E.pulsate,fakeElement:k=!1}=E;if((b==null?void 0:b.type)==="mousedown"&&f.current){f.current=!1;return}(b==null?void 0:b.type)==="touchstart"&&(f.current=!0);const L=k?null:p.current,P=L?L.getBoundingClientRect():{width:0,height:0,left:0,top:0};let H,F,Y;if(_||b===void 0||b.clientX===0&&b.clientY===0||!b.clientX&&!b.touches)H=Math.round(P.width/2),F=Math.round(P.height/2);else{const{clientX:K,clientY:W}=b.touches&&b.touches.length>0?b.touches[0]:b;H=Math.round(K-P.left),F=Math.round(W-P.top)}if(_)Y=Math.sqrt((2*P.width**2+P.height**2)/3),Y%2===0&&(Y+=1);else{const K=Math.max(Math.abs((L?L.clientWidth:0)-H),H)*2+2,W=Math.max(Math.abs((L?L.clientHeight:0)-F),F)*2+2;Y=Math.sqrt(K**2+W**2)}b!=null&&b.touches?h.current===null&&(h.current=()=>{v({pulsate:w,rippleX:H,rippleY:F,rippleSize:Y,cb:T})},m.start(Iz,()=>{h.current&&(h.current(),h.current=null)})):v({pulsate:w,rippleX:H,rippleY:F,rippleSize:Y,cb:T})},[i,v,m]),g=A.useCallback(()=>{y({},{pulsate:!0})},[y]),x=A.useCallback((b,E)=>{if(m.clear(),(b==null?void 0:b.type)==="touchend"&&h.current){h.current(),h.current=null,m.start(0,()=>{x(b,E)});return}h.current=null,u(T=>T.length>0?T.slice(1):T),d.current=E},[m]);return A.useImperativeHandle(n,()=>({pulsate:g,start:y,stop:x}),[g,y,x]),S.jsx(Nz,V({className:Ut(dr.root,s.root,o),ref:p},a,{children:S.jsx(g5,{component:null,exit:!0,children:l})}))}),Bz=$z;function Uz(t){return eo("MuiButtonBase",t)}const jz=Yo("MuiButtonBase",["root","disabled","focusVisible"]),Hz=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],zz=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,o=Zs({root:["root",e&&"disabled",n&&"focusVisible"]},Uz,i);return n&&r&&(o.root+=` ${r}`),o},Vz=un("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${jz.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Gz=A.forwardRef(function(e,n){const r=cs({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:u=!1,disableRipple:c=!1,disableTouchRipple:d=!1,focusRipple:f=!1,LinkComponent:m="a",onBlur:h,onClick:p,onContextMenu:v,onDragLeave:y,onFocus:g,onFocusVisible:x,onKeyDown:b,onKeyUp:E,onMouseDown:T,onMouseLeave:w,onMouseUp:_,onTouchEnd:k,onTouchMove:L,onTouchStart:P,tabIndex:H=0,TouchRippleProps:F,touchRippleRef:Y,type:K}=r,W=tt(r,Hz),X=A.useRef(null),U=A.useRef(null),$=rs(U,Y),{isFocusVisibleRef:B,onFocus:te,onBlur:Z,ref:de}=Sx(),[oe,ge]=A.useState(!1);u&&oe&&ge(!1),A.useImperativeHandle(i,()=>({focusVisible:()=>{ge(!0),X.current.focus()}}),[]);const[ye,Oe]=A.useState(!1);A.useEffect(()=>{Oe(!0)},[]);const nt=ye&&!c&&!u;A.useEffect(()=>{oe&&f&&!c&&ye&&U.current.pulsate()},[c,f,oe,ye]);function Qe(ae,xn,gs=d){return Co(Ir=>(xn&&xn(Ir),!gs&&U.current&&U.current[ae](Ir),!0))}const Zr=Qe("start",T),Je=Qe("stop",v),kr=Qe("stop",y),ki=Qe("stop",_),fs=Qe("stop",ae=>{oe&&ae.preventDefault(),w&&w(ae)}),Ct=Qe("start",P),Pi=Qe("stop",k),hs=Qe("stop",L),Pr=Qe("stop",ae=>{Z(ae),B.current===!1&&ge(!1),h&&h(ae)},!1),ps=Co(ae=>{X.current||(X.current=ae.currentTarget),te(ae),B.current===!0&&(ge(!0),x&&x(ae)),g&&g(ae)}),Zt=()=>{const ae=X.current;return l&&l!=="button"&&!(ae.tagName==="A"&&ae.href)},cn=A.useRef(!1),nr=Co(ae=>{f&&!cn.current&&oe&&U.current&&ae.key===" "&&(cn.current=!0,U.current.stop(ae,()=>{U.current.start(ae)})),ae.target===ae.currentTarget&&Zt()&&ae.key===" "&&ae.preventDefault(),b&&b(ae),ae.target===ae.currentTarget&&Zt()&&ae.key==="Enter"&&!u&&(ae.preventDefault(),p&&p(ae))}),rr=Co(ae=>{f&&ae.key===" "&&U.current&&oe&&!ae.defaultPrevented&&(cn.current=!1,U.current.stop(ae,()=>{U.current.pulsate(ae)})),E&&E(ae),p&&ae.target===ae.currentTarget&&Zt()&&ae.key===" "&&!ae.defaultPrevented&&p(ae)});let Lt=l;Lt==="button"&&(W.href||W.to)&&(Lt=m);const Ht={};Lt==="button"?(Ht.type=K===void 0?"button":K,Ht.disabled=u):(!W.href&&!W.to&&(Ht.role="button"),u&&(Ht["aria-disabled"]=u));const ir=rs(n,de,X),$n=V({},r,{centerRipple:s,component:l,disabled:u,disableRipple:c,disableTouchRipple:d,focusRipple:f,tabIndex:H,focusVisible:oe}),ms=zz($n);return S.jsxs(Vz,V({as:Lt,className:Ut(ms.root,a),ownerState:$n,onBlur:Pr,onClick:p,onContextMenu:Je,onFocus:ps,onKeyDown:nr,onKeyUp:rr,onMouseDown:Zr,onMouseLeave:fs,onMouseUp:ki,onDragLeave:kr,onTouchEnd:Pi,onTouchMove:hs,onTouchStart:Ct,ref:ir,tabIndex:u?-1:H,type:K},Ht,W,{children:[o,nt?S.jsx(Bz,V({ref:$,center:s},F)):null]}))}),Wz=Gz,u1=Ic(S.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),c1=Ic(S.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),d1=Ic(S.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),f1=Ic(S.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Kz=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],uk=(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${Ot(n.size)}`],n.variant==="text"&&e[`text${Ot(n.color)}`],n.variant==="outlined"&&e[`outlined${Ot(n.color)}`],n.shape==="rounded"&&e.rounded,n.type==="page"&&e.page,(n.type==="start-ellipsis"||n.type==="end-ellipsis")&&e.ellipsis,(n.type==="previous"||n.type==="next")&&e.previousNext,(n.type==="first"||n.type==="last")&&e.firstLast]},qz=t=>{const{classes:e,color:n,disabled:r,selected:i,size:s,shape:o,type:a,variant:l}=t,u={root:["root",`size${Ot(s)}`,l,o,n!=="standard"&&`color${Ot(n)}`,n!=="standard"&&`${l}${Ot(n)}`,r&&"disabled",i&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[a]],icon:["icon"]};return Zs(u,Cz,e)},Yz=un("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:uk})(({theme:t,ownerState:e})=>V({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",[`&.${ar.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},e.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)})),Xz=un(Wz,{name:"MuiPaginationItem",slot:"Root",overridesResolver:uk})(({theme:t,ownerState:e})=>V({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,[`&.${ar.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${ar.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ar.selected}`]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Rs(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${ar.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Rs(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},[`&.${ar.disabled}`]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}}},e.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},e.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)},e.shape==="rounded"&&{borderRadius:(t.vars||t).shape.borderRadius}),({theme:t,ownerState:e})=>V({},e.variant==="text"&&{[`&.${ar.selected}`]:V({},e.color!=="standard"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}},[`&.${ar.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}},{[`&.${ar.disabled}`]:{color:(t.vars||t).palette.action.disabled}})},e.variant==="outlined"&&{border:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${ar.selected}`]:V({},e.color!=="standard"&&{color:(t.vars||t).palette[e.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:Rs(t.palette[e.color].main,.5)}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.activatedOpacity})`:Rs(t.palette[e.color].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Rs(t.palette[e.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ar.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Rs(t.palette[e.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}},{[`&.${ar.disabled}`]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}})})),Qz=un("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(t,e)=>e.icon})(({theme:t,ownerState:e})=>V({fontSize:t.typography.pxToRem(20),margin:"0 -8px"},e.size==="small"&&{fontSize:t.typography.pxToRem(18)},e.size==="large"&&{fontSize:t.typography.pxToRem(22)})),Jz=A.forwardRef(function(e,n){const r=cs({props:e,name:"MuiPaginationItem"}),{className:i,color:s="standard",component:o,components:a={},disabled:l=!1,page:u,selected:c=!1,shape:d="circular",size:f="medium",slots:m={},type:h="page",variant:p="text"}=r,v=tt(r,Kz),y=V({},r,{color:s,disabled:l,selected:c,shape:d,size:f,type:h,variant:p}),g=TL(),x=qz(y),E=(g?{previous:m.next||a.next||f1,next:m.previous||a.previous||d1,last:m.first||a.first||u1,first:m.last||a.last||c1}:{previous:m.previous||a.previous||d1,next:m.next||a.next||f1,first:m.first||a.first||u1,last:m.last||a.last||c1})[h];return h==="start-ellipsis"||h==="end-ellipsis"?S.jsx(Yz,{ref:n,ownerState:y,className:Ut(x.root,i),children:"…"}):S.jsxs(Xz,V({ref:n,ownerState:y,component:o,disabled:l,className:Ut(x.root,i)},v,{children:[h==="page"&&u,E?S.jsx(Qz,{as:E,ownerState:y,className:x.icon}):null]}))}),Zz=Jz,eV=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],tV=t=>{const{classes:e,variant:n}=t;return Zs({root:["root",n],ul:["ul"]},Rz,e)},nV=un("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant]]}})({}),rV=un("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(t,e)=>e.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function iV(t,e,n){return t==="page"?`${n?"":"Go to "}page ${e}`:`Go to ${t} page`}const sV=A.forwardRef(function(e,n){const r=cs({props:e,name:"MuiPagination"}),{boundaryCount:i=1,className:s,color:o="standard",count:a=1,defaultPage:l=1,disabled:u=!1,getItemAriaLabel:c=iV,hideNextButton:d=!1,hidePrevButton:f=!1,renderItem:m=_=>S.jsx(Zz,V({},_)),shape:h="circular",showFirstButton:p=!1,showLastButton:v=!1,siblingCount:y=1,size:g="medium",variant:x="text"}=r,b=tt(r,eV),{items:E}=_z(V({},r,{componentName:"Pagination"})),T=V({},r,{boundaryCount:i,color:o,count:a,defaultPage:l,disabled:u,getItemAriaLabel:c,hideNextButton:d,hidePrevButton:f,renderItem:m,shape:h,showFirstButton:p,showLastButton:v,siblingCount:y,size:g,variant:x}),w=tV(T);return S.jsx(nV,V({"aria-label":"pagination navigation",className:Ut(w.root,s),ownerState:T,ref:n},b,{children:S.jsx(rV,{className:w.ul,ownerState:T,children:E.map((_,k)=>S.jsx("li",{children:m(V({},_,{color:o,"aria-label":c(_.type,_.page,_.selected),shape:h,size:g,variant:x}))},k))})}))}),oV=sV,aV=a5({createStyledComponent:un("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>cs({props:t,name:"MuiStack"})}),lV=aV,uV="_pagination_141kq_1",cV={pagination:uV};function no({items:t}){er();const e=Jr(),n=us(),r=(i,s)=>{const o=new URLSearchParams(e.search);o.set("page",s);const a={...e,search:`?${o.toString()}`},l=document.getElementById("h_text");window.scrollTo({top:l.offsetTop-70,behavior:"smooth"}),n(a)};return S.jsx(A.Suspense,{children:S.jsx(Zh,{resolve:t,children:i=>S.jsx("div",{className:cV.pagination,children:S.jsx(lV,{spacing:2,children:S.jsx(oV,{onChange:r,count:(i.total_pages&&i.total_pages>500?500:i.total_pages)||1,page:dV(e),variant:"text",color:"secondary",sx:{color:"red"}})})})})})}const dV=t=>{const e=new URLSearchParams(t.search);return Number(e.get("page"))||1},fV=()=>{const{movies:t}=er();return S.jsxs(S.Fragment,{children:[S.jsx(Li,{image:"/movies_bg.jpg",type:"movie",title:"movies"}),S.jsx(Lr,{items:t,shortText:"online Streaming",type:"movie",headerText:"movies",TopRight:S.jsx(lk,{type:"movie"})}),S.jsx(no,{items:t})]})},hV=async({request:t})=>Zn({movies:pV(t)}),pV=async t=>await mV(t),mV=async t=>{try{const e=new URL(t.url);return(await Ee.get(`${St}/movies${e.search}`)).data}catch(e){return ln(e)}},gV=()=>{const{tvShows:t}=er();return S.jsxs(S.Fragment,{children:[S.jsx(Li,{image:"/tv_show_background.jpg",type:"tv",title:"TV Shows"}),S.jsx(Lr,{items:t,type:"tv",shortText:"online Streaming",headerText:"Tv shows",TopRight:S.jsx(lk,{type:"tv"})}),S.jsx(no,{items:t})]})},yV=async({request:t})=>Zn({tvShows:vV(t)}),vV=async t=>await xV(t),xV=async t=>{try{const e=new URL(t.url);return(await Ee.get(`${St}/tv-shows${e.search}`)).data}catch(e){return ln(e)}},SV=()=>{const{topRated:t}=er();return S.jsxs(S.Fragment,{children:[S.jsx(Li,{image:"/movies_bg.jpg",type:"movie",title:"top rated movies"}),S.jsx(Lr,{items:t,shortText:"online Streaming",type:"movie",headerText:"top rated"}),S.jsx(no,{items:t})]})},EV=async({request:t})=>Zn({topRated:bV(t)}),bV=async t=>await TV(t),TV=async t=>{try{const e=new URL(t.url);return(await Ee.get(`${St}/movies/top_rated${e.search}`)).data}catch(e){return ln(e)}},wV=()=>{const{newest:t}=er();return S.jsxs(S.Fragment,{children:[S.jsx(Li,{image:"/movies_bg.jpg",type:"movie",title:"Now Playing movies"}),S.jsx(Lr,{items:t,shortText:"online Streaming",type:"movie",headerText:"Now Playing"}),S.jsx(no,{items:t})]})},RV=async({request:t})=>Zn({newest:AV(t)}),AV=async t=>await _V(t),_V=async t=>{try{const e=new URL(t.url);return(await Ee.get(`${St}/movies/newest${e.search}`)).data}catch(e){return ln(e)}},CV=()=>{const{trending:t}=er();return S.jsxs(S.Fragment,{children:[S.jsx(Li,{image:"/movies_bg.jpg",type:"movie",title:"Trending movies"}),S.jsx(Lr,{items:t,shortText:"online Streaming",type:"movie",headerText:"Trending"}),S.jsx(no,{items:t})]})},LV=async({request:t})=>Zn({trending:kV(t)}),kV=async t=>await PV(t),PV=async t=>{try{const e=new URL(t.url);return(await Ee.get(`${St}/movies/trending${e.search}`)).data}catch(e){return ln(e)}},IV=()=>{const{topRated:t}=er();return S.jsxs(S.Fragment,{children:[S.jsx(Li,{image:"/tv_show_background.jpg",type:"tv",title:"top rated Tv shows"}),S.jsx(Lr,{items:t,shortText:"online Streaming",type:"tv",headerText:"top rated"}),S.jsx(no,{items:t})]})},DV=async({request:t})=>Zn({topRated:OV(t)}),OV=async t=>await MV(t),MV=async t=>{try{const e=new URL(t.url);return(await Ee.get(`${St}/tv-shows/top_rated${e.search}`)).data}catch(e){return ln(e)}},NV=()=>{const{trending:t}=er();return S.jsxs(S.Fragment,{children:[S.jsx(Li,{image:"/tv_show_background.jpg",type:"tv",title:"Trending Tv shows"}),S.jsx(Lr,{items:t,shortText:"online Streaming",type:"tv",headerText:"Trending"}),S.jsx(no,{items:t})]})},FV=async({request:t})=>Zn({trending:$V(t)}),$V=async t=>await BV(t),BV=async t=>{try{const e=new URL(t.url);return(await Ee.get(`${St}/tv-shows/trending${e.search}`)).data}catch(e){return ln(e)}},UV="_general_thp44_1",jV={general:UV},HV=()=>{const t=x_();console.log(t);let e=t.response&&t.response.data.message||t.statusText||"Oops! something went wrong",n=t.response&&t.response.data.statusCode||t.status||"NAN",r=t.response&&t.response.data.error||t.status===404&&"The page you are looking for could not be found."||t.data;return S.jsxs("div",{className:jV.general,children:[S.jsxs("div",{children:[e," [ ",n," ]"]}),S.jsx("div",{children:r}),S.jsx("div",{children:t.toString()}),S.jsx("div",{children:S.jsx(T_,{inner:"BACK TO HOME",to:"/"})})]})},zV=()=>{const t=Jr(),e=new URLSearchParams(t.search),{sectionData:n}=er();return S.jsxs(S.Fragment,{children:[S.jsx(Li,{image:"/search.jpg",type:"search",title:"Search"}),S.jsx(Lr,{items:n,shortText:"online Streaming",type:"search",headerText:`Search result for "${e.get("q")}"`}),S.jsx(no,{items:n})]})},VV=async({request:t})=>Zn({sectionData:GV(t)}),GV=async t=>await WV(t),WV=async t=>{try{const e=new URL(t.url);return(await Ee.get(`${St}/search${e.search}`)).data}catch(e){throw e}},KV="_container_f5m84_1",qV="_imgC_f5m84_21",YV="_content_f5m84_45",XV="_contentFake_f5m84_57",QV="_fakeAnim_f5m84_77",JV="_fadeInOut_f5m84_1",ZV="_title_f5m84_111",eG="_info_f5m84_141",tG="_box_content_f5m84_175",nG="_overlay_f5m84_193",rG="_dot_f5m84_215",iG="_share_f5m84_233",sG="_backgroundimg_f5m84_257",it={container:KV,imgC:qV,content:YV,contentFake:XV,fakeAnim:QV,fadeInOut:JV,title:ZV,info:eG,box_content:tG,overlay:nG,dot:rG,share:iG,backgroundimg:sG};var yS={},oG=Nt;Object.defineProperty(yS,"__esModule",{value:!0});var ck=yS.default=void 0,aG=oG(Jt()),lG=S;ck=yS.default=(0,aG.default)((0,lG.jsx)("path",{d:"m23 12-2.44-2.78.34-3.68-3.61-.82-1.89-3.18L12 3 8.6 1.54 6.71 4.72l-3.61.81.34 3.68L1 12l2.44 2.78-.34 3.69 3.61.82 1.89 3.18L12 21l3.4 1.46 1.89-3.18 3.61-.82-.34-3.68zm-10 5h-2v-2h2zm0-4h-2V7h2z"}),"NewReleases");var vS={},uG=Nt;Object.defineProperty(vS,"__esModule",{value:!0});var dk=vS.default=void 0,cG=uG(Jt()),dG=S;dk=vS.default=(0,cG.default)((0,dG.jsx)("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"}),"CalendarMonth");const fG=({item:t,type:e,roomSeason:n,roomEpisode:r})=>{const{season:i,episode:s}=zv(),o={fontSize:"1.26em",paddingRight:"0.3em",color:"var(--baseColor)"};return S.jsxs("div",{className:it.container,children:[S.jsx("div",{className:it.imgC,children:S.jsx("img",{src:"https://image.tmdb.org/t/p/w500"+t.poster_path,alt:""})}),S.jsxs("div",{className:it.content,children:[S.jsx("div",{className:it.title,children:t.name||t.title}),S.jsxs("div",{className:`${_n.stars}`,children:[S.jsx("div",{children:ek(t.vote_average,"1.7em")}),S.jsxs("div",{children:[t.vote_average.toFixed(1),S.jsxs("span",{children:["imd",S.jsx("span",{children:"b"})]}),S.jsx("span",{})]})]}),S.jsxs("div",{className:it.info,children:[S.jsx("span",{children:"ID: "}),S.jsxs("span",{children:[t.id," "]}),e==="tv"?S.jsxs("span",{children:[", Season: ",Number(i)||Number(n),", Episode: ",Number(s)||Number(r)]}):""]}),S.jsxs("div",{className:it.box_content,children:[S.jsx("span",{children:t.original_language}),S.jsx("span",{className:it.dot}),S.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[S.jsx(ck,{sx:o})," ",t.status]}),S.jsx("span",{className:it.dot}),S.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[S.jsx(dk,{sx:o})," ",new Date(t.release_date||t.first_air_date).getFullYear()]})]}),S.jsxs("div",{className:it.info,children:[S.jsx("span",{children:"Runtime: "}),S.jsxs("span",{children:[t.runtime||t.episode_run_time&&t.episode_run_time.length&&t.episode_run_time[0]||"NAN"," min"]})]}),S.jsxs("div",{className:it.info,children:[S.jsx("span",{children:"Genres: "}),t.genre_ids&&t.genre_ids.map((a,l)=>S.jsxs("span",{children:[a.name,l<t.genre_ids.length-1?" , ":""]},a.id))]}),S.jsxs("div",{className:it.share,children:[S.jsx(tc,{title:"Add to my favorite list",arrow:!0,sx:{marginTop:"0px"},placement:"bottom",children:S.jsx(VL,{item:t,type:e})}),!n&&S.jsx(tc,{title:"Play at My Room",arrow:!0,sx:{marginTop:"0px"},children:S.jsx(GL,{episode:1,season:1,type:e,item:t})})]}),S.jsx("p",{className:it.discreption,children:t.overview})]}),S.jsx("img",{onError:lS,className:it.backgroundimg,src:"https://image.tmdb.org/t/p/original"+t.backdrop_path,alt:""})]})},hG=()=>S.jsxs("div",{className:it.container,children:[S.jsx("div",{className:it.imgC,children:S.jsx("div",{className:it.fakeAnim,style:{width:"326px",height:"474.663px"}})}),S.jsxs("div",{className:it.contentFake,children:[S.jsx("div",{className:it.fakeAnim,style:{width:"117.237px",height:"61.600px"}}),S.jsx("div",{className:it.fakeAnim,style:{width:"217.237px",height:"31.200px"},children:" "}),S.jsx("div",{className:it.fakeAnim,style:{width:"117.237px",height:"25.600px"}}),S.jsx("div",{className:it.fakeAnim,style:{width:"117.237px",height:"25.600px"}}),S.jsx("div",{className:it.fakeAnim,style:{width:"117.237px",height:"25.600px"}}),S.jsx("div",{className:it.fakeAnim,style:{width:"217.237px",height:"25.600px"}}),S.jsx("div",{className:it.fakeAnim,style:{width:"317.237px",height:"25.600px"}}),S.jsx("div",{className:it.fakeAnim,style:{width:"759.225px",height:"108px"}})]})]}),pG="_contaner_f4smf_1",mG="_player_f4smf_11",gG="_play_f4smf_11",yG="_error_f4smf_27",vG="_loading_f4smf_39",xG="_playerDesk_f4smf_55",SG="_nextEpisode_f4smf_77",EG="_hideIt_f4smf_105",bG="_iframeV_f4smf_113",TG="_servers_f4smf_161",Gi={contaner:pG,player:mG,play:gG,error:yG,loading:vG,playerDesk:xG,nextEpisode:SG,hideIt:EG,iframeV:bG,servers:TG},wG=({type:t,item:e})=>{let{season:n,episode:r}=zv();n=Number(n),r=Number(r);const[i,s]=A.useState(1),o=t==="tv"&&e.last_episode_to_air.episode_number,a=t==="tv"&&e.last_episode_to_air.season_number,l=t==="tv"&&e.seasons.find(h=>h.season_number===n),u=t==="tv"&&l&&n<=a&&(n===a?r<o:r<l.episode_count),c=u?r+1:!1,d=u?!1:n<a&&n+1,f=h=>{s(Number(h.target.value))};let m;switch(i){case 1:m=`https://vidsrc.me/embed/${t==="tv"?`tv?tmdb=${e.id}&season=${n}&episode=${r}`:`movie?tmdb=${e.id}`}`;break;case 2:m=`https://multiembed.mov/directstream.php?video_id=${e.id}&tmdb=1&s=${n}&e=${r}`;break;case 3:m=`https://vidsrc.to/embed/${t}/${t==="tv"?`${e.id}/${n}/${r}`:`${e.id}`}`;break}return A.useEffect(()=>()=>{s(1)},[e]),S.jsxs("div",{className:"container_x "+Gi.contaner,children:[S.jsx("div",{id:"playerCon",className:Gi.player,children:S.jsx("iframe",{className:Gi.iframeV,src:m,frameBorder:0,allowFullScreen:!0})}),S.jsxs("div",{className:Gi.playerDesk,children:[S.jsxs("div",{className:Gi.servers,children:[S.jsxs("select",{value:i,onChange:f,name:"",id:"",children:[S.jsx("option",{value:1,children:"Vidsrc"}),S.jsx("option",{value:2,children:"Multiembed"}),S.jsx("option",{value:3,children:"Fmovies"})]}),t==="tv"&&(c||d)&&S.jsxs(qt,{className:Gi.nextEpisode,to:`../../${d||n||1}/${c||1}`,relative:"path",children:[S.jsx(aS,{sx:{fontSize:"2em"}}),S.jsx("span",{children:"Next Episode"})]})]}),S.jsx("p",{style:{color:"#ffc107"},children:"It use external sources, so you might see ads."}),S.jsx("p",{children:"If current server doesn't work please try other servers above"})]})]})},RG="_sbottom_d2o1x_1",AG="_season_episode_d2o1x_9",_G="_activeTab_d2o1x_59",CG="_episodeTab_d2o1x_137",LG="_over_d2o1x_147",kG="_active_d2o1x_59",uo={sbottom:RG,season_episode:AG,activeTab:_G,episodeTab:CG,over:LG,active:kG},PG=({type:t,item:e})=>{const[n,r]=A.useState(t==="tv"?0:1),i=us(),s=A.useRef(),o=A.useRef(),a=zv();let{season:l,episode:u}=a;l=Number(l),u=Number(u);const c=[];let d,f,m;if(t==="tv"){d=e.last_episode_to_air.season_number,f=e.last_episode_to_air.episode_number,m=e.seasons.find(p=>p.season_number===l);for(let p=1;p<=(d===l?f:m.episode_count);p++)c.push(S.jsxs("div",{className:p===u?uo.active:"",ref:p===u?s:null,children:[S.jsx(qt,{to:"../"+p,relative:"path",children:S.jsxs("span",{children:["Episode ",p]})}),S.jsx("div",{children:S.jsx(tc,{title:"Play at My Room",arrow:!0,sx:{marginTop:"0px"},children:S.jsx(GL,{episode:p,season:l,type:t,item:e})})})]},p))}const h=p=>{console.log(p.target.value),i("../../"+Number(p.target.value)+"/1",{relative:"path"})};return A.useEffect(()=>{s.current&&u!=1&&o.current&&(o.current.scrollTop=s.current.offsetTop)},[]),S.jsx("div",{className:" "+uo.sbottom,children:S.jsxs("div",{className:uo.season_episode,children:[S.jsxs("ul",{children:[t==="tv"&&S.jsx("li",{children:S.jsx("select",{className:n===0?uo.activeTab:"",onClick:()=>{r(0)},value:l,onChange:h,children:e.seasons&&e.seasons.map((p,v)=>p.season_number==0||p.season_number>d?null:S.jsxs("option",{value:p.season_number,children:["Season ",p.season_number]},p.id))})}),S.jsx("li",{className:n===1?uo.activeTab:"",onClick:()=>{r(1)},children:"similars"})]}),t==="tv"&&n===0&&S.jsxs("div",{className:"container_x "+uo.episodeTab,children:[S.jsxs("h2",{children:[m.name," , Episods ",m.episode_count," , Air Date ",m.air_date]}),S.jsx("div",{ref:o,className:uo.over,children:c})]}),n===1&&S.jsx(Lr,{items:er().sectionData,shortText:"online Streaming",type:t,headerText:"similars"})]})})},h1=({type:t})=>{const{item:e}=er();return S.jsx(A.Suspense,{fallback:S.jsx(S.Fragment,{children:S.jsx(hG,{})}),children:S.jsx(Zh,{resolve:e,children:n=>S.jsxs(S.Fragment,{children:[S.jsx(fG,{type:t,item:n.result}),S.jsx(wG,{type:t,item:n.result}),S.jsx(PG,{type:t,item:n.result})]})})})},IG=async({request:t,params:e})=>{const n=e.id;return Zn({item:$G(t,n),sectionData:OG(t,n)})},DG=async({request:t,params:e})=>{const{id:n,season:r,episode:i}=e;return isNaN(Number(r))?I0(`../${n}/1/1`):isNaN(Number(i))?I0(`../${n}/${r}/1`):Zn({item:BG(t,n),sectionData:NG(t,n)})},OG=async(t,e)=>await MG(t,e),MG=async(t,e)=>{try{return(await Ee.get(`${St}/movies/${e}/similar`)).data}catch(n){return ln(n)}},NG=async(t,e)=>await FG(t,e),FG=async(t,e)=>{try{return(await Ee.get(`${St}/tv-shows/${e}/similar`)).data}catch(n){return ln(n)}},$G=async(t,e)=>await UG(t,e),BG=async(t,e)=>await jG(t,e),UG=async(t,e)=>{try{return(await Ee.get(`${St}/movies/${e}`)).data}catch(n){return ln(n)}},jG=async(t,e)=>{try{return(await Ee.get(`${St}/tv-shows/${e}`)).data}catch(n){return ln(n)}},HG="_background_jl6x0_1",zG="_buttons_jl6x0_17",VG="_contaner_jl6x0_25",GG="_header_jl6x0_45",WG="_formdata_jl6x0_53",KG="_submit_jl6x0_117",qG="_footer_jl6x0_175",YG="_error_jl6x0_197",dt={background:HG,buttons:zG,contaner:VG,header:GG,formdata:WG,submit:KG,footer:qG,error:YG},XG=()=>{const t=Jh(),e=us(),n=t.state==="submitting";let r=v_();const{enqueueSnackbar:i}=Zv();return qs(s=>s.user),ax(),A.useEffect(()=>{r&&!r.err&&(i("Login successful. Welcome back",nh),r=null,e("/"))},[r]),S.jsx(Wv,{method:"POST",className:dt.background,children:S.jsxs("div",{className:dt.contaner,children:[S.jsx("div",{className:dt.header,children:S.jsx("h1",{children:"Sign in"})}),S.jsxs("div",{className:dt.formdata,children:[S.jsx("input",{name:"username",type:"name",minLength:6,maxLength:20,className:dt.name,placeholder:"Enter username",autoComplete:"true",required:"required"}),S.jsx("input",{name:"password",type:"password",minLength:3,maxLength:20,className:dt.password,autoComplete:"true",placeholder:"Password",required:"required"})]}),S.jsxs("div",{className:dt.buttons,children:[S.jsx("div",{className:dt.submit,children:S.jsx("input",{type:"submit",disabled:n,value:"Sign in",placeholder:"Sign in"})}),S.jsx("div",{className:dt.submit,children:S.jsx(qt,{to:"/",children:"Back Home"})})]}),S.jsxs("div",{className:dt.footer,children:["Don't have an account? ",S.jsx(qt,{to:"../signup",children:"Sign Up"})]}),S.jsx("div",{className:dt.error,children:(r==null?void 0:r.err)&&"Error: "+r.err})]})})},QG=async({request:t,params:e})=>{const n=await t.formData(),r={username:n.get("username"),password:n.get("password")};try{return(await Ee.post(`${St}/user/signin`,r)).data}catch(i){return ln(i)}},JG=["Albanian","Arabic","Bengali","Brazillian Portuguese","Bulgarian","Burmese","Chinese BG code","Croatian","Czech","Danish","Dutch","English","Estonian","Farsi/Persian","Finnish","French","German","Greek","Hebrew","Hindi","Hungarian","Icelandic","Indonesian","Italian","Japanese","Korean","Latvian","Lithuanian","Macedonian","Malay","Norwegian","Polish","Portuguese","Romanian","Russian","Serbian","Sinhala","Slovak","Slovenian","Spanish","Swedish","Tagalog","Thai","Turkish","Ukrainian","Urdu","Vietnamese"],ZG=()=>{const t=Jh(),e=us(),n=t.state==="submitting",r=v_(),{enqueueSnackbar:i}=Zv();return console.log(r),A.useEffect(()=>{r&&!r.err&&(i("Registration successful.",nh),e("../signin"))},[r]),S.jsx(Wv,{method:"POST",className:dt.background,children:S.jsxs("div",{className:dt.contaner,children:[S.jsx("div",{className:dt.header,children:S.jsx("h1",{children:"Sign up"})}),S.jsxs("div",{className:dt.formdata,children:[S.jsx("input",{name:"username",type:"name",minLength:6,maxLength:20,className:dt.name,placeholder:"Enter username",autoComplete:"true",required:"required"}),S.jsx("input",{name:"email",type:"email",placeholder:"Enter email",autoComplete:"true",required:"required"}),S.jsx("input",{name:"password",type:"password",minLength:3,maxLength:20,className:dt.password,autoComplete:"true",placeholder:"Password",required:"required"}),S.jsx("input",{name:"cPassword",type:"password",minLength:"6",maxLength:"20",autoComplete:"true",placeholder:"Confirm password",required:"required"}),S.jsxs("select",{name:"subtitle",required:"required",children:[S.jsx("option",{value:"Select Subtitle",hidden:!0,children:"Select Subtitle"}),JG.map((s,o)=>S.jsx("option",{value:s,children:s},o))]})]}),S.jsx("div",{className:dt.submit,children:S.jsx("input",{type:"submit",disabled:n,value:"Sign up",placeholder:"Sign in"})}),S.jsxs("div",{className:dt.footer,children:["You have an account? ",S.jsx(qt,{to:"../signin",children:"Sign In"})]}),S.jsx("div",{className:dt.error,children:(r==null?void 0:r.err)&&"Error: "+r.err})]})})},eW=async({request:t,params:e})=>{const n=await t.formData(),r={username:n.get("username"),password:n.get("password"),confirmPassword:n.get("cPassword"),subtitle:n.get("subtitle"),email:n.get("email")};try{return(await Ee.post(`${St}/user/signup`,r)).data}catch(i){return ln(i)}},tW=()=>{const{favorites:t}=er();return S.jsxs(S.Fragment,{children:[S.jsx(Li,{image:"/fav.jpg",type:"Favorite",title:"My Favorite"}),S.jsx(Lr,{items:t,shortText:"online Streaming",type:"Favorite",headerText:"Favorites"})]})},nW=async({request:t})=>Zn({favorites:rW()}),rW=async t=>await iW(),iW=async t=>{try{return(await Ee.get(`${St}/user/favorites`)).data}catch(e){throw e}},sW=()=>{const t=qs(r=>r.user),e=us(),n=A.useRef(!1);return A.useEffect(()=>{!n.current&&!t.isLogin&&(e("/auth/signin"),n.current=!0,Ec("To access this page, please log in.",b_))},[]),t.isLogin?S.jsx(Vv,{}):null},oW=()=>S.jsxs(S.Fragment,{children:[S.jsx(Li,{image:"/watching.jpg",type:"Resume Watching",title:"My Watching List"}),S.jsx(Lr,{shortText:"online Streaming",type:"Resume Watching",headerText:"Continue Watching"})]}),aW=async({request:t})=>Zn({sectionData:lW()}),lW=async t=>await uW(),uW=async t=>{try{const e=qp.getState().user._id;return(await Ee.get(`${St}/user/con`)).data.data}catch(e){throw e}},cW=async()=>{try{const t=await Ee.post(`${St}/user/signout`);return qp.dispatch(oz()),I0("/auth/signin")}catch(t){throw t}},dW=()=>{const t=qs(n=>n.user.isLogin),e=us();return A.useEffect(()=>{t&&e("/")},[t]),t?null:S.jsx(Vv,{})},fW="_top_fdw82_1",hW={top:fW},pW=({password:t,roomId:e})=>S.jsxs("div",{className:hW.top,children:[S.jsxs("div",{style:{userSelect:"text"},children:["ROOM ID: ",e]}),S.jsxs("div",{style:{userSelect:"text"},children:["ROOM password: ",t]})]}),mW="_join_room_1ezzx_1",gW="_inputs_1ezzx_9",my={join_room:mW,inputs:gW};function yW(t){return eo("MuiCircularProgress",t)}Yo("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const vW=["className","color","disableShrink","size","style","thickness","value","variant"];let Xp=t=>t,p1,m1,g1,y1;const Ss=44,xW=vl(p1||(p1=Xp`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),SW=vl(m1||(m1=Xp`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),EW=t=>{const{classes:e,variant:n,color:r,disableShrink:i}=t,s={root:["root",n,`color${Ot(r)}`],svg:["svg"],circle:["circle",`circle${Ot(n)}`,i&&"circleDisableShrink"]};return Zs(s,yW,e)},bW=un("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${Ot(n.color)}`]]}})(({ownerState:t,theme:e})=>V({display:"inline-block"},t.variant==="determinate"&&{transition:e.transitions.create("transform")},t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main}),({ownerState:t})=>t.variant==="indeterminate"&&Hp(g1||(g1=Xp`
      animation: ${0} 1.4s linear infinite;
    `),xW)),TW=un("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(t,e)=>e.svg})({display:"block"}),wW=un("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${Ot(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(({ownerState:t,theme:e})=>V({stroke:"currentColor"},t.variant==="determinate"&&{transition:e.transitions.create("stroke-dashoffset")},t.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink&&Hp(y1||(y1=Xp`
      animation: ${0} 1.4s ease-in-out infinite;
    `),SW)),RW=A.forwardRef(function(e,n){const r=cs({props:e,name:"MuiCircularProgress"}),{className:i,color:s="primary",disableShrink:o=!1,size:a=40,style:l,thickness:u=3.6,value:c=0,variant:d="indeterminate"}=r,f=tt(r,vW),m=V({},r,{color:s,disableShrink:o,size:a,thickness:u,value:c,variant:d}),h=EW(m),p={},v={},y={};if(d==="determinate"){const g=2*Math.PI*((Ss-u)/2);p.strokeDasharray=g.toFixed(3),y["aria-valuenow"]=Math.round(c),p.strokeDashoffset=`${((100-c)/100*g).toFixed(3)}px`,v.transform="rotate(-90deg)"}return S.jsx(bW,V({className:Ut(h.root,i),style:V({width:a,height:a},v,l),ownerState:m,ref:n,role:"progressbar"},y,f,{children:S.jsx(TW,{className:h.svg,ownerState:m,viewBox:`${Ss/2} ${Ss/2} ${Ss} ${Ss}`,children:S.jsx(wW,{className:h.circle,style:p,ownerState:m,cx:Ss,cy:Ss,r:(Ss-u)/2,fill:"none",strokeWidth:u})})}))}),AW=RW,wi=Object.create(null);wi.open="0";wi.close="1";wi.ping="2";wi.pong="3";wi.message="4";wi.upgrade="5";wi.noop="6";const yf=Object.create(null);Object.keys(wi).forEach(t=>{yf[wi[t]]=t});const gy={type:"error",data:"parser error"},fk=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",hk=typeof ArrayBuffer=="function",pk=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,xS=({type:t,data:e},n,r)=>fk&&e instanceof Blob?n?r(e):v1(e,r):hk&&(e instanceof ArrayBuffer||pk(e))?n?r(e):v1(new Blob([e]),r):r(wi[t]+(e||"")),v1=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function x1(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let ug;function _W(t,e){if(fk&&t.data instanceof Blob)return t.data.arrayBuffer().then(x1).then(e);if(hk&&(t.data instanceof ArrayBuffer||pk(t.data)))return e(x1(t.data));xS(t,!1,n=>{ug||(ug=new TextEncoder),e(ug.encode(n))})}const S1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ou=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<S1.length;t++)ou[S1.charCodeAt(t)]=t;const CW=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const u=new ArrayBuffer(e),c=new Uint8Array(u);for(r=0;r<n;r+=4)s=ou[t.charCodeAt(r)],o=ou[t.charCodeAt(r+1)],a=ou[t.charCodeAt(r+2)],l=ou[t.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|a>>2,c[i++]=(a&3)<<6|l&63;return u},LW=typeof ArrayBuffer=="function",SS=(t,e)=>{if(typeof t!="string")return{type:"message",data:mk(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:kW(t.substring(1),e)}:yf[n]?t.length>1?{type:yf[n],data:t.substring(1)}:{type:yf[n]}:gy},kW=(t,e)=>{if(LW){const n=CW(t);return mk(n,e)}else return{base64:!0,data:t}},mk=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},gk="",PW=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{xS(s,!1,a=>{r[o]=a,++i===n&&e(r.join(gk))})})},IW=(t,e)=>{const n=t.split(gk),r=[];for(let i=0;i<n.length;i++){const s=SS(n[i],e);if(r.push(s),s.type==="error")break}return r};function DW(){return new TransformStream({transform(t,e){_W(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let cg;function Id(t){return t.reduce((e,n)=>e+n.length,0)}function Dd(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function OW(t,e){cg||(cg=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(Id(n)<1)break;const l=Dd(n,1);s=(l[0]&128)===128,i=l[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Id(n)<2)break;const l=Dd(n,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(Id(n)<8)break;const l=Dd(n,8),u=new DataView(l.buffer,l.byteOffset,l.length),c=u.getUint32(0);if(c>Math.pow(2,21)-1){a.enqueue(gy);break}i=c*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Id(n)<i)break;const l=Dd(n,i);a.enqueue(SS(s?l:cg.decode(l),e)),r=0}if(i===0||i>t){a.enqueue(gy);break}}}})}const yk=4;function Dt(t){if(t)return MW(t)}function MW(t){for(var e in Dt.prototype)t[e]=Dt.prototype[e];return t}Dt.prototype.on=Dt.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Dt.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Dt.prototype.off=Dt.prototype.removeListener=Dt.prototype.removeAllListeners=Dt.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Dt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};Dt.prototype.emitReserved=Dt.prototype.emit;Dt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Dt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const mr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function vk(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const NW=mr.setTimeout,FW=mr.clearTimeout;function Qp(t,e){e.useNativeTimers?(t.setTimeoutFn=NW.bind(mr),t.clearTimeoutFn=FW.bind(mr)):(t.setTimeoutFn=mr.setTimeout.bind(mr),t.clearTimeoutFn=mr.clearTimeout.bind(mr))}const $W=1.33;function BW(t){return typeof t=="string"?UW(t):Math.ceil((t.byteLength||t.size)*$W)}function UW(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function jW(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function HW(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class zW extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class ES extends Dt{constructor(e){super(),this.writable=!1,Qp(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,r){return super.emitReserved("error",new zW(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=SS(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=jW(e);return n.length?"?"+n:""}}const xk="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),yy=64,VW={};let E1=0,Od=0,b1;function T1(t){let e="";do e=xk[t%yy]+e,t=Math.floor(t/yy);while(t>0);return e}function Sk(){const t=T1(+new Date);return t!==b1?(E1=0,b1=t):t+"."+T1(E1++)}for(;Od<yy;Od++)VW[xk[Od]]=Od;let Ek=!1;try{Ek=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const GW=Ek;function bk(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||GW))return new XMLHttpRequest}catch{}if(!e)try{return new mr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function WW(){}const KW=function(){return new bk({xdomain:!1}).responseType!=null}();class qW extends ES{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}const n=e&&e.forceBase64;this.supportsBinary=KW&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};IW(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,PW(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Sk()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Ua(this.uri(),e)}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let Ua=class vf extends Dt{constructor(e,n){super(),Qp(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.data=n.data!==void 0?n.data:null,this.create()}create(){var e;const n=vk(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const r=this.xhr=new bk(n);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(r)),r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=vf.requestsCount++,vf.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=WW,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete vf.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Ua.requestsCount=0;Ua.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",w1);else if(typeof addEventListener=="function"){const t="onpagehide"in mr?"pagehide":"unload";addEventListener(t,w1,!1)}}function w1(){for(let t in Ua.requests)Ua.requests.hasOwnProperty(t)&&Ua.requests[t].abort()}const bS=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Md=mr.WebSocket||mr.MozWebSocket,R1=!0,YW="arraybuffer",A1=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class XW extends ES{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,r=A1?{}:vk(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=R1&&!A1?n?new Md(e,n):new Md(e):new Md(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;xS(r,this.supportsBinary,s=>{const o={};try{R1&&this.ws.send(s)}catch{}i&&bS(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Sk()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}check(){return!!Md}}class QW extends ES{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const n=OW(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=DW();i.readable.pipeTo(e.writable),this.writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:l})=>{a||(this.onPacket(l),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this.writer.write(o).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this.writer.write(r).then(()=>{i&&bS(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}const JW={websocket:XW,webtransport:QW,polling:qW},ZW=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e9=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function vy(t){if(t.length>2e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=ZW.exec(t||""),s={},o=14;for(;o--;)s[e9[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=t9(s,s.path),s.queryKey=n9(s,s.query),s}function t9(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function n9(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}let Tk=class pa extends Dt{constructor(e,n={}){super(),this.binaryType=YW,this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=vy(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=vy(n.host).host),Qp(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=HW(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=yk,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new JW[e](r)}open(){let e;if(this.opts.rememberUpgrade&&pa.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),r=!1;pa.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;pa.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(c(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function s(){r||(r=!0,c(),n.close(),n=null)}const o=d=>{const f=new Error("probe error: "+d);f.transport=n.name,s(),this.emitReserved("upgradeError",f)};function a(){o("transport closed")}function l(){o("socket closed")}function u(d){n&&d.name!==n.name&&s()}const c=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",a),this.off("close",l),this.off("upgrading",u)};n.once("open",i),n.once("error",o),n.once("close",a),this.once("close",l),this.once("upgrading",u),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onOpen(){if(this.readyState="open",pa.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=BW(i)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}write(e,n,r){return this.sendPacket("message",e,n,r),this}send(e,n,r){return this.sendPacket("message",e,n,r),this}sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){pa.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let r=0;const i=e.length;for(;r<i;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}};Tk.protocol=yk;function r9(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=vy(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const i9=typeof ArrayBuffer=="function",s9=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,wk=Object.prototype.toString,o9=typeof Blob=="function"||typeof Blob<"u"&&wk.call(Blob)==="[object BlobConstructor]",a9=typeof File=="function"||typeof File<"u"&&wk.call(File)==="[object FileConstructor]";function TS(t){return i9&&(t instanceof ArrayBuffer||s9(t))||o9&&t instanceof Blob||a9&&t instanceof File}function xf(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(xf(t[n]))return!0;return!1}if(TS(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return xf(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&xf(t[n]))return!0;return!1}function l9(t){const e=[],n=t.data,r=t;return r.data=xy(n,e),r.attachments=e.length,{packet:r,buffers:e}}function xy(t,e){if(!t)return t;if(TS(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=xy(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=xy(t[r],e));return n}return t}function u9(t,e){return t.data=Sy(t.data,e),delete t.attachments,t}function Sy(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Sy(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Sy(t[n],e));return t}const c9=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],d9=5;var Le;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Le||(Le={}));class f9{constructor(e){this.replacer=e}encode(e){return(e.type===Le.EVENT||e.type===Le.ACK)&&xf(e)?this.encodeAsBinary({type:e.type===Le.EVENT?Le.BINARY_EVENT:Le.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Le.BINARY_EVENT||e.type===Le.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=l9(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function _1(t){return Object.prototype.toString.call(t)==="[object Object]"}class wS extends Dt{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===Le.BINARY_EVENT;r||n.type===Le.BINARY_ACK?(n.type=r?Le.EVENT:Le.ACK,this.reconstructor=new h9(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(TS(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(Le[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Le.BINARY_EVENT||r.type===Le.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(wS.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Le.CONNECT:return _1(n);case Le.DISCONNECT:return n===void 0;case Le.CONNECT_ERROR:return typeof n=="string"||_1(n);case Le.EVENT:case Le.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&c9.indexOf(n[0])===-1);case Le.ACK:case Le.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class h9{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=u9(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const p9=Object.freeze(Object.defineProperty({__proto__:null,Decoder:wS,Encoder:f9,get PacketType(){return Le},protocol:d9},Symbol.toStringTag,{value:"Module"}));function zr(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const m9=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Rk extends Dt{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[zr(e,"open",this.onopen.bind(this)),zr(e,"packet",this.onpacket.bind(this)),zr(e,"error",this.onerror.bind(this)),zr(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(m9.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:Le.EVENT,data:n};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const o=this.ids++,a=n.pop();this._registerAckCallback(o,a),r.id=o}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(s),n.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,a)=>o?i(o):r(a);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Le.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Le.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Le.EVENT:case Le.BINARY_EVENT:this.onevent(e);break;case Le.ACK:case Le.BINARY_ACK:this.onack(e);break;case Le.DISCONNECT:this.ondisconnect();break;case Le.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:Le.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Le.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function bl(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}bl.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};bl.prototype.reset=function(){this.attempts=0};bl.prototype.setMin=function(t){this.ms=t};bl.prototype.setMax=function(t){this.max=t};bl.prototype.setJitter=function(t){this.jitter=t};class Ey extends Dt{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Qp(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new bl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||p9;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Tk(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=zr(n,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=zr(n,"error",s);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(zr(e,"ping",this.onping.bind(this)),zr(e,"data",this.ondata.bind(this)),zr(e,"error",this.onerror.bind(this)),zr(e,"close",this.onclose.bind(this)),zr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){bS(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Rk(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Kl={};function Sf(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=r9(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Kl[i]&&s in Kl[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new Ey(r,e):(Kl[i]||(Kl[i]=new Ey(r,e)),l=Kl[i]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(Sf,{Manager:Ey,Socket:Rk,io:Sf,connect:Sf});const g9="_loading_1m82t_1",y9={loading:g9},C1=({loadingInner:t})=>t?S.jsx("div",{className:y9.loading,children:t}):null,v9=({socket:t})=>{const e=A.useRef(),n=A.useRef(),[r,i]=A.useState(""),s=()=>{const o=e.current.value,a=n.current.value;t.emit("JoinRoom",{guest:!0,id:o,password:a}),t.on("Room_Vaildation",l=>{l.err&&i(l.err)})};return S.jsxs("div",{className:my.join_room,children:[S.jsxs("div",{className:my.inputs,children:[S.jsx("input",{ref:e,autoComplete:"true",type:"text",placeholder:"Type room id"}),S.jsx("input",{ref:n,autoComplete:"true",type:"text",placeholder:"Type room password"})]}),S.jsx("div",{className:dt.buttons,children:S.jsx("div",{onClick:s,className:dt.submit,children:S.jsx("input",{type:"button",value:"Join Room",placeholder:"Join Room"})})}),S.jsx("div",{className:dt.error,children:r})]})};function x9({socket:t,user:e,guest:n},r,i,s,o){t.emit("IsAuthenticated",e),t.on("IsAuthenticated",a=>{S9({isAuth:a,socket:t,guest:n},r)}),t.on("JoinRoom",a=>b9(a,t,r,n,s)),t.on("Message",a=>T9(a,t,i,o)),t.on("UpdateData",a=>E9(a,s)),t.on("disconnect",()=>{s(X0()),r(S.jsx(ks,{error:!0,message:"You have lost connection to the room, Reload the page"}))})}function S9({isAuth:t,socket:e,guest:n},r){if(t||r(S.jsx(ks,{error:!0,message:"You are not authinticated, You cant access this room."})),n)r(S.jsx(v9,{socket:e}));else{e.emit("JoinRoom",{guest:n});return}}function E9({data:t},e){console.log("new data ",t),e(px({data:t}))}function b9({data:t},e,n,r,i){console.log(t,r),r||(console.log("added"),window.addEventListener("message",function(s){const o=s.data;console.log(s),o.type==="Socket_data"&&e.emit("UpdateData",o.data)})),i(eB()),t&&i(px({data:t})),n(S.jsx(ks,{error:!0,message:"You Are In the ROOM"}))}function T9({message:t,error:e,redirect:n},r,i,s){n&&(r.disconnect(!0),setTimeout(()=>{s("/")},3e3)),i(t,e?rh:Yv)}function w9(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ak={exports:{}};(function(t,e){(function(n){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(l,u,c){if(c=c||{},l=l.trim(),u=u.trim(),!u){if(!c.alwaysNormalize)return l;var d=a.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=a.normalizePath(d.path),a.buildURLFromParts(d)}var f=a.parseURL(u);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return c.alwaysNormalize?(f.path=a.normalizePath(f.path),a.buildURLFromParts(f)):u;var m=a.parseURL(l);if(!m)throw new Error("Error trying to parse base URL.");if(!m.netLoc&&m.path&&m.path[0]!=="/"){var h=i.exec(m.path);m.netLoc=h[1],m.path=h[2]}m.netLoc&&!m.path&&(m.path="/");var p={scheme:m.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(p.netLoc=m.netLoc,f.path[0]!=="/"))if(!f.path)p.path=m.path,f.params||(p.params=m.params,f.query||(p.query=m.query));else{var v=m.path,y=v.substring(0,v.lastIndexOf("/")+1)+f.path;p.path=a.normalizePath(y)}return p.path===null&&(p.path=c.alwaysNormalize?a.normalizePath(f.path):f.path),a.buildURLFromParts(p)},parseURL:function(l){var u=r.exec(l);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(o,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};t.exports=a})()})(Ak);var RS=Ak.exports;function L1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L1(Object(n),!0).forEach(function(r){_9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function R9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function A9(t){var e=R9(t,"string");return typeof e=="symbol"?e:String(e)}function _9(t,e,n){return e=A9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mt(){return Mt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mt.apply(this,arguments)}const re=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},C9=Number.isSafeInteger||function(t){return typeof t=="number"&&Math.abs(t)<=L9},L9=Number.MAX_SAFE_INTEGER||9007199254740991;let R=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t}({}),he=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),N=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown",t}({});const xo=function(){},by={trace:xo,debug:xo,log:xo,warn:xo,info:xo,error:xo};let Tu=by;function k9(t){const e=self.console[t];return e?e.bind(self.console,`[${t}] >`):xo}function P9(t,...e){e.forEach(function(n){Tu[n]=t[n]?t[n].bind(t):k9(n)})}function I9(t,e){if(typeof console=="object"&&t===!0||typeof t=="object"){P9(t,"debug","log","info","warn","error");try{Tu.log(`Debug logs enabled for "${e}" in hls.js version 1.5.7`)}catch{Tu=by}}else Tu=by}const D=Tu,D9=/^(\d+)x(\d+)$/,k1=/(.+?)=(".*?"|.*?)(?:,|$)/g;class ct{constructor(e){typeof e=="string"&&(e=ct.parseAttrList(e)),Mt(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const n=parseInt(this[e],10);return n>Number.MAX_SAFE_INTEGER?1/0:n}hexadecimalInteger(e){if(this[e]){let n=(this[e]||"0x").slice(2);n=(n.length&1?"0":"")+n;const r=new Uint8Array(n.length/2);for(let i=0;i<n.length/2;i++)r[i]=parseInt(n.slice(i*2,i*2+2),16);return r}else return null}hexadecimalIntegerAsNumber(e){const n=parseInt(this[e],16);return n>Number.MAX_SAFE_INTEGER?1/0:n}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,n){const r=this[e];return r?parseFloat(r):n}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const n=D9.exec(this[e]);if(n!==null)return{width:parseInt(n[1],10),height:parseInt(n[2],10)}}static parseAttrList(e){let n;const r={},i='"';for(k1.lastIndex=0;(n=k1.exec(e))!==null;){let s=n[2];s.indexOf(i)===0&&s.lastIndexOf(i)===s.length-1&&(s=s.slice(1,-1));const o=n[1].trim();r[o]=s}return r}}function O9(t){return t!=="ID"&&t!=="CLASS"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function M9(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"}class _k{constructor(e,n){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,n){const r=n.attr;for(const i in r)if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]!==r[i]){D.warn(`DATERANGE tag attribute: "${i}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=i;break}e=Mt(new ct({}),r,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const r=new Date(this.attr["END-DATE"]);re(r.getTime())&&(this._endDate=r)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(re(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&re(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class Jp{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var ze={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class Ck{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[ze.AUDIO]:null,[ze.VIDEO]:null,[ze.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,n){const r=e.split("@",2);let i;r.length===1?i=(n==null?void 0:n.byteRangeEndOffset)||0:i=parseInt(r[1]),this._byteRange=[i,parseInt(r[0])+i]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=RS.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class dg extends Ck{constructor(e,n){super(n),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new Jp,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const n=this.levelkeys.identity;if(n)this._decryptdata=n.getDecryptData(this.sn);else{const r=Object.keys(this.levelkeys);if(r.length===1)return this._decryptdata=this.levelkeys[r[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!re(this.programDateTime))return null;const e=re(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const n=Object.keys(this.levelkeys),r=n.length;if(r>1||r===1&&this.levelkeys[n[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const n=this.levelkeys[e];n&&!this._decryptdata&&(this._decryptdata=n.getDecryptData(this.sn))}}abortRequests(){var e,n;(e=this.loader)==null||e.abort(),(n=this.keyLoader)==null||n.abort()}setElementaryStreamInfo(e,n,r,i,s,o=!1){const{elementaryStreams:a}=this,l=a[e];if(!l){a[e]={startPTS:n,endPTS:r,startDTS:i,endDTS:s,partial:o};return}l.startPTS=Math.min(l.startPTS,n),l.endPTS=Math.max(l.endPTS,r),l.startDTS=Math.min(l.startDTS,i),l.endDTS=Math.max(l.endDTS,s)}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[ze.AUDIO]=null,e[ze.VIDEO]=null,e[ze.AUDIOVIDEO]=null}}class N9 extends Ck{constructor(e,n,r,i,s){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new Jp,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=n,this.index=i;const o=e.enumeratedString("BYTERANGE");o&&this.setByteRange(o,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}const F9=10;class $9{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const n=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!n||!this.live,this.advanced=this.endSN>e.endSN||n>0||n===0&&r>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?re(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||F9}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function AS(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function B9(t){const e=Ty(t).subarray(0,16),n=new Uint8Array(16);return n.set(e,16-e.length),n}function U9(t){const e=function(r,i,s){const o=r[i];r[i]=r[s],r[s]=o};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function j9(t){const e=t.split(":");let n=null;if(e[0]==="data"&&e.length===2){const r=e[1].split(";"),i=r[r.length-1].split(",");if(i.length===2){const s=i[0]==="base64",o=i[1];s?(r.splice(-1,1),n=AS(o)):n=B9(o)}}return n}function Ty(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}const ll=typeof self<"u"?self:void 0;var lt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Ln={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function P1(t){switch(t){case Ln.FAIRPLAY:return lt.FAIRPLAY;case Ln.PLAYREADY:return lt.PLAYREADY;case Ln.WIDEVINE:return lt.WIDEVINE;case Ln.CLEARKEY:return lt.CLEARKEY}}var Lk={WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function H9(t){if(t===Lk.WIDEVINE)return lt.WIDEVINE}function I1(t){switch(t){case lt.FAIRPLAY:return Ln.FAIRPLAY;case lt.PLAYREADY:return Ln.PLAYREADY;case lt.WIDEVINE:return Ln.WIDEVINE;case lt.CLEARKEY:return Ln.CLEARKEY}}function fg(t){const{drmSystems:e,widevineLicenseUrl:n}=t,r=e?[lt.FAIRPLAY,lt.WIDEVINE,lt.PLAYREADY,lt.CLEARKEY].filter(i=>!!e[i]):[];return!r[lt.WIDEVINE]&&n&&r.push(lt.WIDEVINE),r}const kk=function(t){return ll!=null&&(t=ll.navigator)!=null&&t.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function z9(t,e,n,r){let i;switch(t){case lt.FAIRPLAY:i=["cenc","sinf"];break;case lt.WIDEVINE:case lt.PLAYREADY:i=["cenc"];break;case lt.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return V9(i,e,n,r)}function V9(t,e,n,r){return[{initDataTypes:t,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs="${s}"`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:n.map(s=>({contentType:`video/mp4; codecs="${s}"`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}function Fo(t,e,n){return Uint8Array.prototype.slice?t.slice(e,n):new Uint8Array(Array.prototype.slice.call(t,e,n))}const _S=(t,e)=>e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,Pk=(t,e)=>e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,nc=(t,e)=>{const n=e;let r=0;for(;_S(t,e);){r+=10;const i=Zp(t,e+6);r+=i,Pk(t,e+10)&&(r+=10),e+=r}if(r>0)return t.subarray(n,n+r)},Zp=(t,e)=>{let n=0;return n=(t[e]&127)<<21,n|=(t[e+1]&127)<<14,n|=(t[e+2]&127)<<7,n|=t[e+3]&127,n},G9=(t,e)=>_S(t,e)&&Zp(t,e+6)+10<=t.length-e,CS=t=>{const e=Dk(t);for(let n=0;n<e.length;n++){const r=e[n];if(Ik(r))return Q9(r)}},Ik=t=>t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp",W9=t=>{const e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=Zp(t,4),r=10;return{type:e,size:n,data:t.subarray(r,r+n)}},Dk=t=>{let e=0;const n=[];for(;_S(t,e);){const r=Zp(t,e+6);e+=10;const i=e+r;for(;e+8<i;){const s=W9(t.subarray(e)),o=K9(s);o&&n.push(o),e+=s.size+10}Pk(t,e)&&(e+=10)}return n},K9=t=>t.type==="PRIV"?q9(t):t.type[0]==="W"?X9(t):Y9(t),q9=t=>{if(t.size<2)return;const e=Ei(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}},Y9=t=>{if(t.size<2)return;if(t.type==="TXXX"){let n=1;const r=Ei(t.data.subarray(n),!0);n+=r.length+1;const i=Ei(t.data.subarray(n));return{key:t.type,info:r,data:i}}const e=Ei(t.data.subarray(1));return{key:t.type,data:e}},X9=t=>{if(t.type==="WXXX"){if(t.size<2)return;let n=1;const r=Ei(t.data.subarray(n),!0);n+=r.length+1;const i=Ei(t.data.subarray(n));return{key:t.type,info:r,data:i}}const e=Ei(t.data);return{key:t.type,data:e}},Q9=t=>{if(t.data.byteLength===8){const e=new Uint8Array(t.data),n=e[3]&1;let r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,n&&(r+=4772185884e-2),Math.round(r)}},Ei=(t,e=!1)=>{const n=J9();if(n){const u=n.decode(t);if(e){const c=u.indexOf("\0");return c!==-1?u.substring(0,c):u}return u.replace(/\0/g,"")}const r=t.length;let i,s,o,a="",l=0;for(;l<r;){if(i=t[l++],i===0&&e)return a;if(i===0||i===3)continue;switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(i);break;case 12:case 13:s=t[l++],a+=String.fromCharCode((i&31)<<6|s&63);break;case 14:s=t[l++],o=t[l++],a+=String.fromCharCode((i&15)<<12|(s&63)<<6|(o&63)<<0);break}}return a};let hg;function J9(){if(!navigator.userAgent.includes("PlayStation 4"))return!hg&&typeof self.TextDecoder<"u"&&(hg=new self.TextDecoder("utf-8")),hg}const si={hexDump:function(t){let e="";for(let n=0;n<t.length;n++){let r=t[n].toString(16);r.length<2&&(r="0"+r),e+=r}return e}},Eh=Math.pow(2,32)-1,Z9=[].push,Ok={video:1,audio:2,id3:3,text:4};function $t(t){return String.fromCharCode.apply(null,t)}function Mk(t,e){const n=t[e]<<8|t[e+1];return n<0?65536+n:n}function le(t,e){const n=Nk(t,e);return n<0?4294967296+n:n}function D1(t,e){let n=le(t,e);return n*=Math.pow(2,32),n+=le(t,e+4),n}function Nk(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function pg(t,e,n){t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=n&255}function eK(t){const e=t.byteLength;for(let n=0;n<e;){const r=le(t,n);if(r>8&&t[n+4]===109&&t[n+5]===111&&t[n+6]===111&&t[n+7]===102)return!0;n=r>1?n+r:e}return!1}function xe(t,e){const n=[];if(!e.length)return n;const r=t.byteLength;for(let i=0;i<r;){const s=le(t,i),o=$t(t.subarray(i+4,i+8)),a=s>1?i+s:r;if(o===e[0])if(e.length===1)n.push(t.subarray(i+8,a));else{const l=xe(t.subarray(i+8,a),e.slice(1));l.length&&Z9.apply(n,l)}i=a}return n}function tK(t){const e=[],n=t[0];let r=8;const i=le(t,r);r+=4;let s=0,o=0;n===0?(s=le(t,r),o=le(t,r+4),r+=8):(s=D1(t,r),o=D1(t,r+8),r+=16),r+=2;let a=t.length+o;const l=Mk(t,r);r+=2;for(let u=0;u<l;u++){let c=r;const d=le(t,c);c+=4;const f=d&2147483647;if((d&2147483648)>>>31===1)return D.warn("SIDX has hierarchical references (not supported)"),null;const h=le(t,c);c+=4,e.push({referenceSize:f,subsegmentDuration:h,info:{duration:h/i,start:a,end:a+f-1}}),a+=f,c+=4,r=c}return{earliestPresentationTime:s,timescale:i,version:n,referencesCount:l,references:e}}function Fk(t){const e=[],n=xe(t,["moov","trak"]);for(let i=0;i<n.length;i++){const s=n[i],o=xe(s,["tkhd"])[0];if(o){let a=o[0];const l=le(o,a===0?12:20),u=xe(s,["mdia","mdhd"])[0];if(u){a=u[0];const c=le(u,a===0?12:20),d=xe(s,["mdia","hdlr"])[0];if(d){const f=$t(d.subarray(8,12)),m={soun:ze.AUDIO,vide:ze.VIDEO}[f];if(m){const h=xe(s,["mdia","minf","stbl","stsd"])[0],p=nK(h);e[l]={timescale:c,type:m},e[m]=Xt({timescale:c,id:l},p)}}}}}return xe(t,["moov","mvex","trex"]).forEach(i=>{const s=le(i,4),o=e[s];o&&(o.default={duration:le(i,12),flags:le(i,20)})}),e}function nK(t){const e=t.subarray(8),n=e.subarray(86),r=$t(e.subarray(4,8));let i=r;const s=r==="enca"||r==="encv";if(s){const a=xe(e,[r])[0].subarray(r==="enca"?28:78);xe(a,["sinf"]).forEach(u=>{const c=xe(u,["schm"])[0];if(c){const d=$t(c.subarray(4,8));if(d==="cbcs"||d==="cenc"){const f=xe(u,["frma"])[0];f&&(i=$t(f))}}})}switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const o=xe(n,["avcC"])[0];i+="."+Nd(o[1])+Nd(o[2])+Nd(o[3]);break}case"mp4a":{const o=xe(e,[r])[0],a=xe(o.subarray(28),["esds"])[0];if(a&&a.length>12){let l=4;if(a[l++]!==3)break;l=mg(a,l),l+=2;const u=a[l++];if(u&128&&(l+=2),u&64&&(l+=a[l++]),a[l++]!==4)break;l=mg(a,l);const c=a[l++];if(c===64)i+="."+Nd(c);else break;if(l+=12,a[l++]!==5)break;l=mg(a,l);const d=a[l++];let f=(d&248)>>3;f===31&&(f+=1+((d&7)<<3)+((a[l]&224)>>5)),i+="."+f}break}case"hvc1":case"hev1":{const o=xe(n,["hvcC"])[0],a=o[1],l=["","A","B","C"][a>>6],u=a&31,c=le(o,2),d=(a&32)>>5?"H":"L",f=o[12],m=o.subarray(6,12);i+="."+l+u,i+="."+c.toString(16).toUpperCase(),i+="."+d+f;let h="";for(let p=m.length;p--;){const v=m[p];(v||h)&&(h="."+v.toString(16).toUpperCase()+h)}i+=h;break}case"dvh1":case"dvhe":{const o=xe(n,["dvcC"])[0],a=o[2]>>1&127,l=o[2]<<5&32|o[3]>>3&31;i+="."+ni(a)+"."+ni(l);break}case"vp09":{const o=xe(n,["vpcC"])[0],a=o[4],l=o[5],u=o[6]>>4&15;i+="."+ni(a)+"."+ni(l)+"."+ni(u);break}case"av01":{const o=xe(n,["av1C"])[0],a=o[1]>>>5,l=o[1]&31,u=o[2]>>>7?"H":"M",c=(o[2]&64)>>6,d=(o[2]&32)>>5,f=a===2&&c?d?12:10:c?10:8,m=(o[2]&16)>>4,h=(o[2]&8)>>3,p=(o[2]&4)>>2,v=o[2]&3;i+="."+a+"."+ni(l)+u+"."+ni(f)+"."+m+"."+h+p+v+"."+ni(1)+"."+ni(1)+"."+ni(1)+"."+0;break}}return{codec:i,encrypted:s}}function mg(t,e){const n=e+5;for(;t[e++]&128&&e<n;);return e}function Nd(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function ni(t){return(t<10?"0":"")+t}function rK(t,e){if(!t||!e)return t;const n=e.keyId;return n&&e.isCommonEncryption&&xe(t,["moov","trak"]).forEach(i=>{const o=xe(i,["mdia","minf","stbl","stsd"])[0].subarray(8);let a=xe(o,["enca"]);const l=a.length>0;l||(a=xe(o,["encv"])),a.forEach(u=>{const c=l?u.subarray(28):u.subarray(78);xe(c,["sinf"]).forEach(f=>{const m=$k(f);if(m){const h=m.subarray(8,24);h.some(p=>p!==0)||(D.log(`[eme] Patching keyId in 'enc${l?"a":"v"}>sinf>>tenc' box: ${si.hexDump(h)} -> ${si.hexDump(n)}`),m.set(n,8))}})})}),t}function $k(t){const e=xe(t,["schm"])[0];if(e){const n=$t(e.subarray(4,8));if(n==="cbcs"||n==="cenc")return xe(t,["schi","tenc"])[0]}return D.error("[eme] missing 'schm' box"),null}function iK(t,e){return xe(e,["moof","traf"]).reduce((n,r)=>{const i=xe(r,["tfdt"])[0],s=i[0],o=xe(r,["tfhd"]).reduce((a,l)=>{const u=le(l,4),c=t[u];if(c){let d=le(i,4);if(s===1){if(d===Eh)return D.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),a;d*=Eh+1,d+=le(i,8)}const f=c.timescale||9e4,m=d/f;if(re(m)&&(a===null||m<a))return m}return a},null);return o!==null&&re(o)&&(n===null||o<n)?o:n},null)}function sK(t,e){let n=0,r=0,i=0;const s=xe(t,["moof","traf"]);for(let o=0;o<s.length;o++){const a=s[o],l=xe(a,["tfhd"])[0],u=le(l,4),c=e[u];if(!c)continue;const d=c.default,f=le(l,0)|(d==null?void 0:d.flags);let m=d==null?void 0:d.duration;f&8&&(f&2?m=le(l,12):m=le(l,8));const h=c.timescale||9e4,p=xe(a,["trun"]);for(let v=0;v<p.length;v++){if(n=oK(p[v]),!n&&m){const y=le(p[v],4);n=m*y}c.type===ze.VIDEO?r+=n/h:c.type===ze.AUDIO&&(i+=n/h)}}if(r===0&&i===0){let o=1/0,a=0,l=0;const u=xe(t,["sidx"]);for(let c=0;c<u.length;c++){const d=tK(u[c]);if(d!=null&&d.references){o=Math.min(o,d.earliestPresentationTime/d.timescale);const f=d.references.reduce((m,h)=>m+h.info.duration||0,0);a=Math.max(a,f+d.earliestPresentationTime/d.timescale),l=a-o}}if(l&&re(l))return l}return r||i}function oK(t){const e=le(t,0);let n=8;e&1&&(n+=4),e&4&&(n+=4);let r=0;const i=le(t,4);for(let s=0;s<i;s++){if(e&256){const o=le(t,n);r+=o,n+=4}e&512&&(n+=4),e&1024&&(n+=4),e&2048&&(n+=4)}return r}function aK(t,e,n){xe(e,["moof","traf"]).forEach(r=>{xe(r,["tfhd"]).forEach(i=>{const s=le(i,4),o=t[s];if(!o)return;const a=o.timescale||9e4;xe(r,["tfdt"]).forEach(l=>{const u=l[0],c=n*a;if(c){let d=le(l,4);if(u===0)d-=c,d=Math.max(d,0),pg(l,4,d);else{d*=Math.pow(2,32),d+=le(l,8),d-=c,d=Math.max(d,0);const f=Math.floor(d/(Eh+1)),m=Math.floor(d%(Eh+1));pg(l,4,f),pg(l,8,m)}}})})})}function lK(t){const e={valid:null,remainder:null},n=xe(t,["moof"]);if(n.length<2)return e.remainder=t,e;const r=n[n.length-1];return e.valid=Fo(t,0,r.byteOffset-8),e.remainder=Fo(t,r.byteOffset-8),e}function Ar(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function O1(t,e){const n=[],r=e.samples,i=e.timescale,s=e.id;let o=!1;return xe(r,["moof"]).map(l=>{const u=l.byteOffset-8;xe(l,["traf"]).map(d=>{const f=xe(d,["tfdt"]).map(m=>{const h=m[0];let p=le(m,4);return h===1&&(p*=Math.pow(2,32),p+=le(m,8)),p/i})[0];return f!==void 0&&(t=f),xe(d,["tfhd"]).map(m=>{const h=le(m,4),p=le(m,0)&16777215,v=(p&1)!==0,y=(p&2)!==0,g=(p&8)!==0;let x=0;const b=(p&16)!==0;let E=0;const T=(p&32)!==0;let w=8;h===s&&(v&&(w+=8),y&&(w+=4),g&&(x=le(m,w),w+=4),b&&(E=le(m,w),w+=4),T&&(w+=4),e.type==="video"&&(o=uK(e.codec)),xe(d,["trun"]).map(_=>{const k=_[0],L=le(_,0)&16777215,P=(L&1)!==0;let H=0;const F=(L&4)!==0,Y=(L&256)!==0;let K=0;const W=(L&512)!==0;let X=0;const U=(L&1024)!==0,$=(L&2048)!==0;let B=0;const te=le(_,4);let Z=8;P&&(H=le(_,Z),Z+=4),F&&(Z+=4);let de=H+u;for(let oe=0;oe<te;oe++){if(Y?(K=le(_,Z),Z+=4):K=x,W?(X=le(_,Z),Z+=4):X=E,U&&(Z+=4),$&&(k===0?B=le(_,Z):B=Nk(_,Z),Z+=4),e.type===ze.VIDEO){let ge=0;for(;ge<X;){const ye=le(r,de);if(de+=4,cK(o,r[de])){const Oe=r.subarray(de,de+ye);Bk(Oe,o?2:1,t+B/i,n)}de+=ye,ge+=ye+4}}t+=K/i}}))})})}),n}function uK(t){if(!t)return!1;const e=t.indexOf("."),n=e<0?t:t.substring(0,e);return n==="hvc1"||n==="hev1"||n==="dvh1"||n==="dvhe"}function cK(t,e){if(t){const n=e>>1&63;return n===39||n===40}else return(e&31)===6}function Bk(t,e,n,r){const i=Uk(t);let s=0;s+=e;let o=0,a=0,l=0;for(;s<i.length;){o=0;do{if(s>=i.length)break;l=i[s++],o+=l}while(l===255);a=0;do{if(s>=i.length)break;l=i[s++],a+=l}while(l===255);const u=i.length-s;let c=s;if(a<u)s+=a;else if(a>u){D.error(`Malformed SEI payload. ${a} is too small, only ${u} bytes left to parse.`);break}if(o===4){if(i[c++]===181){const f=Mk(i,c);if(c+=2,f===49){const m=le(i,c);if(c+=4,m===1195456820){const h=i[c++];if(h===3){const p=i[c++],v=31&p,y=64&p,g=y?2+v*3:0,x=new Uint8Array(g);if(y){x[0]=p;for(let b=1;b<g;b++)x[b]=i[c++]}r.push({type:h,payloadType:o,pts:n,bytes:x})}}}}}else if(o===5&&a>16){const d=[];for(let h=0;h<16;h++){const p=i[c++].toString(16);d.push(p.length==1?"0"+p:p),(h===3||h===5||h===7||h===9)&&d.push("-")}const f=a-16,m=new Uint8Array(f);for(let h=0;h<f;h++)m[h]=i[c++];r.push({payloadType:o,pts:n,uuid:d.join(""),userData:Ei(m),userDataBytes:m})}}}function Uk(t){const e=t.byteLength,n=[];let r=1;for(;r<e-2;)t[r]===0&&t[r+1]===0&&t[r+2]===3?(n.push(r+2),r+=2):r++;if(n.length===0)return t;const i=e-n.length,s=new Uint8Array(i);let o=0;for(r=0;r<i;o++,r++)o===n[0]&&(o++,n.shift()),s[r]=t[o];return s}function dK(t){const e=t[0];let n="",r="",i=0,s=0,o=0,a=0,l=0,u=0;if(e===0){for(;$t(t.subarray(u,u+1))!=="\0";)n+=$t(t.subarray(u,u+1)),u+=1;for(n+=$t(t.subarray(u,u+1)),u+=1;$t(t.subarray(u,u+1))!=="\0";)r+=$t(t.subarray(u,u+1)),u+=1;r+=$t(t.subarray(u,u+1)),u+=1,i=le(t,12),s=le(t,16),a=le(t,20),l=le(t,24),u=28}else if(e===1){u+=4,i=le(t,u),u+=4;const d=le(t,u);u+=4;const f=le(t,u);for(u+=4,o=2**32*d+f,C9(o)||(o=Number.MAX_SAFE_INTEGER,D.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),a=le(t,u),u+=4,l=le(t,u),u+=4;$t(t.subarray(u,u+1))!=="\0";)n+=$t(t.subarray(u,u+1)),u+=1;for(n+=$t(t.subarray(u,u+1)),u+=1;$t(t.subarray(u,u+1))!=="\0";)r+=$t(t.subarray(u,u+1)),u+=1;r+=$t(t.subarray(u,u+1)),u+=1}const c=t.subarray(u,t.byteLength);return{schemeIdUri:n,value:r,timeScale:i,presentationTime:o,presentationTimeDelta:s,eventDuration:a,id:l,payload:c}}function fK(t,...e){const n=e.length;let r=8,i=n;for(;i--;)r+=e[i].byteLength;const s=new Uint8Array(r);for(s[0]=r>>24&255,s[1]=r>>16&255,s[2]=r>>8&255,s[3]=r&255,s.set(t,4),i=0,r=8;i<n;i++)s.set(e[i],r),r+=e[i].byteLength;return s}function hK(t,e,n){if(t.byteLength!==16)throw new RangeError("Invalid system id");let r,i;if(e){r=1,i=new Uint8Array(e.length*16);for(let a=0;a<e.length;a++){const l=e[a];if(l.byteLength!==16)throw new RangeError("Invalid key");i.set(l,a*16)}}else r=0,i=new Uint8Array;let s;r>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const o=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(o.buffer).setUint32(0,n.byteLength,!1),fK([112,115,115,104],new Uint8Array([r,0,0,0]),t,s,i,o,n||new Uint8Array)}function pK(t){if(!(t instanceof ArrayBuffer)||t.byteLength<32)return null;const e={version:0,systemId:"",kids:null,data:null},n=new DataView(t),r=n.getUint32(0);if(t.byteLength!==r&&r>44||n.getUint32(4)!==1886614376||(e.version=n.getUint32(8)>>>24,e.version>1))return null;e.systemId=si.hexDump(new Uint8Array(t,12,16));const s=n.getUint32(28);if(e.version===0){if(r-32<s)return null;e.data=new Uint8Array(t,32,s)}else if(e.version===1){e.kids=[];for(let o=0;o<s;o++)e.kids.push(new Uint8Array(t,32+o*16,16))}return e}let Fd={};class rc{static clearKeyUriToKeyIdMap(){Fd={}}constructor(e,n,r,i=[1],s=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=n,this.keyFormat=r,this.keyFormatVersions=i,this.iv=s,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Ln.FAIRPLAY:case Ln.WIDEVINE:case Ln.PLAYREADY:case Ln.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&D.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const r=mK(e);return new rc(this.method,this.uri,"identity",this.keyFormatVersions,r)}const n=j9(this.uri);if(n)switch(this.keyFormat){case Ln.WIDEVINE:this.pssh=n,n.length>=22&&(this.keyId=n.subarray(n.length-22,n.length-6));break;case Ln.PLAYREADY:{const r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=hK(r,null,n);const i=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2),s=String.fromCharCode.apply(null,Array.from(i)),o=s.substring(s.indexOf("<"),s.length),u=new DOMParser().parseFromString(o,"text/xml").getElementsByTagName("KID")[0];if(u){const c=u.childNodes[0]?u.childNodes[0].nodeValue:u.getAttribute("VALUE");if(c){const d=AS(c).subarray(0,16);U9(d),this.keyId=d}}break}default:{let r=n.subarray(0,16);if(r.length!==16){const i=new Uint8Array(16);i.set(r,16-r.length),r=i}this.keyId=r;break}}if(!this.keyId||this.keyId.byteLength!==16){let r=Fd[this.uri];if(!r){const i=Object.keys(Fd).length%Number.MAX_SAFE_INTEGER;r=new Uint8Array(16),new DataView(r.buffer,12,4).setUint32(0,i),Fd[this.uri]=r}this.keyId=r}return this}}function mK(t){const e=new Uint8Array(16);for(let n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e}const jk=/\{\$([a-zA-Z0-9-_]+)\}/g;function M1(t){return jk.test(t)}function An(t,e,n){if(t.variableList!==null||t.hasVariableRefs)for(let r=n.length;r--;){const i=n[r],s=e[i];s&&(e[i]=wy(t,s))}}function wy(t,e){if(t.variableList!==null||t.hasVariableRefs){const n=t.variableList;return e.replace(jk,r=>{const i=r.substring(2,r.length-1),s=n==null?void 0:n[i];return s===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),r):s})}return e}function N1(t,e,n){let r=t.variableList;r||(t.variableList=r={});let i,s;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const o=new self.URL(n).searchParams;if(o.has(i))s=o.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${n}"`)}catch(o){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${o.message}`))}}else i=e.NAME,s=e.VALUE;i in r?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):r[i]=s||""}function gK(t,e,n){const r=e.IMPORT;if(n&&r in n){let i=t.variableList;i||(t.variableList=i={}),i[r]=n[r]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}function Tl(t=!0){return typeof self>"u"?void 0:(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}const bh={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function yK(t,e){const n=bh[e];return!!n&&!!n[t.slice(0,4)]}function gg(t,e,n=!0){return!t.split(",").some(r=>!Hk(r,e,n))}function Hk(t,e,n=!0){var r;const i=Tl(n);return(r=i==null?void 0:i.isTypeSupported(ic(t,e)))!=null?r:!1}function ic(t,e){return`${e}/mp4;codecs="${t}"`}function F1(t){if(t){const e=t.substring(0,4);return bh.video[e]}return 2}function Th(t){return t.split(",").reduce((e,n)=>{const r=bh.video[n];return r?(r*2+e)/(e?3:2):(bh.audio[n]+e)/(e?2:1)},0)}const yg={};function vK(t,e=!0){if(yg[t])return yg[t];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[t];for(let r=0;r<n.length;r++)if(Hk(n[r],"audio",e))return yg[t]=n[r],n[r];return t}const xK=/flac|opus/i;function wh(t,e=!0){return t.replace(xK,n=>vK(n.toLowerCase(),e))}function $1(t,e){return t&&t!=="mp4a"?t:e}function SK(t){const e=t.split(".");if(e.length>2){let n=e.shift()+".";return n+=parseInt(e.shift()).toString(16),n+=("000"+parseInt(e.shift()).toString(16)).slice(-4),n}return t}const B1=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,U1=/#EXT-X-MEDIA:(.*)/g,EK=/^#EXT(?:INF|-X-TARGETDURATION):/m,j1=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),bK=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class pi{static findGroup(e,n){for(let r=0;r<e.length;r++){const i=e[r];if(i.id===n)return i}}static resolve(e,n){return RS.buildAbsoluteURL(n,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return EK.test(e)}static parseMasterPlaylist(e,n){const r=M1(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:r},s=[];B1.lastIndex=0;let o;for(;(o=B1.exec(e))!=null;)if(o[1]){var a;const u=new ct(o[1]);An(i,u,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const c=wy(i,o[2]),d={attrs:u,bitrate:u.decimalInteger("BANDWIDTH")||u.decimalInteger("AVERAGE-BANDWIDTH"),name:u.NAME,url:pi.resolve(c,n)},f=u.decimalResolution("RESOLUTION");f&&(d.width=f.width,d.height=f.height),TK(u.CODECS,d),(a=d.unknownCodecs)!=null&&a.length||s.push(d),i.levels.push(d)}else if(o[3]){const u=o[3],c=o[4];switch(u){case"SESSION-DATA":{const d=new ct(c);An(i,d,["DATA-ID","LANGUAGE","VALUE","URI"]);const f=d["DATA-ID"];f&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[f]=d);break}case"SESSION-KEY":{const d=H1(c,n,i);d.encrypted&&d.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(d)):D.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${c}"`);break}case"DEFINE":{{const d=new ct(c);An(i,d,["NAME","VALUE","QUERYPARAM"]),N1(i,d,n)}break}case"CONTENT-STEERING":{const d=new ct(c);An(i,d,["SERVER-URI","PATHWAY-ID"]),i.contentSteering={uri:pi.resolve(d["SERVER-URI"],n),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=z1(c);break}}}const l=s.length>0&&s.length<i.levels.length;return i.levels=l?s:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,n,r){let i;const s={},o=r.levels,a={AUDIO:o.map(u=>({id:u.attrs.AUDIO,audioCodec:u.audioCodec})),SUBTITLES:o.map(u=>({id:u.attrs.SUBTITLES,textCodec:u.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(U1.lastIndex=0;(i=U1.exec(e))!==null;){const u=new ct(i[1]),c=u.TYPE;if(c){const d=a[c],f=s[c]||[];s[c]=f,An(r,u,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const m=u.LANGUAGE,h=u["ASSOC-LANGUAGE"],p=u.CHANNELS,v=u.CHARACTERISTICS,y=u["INSTREAM-ID"],g={attrs:u,bitrate:0,id:l++,groupId:u["GROUP-ID"]||"",name:u.NAME||m||"",type:c,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:m,url:u.URI?pi.resolve(u.URI,n):""};if(h&&(g.assocLang=h),p&&(g.channels=p),v&&(g.characteristics=v),y&&(g.instreamId=y),d!=null&&d.length){const x=pi.findGroup(d,g.groupId)||d[0];V1(g,x,"audioCodec"),V1(g,x,"textCodec")}f.push(g)}}return s}static parseLevelPlaylist(e,n,r,i,s,o){const a=new $9(n),l=a.fragments;let u=null,c=0,d=0,f=0,m=0,h=null,p=new dg(i,n),v,y,g,x=-1,b=!1,E=null;for(j1.lastIndex=0,a.m3u8=e,a.hasVariableRefs=M1(e);(v=j1.exec(e))!==null;){b&&(b=!1,p=new dg(i,n),p.start=f,p.sn=c,p.cc=m,p.level=r,u&&(p.initSegment=u,p.rawProgramDateTime=u.rawProgramDateTime,u.rawProgramDateTime=null,E&&(p.setByteRange(E),E=null)));const k=v[1];if(k){p.duration=parseFloat(k);const L=(" "+v[2]).slice(1);p.title=L||null,p.tagList.push(L?["INF",k,L]:["INF",k])}else if(v[3]){if(re(p.duration)){p.start=f,g&&K1(p,g,a),p.sn=c,p.level=r,p.cc=m,l.push(p);const L=(" "+v[3]).slice(1);p.relurl=wy(a,L),G1(p,h),h=p,f+=p.duration,c++,d=0,b=!0}}else if(v[4]){const L=(" "+v[4]).slice(1);h?p.setByteRange(L,h):p.setByteRange(L)}else if(v[5])p.rawProgramDateTime=(" "+v[5]).slice(1),p.tagList.push(["PROGRAM-DATE-TIME",p.rawProgramDateTime]),x===-1&&(x=l.length);else{if(v=v[0].match(bK),!v){D.warn("No matches on slow regex match for level playlist!");continue}for(y=1;y<v.length&&!(typeof v[y]<"u");y++);const L=(" "+v[y]).slice(1),P=(" "+v[y+1]).slice(1),H=v[y+2]?(" "+v[y+2]).slice(1):"";switch(L){case"PLAYLIST-TYPE":a.type=P.toUpperCase();break;case"MEDIA-SEQUENCE":c=a.startSN=parseInt(P);break;case"SKIP":{const F=new ct(P);An(a,F,["RECENTLY-REMOVED-DATERANGES"]);const Y=F.decimalInteger("SKIPPED-SEGMENTS");if(re(Y)){a.skippedSegments=Y;for(let W=Y;W--;)l.unshift(null);c+=Y}const K=F.enumeratedString("RECENTLY-REMOVED-DATERANGES");K&&(a.recentlyRemovedDateranges=K.split("	"));break}case"TARGETDURATION":a.targetduration=Math.max(parseInt(P),1);break;case"VERSION":a.version=parseInt(P);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":a.live=!1;break;case"#":(P||H)&&p.tagList.push(H?[P,H]:[P]);break;case"DISCONTINUITY":m++,p.tagList.push(["DIS"]);break;case"GAP":p.gap=!0,p.tagList.push([L]);break;case"BITRATE":p.tagList.push([L,P]);break;case"DATERANGE":{const F=new ct(P);An(a,F,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),An(a,F,F.clientAttrs);const Y=new _k(F,a.dateRanges[F.ID]);Y.isValid||a.skippedSegments?a.dateRanges[Y.id]=Y:D.warn(`Ignoring invalid DATERANGE tag: "${P}"`),p.tagList.push(["EXT-X-DATERANGE",P]);break}case"DEFINE":{{const F=new ct(P);An(a,F,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in F?gK(a,F,o):N1(a,F,n)}break}case"DISCONTINUITY-SEQUENCE":m=parseInt(P);break;case"KEY":{const F=H1(P,n,a);if(F.isSupported()){if(F.method==="NONE"){g=void 0;break}g||(g={}),g[F.keyFormat]&&(g=Mt({},g)),g[F.keyFormat]=F}else D.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${P}"`);break}case"START":a.startTimeOffset=z1(P);break;case"MAP":{const F=new ct(P);if(An(a,F,["BYTERANGE","URI"]),p.duration){const Y=new dg(i,n);W1(Y,F,r,g),u=Y,p.initSegment=u,u.rawProgramDateTime&&!p.rawProgramDateTime&&(p.rawProgramDateTime=u.rawProgramDateTime)}else{const Y=p.byteRangeEndOffset;if(Y){const K=p.byteRangeStartOffset;E=`${Y-K}@${K}`}else E=null;W1(p,F,r,g),u=p,b=!0}break}case"SERVER-CONTROL":{const F=new ct(P);a.canBlockReload=F.bool("CAN-BLOCK-RELOAD"),a.canSkipUntil=F.optionalFloat("CAN-SKIP-UNTIL",0),a.canSkipDateRanges=a.canSkipUntil>0&&F.bool("CAN-SKIP-DATERANGES"),a.partHoldBack=F.optionalFloat("PART-HOLD-BACK",0),a.holdBack=F.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const F=new ct(P);a.partTarget=F.decimalFloatingPoint("PART-TARGET");break}case"PART":{let F=a.partList;F||(F=a.partList=[]);const Y=d>0?F[F.length-1]:void 0,K=d++,W=new ct(P);An(a,W,["BYTERANGE","URI"]);const X=new N9(W,p,n,K,Y);F.push(X),p.duration+=X.duration;break}case"PRELOAD-HINT":{const F=new ct(P);An(a,F,["URI"]),a.preloadHint=F;break}case"RENDITION-REPORT":{const F=new ct(P);An(a,F,["URI"]),a.renditionReports=a.renditionReports||[],a.renditionReports.push(F);break}default:D.warn(`line parsed but not handled: ${v}`);break}}}h&&!h.relurl?(l.pop(),f-=h.duration,a.partList&&(a.fragmentHint=h)):a.partList&&(G1(p,h),p.cc=m,a.fragmentHint=p,g&&K1(p,g,a));const T=l.length,w=l[0],_=l[T-1];if(f+=a.skippedSegments*a.targetduration,f>0&&T&&_){a.averagetargetduration=f/T;const k=_.sn;a.endSN=k!=="initSegment"?k:0,a.live||(_.endList=!0),w&&(a.startCC=w.cc)}else a.endSN=0,a.startCC=0;return a.fragmentHint&&(f+=a.fragmentHint.duration),a.totalduration=f,a.endCC=m,x>0&&wK(l,x),a}}function H1(t,e,n){var r,i;const s=new ct(t);An(n,s,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const o=(r=s.METHOD)!=null?r:"",a=s.URI,l=s.hexadecimalInteger("IV"),u=s.KEYFORMATVERSIONS,c=(i=s.KEYFORMAT)!=null?i:"identity";a&&s.IV&&!l&&D.error(`Invalid IV: ${s.IV}`);const d=a?pi.resolve(a,e):"",f=(u||"1").split("/").map(Number).filter(Number.isFinite);return new rc(o,d,c,f,l)}function z1(t){const n=new ct(t).decimalFloatingPoint("TIME-OFFSET");return re(n)?n:null}function TK(t,e){let n=(t||"").split(/[ ,]+/).filter(r=>r);["video","audio","text"].forEach(r=>{const i=n.filter(s=>yK(s,r));i.length&&(e[`${r}Codec`]=i.join(","),n=n.filter(s=>i.indexOf(s)===-1))}),e.unknownCodecs=n}function V1(t,e,n){const r=e[n];r&&(t[n]=r)}function wK(t,e){let n=t[e];for(let r=e;r--;){const i=t[r];if(!i)return;i.programDateTime=n.programDateTime-i.duration*1e3,n=i}}function G1(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),re(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}function W1(t,e,n,r){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=n,t.sn="initSegment",r&&(t.levelkeys=r),t.initSegment=null}function K1(t,e,n){t.levelkeys=e;const{encryptedFragments:r}=n;(!r.length||r[r.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&r.push(t)}var ke={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},ce={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function q1(t){const{type:e}=t;switch(e){case ke.AUDIO_TRACK:return ce.AUDIO;case ke.SUBTITLE_TRACK:return ce.SUBTITLE;default:return ce.MAIN}}function vg(t,e){let n=t.url;return(n===void 0||n.indexOf("data:")===0)&&(n=e.url),n}class RK{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.LEVEL_LOADING,this.onLevelLoading,this),e.on(R.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(R.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.LEVEL_LOADING,this.onLevelLoading,this),e.off(R.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(R.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const n=this.hls.config,r=n.pLoader,i=n.loader,s=r||i,o=new s(n);return this.loaders[e.type]=o,o}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const n=this.loaders[e];n&&n.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,n){const{url:r}=n;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:ke.MANIFEST,url:r,deliveryDirectives:null})}onLevelLoading(e,n){const{id:r,level:i,pathwayId:s,url:o,deliveryDirectives:a}=n;this.load({id:r,level:i,pathwayId:s,responseType:"text",type:ke.LEVEL,url:o,deliveryDirectives:a})}onAudioTrackLoading(e,n){const{id:r,groupId:i,url:s,deliveryDirectives:o}=n;this.load({id:r,groupId:i,level:null,responseType:"text",type:ke.AUDIO_TRACK,url:s,deliveryDirectives:o})}onSubtitleTrackLoading(e,n){const{id:r,groupId:i,url:s,deliveryDirectives:o}=n;this.load({id:r,groupId:i,level:null,responseType:"text",type:ke.SUBTITLE_TRACK,url:s,deliveryDirectives:o})}load(e){var n;const r=this.hls.config;let i=this.getInternalLoader(e);if(i){const u=i.context;if(u&&u.url===e.url&&u.level===e.level){D.trace("[playlist-loader]: playlist request ongoing");return}D.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let s;if(e.type===ke.MANIFEST?s=r.manifestLoadPolicy.default:s=Mt({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),re((n=e.deliveryDirectives)==null?void 0:n.part)){let u;if(e.type===ke.LEVEL&&e.level!==null?u=this.hls.levels[e.level].details:e.type===ke.AUDIO_TRACK&&e.id!==null?u=this.hls.audioTracks[e.id].details:e.type===ke.SUBTITLE_TRACK&&e.id!==null&&(u=this.hls.subtitleTracks[e.id].details),u){const c=u.partTarget,d=u.targetduration;if(c&&d){const f=Math.max(c*3,d*.8)*1e3;s=Mt({},s,{maxTimeToFirstByteMs:Math.min(f,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(f,s.maxTimeToFirstByteMs)})}}}const o=s.errorRetry||s.timeoutRetry||{},a={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},l={onSuccess:(u,c,d,f)=>{const m=this.getInternalLoader(d);this.resetInternalLoader(d.type);const h=u.data;if(h.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(u,d,new Error("no EXTM3U delimiter"),f||null,c);return}c.parsing.start=performance.now(),pi.isMediaPlaylist(h)?this.handleTrackOrLevelPlaylist(u,c,d,f||null,m):this.handleMasterPlaylist(u,c,d,f)},onError:(u,c,d,f)=>{this.handleNetworkError(c,d,!1,u,f)},onTimeout:(u,c,d)=>{this.handleNetworkError(c,d,!0,void 0,u)}};i.load(e,a,l)}handleMasterPlaylist(e,n,r,i){const s=this.hls,o=e.data,a=vg(e,r),l=pi.parseMasterPlaylist(o,a);if(l.playlistParsingError){this.handleManifestParsingError(e,r,l.playlistParsingError,i,n);return}const{contentSteering:u,levels:c,sessionData:d,sessionKeys:f,startTimeOffset:m,variableList:h}=l;this.variableList=h;const{AUDIO:p=[],SUBTITLES:v,"CLOSED-CAPTIONS":y}=pi.parseMasterPlaylistMedia(o,a,l);p.length&&!p.some(x=>!x.url)&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(D.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new ct({}),bitrate:0,url:""})),s.trigger(R.MANIFEST_LOADED,{levels:c,audioTracks:p,subtitles:v,captions:y,contentSteering:u,url:a,stats:n,networkDetails:i,sessionData:d,sessionKeys:f,startTimeOffset:m,variableList:h})}handleTrackOrLevelPlaylist(e,n,r,i,s){const o=this.hls,{id:a,level:l,type:u}=r,c=vg(e,r),d=0,f=re(l)?l:re(a)?a:0,m=q1(r),h=pi.parseLevelPlaylist(e.data,c,f,m,d,this.variableList);if(u===ke.MANIFEST){const p={attrs:new ct({}),bitrate:0,details:h,name:"",url:c};o.trigger(R.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:c,stats:n,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}n.parsing.end=performance.now(),r.levelDetails=h,this.handlePlaylistLoaded(h,e,n,r,i,s)}handleManifestParsingError(e,n,r,i,s){this.hls.trigger(R.ERROR,{type:he.NETWORK_ERROR,details:N.MANIFEST_PARSING_ERROR,fatal:n.type===ke.MANIFEST,url:e.url,err:r,error:r,reason:r.message,response:e,context:n,networkDetails:i,stats:s})}handleNetworkError(e,n,r=!1,i,s){let o=`A network ${r?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===ke.LEVEL?o+=`: ${e.level} id: ${e.id}`:(e.type===ke.AUDIO_TRACK||e.type===ke.SUBTITLE_TRACK)&&(o+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(o);D.warn(`[playlist-loader]: ${o}`);let l=N.UNKNOWN,u=!1;const c=this.getInternalLoader(e);switch(e.type){case ke.MANIFEST:l=r?N.MANIFEST_LOAD_TIMEOUT:N.MANIFEST_LOAD_ERROR,u=!0;break;case ke.LEVEL:l=r?N.LEVEL_LOAD_TIMEOUT:N.LEVEL_LOAD_ERROR,u=!1;break;case ke.AUDIO_TRACK:l=r?N.AUDIO_TRACK_LOAD_TIMEOUT:N.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case ke.SUBTITLE_TRACK:l=r?N.SUBTITLE_TRACK_LOAD_TIMEOUT:N.SUBTITLE_LOAD_ERROR,u=!1;break}c&&this.resetInternalLoader(e.type);const d={type:he.NETWORK_ERROR,details:l,fatal:u,url:e.url,loader:c,context:e,error:a,networkDetails:n,stats:s};if(i){const f=(n==null?void 0:n.url)||e.url;d.response=Xt({url:f,data:void 0},i)}this.hls.trigger(R.ERROR,d)}handlePlaylistLoaded(e,n,r,i,s,o){const a=this.hls,{type:l,level:u,id:c,groupId:d,deliveryDirectives:f}=i,m=vg(n,i),h=q1(i),p=typeof i.level=="number"&&h===ce.MAIN?u:void 0;if(!e.fragments.length){const y=new Error("No Segments found in Playlist");a.trigger(R.ERROR,{type:he.NETWORK_ERROR,details:N.LEVEL_EMPTY_ERROR,fatal:!1,url:m,error:y,reason:y.message,response:n,context:i,level:p,parent:h,networkDetails:s,stats:r});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const v=e.playlistParsingError;if(v){a.trigger(R.ERROR,{type:he.NETWORK_ERROR,details:N.LEVEL_PARSING_ERROR,fatal:!1,url:m,error:v,reason:v.message,response:n,context:i,level:p,parent:h,networkDetails:s,stats:r});return}switch(e.live&&o&&(o.getCacheAge&&(e.ageHeader=o.getCacheAge()||0),(!o.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case ke.MANIFEST:case ke.LEVEL:a.trigger(R.LEVEL_LOADED,{details:e,level:p||0,id:c||0,stats:r,networkDetails:s,deliveryDirectives:f});break;case ke.AUDIO_TRACK:a.trigger(R.AUDIO_TRACK_LOADED,{details:e,id:c||0,groupId:d||"",stats:r,networkDetails:s,deliveryDirectives:f});break;case ke.SUBTITLE_TRACK:a.trigger(R.SUBTITLE_TRACK_LOADED,{details:e,id:c||0,groupId:d||"",stats:r,networkDetails:s,deliveryDirectives:f});break}}}function zk(t,e){let n;try{n=new Event("addtrack")}catch{n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function Vk(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(r){D.debug(`[texttrack-utils]: ${r}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,t.addCue(i)}catch(i){D.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}n==="disabled"&&(t.mode=n)}function Pa(t){const e=t.mode;if(e==="disabled"&&(t.mode="hidden"),t.cues)for(let n=t.cues.length;n--;)t.removeCue(t.cues[n]);e==="disabled"&&(t.mode=e)}function Ry(t,e,n,r){const i=t.mode;if(i==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const s=_K(t.cues,e,n);for(let o=0;o<s.length;o++)(!r||r(s[o]))&&t.removeCue(s[o])}i==="disabled"&&(t.mode=i)}function AK(t,e){if(e<t[0].startTime)return 0;const n=t.length-1;if(e>t[n].endTime)return-1;let r=0,i=n;for(;r<=i;){const s=Math.floor((i+r)/2);if(e<t[s].startTime)i=s-1;else if(e>t[s].startTime&&r<n)r=s+1;else return s}return t[r].startTime-e<e-t[i].startTime?r:i}function _K(t,e,n){const r=[],i=AK(t,e);if(i>-1)for(let s=i,o=t.length;s<o;s++){const a=t[s];if(a.startTime>=e&&a.endTime<=n)r.push(a);else if(a.startTime>n)return r}return r}function Ef(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];(r.kind==="subtitles"||r.kind==="captions")&&r.label&&e.push(t[n])}return e}var Gr={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const CK=.25;function Ay(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function Y1(t,e,n,r,i){let s=new t(e,n,"");try{s.value=r,i&&(s.type=i)}catch{s=new t(e,n,JSON.stringify(i?Xt({type:i},r):r))}return s}const $d=(()=>{const t=Ay();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function xg(t,e){return t.getTime()/1e3-e}function LK(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class kK{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(R.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(R.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,n){this.media=n.media}onMediaDetaching(){this.id3Track&&(Pa(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const n=this.getID3Track(e.textTracks);return n.mode="hidden",n}getID3Track(e){if(this.media){for(let n=0;n<e.length;n++){const r=e[n];if(r.kind==="metadata"&&r.label==="id3")return zk(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,n){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:r,enableID3MetadataCues:i}}}=this;if(!r&&!i)return;const{samples:s}=n;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=Ay();if(o)for(let a=0;a<s.length;a++){const l=s[a].type;if(l===Gr.emsg&&!r||!i)continue;const u=Dk(s[a].data);if(u){const c=s[a].pts;let d=c+s[a].duration;d>$d&&(d=$d),d-c<=0&&(d=c+CK);for(let m=0;m<u.length;m++){const h=u[m];if(!Ik(h)){this.updateId3CueEnds(c,l);const p=Y1(o,c,d,h,l);p&&this.id3Track.addCue(p)}}}}}updateId3CueEnds(e,n){var r;const i=(r=this.id3Track)==null?void 0:r.cues;if(i)for(let s=i.length;s--;){const o=i[s];o.type===n&&o.startTime<e&&o.endTime===$d&&(o.endTime=e)}}onBufferFlushing(e,{startOffset:n,endOffset:r,type:i}){const{id3Track:s,hls:o}=this;if(!o)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:l}}=o;if(s&&(a||l)){let u;i==="audio"?u=c=>c.type===Gr.audioId3&&l:i==="video"?u=c=>c.type===Gr.emsg&&a:u=c=>c.type===Gr.audioId3&&l||c.type===Gr.emsg&&a,Ry(s,n,r,u)}}onLevelUpdated(e,{details:n}){if(!this.media||!n.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:r,id3Track:i}=this,{dateRanges:s}=n,o=Object.keys(s);if(i){const c=Object.keys(r).filter(d=>!o.includes(d));for(let d=c.length;d--;){const f=c[d];Object.keys(r[f].cues).forEach(m=>{i.removeCue(r[f].cues[m])}),delete r[f]}}const a=n.fragments[n.fragments.length-1];if(o.length===0||!re(a==null?void 0:a.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=a.programDateTime/1e3-a.start,u=Ay();for(let c=0;c<o.length;c++){const d=o[c],f=s[d],m=xg(f.startDate,l),h=r[d],p=(h==null?void 0:h.cues)||{};let v=(h==null?void 0:h.durationKnown)||!1,y=$d;const g=f.endDate;if(g)y=xg(g,l),v=!0;else if(f.endOnNext&&!v){const b=o.reduce((E,T)=>{if(T!==f.id){const w=s[T];if(w.class===f.class&&w.startDate>f.startDate&&(!E||f.startDate<E.startDate))return w}return E},null);b&&(y=xg(b.startDate,l),v=!0)}const x=Object.keys(f.attr);for(let b=0;b<x.length;b++){const E=x[b];if(!O9(E))continue;const T=p[E];if(T)v&&!h.durationKnown&&(T.endTime=y);else if(u){let w=f.attr[E];M9(E)&&(w=LK(w));const _=Y1(u,m,y,{key:E,data:w},Gr.dateRange);_&&(_.id=d,this.id3Track.addCue(_),p[E]=_)}}r[d]={cues:p,dateRange:f,durationKnown:v}}}}class PK{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:n}=this;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:n?e.liveMaxLatencyDurationCount*n.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(e===null)return null;const{holdBack:n,partHoldBack:r,targetduration:i}=e,{liveSyncDuration:s,liveSyncDurationCount:o,lowLatencyMode:a}=this.config,l=this.hls.userConfig;let u=a&&r||n;(l.liveSyncDuration||l.liveSyncDurationCount||u===0)&&(u=s!==void 0?s:o*i);const c=i;return u+Math.min(this.stallCount*1,c)}get liveSyncPosition(){const e=this.estimateLiveEdge(),n=this.targetLatency,r=this.levelDetails;if(e===null||n===null||r===null)return null;const i=r.edge,s=e-n-this.edgeStalled,o=i-r.totalduration,a=i-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(o,s),a)}get drift(){const{levelDetails:e}=this;return e===null?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(e===null)return 0;const n=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-n,0)}get forwardBufferLength(){const{media:e,levelDetails:n}=this;if(!e||!n)return 0;const r=e.buffered.length;return(r?e.buffered.end(r-1):n.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(R.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(R.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(R.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(R.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(R.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(R.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:n}){this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,n){var r;n.details===N.BUFFER_STALLED_ERROR&&(this.stallCount++,(r=this.levelDetails)!=null&&r.live&&D.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:n}=this;if(!e||!n)return;this.currentTime=e.currentTime;const r=this.computeLatency();if(r===null)return;this._latency=r;const{lowLatencyMode:i,maxLiveSyncPlaybackRate:s}=this.config;if(!i||s===1||!n.live)return;const o=this.targetLatency;if(o===null)return;const a=r-o,l=Math.min(this.maxLatency,o+n.targetduration);if(a<l&&a>.05&&this.forwardBufferLength>1){const c=Math.min(2,Math.max(1,s)),d=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20;e.playbackRate=Math.min(c,Math.max(1,d))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}const _y=["NONE","TYPE-0","TYPE-1",null];function IK(t){return _y.indexOf(t)>-1}const Rh=["SDR","PQ","HLG"];function DK(t){return!!t&&Rh.indexOf(t)>-1}var wu={No:"",Yes:"YES",v2:"v2"};function OK(t,e){const{canSkipUntil:n,canSkipDateRanges:r,endSN:i}=t,s=e!==void 0?e-i:0;return n&&s<n?r?wu.v2:wu.Yes:wu.No}class X1{constructor(e,n,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=n,this.skip=r}addDirectives(e){const n=new self.URL(e);return this.msn!==void 0&&n.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&n.searchParams.set("_HLS_part",this.part.toString()),this.skip&&n.searchParams.set("_HLS_skip",this.skip),n.href}}class ul{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return Q1(this._audioGroups,e)}hasSubtitleGroup(e){return Q1(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,n){if(n){if(e==="audio"){let r=this._audioGroups;r||(r=this._audioGroups=[]),r.indexOf(n)===-1&&r.push(n)}else if(e==="text"){let r=this._subtitleGroups;r||(r=this._subtitleGroups=[]),r.indexOf(n)===-1&&r.push(n)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function Q1(t,e){return!e||!t?!1:t.indexOf(e)!==-1}function Sg(t,e){const n=e.startPTS;if(re(n)){let r=0,i;e.sn>t.sn?(r=n-t.start,i=t):(r=t.start-n,i=e),i.duration!==r&&(i.duration=r)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration:e.start=Math.max(t.start-e.duration,0)}function Gk(t,e,n,r,i,s){r-n<=0&&(D.warn("Fragment should have a positive duration",e),r=n+e.duration,s=i+e.duration);let a=n,l=r;const u=e.startPTS,c=e.endPTS;if(re(u)){const v=Math.abs(u-n);re(e.deltaPTS)?e.deltaPTS=Math.max(v,e.deltaPTS):e.deltaPTS=v,a=Math.max(n,u),n=Math.min(n,u),i=Math.min(i,e.startDTS),l=Math.min(r,c),r=Math.max(r,c),s=Math.max(s,e.endDTS)}const d=n-e.start;e.start!==0&&(e.start=n),e.duration=r-e.start,e.startPTS=n,e.maxStartPTS=a,e.startDTS=i,e.endPTS=r,e.minEndPTS=l,e.endDTS=s;const f=e.sn;if(!t||f<t.startSN||f>t.endSN)return 0;let m;const h=f-t.startSN,p=t.fragments;for(p[h]=e,m=h;m>0;m--)Sg(p[m],p[m-1]);for(m=h;m<p.length-1;m++)Sg(p[m],p[m+1]);return t.fragmentHint&&Sg(p[p.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,d}function MK(t,e){let n=null;const r=t.fragments;for(let l=r.length-1;l>=0;l--){const u=r[l].initSegment;if(u){n=u;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let i=0,s;if($K(t,e,(l,u)=>{l.relurl&&(i=l.cc-u.cc),re(l.startPTS)&&re(l.endPTS)&&(u.start=u.startPTS=l.startPTS,u.startDTS=l.startDTS,u.maxStartPTS=l.maxStartPTS,u.endPTS=l.endPTS,u.endDTS=l.endDTS,u.minEndPTS=l.minEndPTS,u.duration=l.endPTS-l.startPTS,u.duration&&(s=u),e.PTSKnown=e.alignedSliding=!0),u.elementaryStreams=l.elementaryStreams,u.loader=l.loader,u.stats=l.stats,l.initSegment&&(u.initSegment=l.initSegment,n=l.initSegment)}),n&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach(u=>{var c;u&&(!u.initSegment||u.initSegment.relurl===((c=n)==null?void 0:c.relurl))&&(u.initSegment=n)}),e.skippedSegments)if(e.deltaUpdateFailed=e.fragments.some(l=>!l),e.deltaUpdateFailed){D.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let l=e.skippedSegments;l--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}else e.canSkipDateRanges&&(e.dateRanges=NK(t.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));const o=e.fragments;if(i){D.warn("discontinuity sliding from playlist, take drift into account");for(let l=0;l<o.length;l++)o[l].cc+=i}e.skippedSegments&&(e.startCC=e.fragments[0].cc),FK(t.partList,e.partList,(l,u)=>{u.elementaryStreams=l.elementaryStreams,u.stats=l.stats}),s?Gk(e,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS):Wk(t,e),o.length&&(e.totalduration=e.edge-o[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const a=e.advancedDateTime;if(e.advanced&&a){const l=e.edge;e.driftStart||(e.driftStartTime=a,e.driftStart=l),e.driftEndTime=a,e.driftEnd=l}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function NK(t,e,n){const r=Mt({},t);return n&&n.forEach(i=>{delete r[i]}),Object.keys(e).forEach(i=>{const s=new _k(e[i].attr,r[i]);s.isValid?r[i]=s:D.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[i].attr)}"`)}),r}function FK(t,e,n){if(t&&e){let r=0;for(let i=0,s=t.length;i<=s;i++){const o=t[i],a=e[i+r];o&&a&&o.index===a.index&&o.fragment.sn===a.fragment.sn?n(o,a):r--}}}function $K(t,e,n){const r=e.skippedSegments,i=Math.max(t.startSN,e.startSN)-e.startSN,s=(t.fragmentHint?1:0)+(r?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,o=e.startSN-t.startSN,a=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let u=i;u<=s;u++){const c=l[o+u];let d=a[u];r&&!d&&u<r&&(d=e.fragments[u]=c),c&&d&&n(c,d)}}function Wk(t,e){const n=e.startSN+e.skippedSegments-t.startSN,r=t.fragments;n<0||n>=r.length||Cy(e,r[n].start)}function Cy(t,e){if(e){const n=t.fragments;for(let r=t.skippedSegments;r<n.length;r++)n[r].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}function BK(t,e=1/0){let n=1e3*t.targetduration;if(t.updated){const r=t.fragments;if(r.length&&n*4>e){const s=r[r.length-1].duration*1e3;s<n&&(n=s)}}else n/=2;return Math.round(n)}function UK(t,e,n){if(!(t!=null&&t.details))return null;const r=t.details;let i=r.fragments[e-r.startSN];return i||(i=r.fragmentHint,i&&i.sn===e)?i:e<r.startSN&&n&&n.sn===e?n:null}function J1(t,e,n){var r;return t!=null&&t.details?Kk((r=t.details)==null?void 0:r.partList,e,n):null}function Kk(t,e,n){if(t)for(let r=t.length;r--;){const i=t[r];if(i.index===n&&i.fragment.sn===e)return i}return null}function qk(t){t.forEach((e,n)=>{const{details:r}=e;r!=null&&r.fragments&&r.fragments.forEach(i=>{i.level=n})})}function Ah(t){switch(t.details){case N.FRAG_LOAD_TIMEOUT:case N.KEY_LOAD_TIMEOUT:case N.LEVEL_LOAD_TIMEOUT:case N.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Z1(t,e){const n=Ah(e);return t.default[`${n?"timeout":"error"}Retry`]}function LS(t,e){const n=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(n*t.retryDelayMs,t.maxRetryDelayMs)}function ew(t){return Xt(Xt({},t),{errorRetry:null,timeoutRetry:null})}function _h(t,e,n,r){if(!t)return!1;const i=r==null?void 0:r.code,s=e<t.maxNumRetry&&(jK(i)||!!n);return t.shouldRetry?t.shouldRetry(t,e,n,r,s):s}function jK(t){return t===0&&navigator.onLine===!1||!!t&&(t<400||t>499)}const Yk={search:function(t,e){let n=0,r=t.length-1,i=null,s=null;for(;n<=r;){i=(n+r)/2|0,s=t[i];const o=e(s);if(o>0)n=i+1;else if(o<0)r=i-1;else return s}return null}};function HK(t,e,n){if(e===null||!Array.isArray(t)||!t.length||!re(e))return null;const r=t[0].programDateTime;if(e<(r||0))return null;const i=t[t.length-1].endProgramDateTime;if(e>=(i||0))return null;n=n||0;for(let s=0;s<t.length;++s){const o=t[s];if(zK(e,n,o))return o}return null}function Ch(t,e,n=0,r=0){let i=null;if(t){i=e[t.sn-e[0].sn+1]||null;const o=t.endDTS-n;o>0&&o<15e-7&&(n+=15e-7)}else n===0&&e[0].start===0&&(i=e[0]);if(i&&(!t||t.level===i.level)&&Ly(n,r,i)===0)return i;const s=Yk.search(e,Ly.bind(null,n,r));return s&&(s!==t||!i)?s:i}function Ly(t=0,e=0,n){if(n.start<=t&&n.start+n.duration>t)return 0;const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=t?1:n.start-r>t&&n.start?-1:0}function zK(t,e,n){const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0))*1e3;return(n.endProgramDateTime||0)-r>t}function VK(t,e){return Yk.search(t,n=>n.cc<e?1:n.cc>e?-1:0)}var rn={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},Fr={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class GK{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=D.log.bind(D,"[info]:"),this.warn=D.warn.bind(D,"[warning]:"),this.error=D.error.bind(D,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(R.ERROR,this.onError,this),e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(R.ERROR,this.onError,this),e.off(R.ERROR,this.onErrorOut,this),e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===ce.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,n){var r,i;if(n.fatal)return;const s=this.hls,o=n.context;switch(n.details){case N.FRAG_LOAD_ERROR:case N.FRAG_LOAD_TIMEOUT:case N.KEY_LOAD_ERROR:case N.KEY_LOAD_TIMEOUT:n.errorAction=this.getFragRetryOrSwitchAction(n);return;case N.FRAG_PARSING_ERROR:if((r=n.frag)!=null&&r.gap){n.errorAction={action:rn.DoNothing,flags:Fr.None};return}case N.FRAG_GAP:case N.FRAG_DECRYPT_ERROR:{n.errorAction=this.getFragRetryOrSwitchAction(n),n.errorAction.action=rn.SendAlternateToPenaltyBox;return}case N.LEVEL_EMPTY_ERROR:case N.LEVEL_PARSING_ERROR:{var a,l;const u=n.parent===ce.MAIN?n.level:s.loadLevel;n.details===N.LEVEL_EMPTY_ERROR&&((a=n.context)!=null&&(l=a.levelDetails)!=null&&l.live)?n.errorAction=this.getPlaylistRetryOrSwitchAction(n,u):(n.levelRetry=!1,n.errorAction=this.getLevelSwitchAction(n,u))}return;case N.LEVEL_LOAD_ERROR:case N.LEVEL_LOAD_TIMEOUT:typeof(o==null?void 0:o.level)=="number"&&(n.errorAction=this.getPlaylistRetryOrSwitchAction(n,o.level));return;case N.AUDIO_TRACK_LOAD_ERROR:case N.AUDIO_TRACK_LOAD_TIMEOUT:case N.SUBTITLE_LOAD_ERROR:case N.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){const u=s.levels[s.loadLevel];if(u&&(o.type===ke.AUDIO_TRACK&&u.hasAudioGroup(o.groupId)||o.type===ke.SUBTITLE_TRACK&&u.hasSubtitleGroup(o.groupId))){n.errorAction=this.getPlaylistRetryOrSwitchAction(n,s.loadLevel),n.errorAction.action=rn.SendAlternateToPenaltyBox,n.errorAction.flags=Fr.MoveAllAlternatesMatchingHost;return}}return;case N.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const u=s.levels[s.loadLevel],c=u==null?void 0:u.attrs["HDCP-LEVEL"];c?n.errorAction={action:rn.SendAlternateToPenaltyBox,flags:Fr.MoveAllAlternatesMatchingHDCP,hdcpLevel:c}:this.keySystemError(n)}return;case N.BUFFER_ADD_CODEC_ERROR:case N.REMUX_ALLOC_ERROR:case N.BUFFER_APPEND_ERROR:n.errorAction=this.getLevelSwitchAction(n,(i=n.level)!=null?i:s.loadLevel);return;case N.INTERNAL_EXCEPTION:case N.BUFFER_APPENDING_ERROR:case N.BUFFER_FULL_ERROR:case N.LEVEL_SWITCH_ERROR:case N.BUFFER_STALLED_ERROR:case N.BUFFER_SEEK_OVER_HOLE:case N.BUFFER_NUDGE_ON_STALL:n.errorAction={action:rn.DoNothing,flags:Fr.None};return}n.type===he.KEY_SYSTEM_ERROR&&this.keySystemError(n)}keySystemError(e){const n=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,n)}getPlaylistRetryOrSwitchAction(e,n){const r=this.hls,i=Z1(r.config.playlistLoadPolicy,e),s=this.playlistError++;if(_h(i,s,Ah(e),e.response))return{action:rn.RetryRequest,flags:Fr.None,retryConfig:i,retryCount:s};const a=this.getLevelSwitchAction(e,n);return i&&(a.retryConfig=i,a.retryCount=s),a}getFragRetryOrSwitchAction(e){const n=this.hls,r=this.getVariantLevelIndex(e.frag),i=n.levels[r],{fragLoadPolicy:s,keyLoadPolicy:o}=n.config,a=Z1(e.details.startsWith("key")?o:s,e),l=n.levels.reduce((c,d)=>c+d.fragmentError,0);if(i&&(e.details!==N.FRAG_GAP&&i.fragmentError++,_h(a,l,Ah(e),e.response)))return{action:rn.RetryRequest,flags:Fr.None,retryConfig:a,retryCount:l};const u=this.getLevelSwitchAction(e,r);return a&&(u.retryConfig=a,u.retryCount=l),u}getLevelSwitchAction(e,n){const r=this.hls;n==null&&(n=r.loadLevel);const i=this.hls.levels[n];if(i){var s,o;const u=e.details;i.loadError++,u===N.BUFFER_APPEND_ERROR&&i.fragmentError++;let c=-1;const{levels:d,loadLevel:f,minAutoLevel:m,maxAutoLevel:h}=r;r.autoLevelEnabled||(r.loadLevel=-1);const p=(s=e.frag)==null?void 0:s.type,y=(p===ce.AUDIO&&u===N.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(u===N.BUFFER_ADD_CODEC_ERROR||u===N.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:T})=>i.audioCodec!==T),x=e.sourceBufferName==="video"&&(u===N.BUFFER_ADD_CODEC_ERROR||u===N.BUFFER_APPEND_ERROR)&&d.some(({codecSet:T,audioCodec:w})=>i.codecSet!==T&&i.audioCodec===w),{type:b,groupId:E}=(o=e.context)!=null?o:{};for(let T=d.length;T--;){const w=(T+f)%d.length;if(w!==f&&w>=m&&w<=h&&d[w].loadError===0){var a,l;const _=d[w];if(u===N.FRAG_GAP&&e.frag){const k=d[w].details;if(k){const L=Ch(e.frag,k.fragments,e.frag.start);if(L!=null&&L.gap)continue}}else{if(b===ke.AUDIO_TRACK&&_.hasAudioGroup(E)||b===ke.SUBTITLE_TRACK&&_.hasSubtitleGroup(E))continue;if(p===ce.AUDIO&&(a=i.audioGroups)!=null&&a.some(k=>_.hasAudioGroup(k))||p===ce.SUBTITLE&&(l=i.subtitleGroups)!=null&&l.some(k=>_.hasSubtitleGroup(k))||y&&i.audioCodec===_.audioCodec||!y&&i.audioCodec!==_.audioCodec||x&&i.codecSet===_.codecSet)continue}c=w;break}}if(c>-1&&r.loadLevel!==c)return e.levelRetry=!0,this.playlistError=0,{action:rn.SendAlternateToPenaltyBox,flags:Fr.None,nextAutoLevel:c}}return{action:rn.SendAlternateToPenaltyBox,flags:Fr.MoveAllAlternatesMatchingHost}}onErrorOut(e,n){var r;switch((r=n.errorAction)==null?void 0:r.action){case rn.DoNothing:break;case rn.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(n),!n.errorAction.resolved&&n.details!==N.FRAG_GAP?n.fatal=!0:/MediaSource readyState: ended/.test(n.error.message)&&(this.warn(`MediaSource ended after "${n.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(n.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const n=this.hls,r=e.errorAction;if(!r)return;const{flags:i,hdcpLevel:s,nextAutoLevel:o}=r;switch(i){case Fr.None:this.switchLevel(e,o);break;case Fr.MoveAllAlternatesMatchingHDCP:s&&(n.maxHdcpLevel=_y[_y.indexOf(s)-1],r.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${n.maxHdcpLevel}" or lower`);break}r.resolved||this.switchLevel(e,o)}switchLevel(e,n){n!==void 0&&e.errorAction&&(this.warn(`switching to level ${n} after ${e.details}`),this.hls.nextAutoLevel=n,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class kS{constructor(e,n){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=D.log.bind(D,`${n}:`),this.warn=D.warn.bind(D,`${n}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,n){const r=n==null?void 0:n.renditionReports;if(r){let i=-1;for(let s=0;s<r.length;s++){const o=r[s];let a;try{a=new self.URL(o.URI,n.url).href}catch(l){D.warn(`Could not construct new URL for Rendition Report: ${l}`),a=o.URI||""}if(a===e){i=s;break}else a===e.substring(0,a.length)&&(i=s)}if(i!==-1){const s=r[i],o=parseInt(s["LAST-MSN"])||(n==null?void 0:n.lastPartSn);let a=parseInt(s["LAST-PART"])||(n==null?void 0:n.lastPartIndex);if(this.hls.config.lowLatencyMode){const l=Math.min(n.age-n.partTarget,n.targetduration);a>=0&&l>n.partTarget&&(a+=1)}return new X1(o,a>=0?a:void 0,wu.No)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,n,r){const{details:i,stats:s}=n,o=self.performance.now(),a=s.loading.first?Math.max(0,o-s.loading.first):0;if(i.advancedDateTime=Date.now()-a,i.live||r!=null&&r.live){if(i.reloaded(r),r&&this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),r&&i.fragments.length>0&&MK(r,i),!this.canLoad||!i.live)return;let l,u,c;if(i.canBlockReload&&i.endSN&&i.advanced){const v=this.hls.config.lowLatencyMode,y=i.lastPartSn,g=i.endSN,x=i.lastPartIndex,b=x!==-1,E=y===g,T=v?0:x;b?(u=E?g+1:y,c=E?T:x+1):u=g+1;const w=i.age,_=w+i.ageHeader;let k=Math.min(_-i.partTarget,i.targetduration*1.5);if(k>0){if(r&&k>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${k} with playlist age: ${i.age}`),k=0;else{const L=Math.floor(k/i.targetduration);if(u+=L,c!==void 0){const P=Math.round(k%i.targetduration/i.partTarget);c+=P}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${w.toFixed(2)}s goal: ${k} skip sn ${L} to part ${c}`)}i.tuneInGoal=k}if(l=this.getDeliveryDirectives(i,n.deliveryDirectives,u,c),v||!E){this.loadPlaylist(l);return}}else(i.canBlockReload||i.canSkipUntil)&&(l=this.getDeliveryDirectives(i,n.deliveryDirectives,u,c));const d=this.hls.mainForwardBufferInfo,f=d?d.end-d.len:0,m=(i.edge-f)*1e3,h=BK(i,m);i.updated&&o>this.requestScheduled+h&&(this.requestScheduled=s.loading.start),u!==void 0&&i.canBlockReload?this.requestScheduled=s.loading.first+h-(i.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+h<o?this.requestScheduled=o:this.requestScheduled-o<=0&&(this.requestScheduled+=h);let p=this.requestScheduled-o;p=Math.max(0,p),this.log(`reload live playlist ${e} in ${Math.round(p)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(l),p)}else this.clearTimer()}getDeliveryDirectives(e,n,r,i){let s=OK(e,r);return n!=null&&n.skip&&e.deltaUpdateFailed&&(r=n.msn,i=n.part,s=wu.No),new X1(r,i,s)}checkRetry(e){const n=e.details,r=Ah(e),i=e.errorAction,{action:s,retryCount:o=0,retryConfig:a}=i||{},l=!!i&&!!a&&(s===rn.RetryRequest||!i.resolved&&s===rn.SendAlternateToPenaltyBox);if(l){var u;if(this.requestScheduled=-1,o>=a.maxNumRetry)return!1;if(r&&(u=e.context)!=null&&u.deliveryDirectives)this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${n}" without delivery-directives`),this.loadPlaylist();else{const c=LS(a,o);this.timer=self.setTimeout(()=>this.loadPlaylist(),c),this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${n}" in ${c}ms`)}e.levelRetry=!0,i.resolved=!0}return l}}class aa{constructor(e,n=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=n,this.totalWeight_=r}sample(e,n){const r=Math.pow(this.alpha_,e);this.estimate_=n*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class WK{constructor(e,n,r,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new aa(e),this.fast_=new aa(n),this.defaultTTFB_=i,this.ttfb_=new aa(e)}update(e,n){const{slow_:r,fast_:i,ttfb_:s}=this;r.halfLife!==e&&(this.slow_=new aa(e,r.getEstimate(),r.getTotalWeight())),i.halfLife!==n&&(this.fast_=new aa(n,i.getEstimate(),i.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new aa(e,s.getEstimate(),s.getTotalWeight()))}sample(e,n){e=Math.max(e,this.minDelayMs_);const r=8*n,i=e/1e3,s=r/i;this.fast_.sample(i,s),this.slow_.sample(i,s)}sampleTTFB(e){const n=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(n,2)/2);this.ttfb_.sample(r,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const Xk={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},tw={};function KK(t,e,n,r,i,s){const o=t.audioCodec?t.audioGroups:null,a=s==null?void 0:s.audioCodec,l=s==null?void 0:s.channels,u=l?parseInt(l):a?1/0:2;let c=null;if(o!=null&&o.length)try{o.length===1&&o[0]?c=e.groups[o[0]].channels:c=o.reduce((d,f)=>{if(f){const m=e.groups[f];if(!m)throw new Error(`Audio track group ${f} not found`);Object.keys(m.channels).forEach(h=>{d[h]=(d[h]||0)+m.channels[h]})}return d},{2:0})}catch{return!0}return t.videoCodec!==void 0&&(t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(r,30)||t.videoRange!=="SDR"&&t.videoRange!==n||t.bitrate>Math.max(i,8e6))||!!c&&re(u)&&Object.keys(c).some(d=>parseInt(d)>u)}function qK(t,e,n){const r=t.videoCodec,i=t.audioCodec;if(!r||!i||!n)return Promise.resolve(Xk);const s={width:t.width,height:t.height,bitrate:Math.ceil(Math.max(t.bitrate*.9,t.averageBitrate)),framerate:t.frameRate||30},o=t.videoRange;o!=="SDR"&&(s.transferFunction=o.toLowerCase());const a=r.split(",").map(l=>({type:"media-source",video:Xt(Xt({},s),{},{contentType:ic(l,"video")})}));return i&&t.audioGroups&&t.audioGroups.forEach(l=>{var u;l&&((u=e.groups[l])==null||u.tracks.forEach(c=>{if(c.groupId===l){const d=c.channels||"",f=parseFloat(d);re(f)&&f>2&&a.push.apply(a,i.split(",").map(m=>({type:"media-source",audio:{contentType:ic(m,"audio"),channels:""+f}})))}}))}),Promise.all(a.map(l=>{const u=YK(l);return tw[u]||(tw[u]=n.decodingInfo(l))})).then(l=>({supported:!l.some(u=>!u.supported),configurations:a,decodingInfoResults:l})).catch(l=>({supported:!1,configurations:a,decodingInfoResults:[],error:l}))}function YK(t){const{audio:e,video:n}=t,r=n||e;if(r){const i=r.contentType.split('"')[1];if(n)return`r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${i}_${Math.ceil(n.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${i}`}return""}function XK(){if(typeof matchMedia=="function"){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return t.matches===!0}return!1}function QK(t,e){let n=!1,r=[];return t&&(n=t!=="SDR",r=[t]),e&&(r=e.allowedVideoRanges||Rh.slice(0),n=e.preferHDR!==void 0?e.preferHDR:XK(),n?r=r.filter(i=>i!=="SDR"):r=["SDR"]),{preferHDR:n,allowedVideoRanges:r}}function JK(t,e,n,r,i){const s=Object.keys(t),o=r==null?void 0:r.channels,a=r==null?void 0:r.audioCodec,l=o&&parseInt(o)===2;let u=!0,c=!1,d=1/0,f=1/0,m=1/0,h=0,p=[];const{preferHDR:v,allowedVideoRanges:y}=QK(e,i);for(let E=s.length;E--;){const T=t[s[E]];u=T.channels[2]>0,d=Math.min(d,T.minHeight),f=Math.min(f,T.minFramerate),m=Math.min(m,T.minBitrate);const w=y.filter(_=>T.videoRanges[_]>0);w.length>0&&(c=!0,p=w)}d=re(d)?d:0,f=re(f)?f:0;const g=Math.max(1080,d),x=Math.max(30,f);return m=re(m)?m:n,n=Math.max(m,n),c||(e=void 0,p=[]),{codecSet:s.reduce((E,T)=>{const w=t[T];if(T===E)return E;if(w.minBitrate>n)return $i(T,`min bitrate of ${w.minBitrate} > current estimate of ${n}`),E;if(!w.hasDefaultAudio)return $i(T,"no renditions with default or auto-select sound found"),E;if(a&&T.indexOf(a.substring(0,4))%5!==0)return $i(T,`audio codec preference "${a}" not found`),E;if(o&&!l){if(!w.channels[o])return $i(T,`no renditions with ${o} channel sound found (channels options: ${Object.keys(w.channels)})`),E}else if((!a||l)&&u&&w.channels[2]===0)return $i(T,"no renditions with stereo sound found"),E;return w.minHeight>g?($i(T,`min resolution of ${w.minHeight} > maximum of ${g}`),E):w.minFramerate>x?($i(T,`min framerate of ${w.minFramerate} > maximum of ${x}`),E):p.some(_=>w.videoRanges[_]>0)?w.maxScore<h?($i(T,`max score of ${w.maxScore} < selected max of ${h}`),E):E&&(Th(T)>=Th(E)||w.fragmentError>t[E].fragmentError)?E:(h=w.maxScore,T):($i(T,`no variants with VIDEO-RANGE of ${JSON.stringify(p)} found`),E)},void 0),videoRanges:p,preferHDR:v,minFramerate:f,minBitrate:m}}function $i(t,e){D.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function ZK(t){return t.reduce((e,n)=>{let r=e.groups[n.groupId];r||(r=e.groups[n.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(n);const i=n.channels||"2";return r.channels[i]=(r.channels[i]||0)+1,r.hasDefault=r.hasDefault||n.default,r.hasAutoSelect=r.hasAutoSelect||n.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function e7(t,e,n,r){return t.slice(n,r+1).reduce((i,s)=>{if(!s.codecSet)return i;const o=s.audioGroups;let a=i[s.codecSet];a||(i[s.codecSet]=a={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),a.minBitrate=Math.min(a.minBitrate,s.bitrate);const l=Math.min(s.height,s.width);return a.minHeight=Math.min(a.minHeight,l),a.minFramerate=Math.min(a.minFramerate,s.frameRate),a.maxScore=Math.max(a.maxScore,s.score),a.fragmentError+=s.fragmentError,a.videoRanges[s.videoRange]=(a.videoRanges[s.videoRange]||0)+1,o&&o.forEach(u=>{if(!u)return;const c=e.groups[u];a.hasDefaultAudio=a.hasDefaultAudio||e.hasDefaultAudio?c.hasDefault:c.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(c.channels).forEach(d=>{a.channels[d]=(a.channels[d]||0)+c.channels[d]})}),i},{})}function mi(t,e,n){if("attrs"in t){const r=e.indexOf(t);if(r!==-1)return r}for(let r=0;r<e.length;r++){const i=e[r];if(ja(t,i,n))return r}return-1}function ja(t,e,n){const{groupId:r,name:i,lang:s,assocLang:o,characteristics:a,default:l}=t,u=t.forced;return(r===void 0||e.groupId===r)&&(i===void 0||e.name===i)&&(s===void 0||e.lang===s)&&(s===void 0||e.assocLang===o)&&(l===void 0||e.default===l)&&(u===void 0||e.forced===u)&&(a===void 0||t7(a,e.characteristics))&&(n===void 0||n(t,e))}function t7(t,e=""){const n=t.split(","),r=e.split(",");return n.length===r.length&&!n.some(i=>r.indexOf(i)===-1)}function la(t,e){const{audioCodec:n,channels:r}=t;return(n===void 0||(e.audioCodec||"").substring(0,4)===n.substring(0,4))&&(r===void 0||r===(e.channels||"2"))}function n7(t,e,n,r,i){const s=e[r],a=e.reduce((f,m,h)=>{const p=m.uri;return(f[p]||(f[p]=[])).push(h),f},{})[s.uri];a.length>1&&(r=Math.max.apply(Math,a));const l=s.videoRange,u=s.frameRate,c=s.codecSet.substring(0,4),d=nw(e,r,f=>{if(f.videoRange!==l||f.frameRate!==u||f.codecSet.substring(0,4)!==c)return!1;const m=f.audioGroups,h=n.filter(p=>!m||m.indexOf(p.groupId)!==-1);return mi(t,h,i)>-1});return d>-1?d:nw(e,r,f=>{const m=f.audioGroups,h=n.filter(p=>!m||m.indexOf(p.groupId)!==-1);return mi(t,h,i)>-1})}function nw(t,e,n){for(let r=e;r;r--)if(n(t[r]))return r;for(let r=e+1;r<t.length;r++)if(n(t[r]))return r;return-1}class r7{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:n,partCurrent:r,hls:i}=this,{autoLevelEnabled:s,media:o}=i;if(!n||!o)return;const a=performance.now(),l=r?r.stats:n.stats,u=r?r.duration:n.duration,c=a-l.loading.start,d=i.minAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||n.level<=d){this.clearTimer(),this._nextAutoLevel=-1;return}if(!s||o.paused||!o.playbackRate||!o.readyState)return;const f=i.mainForwardBufferInfo;if(f===null)return;const m=this.bwEstimator.getEstimateTTFB(),h=Math.abs(o.playbackRate);if(c<=Math.max(m,1e3*(u/(h*2))))return;const p=f.len/h,v=l.loading.first?l.loading.first-l.loading.start:-1,y=l.loaded&&v>-1,g=this.getBwEstimate(),x=i.levels,b=x[n.level],E=l.total||Math.max(l.loaded,Math.round(u*b.averageBitrate/8));let T=y?c-v:c;T<1&&y&&(T=Math.min(c,l.loaded*8/g));const w=y?l.loaded*1e3/T:0,_=w?(E-l.loaded)/w:E*8/g+m/1e3;if(_<=p)return;const k=w?w*8:g;let L=Number.POSITIVE_INFINITY,P;for(P=n.level-1;P>d;P--){const F=x[P].maxBitrate;if(L=this.getTimeToLoadFrag(m/1e3,k,u*F,!x[P].details),L<p)break}if(L>=_||L>u*10)return;i.nextLoadLevel=i.nextAutoLevel=P,y?this.bwEstimator.sample(c-Math.min(m,v),l.loaded):this.bwEstimator.sampleTTFB(c);const H=x[P].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>H&&this.resetEstimator(H),this.clearTimer(),D.warn(`[abr] Fragment ${n.sn}${r?" part "+r.index:""} of level ${n.level} is loading too slowly;
      Time to underbuffer: ${p.toFixed(3)} s
      Estimated load time for current fragment: ${_.toFixed(3)} s
      Estimated load time for down switch fragment: ${L.toFixed(3)} s
      TTFB estimate: ${v|0} ms
      Current BW estimate: ${re(g)?g|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${P} @ ${H|0} bps`),i.trigger(R.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,part:r,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(D.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new WK(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.FRAG_LOADING,this.onFragLoading,this),e.on(R.FRAG_LOADED,this.onFragLoaded,this),e.on(R.FRAG_BUFFERED,this.onFragBuffered,this),e.on(R.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(R.LEVEL_LOADED,this.onLevelLoaded,this),e.on(R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(R.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(R.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.FRAG_LOADING,this.onFragLoading,this),e.off(R.FRAG_LOADED,this.onFragLoaded,this),e.off(R.FRAG_BUFFERED,this.onFragBuffered,this),e.off(R.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(R.LEVEL_LOADED,this.onLevelLoaded,this),e.off(R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(R.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(R.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,n){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,n){const r=n.frag;if(!this.ignoreFragment(r)){if(!r.bitrateTest){var i;this.fragCurrent=r,this.partCurrent=(i=n.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,n){this.clearTimer()}onError(e,n){if(!n.fatal)switch(n.details){case N.BUFFER_ADD_CODEC_ERROR:case N.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case N.FRAG_LOAD_TIMEOUT:{const r=n.frag,{fragCurrent:i,partCurrent:s}=this;if(r&&i&&r.sn===i.sn&&r.level===i.level){const o=performance.now(),a=s?s.stats:r.stats,l=o-a.loading.start,u=a.loading.first?a.loading.first-a.loading.start:-1;if(a.loaded&&u>-1){const d=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(d,u),a.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,n,r,i){const s=e+r/n,o=i?this.lastLevelLoadSec:0;return s+o}onLevelLoaded(e,n){const r=this.hls.config,{loading:i}=n.stats,s=i.end-i.start;re(s)&&(this.lastLevelLoadSec=s/1e3),n.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)}onFragLoaded(e,{frag:n,part:r}){const i=r?r.stats:n.stats;if(n.type===ce.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),n.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const s=r?r.duration:n.duration,o=this.hls.levels[n.level],a=(o.loaded?o.loaded.bytes:0)+i.loaded,l=(o.loaded?o.loaded.duration:0)+s;o.loaded={bytes:a,duration:l},o.realBitrate=Math.round(8*a/l)}if(n.bitrateTest){const s={stats:i,frag:n,part:r,id:n.type};this.onFragBuffered(R.FRAG_BUFFERED,s),n.bitrateTest=!1}else this.lastLoadedFragLevel=n.level}}onFragBuffered(e,n){const{frag:r,part:i}=n,s=i!=null&&i.stats.loaded?i.stats:r.stats;if(s.aborted||this.ignoreFragment(r))return;const o=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,s.loaded),s.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==ce.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:n}=this.hls,r=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,s=this.findBestLevel(r,n,e,0,i,1,1);if(s>-1)return s;const o=this.hls.firstLevel,a=Math.min(Math.max(o,n),e);return D.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${o} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,r=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!r||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const s=r&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const o=this.hls.levels;if(o.length>Math.max(e,s)&&o[e].loadError<=o[s].loadError)return e}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:n,hls:r}=this,{maxAutoLevel:i,config:s,minAutoLevel:o}=r,a=n?n.duration:e?e.duration:0,l=this.getBwEstimate(),u=this.getStarvationDelay();let c=s.abrBandWidthFactor,d=s.abrBandWidthUpFactor;if(u){const v=this.findBestLevel(l,o,i,u,0,c,d);if(v>=0)return v}let f=a?Math.min(a,s.maxStarvationDelay):s.maxStarvationDelay;if(!u){const v=this.bitrateTestDelay;v&&(f=(a?Math.min(a,s.maxLoadingDelay):s.maxLoadingDelay)-v,D.info(`[abr] bitrate test took ${Math.round(1e3*v)}ms, set first fragment max fetchDuration to ${Math.round(1e3*f)} ms`),c=d=1)}const m=this.findBestLevel(l,o,i,u,f,c,d);if(D.info(`[abr] ${u?"rebuffering expected":"buffer is empty"}, optimal quality level ${m}`),m>-1)return m;const h=r.levels[o],p=r.levels[r.loadLevel];return(h==null?void 0:h.bitrate)<(p==null?void 0:p.bitrate)?o:r.loadLevel}getStarvationDelay(){const e=this.hls,n=e.media;if(!n)return 1/0;const r=n&&n.playbackRate!==0?Math.abs(n.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,n,r,i,s,o,a){var l;const u=i+s,c=this.lastLoadedFragLevel,d=c===-1?this.hls.firstLevel:c,{fragCurrent:f,partCurrent:m}=this,{levels:h,allAudioTracks:p,loadLevel:v,config:y}=this.hls;if(h.length===1)return 0;const g=h[d],x=!!(g!=null&&(l=g.details)!=null&&l.live),b=v===-1||c===-1;let E,T="SDR",w=(g==null?void 0:g.frameRate)||0;const{audioPreference:_,videoPreference:k}=y,L=this.audioTracksByGroup||(this.audioTracksByGroup=ZK(p));if(b){if(this.firstSelection!==-1)return this.firstSelection;const K=this.codecTiers||(this.codecTiers=e7(h,L,n,r)),W=JK(K,T,e,_,k),{codecSet:X,videoRanges:U,minFramerate:$,minBitrate:B,preferHDR:te}=W;E=X,T=te?U[U.length-1]:U[0],w=$,e=Math.max(e,B),D.log(`[abr] picked start tier ${JSON.stringify(W)}`)}else E=g==null?void 0:g.codecSet,T=g==null?void 0:g.videoRange;const P=m?m.duration:f?f.duration:0,H=this.bwEstimator.getEstimateTTFB()/1e3,F=[];for(let K=r;K>=n;K--){var Y;const W=h[K],X=K>d;if(!W)continue;if(y.useMediaCapabilities&&!W.supportedResult&&!W.supportedPromise){const oe=navigator.mediaCapabilities;typeof(oe==null?void 0:oe.decodingInfo)=="function"&&KK(W,L,T,w,e,_)?(W.supportedPromise=qK(W,L,oe),W.supportedPromise.then(ge=>{if(!this.hls)return;W.supportedResult=ge;const ye=this.hls.levels,Oe=ye.indexOf(W);ge.error?D.warn(`[abr] MediaCapabilities decodingInfo error: "${ge.error}" for level ${Oe} ${JSON.stringify(ge)}`):ge.supported||(D.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${Oe} ${JSON.stringify(ge)}`),Oe>-1&&ye.length>1&&(D.log(`[abr] Removing unsupported level ${Oe}`),this.hls.removeLevel(Oe)))})):W.supportedResult=Xk}if(E&&W.codecSet!==E||T&&W.videoRange!==T||X&&w>W.frameRate||!X&&w>0&&w<W.frameRate||W.supportedResult&&!((Y=W.supportedResult.decodingInfoResults)!=null&&Y[0].smooth)){F.push(K);continue}const U=W.details,$=(m?U==null?void 0:U.partTarget:U==null?void 0:U.averagetargetduration)||P;let B;X?B=a*e:B=o*e;const te=P&&i>=P*2&&s===0?h[K].averageBitrate:h[K].maxBitrate,Z=this.getTimeToLoadFrag(H,B,te*$,U===void 0);if(B>=te&&(K===c||W.loadError===0&&W.fragmentError===0)&&(Z<=H||!re(Z)||x&&!this.bitrateTestDelay||Z<u)){const oe=this.forcedAutoLevel;return K!==v&&(oe===-1||oe!==v)&&(F.length&&D.trace(`[abr] Skipped level(s) ${F.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${h[F[0]].codecs}" ${h[F[0]].videoRange}; not compatible with "${g.codecs}" ${T}`),D.info(`[abr] switch candidate:${d}->${K} adjustedbw(${Math.round(B)})-bitrate=${Math.round(B-te)} ttfb:${H.toFixed(1)} avgDuration:${$.toFixed(1)} maxFetchDuration:${u.toFixed(1)} fetchDuration:${Z.toFixed(1)} firstSelection:${b} codecSet:${E} videoRange:${T} hls.loadLevel:${v}`)),b&&(this.firstSelection=K),K}}return-1}set nextAutoLevel(e){const{maxAutoLevel:n,minAutoLevel:r}=this.hls,i=Math.min(Math.max(e,r),n);this._nextAutoLevel!==i&&(this.nextAutoLevelKey="",this._nextAutoLevel=i)}}class i7{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var Wt={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class s7{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(R.BUFFER_APPENDED,this.onBufferAppended,this),e.on(R.FRAG_BUFFERED,this.onFragBuffered,this),e.on(R.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(R.BUFFER_APPENDED,this.onBufferAppended,this),e.off(R.FRAG_BUFFERED,this.onFragBuffered,this),e.off(R.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,n){const r=this.activePartLists[n];if(r)for(let i=r.length;i--;){const s=r[i];if(!s)break;const o=s.end;if(s.start<=e&&o!==null&&e<=o)return s}return this.getBufferedFrag(e,n)}getBufferedFrag(e,n){const{fragments:r}=this,i=Object.keys(r);for(let s=i.length;s--;){const o=r[i[s]];if((o==null?void 0:o.body.type)===n&&o.buffered){const a=o.body;if(a.start<=e&&e<=a.end)return a}}return null}detectEvictedFragments(e,n,r,i){this.timeRanges&&(this.timeRanges[e]=n);const s=(i==null?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a||s>=a.body.sn)return;if(!a.buffered&&!a.loaded){a.body.type===r&&this.removeFragment(a.body);return}const l=a.range[e];l&&l.time.some(u=>{const c=!this.isTimeBuffered(u.startPTS,u.endPTS,n);return c&&this.removeFragment(a.body),c})})}detectPartialFragments(e){const n=this.timeRanges,{frag:r,part:i}=e;if(!n||r.sn==="initSegment")return;const s=ua(r),o=this.fragments[s];if(!o||o.buffered&&r.gap)return;const a=!r.relurl;Object.keys(n).forEach(l=>{const u=r.elementaryStreams[l];if(!u)return;const c=n[l],d=a||u.partial===!0;o.range[l]=this.getBufferedTimes(r,i,d,c)}),o.loaded=null,Object.keys(o.range).length?(o.buffered=!0,(o.body.endList=r.endList||o.body.endList)&&(this.endListFragments[o.body.type]=o),Bd(o)||this.removeParts(r.sn-1,r.type)):this.removeFragment(o.body)}removeParts(e,n){const r=this.activePartLists[n];r&&(this.activePartLists[n]=r.filter(i=>i.fragment.sn>=e))}fragBuffered(e,n){const r=ua(e);let i=this.fragments[r];!i&&n&&(i=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,n,r,i){const s={time:[],partial:r},o=e.start,a=e.end,l=e.minEndPTS||a,u=e.maxStartPTS||o;for(let c=0;c<i.length;c++){const d=i.start(c)-this.bufferPadding,f=i.end(c)+this.bufferPadding;if(u>=d&&l<=f){s.time.push({startPTS:Math.max(o,i.start(c)),endPTS:Math.min(a,i.end(c))});break}else if(o<f&&a>d){const m=Math.max(o,i.start(c)),h=Math.min(a,i.end(c));h>m&&(s.partial=!0,s.time.push({startPTS:m,endPTS:h}))}else if(a<=d)break}return s}getPartialFragment(e){let n=null,r,i,s,o=0;const{bufferPadding:a,fragments:l}=this;return Object.keys(l).forEach(u=>{const c=l[u];c&&Bd(c)&&(i=c.body.start-a,s=c.body.end+a,e>=i&&e<=s&&(r=Math.min(e-i,s-e),o<=r&&(n=c.body,o=r)))}),n}isEndListAppended(e){const n=this.endListFragments[e];return n!==void 0&&(n.buffered||Bd(n))}getState(e){const n=ua(e),r=this.fragments[n];return r?r.buffered?Bd(r)?Wt.PARTIAL:Wt.OK:Wt.APPENDING:Wt.NOT_LOADED}isTimeBuffered(e,n,r){let i,s;for(let o=0;o<r.length;o++){if(i=r.start(o)-this.bufferPadding,s=r.end(o)+this.bufferPadding,e>=i&&n<=s)return!0;if(n<=i)return!1}return!1}onFragLoaded(e,n){const{frag:r,part:i}=n;if(r.sn==="initSegment"||r.bitrateTest)return;const s=i?null:n,o=ua(r);this.fragments[o]={body:r,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(e,n){const{frag:r,part:i,timeRanges:s}=n;if(r.sn==="initSegment")return;const o=r.type;if(i){let a=this.activePartLists[o];a||(this.activePartLists[o]=a=[]),a.push(i)}this.timeRanges=s,Object.keys(s).forEach(a=>{const l=s[a];this.detectEvictedFragments(a,l,o,i)})}onFragBuffered(e,n){this.detectPartialFragments(n)}hasFragment(e){const n=ua(e);return!!this.fragments[n]}hasParts(e){var n;return!!((n=this.activePartLists[e])!=null&&n.length)}removeFragmentsInRange(e,n,r,i,s){i&&!this.hasGaps||Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a)return;const l=a.body;l.type!==r||i&&!l.gap||l.start<n&&l.end>e&&(a.buffered||s)&&this.removeFragment(l)})}removeFragment(e){const n=ua(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const r=this.activePartLists[e.type];if(r){const i=e.sn;this.activePartLists[e.type]=r.filter(s=>s.fragment.sn!==i)}delete this.fragments[n],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function Bd(t){var e,n,r;return t.buffered&&(t.body.gap||((e=t.range.video)==null?void 0:e.partial)||((n=t.range.audio)==null?void 0:n.partial)||((r=t.range.audiovideo)==null?void 0:r.partial))}function ua(t){return`${t.type}_${t.level}_${t.sn}`}const o7={length:0,start:()=>0,end:()=>0};class Ze{static isBuffered(e,n){try{if(e){const r=Ze.getBuffered(e);for(let i=0;i<r.length;i++)if(n>=r.start(i)&&n<=r.end(i))return!0}}catch{}return!1}static bufferInfo(e,n,r){try{if(e){const i=Ze.getBuffered(e),s=[];let o;for(o=0;o<i.length;o++)s.push({start:i.start(o),end:i.end(o)});return this.bufferedInfo(s,n,r)}}catch{}return{len:0,start:n,end:n,nextStart:void 0}}static bufferedInfo(e,n,r){n=Math.max(0,n),e.sort(function(u,c){const d=u.start-c.start;return d||c.end-u.end});let i=[];if(r)for(let u=0;u<e.length;u++){const c=i.length;if(c){const d=i[c-1].end;e[u].start-d<r?e[u].end>d&&(i[c-1].end=e[u].end):i.push(e[u])}else i.push(e[u])}else i=e;let s=0,o,a=n,l=n;for(let u=0;u<i.length;u++){const c=i[u].start,d=i[u].end;if(n+r>=c&&n<d)a=c,l=d,s=l-n;else if(n+r<c){o=c;break}}return{len:s,start:a||0,end:l||0,nextStart:o}}static getBuffered(e){try{return e.buffered}catch(n){return D.log("failed to get media.buffered",n),o7}}}class PS{constructor(e,n,r,i=0,s=-1,o=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Ud(),this.buffering={audio:Ud(),video:Ud(),audiovideo:Ud()},this.level=e,this.sn=n,this.id=r,this.size=i,this.part=s,this.partial=o}}function Ud(){return{start:0,executeStart:0,executeEnd:0,end:0}}function bf(t,e){for(let r=0,i=t.length;r<i;r++){var n;if(((n=t[r])==null?void 0:n.cc)===e)return t[r]}return null}function a7(t,e,n){return!!(e&&(n.endCC>n.startCC||t&&t.cc<n.startCC))}function l7(t,e){const n=t.fragments,r=e.fragments;if(!r.length||!n.length){D.log("No fragments to align");return}const i=bf(n,r[0].cc);if(!i||i&&!i.startPTS){D.log("No frag in previous level to align on");return}return i}function rw(t,e){if(t){const n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}function Qk(t,e){const n=e.fragments;for(let r=0,i=n.length;r<i;r++)rw(n[r],t);e.fragmentHint&&rw(e.fragmentHint,t),e.alignedSliding=!0}function u7(t,e,n){e&&(c7(t,n,e),!n.alignedSliding&&e&&Lh(n,e),!n.alignedSliding&&e&&!n.skippedSegments&&Wk(e,n))}function c7(t,e,n){if(a7(t,n,e)){const r=l7(n,e);r&&re(r.start)&&(D.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),Qk(r.start,e))}}function Lh(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const n=t.fragments,r=e.fragments;if(!n.length||!r.length)return;let i,s;const o=Math.min(e.endCC,t.endCC);e.startCC<o&&t.startCC<o&&(i=bf(r,o),s=bf(n,o)),(!i||!s)&&(i=r[Math.floor(r.length/2)],s=bf(n,i.cc)||n[Math.floor(n.length/2)]);const a=i.programDateTime,l=s.programDateTime;if(!a||!l)return;const u=(l-a)/1e3-(s.start-i.start);Qk(u,t)}const iw=Math.pow(2,17);class d7{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,n){const r=e.url;if(!r)return Promise.reject(new ji({type:he.NETWORK_ERROR,details:N.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${r?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,s=i.fLoader,o=i.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(m=>m[0]==="GAP")){l(ow(e));return}else e.gap=!1;const u=this.loader=e.loader=s?new s(i):new o(i),c=sw(e),d=ew(i.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:iw};e.stats=u.stats,u.load(c,f,{onSuccess:(m,h,p,v)=>{this.resetLoader(e,u);let y=m.data;p.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(y.slice(0,16)),y=y.slice(16)),a({frag:e,part:null,payload:y,networkDetails:v})},onError:(m,h,p,v)=>{this.resetLoader(e,u),l(new ji({type:he.NETWORK_ERROR,details:N.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Xt({url:r,data:void 0},m),error:new Error(`HTTP Error ${m.code} ${m.text}`),networkDetails:p,stats:v}))},onAbort:(m,h,p)=>{this.resetLoader(e,u),l(new ji({type:he.NETWORK_ERROR,details:N.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:p,stats:m}))},onTimeout:(m,h,p)=>{this.resetLoader(e,u),l(new ji({type:he.NETWORK_ERROR,details:N.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:p,stats:m}))},onProgress:(m,h,p,v)=>{n&&n({frag:e,part:null,payload:p,networkDetails:v})}})})}loadPart(e,n,r){this.abort();const i=this.config,s=i.fLoader,o=i.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap||n.gap){l(ow(e,n));return}const u=this.loader=e.loader=s?new s(i):new o(i),c=sw(e,n),d=ew(i.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:iw};n.stats=u.stats,u.load(c,f,{onSuccess:(m,h,p,v)=>{this.resetLoader(e,u),this.updateStatsFromPart(e,n);const y={frag:e,part:n,payload:m.data,networkDetails:v};r(y),a(y)},onError:(m,h,p,v)=>{this.resetLoader(e,u),l(new ji({type:he.NETWORK_ERROR,details:N.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:n,response:Xt({url:c.url,data:void 0},m),error:new Error(`HTTP Error ${m.code} ${m.text}`),networkDetails:p,stats:v}))},onAbort:(m,h,p)=>{e.stats.aborted=n.stats.aborted,this.resetLoader(e,u),l(new ji({type:he.NETWORK_ERROR,details:N.INTERNAL_ABORTED,fatal:!1,frag:e,part:n,error:new Error("Aborted"),networkDetails:p,stats:m}))},onTimeout:(m,h,p)=>{this.resetLoader(e,u),l(new ji({type:he.NETWORK_ERROR,details:N.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:n,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:p,stats:m}))}})})}updateStatsFromPart(e,n){const r=e.stats,i=n.stats,s=i.total;if(r.loaded+=i.loaded,s){const l=Math.round(e.duration/n.duration),u=Math.min(Math.round(r.loaded/s),l),d=(l-u)*Math.round(r.loaded/u);r.total=r.loaded+d}else r.total=Math.max(r.loaded,r.total);const o=r.loading,a=i.loading;o.start?o.first+=a.first-a.start:(o.start=a.start,o.first=a.first),o.end=a.end}resetLoader(e,n){e.loader=null,this.loader===n&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),n.destroy()}}function sw(t,e=null){const n=e||t,r={frag:t,part:e,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},i=n.byteRangeStartOffset,s=n.byteRangeEndOffset;if(re(i)&&re(s)){var o;let a=i,l=s;if(t.sn==="initSegment"&&((o=t.decryptdata)==null?void 0:o.method)==="AES-128"){const u=s-i;u%16&&(l=s+(16-u%16)),i!==0&&(r.resetIV=!0,a=i-16)}r.rangeStart=a,r.rangeEnd=l}return r}function ow(t,e){const n=new Error(`GAP ${t.gap?"tag":"attribute"} found`),r={type:he.MEDIA_ERROR,details:N.FRAG_GAP,fatal:!1,frag:t,error:n,networkDetails:null};return e&&(r.part=e),(e||t).stats.aborted=!0,new ji(r)}class ji extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class f7{constructor(e,n){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=n}decrypt(e,n){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},n,e)}}class h7{constructor(e,n){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=n}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function p7(t){const e=t.byteLength,n=e&&new DataView(t.buffer).getUint8(e-1);return n?Fo(t,0,e-n):t}class m7{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const n=new DataView(e),r=new Uint32Array(4);for(let i=0;i<4;i++)r[i]=n.getUint32(i*4);return r}initTable(){const e=this.sBox,n=this.invSBox,r=this.subMix,i=r[0],s=r[1],o=r[2],a=r[3],l=this.invSubMix,u=l[0],c=l[1],d=l[2],f=l[3],m=new Uint32Array(256);let h=0,p=0,v=0;for(v=0;v<256;v++)v<128?m[v]=v<<1:m[v]=v<<1^283;for(v=0;v<256;v++){let y=p^p<<1^p<<2^p<<3^p<<4;y=y>>>8^y&255^99,e[h]=y,n[y]=h;const g=m[h],x=m[g],b=m[x];let E=m[y]*257^y*16843008;i[h]=E<<24|E>>>8,s[h]=E<<16|E>>>16,o[h]=E<<8|E>>>24,a[h]=E,E=b*16843009^x*65537^g*257^h*16843008,u[y]=E<<24|E>>>8,c[y]=E<<16|E>>>16,d[y]=E<<8|E>>>24,f[y]=E,h?(h=g^m[m[m[b^g]]],p^=m[m[p]]):h=p=1}}expandKey(e){const n=this.uint8ArrayToUint32Array_(e);let r=!0,i=0;for(;i<n.length&&r;)r=n[i]===this.key[i],i++;if(r)return;this.key=n;const s=this.keySize=n.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);const o=this.ksRows=(s+6+1)*4;let a,l;const u=this.keySchedule=new Uint32Array(o),c=this.invKeySchedule=new Uint32Array(o),d=this.sBox,f=this.rcon,m=this.invSubMix,h=m[0],p=m[1],v=m[2],y=m[3];let g,x;for(a=0;a<o;a++){if(a<s){g=u[a]=n[a];continue}x=g,a%s===0?(x=x<<8|x>>>24,x=d[x>>>24]<<24|d[x>>>16&255]<<16|d[x>>>8&255]<<8|d[x&255],x^=f[a/s|0]<<24):s>6&&a%s===4&&(x=d[x>>>24]<<24|d[x>>>16&255]<<16|d[x>>>8&255]<<8|d[x&255]),u[a]=g=(u[a-s]^x)>>>0}for(l=0;l<o;l++)a=o-l,l&3?x=u[a]:x=u[a-4],l<4||a<=4?c[l]=x:c[l]=h[d[x>>>24]]^p[d[x>>>16&255]]^v[d[x>>>8&255]]^y[d[x&255]],c[l]=c[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,n,r){const i=this.keySize+6,s=this.invKeySchedule,o=this.invSBox,a=this.invSubMix,l=a[0],u=a[1],c=a[2],d=a[3],f=this.uint8ArrayToUint32Array_(r);let m=f[0],h=f[1],p=f[2],v=f[3];const y=new Int32Array(e),g=new Int32Array(y.length);let x,b,E,T,w,_,k,L,P,H,F,Y,K,W;const X=this.networkToHostOrderSwap;for(;n<y.length;){for(P=X(y[n]),H=X(y[n+1]),F=X(y[n+2]),Y=X(y[n+3]),w=P^s[0],_=Y^s[1],k=F^s[2],L=H^s[3],K=4,W=1;W<i;W++)x=l[w>>>24]^u[_>>16&255]^c[k>>8&255]^d[L&255]^s[K],b=l[_>>>24]^u[k>>16&255]^c[L>>8&255]^d[w&255]^s[K+1],E=l[k>>>24]^u[L>>16&255]^c[w>>8&255]^d[_&255]^s[K+2],T=l[L>>>24]^u[w>>16&255]^c[_>>8&255]^d[k&255]^s[K+3],w=x,_=b,k=E,L=T,K=K+4;x=o[w>>>24]<<24^o[_>>16&255]<<16^o[k>>8&255]<<8^o[L&255]^s[K],b=o[_>>>24]<<24^o[k>>16&255]<<16^o[L>>8&255]<<8^o[w&255]^s[K+1],E=o[k>>>24]<<24^o[L>>16&255]<<16^o[w>>8&255]<<8^o[_&255]^s[K+2],T=o[L>>>24]<<24^o[w>>16&255]<<16^o[_>>8&255]<<8^o[k&255]^s[K+3],g[n]=X(x^m),g[n+1]=X(T^h),g[n+2]=X(E^p),g[n+3]=X(b^v),m=P,h=H,p=F,v=Y,n=n+4}return g.buffer}}const g7=16;class IS{constructor(e,{removePKCS7Padding:n=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=n,n)try{const r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:n}=this;if(!e||n)return this.reset(),null;const r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?p7(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,n,r){return this.useSoftware?new Promise((i,s)=>{this.softwareDecrypt(new Uint8Array(e),n,r);const o=this.flush();o?i(o.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),n,r)}softwareDecrypt(e,n,r){const{currentIV:i,currentResult:s,remainderData:o}=this;this.logOnce("JS AES decrypt"),o&&(e=Ar(o,e),this.remainderData=null);const a=this.getValidChunk(e);if(!a.length)return null;i&&(r=i);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new m7),l.expandKey(n);const u=s;return this.currentResult=l.decrypt(a.buffer,0,r),this.currentIV=Fo(a,-16).buffer,u||null}webCryptoDecrypt(e,n,r){const i=this.subtle;return(this.key!==n||!this.fastAesKey)&&(this.key=n,this.fastAesKey=new h7(i,n)),this.fastAesKey.expandKey().then(s=>i?(this.logOnce("WebCrypto AES decrypt"),new f7(i,new Uint8Array(r)).decrypt(e.buffer,s)):Promise.reject(new Error("web crypto not initialized"))).catch(s=>(D.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(e,n,r)))}onWebCryptoError(e,n,r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,n,r);const i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let n=e;const r=e.length-e.length%g7;return r!==e.length&&(n=Fo(e,0,r),this.remainderData=Fo(e,r)),n}logOnce(e){this.logEnabled&&(D.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const y7={toString:function(t){let e="";const n=t.length;for(let r=0;r<n;r++)e+=`[${t.start(r).toFixed(3)}-${t.end(r).toFixed(3)}]`;return e}},G={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class DS extends i7{constructor(e,n,r,i,s){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=G.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=s,this.logPrefix=i,this.log=D.log.bind(D,`${i}:`),this.warn=D.warn.bind(D,`${i}:`),this.hls=e,this.fragmentLoader=new d7(e.config),this.keyLoader=r,this.fragmentTracker=n,this.config=e.config,this.decrypter=new IS(e.config),e.on(R.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=G.STOPPED}_streamEnded(e,n){if(n.live||e.nextStart||!e.end||!this.media)return!1;const r=n.partList;if(r!=null&&r.length){const s=r[r.length-1];return Ze.isBuffered(this.media,s.start+s.duration/2)}const i=n.fragments[n.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(i)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}onMediaAttached(e,n){const r=this.media=this.mediaBuffer=n.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);const i=this.config;this.levels&&i.autoStartLoad&&this.state===G.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:n,media:r,mediaBuffer:i,state:s}=this,o=r?r.currentTime:0,a=Ze.bufferInfo(i||r,o,e.maxBufferHole);if(this.log(`media seeking to ${re(o)?o.toFixed(3):o}, state: ${s}`),this.state===G.ENDED)this.resetLoadingState();else if(n){const l=e.maxFragLookUpTolerance,u=n.start-l,c=n.start+n.duration+l;if(!a.len||c<a.start||u>a.end){const d=o>c;(o<u||d)&&(d&&n.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),n.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}r&&(this.fragmentTracker.removeFragmentsInRange(o,1/0,this.playlistType,!0),this.lastCurrentTime=o),!this.loadedmetadata&&!a.len&&(this.nextLoadPosition=this.startPosition=o),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,n){this.startTimeOffset=n.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(R.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=G.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,n,r){this._loadFragForPlayback(e,n,r)}_loadFragForPlayback(e,n,r){const i=s=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${s.part?" p: "+s.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(e,n,r,i).then(s=>{if(!s)return;const o=this.state;if(this.fragContextChanged(e)){(o===G.FRAG_LOADING||!this.fragCurrent&&o===G.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=G.IDLE);return}"payload"in s&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(R.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===G.STOPPED||this.state===G.ERROR||(this.warn(s),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var n;const{fragmentTracker:r}=this;if(r.getState(e)===Wt.APPENDING){const s=e.type,o=this.getFwdBufferInfo(this.mediaBuffer,s),a=Math.max(e.duration,o?o.len:this.config.maxBufferLength);this.reduceMaxBufferLength(a)&&r.removeFragment(e)}else((n=this.mediaBuffer)==null?void 0:n.buffered.length)===0?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===Wt.PARTIAL&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const n=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:n,part:null,stats:n.stats,id:n.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,n,r=null){if(!(e-n))return;const i={startOffset:e,endOffset:n,type:r};this.hls.trigger(R.BUFFER_FLUSHING,i)}_loadInitSegment(e,n){this._doFragLoad(e,n).then(r=>{if(!r||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return r}).then(r=>{const{hls:i}=this,{payload:s}=r,o=e.decryptdata;if(s&&s.byteLength>0&&o!=null&&o.key&&o.iv&&o.method==="AES-128"){const a=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),o.key.buffer,o.iv.buffer).catch(l=>{throw i.trigger(R.ERROR,{type:he.MEDIA_ERROR,details:N.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:e}),l}).then(l=>{const u=self.performance.now();return i.trigger(R.FRAG_DECRYPTED,{frag:e,payload:l,stats:{tstart:a,tdecrypt:u}}),r.payload=l,this.completeInitSegmentLoad(r)})}return this.completeInitSegmentLoad(r)}).catch(r=>{this.state===G.STOPPED||this.state===G.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:n}=this;if(!n)throw new Error("init load aborted, missing levels");const r=e.frag.stats;this.state=G.IDLE,e.frag.data=new Uint8Array(e.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:n}=this;return!e||!n||e.sn!==n.sn||e.level!==n.level}fragBufferedComplete(e,n){var r,i,s,o;const a=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.playlistType===ce.MAIN?"level":"track"} ${e.level} (frag:[${((r=e.startPTS)!=null?r:NaN).toFixed(3)}-${((i=e.endPTS)!=null?i:NaN).toFixed(3)}] > buffer:${a?y7.toString(Ze.getBuffered(a)):"(detached)"})`),e.sn!=="initSegment"){var l;if(e.type!==ce.SUBTITLE){const c=e.elementaryStreams;if(!Object.keys(c).some(d=>!!c[d])){this.state=G.IDLE;return}}const u=(l=this.levels)==null?void 0:l[e.level];u!=null&&u.fragmentError&&(this.log(`Resetting level fragment error count of ${u.fragmentError} on frag buffered`),u.fragmentError=0)}this.state=G.IDLE,a&&(!this.loadedmetadata&&e.type==ce.MAIN&&a.buffered.length&&((s=this.fragCurrent)==null?void 0:s.sn)===((o=this.fragPrevious)==null?void 0:o.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:n}=this;if(!n)return;const{frag:r,part:i,partsLoaded:s}=e,o=!s||s.length===0||s.some(l=>!l),a=new PS(r.level,r.sn,r.stats.chunkCount+1,0,i?i.index:-1,!o);n.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,n,r=null,i){var s;const o=n==null?void 0:n.details;if(!this.levels||!o)throw new Error(`frag load aborted, missing level${o?"":" detail"}s`);let a=null;if(e.encrypted&&!((s=e.decryptdata)!=null&&s.key)?(this.log(`Loading key for ${e.sn} of [${o.startSN}-${o.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${e.level}`),this.state=G.KEY_LOADING,this.fragCurrent=e,a=this.keyLoader.load(e).then(c=>{if(!this.fragContextChanged(c.frag))return this.hls.trigger(R.KEY_LOADED,c),this.state===G.KEY_LOADING&&(this.state=G.IDLE),c}),this.hls.trigger(R.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&o.encryptedFragments.length&&this.keyLoader.loadClear(e,o.encryptedFragments),r=Math.max(e.start,r||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const c=o.partList;if(c&&i){r>e.end&&o.fragmentHint&&(e=o.fragmentHint);const d=this.getNextPart(c,e,r);if(d>-1){const f=c[d];this.log(`Loading part sn: ${e.sn} p: ${f.index} cc: ${e.cc} of playlist [${o.startSN}-${o.endSN}] parts [0-${d}-${c.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=f.start+f.duration,this.state=G.FRAG_LOADING;let m;return a?m=a.then(h=>!h||this.fragContextChanged(h.frag)?null:this.doFragPartsLoad(e,f,n,i)).catch(h=>this.handleFragLoadError(h)):m=this.doFragPartsLoad(e,f,n,i).catch(h=>this.handleFragLoadError(h)),this.hls.trigger(R.FRAG_LOADING,{frag:e,part:f,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):m}else if(!e.url||this.loadedEndOfParts(c,r))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${o?"of ["+o.startSN+"-"+o.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(r.toFixed(3))}`),re(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=G.FRAG_LOADING;const l=this.config.progressive;let u;return l&&a?u=a.then(c=>!c||this.fragContextChanged(c==null?void 0:c.frag)?null:this.fragmentLoader.load(e,i)).catch(c=>this.handleFragLoadError(c)):u=Promise.all([this.fragmentLoader.load(e,l?i:void 0),a]).then(([c])=>(!l&&c&&i&&i(c),c)).catch(c=>this.handleFragLoadError(c)),this.hls.trigger(R.FRAG_LOADING,{frag:e,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):u}doFragPartsLoad(e,n,r,i){return new Promise((s,o)=>{var a;const l=[],u=(a=r.details)==null?void 0:a.partList,c=d=>{this.fragmentLoader.loadPart(e,d,i).then(f=>{l[d.index]=f;const m=f.part;this.hls.trigger(R.FRAG_LOADED,f);const h=J1(r,e.sn,d.index+1)||Kk(u,e.sn,d.index+1);if(h)c(h);else return s({frag:e,part:m,partsLoaded:l})}).catch(o)};c(n)})}handleFragLoadError(e){if("data"in e){const n=e.data;e.data&&n.details===N.INTERNAL_ABORTED?this.handleFragLoadAborted(n.frag,n.part):this.hls.trigger(R.ERROR,n)}else this.hls.trigger(R.ERROR,{type:he.OTHER_ERROR,details:N.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const n=this.getCurrentContext(e);if(!n||this.state!==G.PARSING){!this.fragCurrent&&this.state!==G.STOPPED&&this.state!==G.ERROR&&(this.state=G.IDLE);return}const{frag:r,part:i,level:s}=n,o=self.performance.now();r.stats.parsing.end=o,i&&(i.stats.parsing.end=o),this.updateLevelTiming(r,i,s,e.partial)}getCurrentContext(e){const{levels:n,fragCurrent:r}=this,{level:i,sn:s,part:o}=e;if(!(n!=null&&n[i]))return this.warn(`Levels object was unset while buffering fragment ${s} of level ${i}. The current chunk will not be buffered.`),null;const a=n[i],l=o>-1?J1(a,s,o):null,u=l?l.fragment:UK(a,s,r);return u?(r&&r!==u&&(u.stats=r.stats),{frag:u,part:l,level:a}):null}bufferFragmentData(e,n,r,i,s){var o;if(!e||this.state!==G.PARSING)return;const{data1:a,data2:l}=e;let u=a;if(a&&l&&(u=Ar(a,l)),!((o=u)!=null&&o.length))return;const c={type:e.type,frag:n,part:r,chunkMeta:i,parent:n.type,data:u};if(this.hls.trigger(R.BUFFER_APPENDING,c),e.dropped&&e.independent&&!r){if(s)return;this.flushBufferGap(n)}}flushBufferGap(e){const n=this.media;if(!n)return;if(!Ze.isBuffered(n,n.currentTime)){this.flushMainBuffer(0,e.start);return}const r=n.currentTime,i=Ze.bufferInfo(n,r,0),s=e.duration,o=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),a=Math.max(Math.min(e.start-o,i.end-o),r+o);e.start-a>o&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,n){const r=this.getLoadPosition();return re(r)?this.getFwdBufferInfoAtPos(e,r,n):null}getFwdBufferInfoAtPos(e,n,r){const{config:{maxBufferHole:i}}=this,s=Ze.bufferInfo(e,n,i);if(s.len===0&&s.nextStart!==void 0){const o=this.fragmentTracker.getBufferedFrag(n,r);if(o&&s.nextStart<o.end)return Ze.bufferInfo(e,n,Math.max(s.nextStart,i))}return s}getMaxBufferLength(e){const{config:n}=this;let r;return e?r=Math.max(8*n.maxBufferSize/e,n.maxBufferLength):r=n.maxBufferLength,Math.min(r,n.maxMaxBufferLength)}reduceMaxBufferLength(e){const n=this.config,r=e||n.maxBufferLength;return n.maxMaxBufferLength>=r?(n.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${n.maxMaxBufferLength}s`),!0):!1}getAppendedFrag(e,n=ce.MAIN){const r=this.fragmentTracker.getAppendedFrag(e,ce.MAIN);return r&&"fragment"in r?r.fragment:r}getNextFragment(e,n){const r=n.fragments,i=r.length;if(!i)return null;const{config:s}=this,o=r[0].start;let a;if(n.live){const l=s.initialLiveManifestSize;if(i<l)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${l})`),null;(!n.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<o)&&(a=this.getInitialLiveFragment(n,r),this.startPosition=this.nextLoadPosition=a?this.hls.liveSyncPosition||a.start:e)}else e<=o&&(a=r[0]);if(!a){const l=s.lowLatencyMode?n.partEnd:n.fragmentEnd;a=this.getFragmentAtPosition(e,l,n)}return this.mapToInitFragWhenRequired(a)}isLoopLoading(e,n){const r=this.fragmentTracker.getState(e);return(r===Wt.OK||r===Wt.PARTIAL&&!!e.gap)&&this.nextLoadPosition>n}getNextFragmentLoopLoading(e,n,r,i,s){const o=e.gap,a=this.getNextFragment(this.nextLoadPosition,n);if(a===null)return a;if(e=a,o&&e&&!e.gap&&r.nextStart){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,i);if(l!==null&&r.len+l.len>=s)return this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,n,r){let i=-1,s=!1,o=!0;for(let a=0,l=e.length;a<l;a++){const u=e[a];if(o=o&&!u.independent,i>-1&&r<u.start)break;const c=u.loaded;c?i=-1:(s||u.independent||o)&&u.fragment===n&&(i=a),s=c}return i}loadedEndOfParts(e,n){const r=e[e.length-1];return r&&n>r.start&&r.loaded}getInitialLiveFragment(e,n){const r=this.fragPrevious;let i=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),i=HK(n,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const s=r.sn+1;if(s>=e.startSN&&s<=e.endSN){const o=n[s-e.startSN];r.cc===o.cc&&(i=o,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=VK(n,r.cc),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const s=this.hls.liveSyncPosition;s!==null&&(i=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,n,r){const{config:i}=this;let{fragPrevious:s}=this,{fragments:o,endSN:a}=r;const{fragmentHint:l}=r,u=i.maxFragLookUpTolerance,c=r.partList,d=!!(i.lowLatencyMode&&c!=null&&c.length&&l);d&&l&&!this.bitrateTest&&(o=o.concat(l),a=l.sn);let f;if(e<n){const m=e>n-u?0:u;f=Ch(s,o,e,m)}else f=o[o.length-1];if(f){const m=f.sn-r.startSN,h=this.fragmentTracker.getState(f);if((h===Wt.OK||h===Wt.PARTIAL&&f.gap)&&(s=f),s&&f.sn===s.sn&&(!d||c[0].fragment.sn>f.sn)&&s&&f.level===s.level){const v=o[m+1];f.sn<a&&this.fragmentTracker.getState(v)!==Wt.OK?f=v:f=null}}return f}synchronizeToLiveEdge(e){const{config:n,media:r}=this;if(!r)return;const i=this.hls.liveSyncPosition,s=r.currentTime,o=e.fragments[0].start,a=e.edge,l=s>=o-n.maxFragLookUpTolerance&&s<=a;if(i!==null&&r.duration>i&&(s<i||!l)){const u=n.liveMaxLatencyDuration!==void 0?n.liveMaxLatencyDuration:n.liveMaxLatencyDurationCount*e.targetduration;(!l&&r.readyState<4||s<a-u)&&(this.loadedmetadata||(this.nextLoadPosition=i),r.readyState&&(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${i.toFixed(3)}`),r.currentTime=i))}}alignPlaylists(e,n,r){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const s=e.fragments[0].start,o=!n,a=e.alignedSliding&&re(s);if(o||!a&&!s){const{fragPrevious:l}=this;u7(l,r,e);const u=e.fragments[0].start;return this.log(`Live playlist sliding: ${u.toFixed(2)} start-sn: ${n?n.startSN:"na"}->${e.startSN} prev-sn: ${l?l.sn:"na"} fragments: ${i}`),u}return s}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,n){let r=this.startPosition;if(r<n&&(r=-1),r===-1||this.lastCurrentTime===-1){const i=this.startTimeOffset!==null,s=i?this.startTimeOffset:e.startTimeOffset;s!==null&&re(s)?(r=n+s,s<0&&(r+=e.totalduration),r=Math.min(Math.max(n,r),n+e.totalduration),this.log(`Start time offset ${s} found in ${i?"multivariant":"media"} playlist, adjust startPosition to ${r}`),this.startPosition=r):e.live?r=this.hls.liveSyncPosition||n:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r}getLoadPosition(){const{media:e}=this;let n=0;return this.loadedmetadata&&e?n=e.currentTime:this.nextLoadPosition&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,n){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${n?" part "+n.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==G.FRAG_LOADING_WAITING_RETRY)&&(this.state=G.IDLE)}onFragmentOrKeyLoadError(e,n){if(n.chunkMeta&&!n.frag){const c=this.getCurrentContext(n.chunkMeta);c&&(n.frag=c.frag)}const r=n.frag;if(!r||r.type!==e||!this.levels)return;if(this.fragContextChanged(r)){var i;this.warn(`Frag load error must match current frag to retry ${r.url} > ${(i=this.fragCurrent)==null?void 0:i.url}`);return}const s=n.details===N.FRAG_GAP;s&&this.fragmentTracker.fragBuffered(r,!0);const o=n.errorAction,{action:a,retryCount:l=0,retryConfig:u}=o||{};if(o&&a===rn.RetryRequest&&u){this.resetStartWhenNotLoaded(this.levelLastLoaded);const c=LS(u,l);this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${n.details}, retrying loading ${l+1}/${u.maxNumRetry} in ${c}ms`),o.resolved=!0,this.retryDate=self.performance.now()+c,this.state=G.FRAG_LOADING_WAITING_RETRY}else if(u&&o)if(this.resetFragmentErrors(e),l<u.maxNumRetry)!s&&a!==rn.RemoveAlternatePermanently&&(o.resolved=!0);else{D.warn(`${n.details} reached or exceeded max retry (${l})`);return}else(o==null?void 0:o.action)===rn.SendAlternateToPenaltyBox?this.state=G.WAITING_LEVEL:this.state=G.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===G.PARSING||this.state===G.PARSED){const n=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,n),i=r&&r.len>.5;i&&this.reduceMaxBufferLength(r.len);const s=!i;return s&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${n} buffer`),e.frag&&(this.fragmentTracker.removeFragment(e.frag),this.nextLoadPosition=e.frag.start),this.resetLoadingState(),s}return!1}resetFragmentErrors(e){e===ce.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==G.STOPPED&&(this.state=G.IDLE)}afterBufferFlushed(e,n,r){if(!e)return;const i=Ze.getBuffered(e);this.fragmentTracker.detectEvictedFragments(n,i,r),this.state===G.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=G.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const n=e?e.details:null;n!=null&&n.live?(this.startPosition=-1,this.setStartPosition(n,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,n,r,i){var s;const o=r.details;if(!o){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,u)=>{const c=e.elementaryStreams[u];if(c){const d=c.endPTS-c.startPTS;if(d<=0)return this.warn(`Could not parse fragment ${e.sn} ${u} duration reliably (${d})`),l||!1;const f=i?0:Gk(o,e,c.startPTS,c.endPTS,c.startDTS,c.endDTS);return this.hls.trigger(R.LEVEL_PTS_UPDATED,{details:o,level:r,drift:f,type:u,frag:e,start:c.startPTS,end:c.endPTS}),!0}return l},!1)&&((s=this.transmuxer)==null?void 0:s.error)===null){const l=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(r.fragmentError===0&&(r.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(l.message),this.hls.trigger(R.ERROR,{type:he.MEDIA_ERROR,details:N.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of level "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=G.PARSED,this.hls.trigger(R.FRAG_PARSED,{frag:e,part:n})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const n=this._state;n!==e&&(this._state=e,this.log(`${n}->${e}`))}get state(){return this._state}}class Jk{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:n}=this;let r;if(e.length)e.length===1?r=e[0]:r=v7(e,n);else return new Uint8Array(0);return this.reset(),r}reset(){this.chunks.length=0,this.dataLength=0}}function v7(t,e){const n=new Uint8Array(e);let r=0;for(let i=0;i<t.length;i++){const s=t[i];n.set(s,r),r+=s.length}return n}function x7(){return typeof __HLS_WORKER_BUNDLE__=="function"}function S7(){const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(t);return{worker:new self.Worker(e),objectURL:e}}function E7(t){const e=new self.URL(t,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function li(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class OS{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,n,r,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,n){return!1}appendFrame(e,n,r){}demux(e,n){this.cachedData&&(e=Ar(this.cachedData,e),this.cachedData=null);let r=nc(e,0),i=r?r.length:0,s;const o=this._audioTrack,a=this._id3Track,l=r?CS(r):void 0,u=e.length;for((this.basePTS===null||this.frameIndex===0&&re(l))&&(this.basePTS=b7(l,n,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),r&&r.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:Gr.audioId3,duration:Number.POSITIVE_INFINITY});i<u;){if(this.canParse(e,i)){const c=this.appendFrame(o,e,i);c?(this.frameIndex++,this.lastPTS=c.sample.pts,i+=c.length,s=i):i=u}else G9(e,i)?(r=nc(e,i),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:Gr.audioId3,duration:Number.POSITIVE_INFINITY}),i+=r.length,s=i):i++;if(i===u&&s!==u){const c=Fo(e,s);this.cachedData?this.cachedData=Ar(this.cachedData,c):this.cachedData=c}}return{audioTrack:o,videoTrack:li(),id3Track:a,textTrack:li()}}demuxSampleAes(e,n,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const n=this.cachedData;return n&&(this.cachedData=null,this.demux(n,0)),{audioTrack:this._audioTrack,videoTrack:li(),id3Track:this._id3Track,textTrack:li()}}destroy(){}}const b7=(t,e,n)=>{if(re(t))return t*90;const r=n?n.baseTime*9e4/n.timescale:0;return e*9e4+r};function T7(t,e,n,r){let i,s,o,a;const l=navigator.userAgent.toLowerCase(),u=r,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=((e[n+2]&192)>>>6)+1;const d=(e[n+2]&60)>>>2;if(d>c.length-1){const f=new Error(`invalid ADTS sampling index:${d}`);t.emit(R.ERROR,R.ERROR,{type:he.MEDIA_ERROR,details:N.FRAG_PARSING_ERROR,fatal:!0,error:f,reason:f.message});return}return o=(e[n+2]&1)<<2,o|=(e[n+3]&192)>>>6,D.log(`manifest codec:${r}, ADTS type:${i}, samplingIndex:${d}`),/firefox/i.test(l)?d>=6?(i=5,a=new Array(4),s=d-3):(i=2,a=new Array(2),s=d):l.indexOf("android")!==-1?(i=2,a=new Array(2),s=d):(i=5,a=new Array(4),r&&(r.indexOf("mp4a.40.29")!==-1||r.indexOf("mp4a.40.5")!==-1)||!r&&d>=6?s=d-3:((r&&r.indexOf("mp4a.40.2")!==-1&&(d>=6&&o===1||/vivaldi/i.test(l))||!r&&o===1)&&(i=2,a=new Array(2)),s=d)),a[0]=i<<3,a[0]|=(d&14)>>1,a[1]|=(d&1)<<7,a[1]|=o<<3,i===5&&(a[1]|=(s&14)>>1,a[2]=(s&1)<<7,a[2]|=8,a[3]=0),{config:a,samplerate:c[d],channelCount:o,codec:"mp4a.40."+i,manifestCodec:u}}function Zk(t,e){return t[e]===255&&(t[e+1]&246)===240}function eP(t,e){return t[e+1]&1?7:9}function MS(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function w7(t,e){return e+5<t.length}function kh(t,e){return e+1<t.length&&Zk(t,e)}function R7(t,e){return w7(t,e)&&Zk(t,e)&&MS(t,e)<=t.length-e}function A7(t,e){if(kh(t,e)){const n=eP(t,e);if(e+n>=t.length)return!1;const r=MS(t,e);if(r<=n)return!1;const i=e+r;return i===t.length||kh(t,i)}return!1}function tP(t,e,n,r,i){if(!t.samplerate){const s=T7(e,n,r,i);if(!s)return;t.config=s.config,t.samplerate=s.samplerate,t.channelCount=s.channelCount,t.codec=s.codec,t.manifestCodec=s.manifestCodec,D.log(`parsed codec:${t.codec}, rate:${s.samplerate}, channels:${s.channelCount}`)}}function nP(t){return 1024*9e4/t}function _7(t,e){const n=eP(t,e);if(e+n<=t.length){const r=MS(t,e)-n;if(r>0)return{headerLength:n,frameLength:r}}}function rP(t,e,n,r,i){const s=nP(t.samplerate),o=r+i*s,a=_7(e,n);let l;if(a){const{frameLength:d,headerLength:f}=a,m=f+d,h=Math.max(0,n+m-e.length);h?(l=new Uint8Array(m-f),l.set(e.subarray(n+f,e.length),0)):l=e.subarray(n+f,n+m);const p={unit:l,pts:o};return h||t.samples.push(p),{sample:p,length:m,missing:h}}const u=e.length-n;return l=new Uint8Array(u),l.set(e.subarray(n,e.length),0),{sample:{unit:l,pts:o},length:u,missing:-1}}let jd=null;const C7=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],L7=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],k7=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],P7=[0,1,1,4];function iP(t,e,n,r,i){if(n+24>e.length)return;const s=sP(e,n);if(s&&n+s.frameLength<=e.length){const o=s.samplesPerFrame*9e4/s.sampleRate,a=r+i*o,l={unit:e.subarray(n,n+s.frameLength),pts:a,dts:a};return t.config=[],t.channelCount=s.channelCount,t.samplerate=s.sampleRate,t.samples.push(l),{sample:l,length:s.frameLength,missing:0}}}function sP(t,e){const n=t[e+1]>>3&3,r=t[e+1]>>1&3,i=t[e+2]>>4&15,s=t[e+2]>>2&3;if(n!==1&&i!==0&&i!==15&&s!==3){const o=t[e+2]>>1&1,a=t[e+3]>>6,l=n===3?3-r:r===3?3:4,u=C7[l*14+i-1]*1e3,d=L7[(n===3?0:n===2?1:2)*3+s],f=a===3?1:2,m=k7[n][r],h=P7[r],p=m*8*h,v=Math.floor(m*u/d+o)*h;if(jd===null){const x=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);jd=x?parseInt(x[1]):0}return!!jd&&jd<=87&&r===2&&u>=224e3&&a===0&&(t[e+3]=t[e+3]|128),{sampleRate:d,channelCount:f,frameLength:v,samplesPerFrame:p}}}function NS(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function oP(t,e){return e+1<t.length&&NS(t,e)}function I7(t,e){return NS(t,e)&&4<=t.length-e}function aP(t,e){if(e+1<t.length&&NS(t,e)){const r=sP(t,e);let i=4;r!=null&&r.frameLength&&(i=r.frameLength);const s=e+i;return s===t.length||oP(t,s)}return!1}class D7 extends OS{constructor(e,n){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=n}resetInitSegment(e,n,r,i){super.resetInitSegment(e,n,r,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const n=nc(e,0);let r=(n==null?void 0:n.length)||0;if(aP(e,r))return!1;for(let i=e.length;r<i;r++)if(A7(e,r))return D.log("ADTS sync word found !"),!0;return!1}canParse(e,n){return R7(e,n)}appendFrame(e,n,r){tP(e,this.observer,n,r,e.manifestCodec);const i=rP(e,n,r,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const O7=/\/emsg[-/]ID3/i;class M7{constructor(e,n){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=n}resetTimeStamp(){}resetInitSegment(e,n,r,i){const s=this.videoTrack=li("video",1),o=this.audioTrack=li("audio",1),a=this.txtTrack=li("text",1);if(this.id3Track=li("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=Fk(e);if(l.video){const{id:u,timescale:c,codec:d}=l.video;s.id=u,s.timescale=a.timescale=c,s.codec=d}if(l.audio){const{id:u,timescale:c,codec:d}=l.audio;o.id=u,o.timescale=c,o.codec=d}a.id=Ok.text,s.sampleDuration=0,s.duration=o.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return eK(e)}demux(e,n){this.timeOffset=n;let r=e;const i=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=Ar(this.remainderData,e));const a=lK(r);this.remainderData=a.remainder,i.samples=a.valid||new Uint8Array}else i.samples=r;const o=this.extractID3Track(i,n);return s.samples=O1(n,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,n=this.videoTrack,r=this.txtTrack;n.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(n,this.timeOffset);return r.samples=O1(e,n),{videoTrack:n,audioTrack:li(),id3Track:i,textTrack:li()}}extractID3Track(e,n){const r=this.id3Track;if(e.samples.length){const i=xe(e.samples,["emsg"]);i&&i.forEach(s=>{const o=dK(s);if(O7.test(o.schemeIdUri)){const a=re(o.presentationTime)?o.presentationTime/o.timeScale:n+o.presentationTimeDelta/o.timeScale;let l=o.eventDuration===4294967295?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const u=o.payload;r.samples.push({data:u,len:u.byteLength,dts:a,pts:a,type:Gr.emsg,duration:l})}})}return r}demuxSampleAes(e,n,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const lP=(t,e)=>{let n=0,r=5;e+=r;const i=new Uint32Array(1),s=new Uint32Array(1),o=new Uint8Array(1);for(;r>0;){o[0]=t[e];const a=Math.min(r,8),l=8-a;s[0]=4278190080>>>24+l<<l,i[0]=(o[0]&s[0])>>l,n=n?n<<a|i[0]:i[0],e+=1,r-=a}return n};class N7 extends OS{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,n,r,i){super.resetInitSegment(e,n,r,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,n){return n+64<e.length}appendFrame(e,n,r){const i=uP(e,n,r,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const n=nc(e,0);if(!n)return!1;const r=n.length;return e[r]===11&&e[r+1]===119&&CS(n)!==void 0&&lP(e,r)<16}}function uP(t,e,n,r,i){if(n+8>e.length||e[n]!==11||e[n+1]!==119)return-1;const s=e[n+4]>>6;if(s>=3)return-1;const a=[48e3,44100,32e3][s],l=e[n+4]&63,c=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+s]*2;if(n+c>e.length)return-1;const d=e[n+6]>>5;let f=0;d===2?f+=2:(d&1&&d!==1&&(f+=2),d&4&&(f+=2));const m=(e[n+6]<<8|e[n+7])>>12-f&1,p=[2,1,2,3,3,4,4,5][d]+m,v=e[n+5]>>3,y=e[n+5]&7,g=new Uint8Array([s<<6|v<<1|y>>2,(y&3)<<6|d<<3|m<<2|l>>4,l<<4&224]),x=1536/a*9e4,b=r+i*x,E=e.subarray(n,n+c);return t.config=g,t.channelCount=p,t.samplerate=a,t.samples.push({unit:E,pts:b}),c}class F7{constructor(){this.VideoSample=null}createVideoSample(e,n,r,i){return{key:e,frame:!1,pts:n,dts:r,units:[],debug:i,length:0}}getLastNalUnit(e){var n;let r=this.VideoSample,i;if((!r||r.units.length===0)&&(r=e[e.length-1]),(n=r)!=null&&n.units){const s=r.units;i=s[s.length-1]}return i}pushAccessUnit(e,n){if(e.units.length&&e.frame){if(e.pts===void 0){const r=n.samples,i=r.length;if(i){const s=r[i-1];e.pts=s.pts,e.dts=s.dts}else{n.dropped++;return}}n.samples.push(e)}e.debug.length&&D.log(e.pts+"/"+e.dts+":"+e.debug)}}class aw{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,n=this.bytesAvailable,r=e.byteLength-n,i=new Uint8Array(4),s=Math.min(4,n);if(s===0)throw new Error("no bytes available");i.set(e.subarray(r,r+s)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(e){let n;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,n=e>>3,e-=n<<3,this.bytesAvailable-=n,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let n=Math.min(this.bitsAvailable,e);const r=this.word>>>32-n;if(e>32&&D.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=n,this.bitsAvailable>0)this.word<<=n;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return n=e-n,n>0&&this.bitsAvailable?r<<n|this.readBits(n):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let n=8,r=8,i;for(let s=0;s<e;s++)r!==0&&(i=this.readEG(),r=(n+i+256)%256),n=r===0?n:r}readSPS(){let e=0,n=0,r=0,i=0,s,o,a;const l=this.readUByte.bind(this),u=this.readBits.bind(this),c=this.readUEG.bind(this),d=this.readBoolean.bind(this),f=this.skipBits.bind(this),m=this.skipEG.bind(this),h=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);l();const v=l();if(u(5),f(3),l(),h(),v===100||v===110||v===122||v===244||v===44||v===83||v===86||v===118||v===128){const T=c();if(T===3&&f(1),h(),h(),f(1),d())for(o=T!==3?8:12,a=0;a<o;a++)d()&&(a<6?p(16):p(64))}h();const y=c();if(y===0)c();else if(y===1)for(f(1),m(),m(),s=c(),a=0;a<s;a++)m();h(),f(1);const g=c(),x=c(),b=u(1);b===0&&f(1),f(1),d()&&(e=c(),n=c(),r=c(),i=c());let E=[1,1];if(d()&&d())switch(l()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:{E=[l()<<8|l(),l()<<8|l()];break}}return{width:Math.ceil((g+1)*16-e*2-n*2),height:(2-b)*(x+1)*16-(b?2:4)*(r+i),pixelRatio:E}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class $7 extends F7{parseAVCPES(e,n,r,i,s){const o=this.parseAVCNALu(e,r.data);let a=this.VideoSample,l,u=!1;r.data=null,a&&o.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts,"")),o.forEach(c=>{var d;switch(c.type){case 1:{let p=!1;l=!0;const v=c.data;if(u&&v.length>4){const y=new aw(v).readSliceType();(y===2||y===4||y===7||y===9)&&(p=!0)}if(p){var f;(f=a)!=null&&f.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts,"")),a.frame=!0,a.key=p;break}case 5:l=!0,(d=a)!=null&&d.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts,"")),a.key=!0,a.frame=!0;break;case 6:{l=!0,Bk(c.data,1,r.pts,n.samples);break}case 7:{var m,h;l=!0,u=!0;const p=c.data,y=new aw(p).readSPS();if(!e.sps||e.width!==y.width||e.height!==y.height||((m=e.pixelRatio)==null?void 0:m[0])!==y.pixelRatio[0]||((h=e.pixelRatio)==null?void 0:h[1])!==y.pixelRatio[1]){e.width=y.width,e.height=y.height,e.pixelRatio=y.pixelRatio,e.sps=[p],e.duration=s;const g=p.subarray(1,4);let x="avc1.";for(let b=0;b<3;b++){let E=g[b].toString(16);E.length<2&&(E="0"+E),x+=E}e.codec=x}break}case 8:l=!0,e.pps=[c.data];break;case 9:l=!0,e.audFound=!0,a&&this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts,"");break;case 12:l=!0;break;default:l=!1,a&&(a.debug+="unknown NAL "+c.type+" ");break}a&&l&&a.units.push(c)}),i&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}parseAVCNALu(e,n){const r=n.byteLength;let i=e.naluState||0;const s=i,o=[];let a=0,l,u,c,d=-1,f=0;for(i===-1&&(d=0,f=n[0]&31,i=0,a=1);a<r;){if(l=n[a++],!i){i=l?0:1;continue}if(i===1){i=l?0:2;continue}if(!l)i=3;else if(l===1){if(u=a-i-1,d>=0){const m={data:n.subarray(d,u),type:f};o.push(m)}else{const m=this.getLastNalUnit(e.samples);m&&(s&&a<=4-s&&m.state&&(m.data=m.data.subarray(0,m.data.byteLength-s)),u>0&&(m.data=Ar(m.data,n.subarray(0,u)),m.state=0))}a<r?(c=n[a]&31,d=a,f=c,i=0):i=-1}else i=0}if(d>=0&&i>=0){const m={data:n.subarray(d,r),type:f,state:i};o.push(m)}if(o.length===0){const m=this.getLastNalUnit(e.samples);m&&(m.data=Ar(m.data,n))}return e.naluState=i,o}}class B7{constructor(e,n,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new IS(n,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,n,r){const i=e[n].unit;if(i.length<=16)return;const s=i.subarray(16,i.length-i.length%16),o=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(o).then(a=>{const l=new Uint8Array(a);i.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,n+1,r)})}decryptAacSamples(e,n,r){for(;;n++){if(n>=e.length){r();return}if(!(e[n].unit.length<32)&&(this.decryptAacSample(e,n,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const n=Math.floor((e.length-48)/160)*16+16,r=new Int8Array(n);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)r.set(e.subarray(s,s+16),i);return r}getAvcDecryptedUnit(e,n){const r=new Uint8Array(n);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)e.set(r.subarray(i,i+16),s);return e}decryptAvcSample(e,n,r,i,s){const o=Uk(s.data),a=this.getAvcEncryptedData(o);this.decryptBuffer(a.buffer).then(l=>{s.data=this.getAvcDecryptedUnit(o,l),this.decrypter.isSync()||this.decryptAvcSamples(e,n,r+1,i)})}decryptAvcSamples(e,n,r,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;n++,r=0){if(n>=e.length){i();return}const s=e[n].units;for(;!(r>=s.length);r++){const o=s[r];if(!(o.data.length<=48||o.type!==1&&o.type!==5)&&(this.decryptAvcSample(e,n,r,i,o),!this.decrypter.isSync()))return}}}}const zt=188;class As{constructor(e,n,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=n,this.typeSupported=r,this.videoParser=new $7}static probe(e){const n=As.syncOffset(e);return n>0&&D.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const n=e.length;let r=Math.min(zt*5,n-zt)+1,i=0;for(;i<r;){let s=!1,o=-1,a=0;for(let l=i;l<n;l+=zt)if(e[l]===71&&(n-l===zt||e[l+zt]===71)){if(a++,o===-1&&(o=l,o!==0&&(r=Math.min(o+zt*99,e.length-zt)+1)),s||(s=ky(e,l)===0),s&&a>1&&(o===0&&a>2||l+zt>r))return o}else{if(a)return-1;break}i++}return-1}static createTrack(e,n){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:Ok[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?n:void 0}}resetInitSegment(e,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=As.createTrack("video"),this._audioTrack=As.createTrack("audio",i),this._id3Track=As.createTrack("id3"),this._txtTrack=As.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=n,this.videoCodec=r,this._duration=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:n,_id3Track:r}=this;e&&(e.pesData=null),n&&(n.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,n,r=!1,i=!1){r||(this.sampleAes=null);let s;const o=this._videoTrack,a=this._audioTrack,l=this._id3Track,u=this._txtTrack;let c=o.pid,d=o.pesData,f=a.pid,m=l.pid,h=a.pesData,p=l.pesData,v=null,y=this.pmtParsed,g=this._pmtId,x=e.length;if(this.remainderData&&(e=Ar(this.remainderData,e),x=e.length,this.remainderData=null),x<zt&&!i)return this.remainderData=e,{audioTrack:a,videoTrack:o,id3Track:l,textTrack:u};const b=Math.max(0,As.syncOffset(e));x-=(x-b)%zt,x<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,x,e.buffer.byteLength-x));let E=0;for(let w=b;w<x;w+=zt)if(e[w]===71){const _=!!(e[w+1]&64),k=ky(e,w),L=(e[w+3]&48)>>4;let P;if(L>1){if(P=w+5+e[w+4],P===w+zt)continue}else P=w+4;switch(k){case c:_&&(d&&(s=ca(d))&&this.videoParser.parseAVCPES(o,u,s,!1,this._duration),d={data:[],size:0}),d&&(d.data.push(e.subarray(P,w+zt)),d.size+=w+zt-P);break;case f:if(_){if(h&&(s=ca(h)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,s);break;case"mp3":this.parseMPEGPES(a,s);break;case"ac3":this.parseAC3PES(a,s);break}h={data:[],size:0}}h&&(h.data.push(e.subarray(P,w+zt)),h.size+=w+zt-P);break;case m:_&&(p&&(s=ca(p))&&this.parseID3PES(l,s),p={data:[],size:0}),p&&(p.data.push(e.subarray(P,w+zt)),p.size+=w+zt-P);break;case 0:_&&(P+=e[P]+1),g=this._pmtId=U7(e,P);break;case g:{_&&(P+=e[P]+1);const H=j7(e,P,this.typeSupported,r);c=H.videoPid,c>0&&(o.pid=c,o.segmentCodec=H.segmentVideoCodec),f=H.audioPid,f>0&&(a.pid=f,a.segmentCodec=H.segmentAudioCodec),m=H.id3Pid,m>0&&(l.pid=m),v!==null&&!y&&(D.warn(`MPEG-TS PMT found at ${w} after unknown PID '${v}'. Backtracking to sync byte @${b} to parse all TS packets.`),v=null,w=b-188),y=this.pmtParsed=!0;break}case 17:case 8191:break;default:v=k;break}}else E++;if(E>0){const w=new Error(`Found ${E} TS packet/s that do not start with 0x47`);this.observer.emit(R.ERROR,R.ERROR,{type:he.MEDIA_ERROR,details:N.FRAG_PARSING_ERROR,fatal:!1,error:w,reason:w.message})}o.pesData=d,a.pesData=h,l.pesData=p;const T={audioTrack:a,videoTrack:o,id3Track:l,textTrack:u};return i&&this.extractRemainingSamples(T),T}flush(){const{remainderData:e}=this;this.remainderData=null;let n;return e?n=this.demux(e,-1,!1,!0):n={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(n),this.sampleAes?this.decrypt(n,this.sampleAes):n}extractRemainingSamples(e){const{audioTrack:n,videoTrack:r,id3Track:i,textTrack:s}=e,o=r.pesData,a=n.pesData,l=i.pesData;let u;if(o&&(u=ca(o))?(this.videoParser.parseAVCPES(r,s,u,!0,this._duration),r.pesData=null):r.pesData=o,a&&(u=ca(a))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,u);break;case"mp3":this.parseMPEGPES(n,u);break;case"ac3":this.parseAC3PES(n,u);break}n.pesData=null}else a!=null&&a.size&&D.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=a;l&&(u=ca(l))?(this.parseID3PES(i,u),i.pesData=null):i.pesData=l}demuxSampleAes(e,n,r){const i=this.demux(e,r,!0,!this.config.progressive),s=this.sampleAes=new B7(this.observer,this.config,n);return this.decrypt(i,s)}decrypt(e,n){return new Promise(r=>{const{audioTrack:i,videoTrack:s}=e;i.samples&&i.segmentCodec==="aac"?n.decryptAacSamples(i.samples,0,()=>{s.samples?n.decryptAvcSamples(s.samples,0,0,()=>{r(e)}):r(e)}):s.samples&&n.decryptAvcSamples(s.samples,0,0,()=>{r(e)})})}destroy(){this._duration=0}parseAACPES(e,n){let r=0;const i=this.aacOverFlow;let s=n.data;if(i){this.aacOverFlow=null;const d=i.missing,f=i.sample.unit.byteLength;if(d===-1)s=Ar(i.sample.unit,s);else{const m=f-d;i.sample.unit.set(s.subarray(0,d),m),e.samples.push(i.sample),r=i.missing}}let o,a;for(o=r,a=s.length;o<a-1&&!kh(s,o);o++);if(o!==r){let d;const f=o<a-1;f?d=`AAC PES did not start with ADTS header,offset:${o}`:d="No ADTS header found in AAC PES";const m=new Error(d);if(D.warn(`parsing error: ${d}`),this.observer.emit(R.ERROR,R.ERROR,{type:he.MEDIA_ERROR,details:N.FRAG_PARSING_ERROR,fatal:!1,levelRetry:f,error:m,reason:d}),!f)return}tP(e,this.observer,s,o,this.audioCodec);let l;if(n.pts!==void 0)l=n.pts;else if(i){const d=nP(e.samplerate);l=i.sample.pts+d}else{D.warn("[tsdemuxer]: AAC PES unknown PTS");return}let u=0,c;for(;o<a;)if(c=rP(e,s,o,l,u),o+=c.length,c.missing){this.aacOverFlow=c;break}else for(u++;o<a-1&&!kh(s,o);o++);}parseMPEGPES(e,n){const r=n.data,i=r.length;let s=0,o=0;const a=n.pts;if(a===void 0){D.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;o<i;)if(oP(r,o)){const l=iP(e,r,o,a,s);if(l)o+=l.length,s++;else break}else o++}parseAC3PES(e,n){{const r=n.data,i=n.pts;if(i===void 0){D.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const s=r.length;let o=0,a=0,l;for(;a<s&&(l=uP(e,r,a,i,o++))>0;)a+=l}}parseID3PES(e,n){if(n.pts===void 0){D.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const r=Mt({},n,{type:this._videoTrack?Gr.emsg:Gr.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function ky(t,e){return((t[e+1]&31)<<8)+t[e+2]}function U7(t,e){return(t[e+10]&31)<<8|t[e+11]}function j7(t,e,n,r){const i={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},s=(t[e+1]&15)<<8|t[e+2],o=e+3+s-4,a=(t[e+10]&15)<<8|t[e+11];for(e+=12+a;e<o;){const l=ky(t,e),u=(t[e+3]&15)<<8|t[e+4];switch(t[e]){case 207:if(!r){Eg("ADTS AAC");break}case 15:i.audioPid===-1&&(i.audioPid=l);break;case 21:i.id3Pid===-1&&(i.id3Pid=l);break;case 219:if(!r){Eg("H.264");break}case 27:i.videoPid===-1&&(i.videoPid=l,i.segmentVideoCodec="avc");break;case 3:case 4:!n.mpeg&&!n.mp3?D.log("MPEG audio found, not supported in this browser"):i.audioPid===-1&&(i.audioPid=l,i.segmentAudioCodec="mp3");break;case 193:if(!r){Eg("AC-3");break}case 129:n.ac3?i.audioPid===-1&&(i.audioPid=l,i.segmentAudioCodec="ac3"):D.log("AC-3 audio found, not supported in this browser");break;case 6:if(i.audioPid===-1&&u>0){let c=e+5,d=u;for(;d>2;){switch(t[c]){case 106:n.ac3!==!0?D.log("AC-3 audio found, not supported in this browser for now"):(i.audioPid=l,i.segmentAudioCodec="ac3");break}const m=t[c+1]+2;c+=m,d-=m}}break;case 194:case 135:D.warn("Unsupported EC-3 in M2TS found");break;case 36:D.warn("Unsupported HEVC in M2TS found");break}e+=u+5}return i}function Eg(t){D.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function ca(t){let e=0,n,r,i,s,o;const a=t.data;if(!t||t.size===0)return null;for(;a[0].length<19&&a.length>1;)a[0]=Ar(a[0],a[1]),a.splice(1,1);if(n=a[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(r=(n[4]<<8)+n[5],r&&r>t.size-6)return null;const u=n[7];u&192&&(s=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,u&64?(o=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,s-o>60*9e4&&(D.warn(`${Math.round((s-o)/9e4)}s delta between PTS and DTS, align them`),s=o)):o=s),i=n[8];let c=i+9;if(t.size<=c)return null;t.size-=c;const d=new Uint8Array(t.size);for(let f=0,m=a.length;f<m;f++){n=a[f];let h=n.byteLength;if(c)if(c>h){c-=h;continue}else n=n.subarray(c),h-=c,c=0;d.set(n,e),e+=h}return r&&(r-=i+3),{data:d,pts:s,dts:o,len:r}}return null}class H7 extends OS{resetInitSegment(e,n,r,i){super.resetInitSegment(e,n,r,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const n=nc(e,0);let r=(n==null?void 0:n.length)||0;if(n&&e[r]===11&&e[r+1]===119&&CS(n)!==void 0&&lP(e,r)<=16)return!1;for(let i=e.length;r<i;r++)if(aP(e,r))return D.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,n){return I7(e,n)}appendFrame(e,n,r){if(this.basePTS!==null)return iP(e,n,r,this.basePTS,this.frameIndex)}}class lw{static getSilentFrame(e,n){switch(e){case"mp4a.40.2":if(n===1)return new Uint8Array([0,200,0,128,35,128]);if(n===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(n===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(n===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(n===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(n===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(n===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Es=Math.pow(2,32)-1;class O{static init(){O.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in O.types)O.types.hasOwnProperty(e)&&(O.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);O.HDLR_TYPES={video:n,audio:r};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);O.STTS=O.STSC=O.STCO=s,O.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),O.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),O.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),O.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);O.FTYP=O.box(O.types.ftyp,o,l,o,a),O.DINF=O.box(O.types.dinf,O.box(O.types.dref,i))}static box(e,...n){let r=8,i=n.length;const s=i;for(;i--;)r+=n[i].byteLength;const o=new Uint8Array(r);for(o[0]=r>>24&255,o[1]=r>>16&255,o[2]=r>>8&255,o[3]=r&255,o.set(e,4),i=0,r=8;i<s;i++)o.set(n[i],r),r+=n[i].byteLength;return o}static hdlr(e){return O.box(O.types.hdlr,O.HDLR_TYPES[e])}static mdat(e){return O.box(O.types.mdat,e)}static mdhd(e,n){n*=e;const r=Math.floor(n/(Es+1)),i=Math.floor(n%(Es+1));return O.box(O.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return O.box(O.types.mdia,O.mdhd(e.timescale,e.duration),O.hdlr(e.type),O.minf(e))}static mfhd(e){return O.box(O.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?O.box(O.types.minf,O.box(O.types.smhd,O.SMHD),O.DINF,O.stbl(e)):O.box(O.types.minf,O.box(O.types.vmhd,O.VMHD),O.DINF,O.stbl(e))}static moof(e,n,r){return O.box(O.types.moof,O.mfhd(e),O.traf(r,n))}static moov(e){let n=e.length;const r=[];for(;n--;)r[n]=O.trak(e[n]);return O.box.apply(null,[O.types.moov,O.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(O.mvex(e)))}static mvex(e){let n=e.length;const r=[];for(;n--;)r[n]=O.trex(e[n]);return O.box.apply(null,[O.types.mvex,...r])}static mvhd(e,n){n*=e;const r=Math.floor(n/(Es+1)),i=Math.floor(n%(Es+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return O.box(O.types.mvhd,s)}static sdtp(e){const n=e.samples||[],r=new Uint8Array(4+n.length);let i,s;for(i=0;i<n.length;i++)s=n[i].flags,r[i+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return O.box(O.types.sdtp,r)}static stbl(e){return O.box(O.types.stbl,O.stsd(e),O.box(O.types.stts,O.STTS),O.box(O.types.stsc,O.STSC),O.box(O.types.stsz,O.STSZ),O.box(O.types.stco,O.STCO))}static avc1(e){let n=[],r=[],i,s,o;for(i=0;i<e.sps.length;i++)s=e.sps[i],o=s.byteLength,n.push(o>>>8&255),n.push(o&255),n=n.concat(Array.prototype.slice.call(s));for(i=0;i<e.pps.length;i++)s=e.pps[i],o=s.byteLength,r.push(o>>>8&255),r.push(o&255),r=r.concat(Array.prototype.slice.call(s));const a=O.box(O.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(r))),l=e.width,u=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return O.box(O.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,u>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,O.box(O.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),O.box(O.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,c&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const n=e.config.length;return new Uint8Array([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([n]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const n=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,n&255,0,0])}static mp4a(e){return O.box(O.types.mp4a,O.audioStsd(e),O.box(O.types.esds,O.esds(e)))}static mp3(e){return O.box(O.types[".mp3"],O.audioStsd(e))}static ac3(e){return O.box(O.types["ac-3"],O.audioStsd(e),O.box(O.types.dac3,e.config))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?O.box(O.types.stsd,O.STSD,O.mp3(e)):e.segmentCodec==="ac3"?O.box(O.types.stsd,O.STSD,O.ac3(e)):O.box(O.types.stsd,O.STSD,O.mp4a(e)):O.box(O.types.stsd,O.STSD,O.avc1(e))}static tkhd(e){const n=e.id,r=e.duration*e.timescale,i=e.width,s=e.height,o=Math.floor(r/(Es+1)),a=Math.floor(r%(Es+1));return O.box(O.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,a>>24,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,s>>8&255,s&255,0,0]))}static traf(e,n){const r=O.sdtp(e),i=e.id,s=Math.floor(n/(Es+1)),o=Math.floor(n%(Es+1));return O.box(O.types.traf,O.box(O.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),O.box(O.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,o>>24,o>>16&255,o>>8&255,o&255])),O.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,O.box(O.types.trak,O.tkhd(e),O.mdia(e))}static trex(e){const n=e.id;return O.box(O.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,n){const r=e.samples||[],i=r.length,s=12+16*i,o=new Uint8Array(s);let a,l,u,c,d,f;for(n+=8+s,o.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255],0),a=0;a<i;a++)l=r[a],u=l.duration,c=l.size,d=l.flags,f=l.cts,o.set([u>>>24&255,u>>>16&255,u>>>8&255,u&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,f>>>24&255,f>>>16&255,f>>>8&255,f&255],12+16*a);return O.box(O.types.trun,o)}static initSegment(e){O.types||O.init();const n=O.moov(e);return Ar(O.FTYP,n)}}O.types=void 0;O.HDLR_TYPES=void 0;O.STTS=void 0;O.STSC=void 0;O.STCO=void 0;O.STSZ=void 0;O.VMHD=void 0;O.SMHD=void 0;O.STSD=void 0;O.FTYP=void 0;O.DINF=void 0;const cP=9e4;function FS(t,e,n=1,r=!1){const i=t*e*n;return r?Math.round(i):i}function z7(t,e,n=1,r=!1){return FS(t,e,1/n,r)}function ql(t,e=!1){return FS(t,1e3,1/cP,e)}function V7(t,e=1){return FS(t,cP,1/e)}const G7=10*1e3,uw=1024,W7=1152,K7=1536;let da=null,bg=null;class Tf{constructor(e,n,r,i=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=n,this.typeSupported=r,this.ISGenerated=!1,da===null){const o=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);da=o?parseInt(o[1]):0}if(bg===null){const s=navigator.userAgent.match(/Safari\/(\d+)/i);bg=s?parseInt(s[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){D.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){D.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){D.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let n=!1;const r=e.reduce((i,s)=>{const o=s.pts-i;return o<-4294967296?(n=!0,cr(i,s.pts)):o>0?i:s.pts},e[0].pts);return n&&D.debug("PTS rollover detected"),r}remux(e,n,r,i,s,o,a,l){let u,c,d,f,m,h,p=s,v=s;const y=e.pid>-1,g=n.pid>-1,x=n.samples.length,b=e.samples.length>0,E=a&&x>0||x>1;if((!y||b)&&(!g||E)||this.ISGenerated||a){if(this.ISGenerated){var w,_,k,L;const Y=this.videoTrackConfig;Y&&(n.width!==Y.width||n.height!==Y.height||((w=n.pixelRatio)==null?void 0:w[0])!==((_=Y.pixelRatio)==null?void 0:_[0])||((k=n.pixelRatio)==null?void 0:k[1])!==((L=Y.pixelRatio)==null?void 0:L[1]))&&this.resetInitSegment()}else d=this.generateIS(e,n,s,o);const P=this.isVideoContiguous;let H=-1,F;if(E&&(H=q7(n.samples),!P&&this.config.forceKeyFrameOnDiscontinuity))if(h=!0,H>0){D.warn(`[mp4-remuxer]: Dropped ${H} out of ${x} video samples due to a missing keyframe`);const Y=this.getVideoStartPts(n.samples);n.samples=n.samples.slice(H),n.dropped+=H,v+=(n.samples[0].pts-Y)/n.inputTimeScale,F=v}else H===-1&&(D.warn(`[mp4-remuxer]: No keyframe found out of ${x} video samples`),h=!1);if(this.ISGenerated){if(b&&E){const Y=this.getVideoStartPts(n.samples),W=(cr(e.samples[0].pts,Y)-Y)/n.inputTimeScale;p+=Math.max(0,W),v+=Math.max(0,-W)}if(b){if(e.samplerate||(D.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(e,n,s,o)),c=this.remuxAudio(e,p,this.isAudioContiguous,o,g||E||l===ce.AUDIO?v:void 0),E){const Y=c?c.endPTS-c.startPTS:0;n.inputTimeScale||(D.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(e,n,s,o)),u=this.remuxVideo(n,v,P,Y)}}else E&&(u=this.remuxVideo(n,v,P,0));u&&(u.firstKeyFrame=H,u.independent=H!==-1,u.firstKeyFramePTS=F)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(m=dP(r,s,this._initPTS,this._initDTS)),i.samples.length&&(f=fP(i,s,this._initPTS))),{audio:c,video:u,initSegment:d,independent:h,text:f,id3:m}}generateIS(e,n,r,i){const s=e.samples,o=n.samples,a=this.typeSupported,l={},u=this._initPTS;let c=!u||i,d="audio/mp4",f,m,h;if(c&&(f=m=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(d="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&a.mpeg?new Uint8Array(0):O.initSegment([e]),metadata:{channelCount:e.channelCount}},c&&(h=e.inputTimeScale,!u||h!==u.timescale?f=m=s[0].pts-Math.round(h*r):c=!1)}if(n.sps&&n.pps&&o.length){if(n.timescale=n.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:n.codec,initSegment:O.initSegment([n]),metadata:{width:n.width,height:n.height}},c)if(h=n.inputTimeScale,!u||h!==u.timescale){const p=this.getVideoStartPts(o),v=Math.round(h*r);m=Math.min(m,cr(o[0].dts,p)-v),f=Math.min(f,p-v)}else c=!1;this.videoTrackConfig={width:n.width,height:n.height,pixelRatio:n.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,c?(this._initPTS={baseTime:f,timescale:h},this._initDTS={baseTime:m,timescale:h}):f=h=void 0,{tracks:l,initPTS:f,timescale:h}}remuxVideo(e,n,r,i){const s=e.inputTimeScale,o=e.samples,a=[],l=o.length,u=this._initPTS;let c=this.nextAvcDts,d=8,f=this.videoSampleDuration,m,h,p=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,y=!1;if(!r||c===null){const $=n*s,B=o[0].pts-cr(o[0].dts,o[0].pts);da&&c!==null&&Math.abs($-B-c)<15e3?r=!0:c=$-B}const g=u.baseTime*s/u.timescale;for(let $=0;$<l;$++){const B=o[$];B.pts=cr(B.pts-g,c),B.dts=cr(B.dts-g,c),B.dts<o[$>0?$-1:$].dts&&(y=!0)}y&&o.sort(function($,B){const te=$.dts-B.dts,Z=$.pts-B.pts;return te||Z}),m=o[0].dts,h=o[o.length-1].dts;const x=h-m,b=x?Math.round(x/(l-1)):f||e.inputTimeScale/30;if(r){const $=m-c,B=$>b,te=$<-1;if((B||te)&&(B?D.warn(`AVC: ${ql($,!0)} ms (${$}dts) hole between fragments detected at ${n.toFixed(3)}`):D.warn(`AVC: ${ql(-$,!0)} ms (${$}dts) overlapping between fragments detected at ${n.toFixed(3)}`),!te||c>=o[0].pts||da)){m=c;const Z=o[0].pts-$;if(B)o[0].dts=m,o[0].pts=Z;else for(let de=0;de<o.length&&!(o[de].dts>Z);de++)o[de].dts-=$,o[de].pts-=$;D.log(`Video: Initial PTS/DTS adjusted: ${ql(Z,!0)}/${ql(m,!0)}, delta: ${ql($,!0)} ms`)}}m=Math.max(0,m);let E=0,T=0,w=m;for(let $=0;$<l;$++){const B=o[$],te=B.units,Z=te.length;let de=0;for(let oe=0;oe<Z;oe++)de+=te[oe].data.length;T+=de,E+=Z,B.length=de,B.dts<w?(B.dts=w,w+=b/4|0||1):w=B.dts,p=Math.min(B.pts,p),v=Math.max(B.pts,v)}h=o[l-1].dts;const _=T+4*E+8;let k;try{k=new Uint8Array(_)}catch($){this.observer.emit(R.ERROR,R.ERROR,{type:he.MUX_ERROR,details:N.REMUX_ALLOC_ERROR,fatal:!1,error:$,bytes:_,reason:`fail allocating video mdat ${_}`});return}const L=new DataView(k.buffer);L.setUint32(0,_),k.set(O.types.mdat,4);let P=!1,H=Number.POSITIVE_INFINITY,F=Number.POSITIVE_INFINITY,Y=Number.NEGATIVE_INFINITY,K=Number.NEGATIVE_INFINITY;for(let $=0;$<l;$++){const B=o[$],te=B.units;let Z=0;for(let ge=0,ye=te.length;ge<ye;ge++){const Oe=te[ge],nt=Oe.data,Qe=Oe.data.byteLength;L.setUint32(d,Qe),d+=4,k.set(nt,d),d+=Qe,Z+=4+Qe}let de;if($<l-1)f=o[$+1].dts-B.dts,de=o[$+1].pts-B.pts;else{const ge=this.config,ye=$>0?B.dts-o[$-1].dts:b;if(de=$>0?B.pts-o[$-1].pts:b,ge.stretchShortVideoTrack&&this.nextAudioPts!==null){const Oe=Math.floor(ge.maxBufferHole*s),nt=(i?p+i*s:this.nextAudioPts)-B.pts;nt>Oe?(f=nt-ye,f<0?f=ye:P=!0,D.log(`[mp4-remuxer]: It is approximately ${nt/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=ye}else f=ye}const oe=Math.round(B.pts-B.dts);H=Math.min(H,f),Y=Math.max(Y,f),F=Math.min(F,de),K=Math.max(K,de),a.push(new cw(B.key,f,Z,oe))}if(a.length){if(da){if(da<70){const $=a[0].flags;$.dependsOn=2,$.isNonSync=0}}else if(bg&&K-F<Y-H&&b/Y<.025&&a[0].cts===0){D.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let $=m;for(let B=0,te=a.length;B<te;B++){const Z=$+a[B].duration,de=$+a[B].cts;if(B<te-1){const oe=Z+a[B+1].cts;a[B].duration=oe-de}else a[B].duration=B?a[B-1].duration:b;a[B].cts=0,$=Z}}}f=P||!f?b:f,this.nextAvcDts=c=h+f,this.videoSampleDuration=f,this.isVideoContiguous=!0;const U={data1:O.moof(e.sequenceNumber++,m,Mt({},e,{samples:a})),data2:k,startPTS:p/s,endPTS:(v+f)/s,startDTS:m/s,endDTS:c/s,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,U}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return W7;case"ac3":return K7;default:return uw}}remuxAudio(e,n,r,i,s){const o=e.inputTimeScale,a=e.samplerate?e.samplerate:o,l=o/a,u=this.getSamplesPerFrame(e),c=u*l,d=this._initPTS,f=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,m=[],h=s!==void 0;let p=e.samples,v=f?0:8,y=this.nextAudioPts||-1;const g=n*o,x=d.baseTime*o/d.timescale;if(this.isAudioContiguous=r=r||p.length&&y>0&&(i&&Math.abs(g-y)<9e3||Math.abs(cr(p[0].pts-x,g)-y)<20*c),p.forEach(function(W){W.pts=cr(W.pts-x,g)}),!r||y<0){if(p=p.filter(W=>W.pts>=0),!p.length)return;s===0?y=0:i&&!h?y=Math.max(0,g):y=p[0].pts}if(e.segmentCodec==="aac"){const W=this.config.maxAudioFramesDrift;for(let X=0,U=y;X<p.length;X++){const $=p[X],B=$.pts,te=B-U,Z=Math.abs(1e3*te/o);if(te<=-W*c&&h)X===0&&(D.warn(`Audio frame @ ${(B/o).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*te/o)} ms.`),this.nextAudioPts=y=U=B);else if(te>=W*c&&Z<G7&&h){let de=Math.round(te/c);U=B-de*c,U<0&&(de--,U+=c),X===0&&(this.nextAudioPts=y=U),D.warn(`[mp4-remuxer]: Injecting ${de} audio frame @ ${(U/o).toFixed(3)}s due to ${Math.round(1e3*te/o)} ms gap.`);for(let oe=0;oe<de;oe++){const ge=Math.max(U,0);let ye=lw.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);ye||(D.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),ye=$.unit.subarray()),p.splice(X,0,{unit:ye,pts:ge}),U+=c,X++}}$.pts=U,U+=c}}let b=null,E=null,T,w=0,_=p.length;for(;_--;)w+=p[_].unit.byteLength;for(let W=0,X=p.length;W<X;W++){const U=p[W],$=U.unit;let B=U.pts;if(E!==null){const Z=m[W-1];Z.duration=Math.round((B-E)/l)}else if(r&&e.segmentCodec==="aac"&&(B=y),b=B,w>0){w+=v;try{T=new Uint8Array(w)}catch(Z){this.observer.emit(R.ERROR,R.ERROR,{type:he.MUX_ERROR,details:N.REMUX_ALLOC_ERROR,fatal:!1,error:Z,bytes:w,reason:`fail allocating audio mdat ${w}`});return}f||(new DataView(T.buffer).setUint32(0,w),T.set(O.types.mdat,4))}else return;T.set($,v);const te=$.byteLength;v+=te,m.push(new cw(!0,u,te,0)),E=B}const k=m.length;if(!k)return;const L=m[m.length-1];this.nextAudioPts=y=E+l*L.duration;const P=f?new Uint8Array(0):O.moof(e.sequenceNumber++,b/l,Mt({},e,{samples:m}));e.samples=[];const H=b/o,F=y/o,K={data1:P,data2:T,startPTS:H,endPTS:F,startDTS:H,endDTS:F,type:"audio",hasAudio:!0,hasVideo:!1,nb:k};return this.isAudioContiguous=!0,K}remuxEmptyAudio(e,n,r,i){const s=e.inputTimeScale,o=e.samplerate?e.samplerate:s,a=s/o,l=this.nextAudioPts,u=this._initDTS,c=u.baseTime*9e4/u.timescale,d=(l!==null?l:i.startDTS*s)+c,f=i.endDTS*s+c,m=a*uw,h=Math.ceil((f-d)/m),p=lw.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(D.warn("[mp4-remuxer]: remux empty Audio"),!p){D.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const v=[];for(let y=0;y<h;y++){const g=d+y*m;v.push({unit:p,pts:g,dts:g})}return e.samples=v,this.remuxAudio(e,n,r,!1)}}function cr(t,e){let n;if(e===null)return t;for(e<t?n=-8589934592:n=8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}function q7(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function dP(t,e,n,r){const i=t.samples.length;if(!i)return;const s=t.inputTimeScale;for(let a=0;a<i;a++){const l=t.samples[a];l.pts=cr(l.pts-n.baseTime*s/n.timescale,e*s)/s,l.dts=cr(l.dts-r.baseTime*s/r.timescale,e*s)/s}const o=t.samples;return t.samples=[],{samples:o}}function fP(t,e,n){const r=t.samples.length;if(!r)return;const i=t.inputTimeScale;for(let o=0;o<r;o++){const a=t.samples[o];a.pts=cr(a.pts-n.baseTime*i/n.timescale,e*i)/i}t.samples.sort((o,a)=>o.pts-a.pts);const s=t.samples;return t.samples=[],{samples:s}}class cw{constructor(e,n,r,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=n,this.size=r,this.cts=i,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class Y7{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,n,r,i){this.audioCodec=n,this.videoCodec=r,this.generateInitSegment(rK(e,i)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:n,videoCodec:r}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const i=this.initData=Fk(e);i.audio&&(n=dw(i.audio,ze.AUDIO)),i.video&&(r=dw(i.video,ze.VIDEO));const s={};i.audio&&i.video?s.audiovideo={container:"video/mp4",codec:n+","+r,initSegment:e,id:"main"}:i.audio?s.audio={container:"audio/mp4",codec:n,initSegment:e,id:"audio"}:i.video?s.video={container:"video/mp4",codec:r,initSegment:e,id:"main"}:D.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=s}remux(e,n,r,i,s,o){var a,l;let{initPTS:u,lastEndTime:c}=this;const d={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};re(c)||(c=this.lastEndTime=s||0);const f=n.samples;if(!(f!=null&&f.length))return d;const m={initPTS:void 0,timescale:1};let h=this.initData;if((a=h)!=null&&a.length||(this.generateInitSegment(f),h=this.initData),!((l=h)!=null&&l.length))return D.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(m.tracks=this.initTracks,this.emitInitSegment=!1);const p=sK(f,h),v=iK(h,f),y=v===null?s:v;(X7(u,y,s,p)||m.timescale!==u.timescale&&o)&&(m.initPTS=y-s,u&&u.timescale===1&&D.warn(`Adjusting initPTS by ${m.initPTS-u.baseTime}`),this.initPTS=u={baseTime:m.initPTS,timescale:1});const g=e?y-u.baseTime/u.timescale:c,x=g+p;aK(h,f,u.baseTime/u.timescale),p>0?this.lastEndTime=x:(D.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const b=!!h.audio,E=!!h.video;let T="";b&&(T+="audio"),E&&(T+="video");const w={data1:f,startPTS:g,startDTS:g,endPTS:x,endDTS:x,type:T,hasAudio:b,hasVideo:E,nb:1,dropped:0};return d.audio=w.type==="audio"?w:void 0,d.video=w.type!=="audio"?w:void 0,d.initSegment=m,d.id3=dP(r,s,u,u),i.samples.length&&(d.text=fP(i,s,u)),d}}function X7(t,e,n,r){if(t===null)return!0;const i=Math.max(r,1),s=e-t.baseTime/t.timescale;return Math.abs(s-n)>i}function dw(t,e){const n=t==null?void 0:t.codec;if(n&&n.length>4)return n;if(e===ze.AUDIO){if(n==="ec-3"||n==="ac-3"||n==="alac")return n;if(n==="fLaC"||n==="Opus")return wh(n,!1);const r="mp4a.40.5";return D.info(`Parsed audio codec "${n}" or audio object type not handled. Using "${r}"`),r}return D.warn(`Unhandled video codec "${n}"`),n==="hvc1"||n==="hev1"?"hvc1.1.6.L120.90":n==="av01"?"av01.0.04M.08":"avc1.42e01e"}let Hi;try{Hi=self.performance.now.bind(self.performance)}catch{D.debug("Unable to use Performance API on this environment"),Hi=ll==null?void 0:ll.Date.now}const wf=[{demux:M7,remux:Y7},{demux:As,remux:Tf},{demux:D7,remux:Tf},{demux:H7,remux:Tf}];wf.splice(2,0,{demux:N7,remux:Tf});class fw{constructor(e,n,r,i,s){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=n,this.config=r,this.vendor=i,this.id=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,n,r,i){const s=r.transmuxing;s.executeStart=Hi();let o=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:l}=this;i&&(this.currentTransmuxState=i);const{contiguous:u,discontinuity:c,trackSwitch:d,accurateTimeOffset:f,timeOffset:m,initSegmentChange:h}=i||a,{audioCodec:p,videoCodec:v,defaultInitPts:y,duration:g,initSegmentData:x}=l,b=Q7(o,n);if(b&&b.method==="AES-128"){const _=this.getDecrypter();if(_.isSync()){let k=_.softwareDecrypt(o,b.key.buffer,b.iv.buffer);if(r.part>-1&&(k=_.flush()),!k)return s.executeEnd=Hi(),Tg(r);o=new Uint8Array(k)}else return this.decryptionPromise=_.webCryptoDecrypt(o,b.key.buffer,b.iv.buffer).then(k=>{const L=this.push(k,null,r);return this.decryptionPromise=null,L}),this.decryptionPromise}const E=this.needsProbing(c,d);if(E){const _=this.configureTransmuxer(o);if(_)return D.warn(`[transmuxer] ${_.message}`),this.observer.emit(R.ERROR,R.ERROR,{type:he.MEDIA_ERROR,details:N.FRAG_PARSING_ERROR,fatal:!1,error:_,reason:_.message}),s.executeEnd=Hi(),Tg(r)}(c||d||h||E)&&this.resetInitSegment(x,p,v,g,n),(c||h||E)&&this.resetInitialTimestamp(y),u||this.resetContiguity();const T=this.transmux(o,b,m,f,r),w=this.currentTransmuxState;return w.contiguous=!0,w.discontinuity=!1,w.trackSwitch=!1,s.executeEnd=Hi(),T}flush(e){const n=e.transmuxing;n.executeStart=Hi();const{decrypter:r,currentTransmuxState:i,decryptionPromise:s}=this;if(s)return s.then(()=>this.flush(e));const o=[],{timeOffset:a}=i;if(r){const d=r.flush();d&&o.push(this.push(d,null,e))}const{demuxer:l,remuxer:u}=this;if(!l||!u)return n.executeEnd=Hi(),[Tg(e)];const c=l.flush(a);return Rf(c)?c.then(d=>(this.flushRemux(o,d,e),o)):(this.flushRemux(o,c,e),o)}flushRemux(e,n,r){const{audioTrack:i,videoTrack:s,id3Track:o,textTrack:a}=n,{accurateTimeOffset:l,timeOffset:u}=this.currentTransmuxState;D.log(`[transmuxer.ts]: Flushed fragment ${r.sn}${r.part>-1?" p: "+r.part:""} of level ${r.level}`);const c=this.remuxer.remux(i,s,o,a,u,l,!0,this.id);e.push({remuxResult:c,chunkMeta:r}),r.transmuxing.executeEnd=Hi()}resetInitialTimestamp(e){const{demuxer:n,remuxer:r}=this;!n||!r||(n.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:n}=this;!e||!n||(e.resetContiguity(),n.resetNextTimestamp())}resetInitSegment(e,n,r,i,s){const{demuxer:o,remuxer:a}=this;!o||!a||(o.resetInitSegment(e,n,r,i),a.resetInitSegment(e,n,r,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,n,r,i,s){let o;return n&&n.method==="SAMPLE-AES"?o=this.transmuxSampleAes(e,n,r,i,s):o=this.transmuxUnencrypted(e,r,i,s),o}transmuxUnencrypted(e,n,r,i){const{audioTrack:s,videoTrack:o,id3Track:a,textTrack:l}=this.demuxer.demux(e,n,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,o,a,l,n,r,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,n,r,i,s){return this.demuxer.demuxSampleAes(e,n,r).then(o=>({remuxResult:this.remuxer.remux(o.audioTrack,o.videoTrack,o.id3Track,o.textTrack,r,i,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:n,observer:r,typeSupported:i,vendor:s}=this;let o;for(let f=0,m=wf.length;f<m;f++){var a;if((a=wf[f].demux)!=null&&a.probe(e)){o=wf[f];break}}if(!o)return new Error("Failed to find demuxer by probing fragment data");const l=this.demuxer,u=this.remuxer,c=o.remux,d=o.demux;(!u||!(u instanceof c))&&(this.remuxer=new c(r,n,i,s)),(!l||!(l instanceof d))&&(this.demuxer=new d(r,n,i),this.probe=d.probe)}needsProbing(e,n){return!this.demuxer||!this.remuxer||e||n}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new IS(this.config)),e}}function Q7(t,e){let n=null;return t.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(n=e),n}const Tg=t=>({remuxResult:{},chunkMeta:t});function Rf(t){return"then"in t&&t.then instanceof Function}class J7{constructor(e,n,r,i,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=n,this.initSegmentData=r,this.duration=i,this.defaultInitPts=s||null}}class Z7{constructor(e,n,r,i,s,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=n,this.accurateTimeOffset=r,this.trackSwitch=i,this.timeOffset=s,this.initSegmentChange=o}}var hP={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,d,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var m=new i(c,d||l,f),h=n?n+u:u;return l._events[h]?l._events[h].fn?l._events[h]=[l._events[h],m]:l._events[h].push(m):(l._events[h]=m,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=n?n+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,m=d.length,h=new Array(m);f<m;f++)h[f]=d[f].fn;return h},a.prototype.listenerCount=function(u){var c=n?n+u:u,d=this._events[c];return d?d.fn?1:d.length:0},a.prototype.emit=function(u,c,d,f,m,h){var p=n?n+u:u;if(!this._events[p])return!1;var v=this._events[p],y=arguments.length,g,x;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,d),!0;case 4:return v.fn.call(v.context,c,d,f),!0;case 5:return v.fn.call(v.context,c,d,f,m),!0;case 6:return v.fn.call(v.context,c,d,f,m,h),!0}for(x=1,g=new Array(y-1);x<y;x++)g[x-1]=arguments[x];v.fn.apply(v.context,g)}else{var b=v.length,E;for(x=0;x<b;x++)switch(v[x].once&&this.removeListener(u,v[x].fn,void 0,!0),y){case 1:v[x].fn.call(v[x].context);break;case 2:v[x].fn.call(v[x].context,c);break;case 3:v[x].fn.call(v[x].context,c,d);break;case 4:v[x].fn.call(v[x].context,c,d,f);break;default:if(!g)for(E=1,g=new Array(y-1);E<y;E++)g[E-1]=arguments[E];v[x].fn.apply(v[x].context,g)}}return!0},a.prototype.on=function(u,c,d){return s(this,u,c,d,!1)},a.prototype.once=function(u,c,d){return s(this,u,c,d,!0)},a.prototype.removeListener=function(u,c,d,f){var m=n?n+u:u;if(!this._events[m])return this;if(!c)return o(this,m),this;var h=this._events[m];if(h.fn)h.fn===c&&(!f||h.once)&&(!d||h.context===d)&&o(this,m);else{for(var p=0,v=[],y=h.length;p<y;p++)(h[p].fn!==c||f&&!h[p].once||d&&h[p].context!==d)&&v.push(h[p]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(hP);var eq=hP.exports,$S=w9(eq);class pP{constructor(e,n,r,i){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const s=e.config;this.hls=e,this.id=n,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=r,this.onFlush=i;const o=(c,d)=>{d=d||{},d.frag=this.frag,d.id=this.id,c===R.ERROR&&(this.error=d.error),this.hls.trigger(c,d)};this.observer=new $S,this.observer.on(R.FRAG_DECRYPTED,o),this.observer.on(R.ERROR,o);const a=Tl(s.preferManagedMediaSource)||{isTypeSupported:()=>!1},l={mpeg:a.isTypeSupported("audio/mpeg"),mp3:a.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:a.isTypeSupported('audio/mp4; codecs="ac-3"')},u=navigator.vendor;if(this.useWorker&&typeof Worker<"u"&&(s.workerPath||x7())){try{s.workerPath?(D.log(`loading Web Worker ${s.workerPath} for "${n}"`),this.workerContext=E7(s.workerPath)):(D.log(`injecting Web Worker for "${n}"`),this.workerContext=S7()),this.onwmsg=f=>this.onWorkerMessage(f);const{worker:d}=this.workerContext;d.addEventListener("message",this.onwmsg),d.onerror=f=>{const m=new Error(`${f.message}  (${f.filename}:${f.lineno})`);s.enableWorker=!1,D.warn(`Error in "${n}" Web Worker, fallback to inline`),this.hls.trigger(R.ERROR,{type:he.OTHER_ERROR,details:N.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:m})},d.postMessage({cmd:"init",typeSupported:l,vendor:u,id:n,config:JSON.stringify(s)})}catch(d){D.warn(`Error setting up "${n}" Web Worker, fallback to inline`,d),this.resetWorker(),this.error=null,this.transmuxer=new fw(this.observer,l,s,u,n)}return}this.transmuxer=new fw(this.observer,l,s,u,n)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:n}=this.workerContext;n&&self.URL.revokeObjectURL(n),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const n=this.transmuxer;n&&(n.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,n,r,i,s,o,a,l,u,c){var d,f;u.transmuxing.start=self.performance.now();const{transmuxer:m}=this,h=o?o.start:s.start,p=s.decryptdata,v=this.frag,y=!(v&&s.cc===v.cc),g=!(v&&u.level===v.level),x=v?u.sn-v.sn:-1,b=this.part?u.part-this.part.index:-1,E=x===0&&u.id>1&&u.id===(v==null?void 0:v.stats.chunkCount),T=!g&&(x===1||x===0&&(b===1||E&&b<=0)),w=self.performance.now();(g||x||s.stats.parsing.start===0)&&(s.stats.parsing.start=w),o&&(b||!T)&&(o.stats.parsing.start=w);const _=!(v&&((d=s.initSegment)==null?void 0:d.url)===((f=v.initSegment)==null?void 0:f.url)),k=new Z7(y,T,l,g,h,_);if(!T||y||_){D.log(`[transmuxer-interface, ${s.type}]: Starting new transmux session for sn: ${u.sn} p: ${u.part} level: ${u.level} id: ${u.id}
        discontinuity: ${y}
        trackSwitch: ${g}
        contiguous: ${T}
        accurateTimeOffset: ${l}
        timeOffset: ${h}
        initSegmentChange: ${_}`);const L=new J7(r,i,n,a,c);this.configureTransmuxer(L)}if(this.frag=s,this.part=o,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:p,chunkMeta:u,state:k},e instanceof ArrayBuffer?[e]:[]);else if(m){const L=m.push(e,p,u,k);Rf(L)?(m.async=!0,L.then(P=>{this.handleTransmuxComplete(P)}).catch(P=>{this.transmuxerError(P,u,"transmuxer-interface push error")})):(m.async=!1,this.handleTransmuxComplete(L))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(n){let r=n.flush(e);Rf(r)||n.async?(Rf(r)||(r=Promise.resolve(r)),r.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")})):this.handleFlushResult(r,e)}}transmuxerError(e,n,r){this.hls&&(this.error=e,this.hls.trigger(R.ERROR,{type:he.MEDIA_ERROR,details:N.FRAG_PARSING_ERROR,chunkMeta:n,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,n){e.forEach(r=>{this.handleTransmuxComplete(r)}),this.onFlush(n)}onWorkerMessage(e){const n=e.data,r=this.hls;switch(n.event){case"init":{var i;const s=(i=this.workerContext)==null?void 0:i.objectURL;s&&self.URL.revokeObjectURL(s);break}case"transmuxComplete":{this.handleTransmuxComplete(n.data);break}case"flush":{this.onFlush(n.data);break}case"workerLog":D[n.data.logType]&&D[n.data.logType](n.data.message);break;default:{n.data=n.data||{},n.data.frag=this.frag,n.data.id=this.id,r.trigger(n.event,n.data);break}}}configureTransmuxer(e){const{transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}function mP(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!cl(t[n].attrs,e[n].attrs))return!1;return!0}function cl(t,e,n){const r=t["STABLE-RENDITION-ID"];return r&&!n?r===e["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>t[i]!==e[i])}function Py(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}const hw=100;class tq extends DS{constructor(e,n,r){super(e,n,r,"[audio-stream-controller]",ce.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.LEVEL_LOADED,this.onLevelLoaded,this),e.on(R.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(R.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(R.ERROR,this.onError,this),e.on(R.BUFFER_RESET,this.onBufferReset,this),e.on(R.BUFFER_CREATED,this.onBufferCreated,this),e.on(R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(R.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(R.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(R.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.LEVEL_LOADED,this.onLevelLoaded,this),e.off(R.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(R.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(R.ERROR,this.onError,this),e.off(R.BUFFER_RESET,this.onBufferReset,this),e.off(R.BUFFER_CREATED,this.onBufferCreated,this),e.off(R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(R.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(R.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(R.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:n,id:r,initPTS:i,timescale:s}){if(r==="main"){const o=n.cc;this.initPTS[n.cc]={baseTime:i,timescale:s},this.log(`InitPTS for cc: ${o} found from main: ${i}`),this.videoTrackCC=o,this.state===G.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=G.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(hw),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=G.IDLE):(this.loadedmetadata=!1,this.state=G.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case G.IDLE:this.doTickIdle();break;case G.WAITING_TRACK:{var e;const{levels:r,trackId:i}=this,s=r==null||(e=r[i])==null?void 0:e.details;if(s){if(this.waitForCdnTuneIn(s))break;this.state=G.WAITING_INIT_PTS}break}case G.FRAG_LOADING_WAITING_RETRY:{var n;const r=performance.now(),i=this.retryDate;if(!i||r>=i||(n=this.media)!=null&&n.seeking){const{levels:s,trackId:o}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((s==null?void 0:s[o])||null),this.state=G.IDLE}break}case G.WAITING_INIT_PTS:{const r=this.waitingData;if(r){const{frag:i,part:s,cache:o,complete:a}=r;if(this.initPTS[i.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=G.FRAG_LOADING;const l=o.flush(),u={frag:i,part:s,payload:l,networkDetails:null};this._handleFragmentLoadProgress(u),a&&super._handleFragmentLoadComplete(u)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${i.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const l=this.getLoadPosition(),u=Ze.bufferInfo(this.mediaBuffer,l,this.config.maxBufferHole);Ly(u.end,this.config.maxFragLookUpTolerance,i)<0&&(this.log(`Waiting fragment cc (${i.cc}) @ ${i.start} cancelled because another fragment at ${u.end} is needed`),this.clearWaitingFragment())}}else this.state=G.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=G.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:n,media:r,trackId:i}=this,s=e.config;if(!r&&(this.startFragRequested||!s.startFragPrefetch)||!(n!=null&&n[i]))return;const o=n[i],a=o.details;if(!a||a.live&&this.levelLastLoaded!==o||this.waitForCdnTuneIn(a)){this.state=G.WAITING_TRACK;return}const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,ze.AUDIO,ce.AUDIO));const u=this.getFwdBufferInfo(l,ce.AUDIO);if(u===null)return;const{bufferedTrack:c,switchingTrack:d}=this;if(!d&&this._streamEnded(u,a)){e.trigger(R.BUFFER_EOS,{type:"audio"}),this.state=G.ENDED;return}const f=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,ce.MAIN),m=u.len,h=this.getMaxBufferLength(f==null?void 0:f.len),p=a.fragments,v=p[0].start;let y=this.flushing?this.getLoadPosition():u.end;if(d&&r){const E=this.getLoadPosition();c&&!cl(d.attrs,c.attrs)&&(y=E),a.PTSKnown&&E<v&&(u.end>v||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=v+.05)}if(m>=h&&!d&&y<p[p.length-1].start)return;let g=this.getNextFragment(y,a),x=!1;if(g&&this.isLoopLoading(g,y)&&(x=!!g.gap,g=this.getNextFragmentLoopLoading(g,a,u,ce.MAIN,h)),!g){this.bufferFlushed=!0;return}const b=f&&g.start>f.end+a.targetduration;if(b||!(f!=null&&f.len)&&u.len){const E=this.getAppendedFrag(g.start,ce.MAIN);if(E===null||(x||(x=!!E.gap||!!b&&f.len===0),b&&!x||x&&u.nextStart&&u.nextStart<E.end))return}this.loadFragment(g,o,y)}getMaxBufferLength(e){const n=super.getMaxBufferLength();return e?Math.min(Math.max(n,e),this.config.maxMaxBufferLength):n}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:n}){this.resetTransmuxer(),this.levels=n.map(r=>new ul(r))}onAudioTrackSwitching(e,n){const r=!!n.url;this.trackId=n.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),r?this.setInterval(hw):this.resetTransmuxer(),r?(this.switchingTrack=n,this.state=G.IDLE,this.flushAudioIfNeeded(n)):(this.switchingTrack=null,this.bufferedTrack=n,this.state=G.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,n){this.mainDetails=n.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(R.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,n){var r;if(this.mainDetails==null){this.cachedTrackLoadedData=n;return}const{levels:i}=this,{details:s,id:o}=n;if(!i){this.warn(`Audio tracks were reset while loading level ${o}`);return}this.log(`Audio track ${o} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const a=i[o];let l=0;if(s.live||(r=a.details)!=null&&r.live){this.checkLiveUpdate(s);const c=this.mainDetails;if(s.deltaUpdateFailed||!c)return;if(!a.details&&s.hasProgramDateTime&&c.hasProgramDateTime)Lh(s,c),l=s.fragments[0].start;else{var u;l=this.alignPlaylists(s,a.details,(u=this.levelLastLoaded)==null?void 0:u.details)}}a.details=s,this.levelLastLoaded=a,!this.startFragRequested&&(this.mainDetails||!s.live)&&this.setStartPosition(this.mainDetails||s,l),this.state===G.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=G.IDLE),this.tick()}_handleFragmentLoadProgress(e){var n;const{frag:r,part:i,payload:s}=e,{config:o,trackId:a,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const u=l[a];if(!u){this.warn("Audio track is undefined on fragment load progress");return}const c=u.details;if(!c){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(r.start);return}const d=o.defaultAudioCodec||u.audioCodec||"mp4a.40.2";let f=this.transmuxer;f||(f=this.transmuxer=new pP(this.hls,ce.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const m=this.initPTS[r.cc],h=(n=r.initSegment)==null?void 0:n.data;if(m!==void 0){const v=i?i.index:-1,y=v!==-1,g=new PS(r.level,r.sn,r.stats.chunkCount,s.byteLength,v,y);f.push(s,h,d,"",r,i,c.totalduration,!1,g,m)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${c.startSN} ,${c.endSN}],track ${a}`);const{cache:p}=this.waitingData=this.waitingData||{frag:r,part:i,cache:new Jk,complete:!1};p.push(new Uint8Array(s)),this.waitingVideoCC=this.videoTrackCC,this.state=G.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,n){const r=n.tracks.audio;r&&(this.mediaBuffer=r.buffer||null),n.tracks.video&&(this.videoBuffer=n.tracks.video.buffer||null)}onFragBuffered(e,n){const{frag:r,part:i}=n;if(r.type!==ce.AUDIO){if(!this.loadedmetadata&&r.type===ce.MAIN){const s=this.videoBuffer||this.media;s&&Ze.getBuffered(s).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(r.sn!=="initSegment"){this.fragPrevious=r;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(R.AUDIO_TRACK_SWITCHED,Xt({},s)))}this.fragBufferedComplete(r,i)}onError(e,n){var r;if(n.fatal){this.state=G.ERROR;return}switch(n.details){case N.FRAG_GAP:case N.FRAG_PARSING_ERROR:case N.FRAG_DECRYPT_ERROR:case N.FRAG_LOAD_ERROR:case N.FRAG_LOAD_TIMEOUT:case N.KEY_LOAD_ERROR:case N.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ce.AUDIO,n);break;case N.AUDIO_TRACK_LOAD_ERROR:case N.AUDIO_TRACK_LOAD_TIMEOUT:case N.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===G.WAITING_TRACK&&((r=n.context)==null?void 0:r.type)===ke.AUDIO_TRACK&&(this.state=G.IDLE);break;case N.BUFFER_APPEND_ERROR:case N.BUFFER_FULL_ERROR:if(!n.parent||n.parent!=="audio")return;if(n.details===N.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(n)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case N.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onBufferFlushing(e,{type:n}){n!==ze.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:n}){if(n!==ze.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===G.ENDED&&(this.state=G.IDLE);const r=this.mediaBuffer||this.media;r&&(this.afterBufferFlushed(r,n,ce.AUDIO),this.tick())}}_handleTransmuxComplete(e){var n;const r="audio",{hls:i}=this,{remuxResult:s,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:u,level:c}=a,{details:d}=c,{audio:f,text:m,id3:h,initSegment:p}=s;if(this.fragContextChanged(l)||!d){this.fragmentTracker.removeFragment(l);return}if(this.state=G.PARSING,this.switchingTrack&&f&&this.completeAudioSwitch(this.switchingTrack),p!=null&&p.tracks){const v=l.initSegment||l;this._bufferInitSegment(c,p.tracks,v,o),i.trigger(R.FRAG_PARSING_INIT_SEGMENT,{frag:v,id:r,tracks:p.tracks})}if(f){const{startPTS:v,endPTS:y,startDTS:g,endDTS:x}=f;u&&(u.elementaryStreams[ze.AUDIO]={startPTS:v,endPTS:y,startDTS:g,endDTS:x}),l.setElementaryStreamInfo(ze.AUDIO,v,y,g,x),this.bufferFragmentData(f,l,u,o)}if(h!=null&&(n=h.samples)!=null&&n.length){const v=Mt({id:r,frag:l,details:d},h);i.trigger(R.FRAG_PARSING_METADATA,v)}if(m){const v=Mt({id:r,frag:l,details:d},m);i.trigger(R.FRAG_PARSING_USERDATA,v)}}_bufferInitSegment(e,n,r,i){if(this.state!==G.PARSING)return;n.video&&delete n.video;const s=n.audio;if(!s)return;s.id="audio";const o=e.audioCodec;this.log(`Init audio buffer, container:${s.container}, codecs[level/parsed]=[${o}/${s.codec}]`),o&&o.split(",").length===1&&(s.levelCodec=o),this.hls.trigger(R.BUFFER_CODECS,n);const a=s.initSegment;if(a!=null&&a.byteLength){const l={type:"audio",frag:r,part:null,chunkMeta:i,parent:r.type,data:a};this.hls.trigger(R.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,n,r){const i=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||i===Wt.NOT_LOADED||i===Wt.PARTIAL){var s;if(e.sn==="initSegment")this._loadInitSegment(e,n);else if((s=n.details)!=null&&s.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=G.WAITING_INIT_PTS;const o=this.mainDetails;o&&o.fragments[0].start!==n.details.fragments[0].start&&Lh(n.details,o)}else this.startFragRequested=!0,super.loadFragment(e,n,r)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){const{media:n,bufferedTrack:r}=this,i=r==null?void 0:r.attrs,s=e.attrs;n&&i&&(i.CHANNELS!==s.CHANNELS||r.name!==e.name||r.lang!==e.lang)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}completeAudioSwitch(e){const{hls:n}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,n.trigger(R.AUDIO_TRACK_SWITCHED,Xt({},e))}}class nq extends kS{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.MANIFEST_PARSED,this.onManifestParsed,this),e.on(R.LEVEL_LOADING,this.onLevelLoading,this),e.on(R.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(R.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(R.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.MANIFEST_PARSED,this.onManifestParsed,this),e.off(R.LEVEL_LOADING,this.onLevelLoading,this),e.off(R.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(R.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(R.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.audioTracks||[]}onAudioTrackLoaded(e,n){const{id:r,groupId:i,details:s}=n,o=this.tracksInGroup[r];if(!o||o.groupId!==i){this.warn(`Audio track with id:${r} and group:${i} not found in active group ${o==null?void 0:o.groupId}`);return}const a=o.details;o.details=n.details,this.log(`Audio track ${r} "${o.name}" lang:${o.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,a)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const r=n.audioGroups||null,i=this.groupIds;let s=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(a=>(i==null?void 0:i.indexOf(a))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(f=>!r||r.indexOf(f.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(f=>f.default)&&(this.selectDefaultTrack=!1),a.forEach((f,m)=>{f.id=m});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const l=this.hls.config.audioPreference;if(!s&&l){const f=mi(l,a,la);if(f>-1)s=a[f];else{const m=mi(l,this.tracks);s=this.tracks[m]}}let u=this.findTrackId(s);u===-1&&s&&(u=this.findTrackId(null));const c={audioTracks:a};this.log(`Updating audio tracks, ${a.length} track(s) found in group(s): ${r==null?void 0:r.join(",")}`),this.hls.trigger(R.AUDIO_TRACKS_UPDATED,c);const d=this.trackId;if(u!==-1&&d===-1)this.setAudioTrack(u);else if(a.length&&d===-1){var o;const f=new Error(`No audio track selected for current audio group-ID(s): ${(o=this.groupIds)==null?void 0:o.join(",")} track count: ${a.length}`);this.warn(f.message),this.hls.trigger(R.ERROR,{type:he.MEDIA_ERROR,details:N.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:f})}}else this.shouldReloadPlaylist(s)&&this.setAudioTrack(this.trackId)}onError(e,n){n.fatal||!n.context||n.context.type===ke.AUDIO_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&(this.requestScheduled=-1,this.checkRetry(n))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const n=this.hls;if(n.config.audioPreference=e,e){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const i=this.currentTrack;if(i&&ja(e,i,la))return i;const s=mi(e,this.tracksInGroup,la);if(s>-1){const o=this.tracksInGroup[s];return this.setAudioTrack(s),o}else if(i){let o=n.loadLevel;o===-1&&(o=n.firstAutoLevel);const a=n7(e,n.levels,r,o,la);if(a===-1)return null;n.nextLoadLevel=a}if(e.channels||e.audioCodec){const o=mi(e,r);if(o>-1)return r[o]}}}return null}setAudioTrack(e){const n=this.tracksInGroup;if(e<0||e>=n.length){this.warn(`Invalid audio track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const r=this.currentTrack,i=n[e],s=i.details&&!i.details.live;if(e===this.trackId&&i===r&&s||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(R.AUDIO_TRACK_SWITCHING,Xt({},i)),s))return;const o=this.switchParams(i.url,r==null?void 0:r.details);this.loadPlaylist(o)}findTrackId(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const i=n[r];if(!(this.selectDefaultTrack&&!i.default)&&(!e||ja(e,i,la)))return r}if(e){const{name:r,lang:i,assocLang:s,characteristics:o,audioCodec:a,channels:l}=e;for(let u=0;u<n.length;u++){const c=n[u];if(ja({name:r,lang:i,assocLang:s,characteristics:o,audioCodec:a,channels:l},c,la))return u}for(let u=0;u<n.length;u++){const c=n[u];if(cl(e.attrs,c.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return u}for(let u=0;u<n.length;u++){const c=n[u];if(cl(e.attrs,c.attrs,["LANGUAGE"]))return u}}return-1}loadPlaylist(e){const n=this.currentTrack;if(this.shouldLoadPlaylist(n)&&n){super.loadPlaylist();const r=n.id,i=n.groupId;let s=n.url;if(e)try{s=e.addDirectives(s)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}this.log(`loading audio-track playlist ${r} "${n.name}" lang:${n.lang} group:${i}`),this.clearTimer(),this.hls.trigger(R.AUDIO_TRACK_LOADING,{url:s,id:r,groupId:i,deliveryDirectives:e||null})}}}const pw=500;class rq extends DS{constructor(e,n,r){super(e,n,r,"[subtitle-stream-controller]",ce.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.LEVEL_LOADED,this.onLevelLoaded,this),e.on(R.ERROR,this.onError,this),e.on(R.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(R.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(R.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(R.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(R.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.LEVEL_LOADED,this.onLevelLoaded,this),e.off(R.ERROR,this.onError,this),e.off(R.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(R.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(R.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(R.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(R.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=G.IDLE,this.setInterval(pw),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,n){this.mainDetails=n.details}onSubtitleFragProcessed(e,n){const{frag:r,success:i}=n;if(this.fragPrevious=r,this.state=G.IDLE,!i)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let o;const a=r.start;for(let u=0;u<s.length;u++)if(a>=s[u].start&&a<=s[u].end){o=s[u];break}const l=r.start+r.duration;o?o.end=l:(o={start:a,end:l},s.push(o)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null)}onBufferFlushing(e,n){const{startOffset:r,endOffset:i}=n;if(r===0&&i!==Number.POSITIVE_INFINITY){const s=i-1;if(s<=0)return;n.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(o=>{for(let a=0;a<o.length;){if(o[a].end<=s){o.shift();continue}else if(o[a].start<s)o[a].start=s;else break;a++}}),this.fragmentTracker.removeFragmentsInRange(r,s,ce.SUBTITLE)}}onFragBuffered(e,n){if(!this.loadedmetadata&&n.frag.type===ce.MAIN){var r;(r=this.media)!=null&&r.buffered.length&&(this.loadedmetadata=!0)}}onError(e,n){const r=n.frag;(r==null?void 0:r.type)===ce.SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==G.STOPPED&&(this.state=G.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:n}){if(this.levels&&mP(this.levels,n)){this.levels=n.map(r=>new ul(r));return}this.tracksBuffered=[],this.levels=n.map(r=>{const i=new ul(r);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,ce.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,n){var r;if(this.currentTrackId=n.id,!((r=this.levels)!=null&&r.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.setInterval(pw)}onSubtitleTrackLoaded(e,n){var r;const{currentTrackId:i,levels:s}=this,{details:o,id:a}=n;if(!s){this.warn(`Subtitle tracks were reset while loading level ${a}`);return}const l=s[i];if(a>=s.length||a!==i||!l)return;this.log(`Subtitle track ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let u=0;if(o.live||(r=l.details)!=null&&r.live){const d=this.mainDetails;if(o.deltaUpdateFailed||!d)return;const f=d.fragments[0];if(!l.details)o.hasProgramDateTime&&d.hasProgramDateTime?(Lh(o,d),u=o.fragments[0].start):f&&(u=f.start,Cy(o,u));else{var c;u=this.alignPlaylists(o,l.details,(c=this.levelLastLoaded)==null?void 0:c.details),u===0&&f&&(u=f.start,Cy(o,u))}}l.details=o,this.levelLastLoaded=l,!this.startFragRequested&&(this.mainDetails||!o.live)&&this.setStartPosition(this.mainDetails||o,u),this.tick(),o.live&&!this.fragCurrent&&this.media&&this.state===G.IDLE&&(Ch(null,o.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0))}_handleFragmentLoadComplete(e){const{frag:n,payload:r}=e,i=n.decryptdata,s=this.hls;if(!this.fragContextChanged(n)&&r&&r.byteLength>0&&i!=null&&i.key&&i.iv&&i.method==="AES-128"){const o=performance.now();this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer).catch(a=>{throw s.trigger(R.ERROR,{type:he.MEDIA_ERROR,details:N.FRAG_DECRYPT_ERROR,fatal:!1,error:a,reason:a.message,frag:n}),a}).then(a=>{const l=performance.now();s.trigger(R.FRAG_DECRYPTED,{frag:n,payload:a,stats:{tstart:o,tdecrypt:l}})}).catch(a=>{this.warn(`${a.name}: ${a.message}`),this.state=G.IDLE})}}doTick(){if(!this.media){this.state=G.IDLE;return}if(this.state===G.IDLE){const{currentTrackId:e,levels:n}=this,r=n==null?void 0:n[e];if(!r||!n.length||!r.details)return;const{config:i}=this,s=this.getLoadPosition(),o=Ze.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,i.maxBufferHole),{end:a,len:l}=o,u=this.getFwdBufferInfo(this.media,ce.MAIN),c=r.details,d=this.getMaxBufferLength(u==null?void 0:u.len)+c.levelTargetDuration;if(l>d)return;const f=c.fragments,m=f.length,h=c.edge;let p=null;const v=this.fragPrevious;if(a<h){const y=i.maxFragLookUpTolerance,g=a>h-y?0:y;p=Ch(v,f,Math.max(f[0].start,a),g),!p&&v&&v.start<f[0].start&&(p=f[0])}else p=f[m-1];if(!p)return;if(p=this.mapToInitFragWhenRequired(p),p.sn!=="initSegment"){const y=p.sn-c.startSN,g=f[y-1];g&&g.cc===p.cc&&this.fragmentTracker.getState(g)===Wt.NOT_LOADED&&(p=g)}this.fragmentTracker.getState(p)===Wt.NOT_LOADED&&this.loadFragment(p,r,a)}}getMaxBufferLength(e){const n=super.getMaxBufferLength();return e?Math.max(n,e):n}loadFragment(e,n,r){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,n):(this.startFragRequested=!0,super.loadFragment(e,n,r))}get mediaBufferTimeRanges(){return new iq(this.tracksBuffered[this.currentTrackId]||[])}}class iq{constructor(e){this.buffered=void 0;const n=(r,i,s)=>{if(i=i>>>0,i>s-1)throw new DOMException(`Failed to execute '${r}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${s})`);return e[i][r]};this.buffered={get length(){return e.length},end(r){return n("end",r,e.length)},start(r){return n("start",r,e.length)}}}}class sq extends kS{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let n=null;const r=Ef(this.media.textTracks);for(let s=0;s<r.length;s++)if(r[s].mode==="hidden")n=r[s];else if(r[s].mode==="showing"){n=r[s];break}const i=this.findTrackForTextTrack(n);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.MANIFEST_PARSED,this.onManifestParsed,this),e.on(R.LEVEL_LOADING,this.onLevelLoading,this),e.on(R.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(R.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(R.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.MANIFEST_PARSED,this.onManifestParsed,this),e.off(R.LEVEL_LOADING,this.onLevelLoading,this),e.off(R.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(R.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(R.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),Ef(this.media.textTracks).forEach(n=>{Pa(n)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.subtitleTracks}onSubtitleTrackLoaded(e,n){const{id:r,groupId:i,details:s}=n,o=this.tracksInGroup[r];if(!o||o.groupId!==i){this.warn(`Subtitle track with id:${r} and group:${i} not found in active group ${o==null?void 0:o.groupId}`);return}const a=o.details;o.details=n.details,this.log(`Subtitle track ${r} "${o.name}" lang:${o.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,a)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const r=n.subtitleGroups||null,i=this.groupIds;let s=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(o=>(i==null?void 0:i.indexOf(o))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(c=>!r||r.indexOf(c.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(c=>c.default)&&(this.selectDefaultTrack=!1),o.forEach((c,d)=>{c.id=d});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const a=this.hls.config.subtitlePreference;if(!s&&a){this.selectDefaultTrack=!1;const c=mi(a,o);if(c>-1)s=o[c];else{const d=mi(a,this.tracks);s=this.tracks[d]}}let l=this.findTrackId(s);l===-1&&s&&(l=this.findTrackId(null));const u={subtitleTracks:o};this.log(`Updating subtitle tracks, ${o.length} track(s) found in "${r==null?void 0:r.join(",")}" group-id`),this.hls.trigger(R.SUBTITLE_TRACKS_UPDATED,u),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}else this.shouldReloadPlaylist(s)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const n=this.tracksInGroup,r=this.selectDefaultTrack;for(let i=0;i<n.length;i++){const s=n[i];if(!(r&&!s.default||!r&&!e)&&(!e||ja(s,e)))return i}if(e){for(let i=0;i<n.length;i++){const s=n[i];if(cl(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<n.length;i++){const s=n[i];if(cl(e.attrs,s.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const i=n[r];if(Py(i,e))return r}}return-1}onError(e,n){n.fatal||!n.context||n.context.type===ke.SUBTITLE_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const n=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&ja(e,r))return r;const i=mi(e,this.tracksInGroup);if(i>-1){const s=this.tracksInGroup[i];return this.setSubtitleTrack(i),s}else{if(r)return null;{const s=mi(e,n);if(s>-1)return n[s]}}}}return null}loadPlaylist(e){super.loadPlaylist();const n=this.currentTrack;if(this.shouldLoadPlaylist(n)&&n){const r=n.id,i=n.groupId;let s=n.url;if(e)try{s=e.addDirectives(s)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}this.log(`Loading subtitle playlist for id ${r}`),this.hls.trigger(R.SUBTITLE_TRACK_LOADING,{url:s,id:r,groupId:i,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const n=Ef(e.textTracks),r=this.currentTrack;let i;if(r&&(i=n.filter(s=>Py(r,s))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${r.name}" and language "${r.lang}"`)),[].slice.call(n).forEach(s=>{s.mode!=="disabled"&&s!==i&&(s.mode="disabled")}),i){const s=this.subtitleDisplay?"showing":"hidden";i.mode!==s&&(i.mode=s)}}setSubtitleTrack(e){const n=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=n.length||!re(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const r=this.currentTrack,i=n[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(R.SUBTITLE_TRACK_SWITCH,{id:e});return}const s=!!i.details&&!i.details.live;if(e===this.trackId&&i===r&&s)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:o,groupId:a="",name:l,type:u,url:c}=i;this.hls.trigger(R.SUBTITLE_TRACK_SWITCH,{id:o,groupId:a,name:l,type:u,url:c});const d=this.switchParams(i.url,r==null?void 0:r.details);this.loadPlaylist(d)}}class oq{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,n,r){const i=this.queues[n];i.push(e),i.length===1&&!r&&this.executeNext(n)}insertAbort(e,n){this.queues[n].unshift(e),this.executeNext(n)}appendBlocker(e){let n;const r=new Promise(s=>{n=s}),i={execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(i,e),r}executeNext(e){const n=this.queues[e];if(n.length){const r=n[0];try{r.execute()}catch(i){D.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${i}`),r.onError(i);const s=this.buffers[e];s!=null&&s.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const mw=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class aq{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=r=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=r=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:r,mediaSource:i}=this;this.log("Media source opened"),r&&(r.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(R.MEDIA_ATTACHED,{media:r,mediaSource:i})),i&&i.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:r,_objectUrl:i}=this;r!==i&&D.error(`Media element src was set while attaching MediaSource (${i} > ${r})`)},this.hls=e;const n="[buffer-controller]";this.appendSource=e.config.preferManagedMediaSource&&typeof self<"u"&&self.ManagedMediaSource,this.log=D.log.bind(D,n),this.warn=D.warn.bind(D,n),this.error=D.error.bind(D,n),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.MANIFEST_PARSED,this.onManifestParsed,this),e.on(R.BUFFER_RESET,this.onBufferReset,this),e.on(R.BUFFER_APPENDING,this.onBufferAppending,this),e.on(R.BUFFER_CODECS,this.onBufferCodecs,this),e.on(R.BUFFER_EOS,this.onBufferEos,this),e.on(R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(R.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(R.FRAG_PARSED,this.onFragParsed,this),e.on(R.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.MANIFEST_PARSED,this.onManifestParsed,this),e.off(R.BUFFER_RESET,this.onBufferReset,this),e.off(R.BUFFER_APPENDING,this.onBufferAppending,this),e.off(R.BUFFER_CODECS,this.onBufferCodecs,this),e.off(R.BUFFER_EOS,this.onBufferEos,this),e.off(R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(R.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(R.FRAG_PARSED,this.onFragParsed,this),e.off(R.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new oq(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,n){let r=2;(n.audio&&!n.video||!n.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,n){const r=this.media=n.media,i=Tl(this.appendSource);if(r&&i){var s;const o=this.mediaSource=new i;this.log(`created media source: ${(s=o.constructor)==null?void 0:s.name}`),o.addEventListener("sourceopen",this._onMediaSourceOpen),o.addEventListener("sourceended",this._onMediaSourceEnded),o.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(o.addEventListener("startstreaming",this._onStartStreaming),o.addEventListener("endstreaming",this._onEndStreaming));const a=this._objectUrl=self.URL.createObjectURL(o);if(this.appendSource)try{r.removeAttribute("src");const l=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||l&&o instanceof l,gw(r),lq(r,a),r.load()}catch{r.src=a}else r.src=a;r.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:n,_objectUrl:r}=this;if(n){if(this.log("media source detaching"),n.readyState==="open")try{n.endOfStream()}catch(i){this.warn(`onMediaDetaching: ${i.message} while calling endOfStream`)}this.onBufferReset(),n.removeEventListener("sourceopen",this._onMediaSourceOpen),n.removeEventListener("sourceended",this._onMediaSourceEnded),n.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(n.removeEventListener("startstreaming",this._onStartStreaming),n.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),r&&self.URL.revokeObjectURL(r),this.mediaSrc===r?(e.removeAttribute("src"),this.appendSource&&gw(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(R.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{this.resetBuffer(e)}),this._initSourceBuffer()}resetBuffer(e){const n=this.sourceBuffer[e];try{if(n){var r;this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,(r=this.mediaSource)!=null&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}}catch(i){this.warn(`onBufferReset ${e}`,i)}}onBufferCodecs(e,n){const r=this.getSourceBufferTypes().length,i=Object.keys(n);if(i.forEach(o=>{if(r){const l=this.tracks[o];if(l&&typeof l.buffer.changeType=="function"){var a;const{id:u,codec:c,levelCodec:d,container:f,metadata:m}=n[o],h=$1(l.codec,l.levelCodec),p=h==null?void 0:h.replace(mw,"$1");let v=$1(c,d);const y=(a=v)==null?void 0:a.replace(mw,"$1");if(v&&p!==y){o.slice(0,5)==="audio"&&(v=wh(v,this.appendSource));const g=`${f};codecs=${v}`;this.appendChangeType(o,g),this.log(`switching codec ${h} to ${v}`),this.tracks[o]={buffer:l.buffer,codec:c,container:f,levelCodec:d,metadata:m,id:u}}}}else this.pendingTracks[o]=n[o]}),r)return;const s=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==s&&(this.log(`${s} bufferCodec event(s) expected ${i.join(",")}`),this.bufferCodecEventsExpected=s),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks()}appendChangeType(e,n){const{operationQueue:r}=this,i={execute:()=>{const s=this.sourceBuffer[e];s&&(this.log(`changing ${e} sourceBuffer type to ${n}`),s.changeType(n)),r.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:s=>{this.warn(`Failed to change ${e} SourceBuffer type`,s)}};r.append(i,e,!!this.pendingTracks[e])}onBufferAppending(e,n){const{hls:r,operationQueue:i,tracks:s}=this,{data:o,type:a,frag:l,part:u,chunkMeta:c}=n,d=c.buffering[a],f=self.performance.now();d.start=f;const m=l.stats.buffering,h=u?u.stats.buffering:null;m.start===0&&(m.start=f),h&&h.start===0&&(h.start=f);const p=s.audio;let v=!1;a==="audio"&&(p==null?void 0:p.container)==="audio/mpeg"&&(v=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const y=l.start,g={execute:()=>{if(d.executeStart=self.performance.now(),v){const x=this.sourceBuffer[a];if(x){const b=y-x.timestampOffset;Math.abs(b)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${y} (delta: ${b}) sn: ${l.sn})`),x.timestampOffset=y)}}this.appendExecutor(o,a)},onStart:()=>{},onComplete:()=>{const x=self.performance.now();d.executeEnd=d.end=x,m.first===0&&(m.first=x),h&&h.first===0&&(h.first=x);const{sourceBuffer:b}=this,E={};for(const T in b)E[T]=Ze.getBuffered(b[T]);this.appendErrors[a]=0,a==="audio"||a==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(R.BUFFER_APPENDED,{type:a,frag:l,part:u,chunkMeta:c,parent:l.type,timeRanges:E})},onError:x=>{const b={type:he.MEDIA_ERROR,parent:l.type,details:N.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:l,part:u,chunkMeta:c,error:x,err:x,fatal:!1};if(x.code===DOMException.QUOTA_EXCEEDED_ERR)b.details=N.BUFFER_FULL_ERROR;else{const E=++this.appendErrors[a];b.details=N.BUFFER_APPEND_ERROR,this.warn(`Failed ${E}/${r.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer`),E>=r.config.appendErrorMaxRetry&&(b.fatal=!0)}r.trigger(R.ERROR,b)}};i.append(g,a,!!this.pendingTracks[a])}onBufferFlushing(e,n){const{operationQueue:r}=this,i=s=>({execute:this.removeExecutor.bind(this,s,n.startOffset,n.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(R.BUFFER_FLUSHED,{type:s})},onError:o=>{this.warn(`Failed to remove from ${s} SourceBuffer`,o)}});n.type?r.append(i(n.type),n.type):this.getSourceBufferTypes().forEach(s=>{r.append(i(s),s)})}onFragParsed(e,n){const{frag:r,part:i}=n,s=[],o=i?i.elementaryStreams:r.elementaryStreams;o[ze.AUDIOVIDEO]?s.push("audiovideo"):(o[ze.AUDIO]&&s.push("audio"),o[ze.VIDEO]&&s.push("video"));const a=()=>{const l=self.performance.now();r.stats.buffering.end=l,i&&(i.stats.buffering.end=l);const u=i?i.stats:r.stats;this.hls.trigger(R.FRAG_BUFFERED,{frag:r,part:i,stats:u,id:r.type})};s.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(a,s)}onFragChanged(e,n){this.trimBuffers()}onBufferEos(e,n){this.getSourceBufferTypes().reduce((i,s)=>{const o=this.sourceBuffer[s];return o&&(!n.type||n.type===s)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${s} sourceBuffer now EOS`))),i&&!!(!o||o.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(s=>{const o=this.sourceBuffer[s];o&&(o.ending=!1)});const{mediaSource:i}=this;if(!i||i.readyState!=="open"){i&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${i.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),i.endOfStream()}))}onLevelUpdated(e,{details:n}){n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:n,media:r}=this;if(!r||n===null||!this.getSourceBufferTypes().length)return;const s=e.config,o=r.currentTime,a=n.levelTargetDuration,l=n.live&&s.liveBackBufferLength!==null?s.liveBackBufferLength:s.backBufferLength;if(re(l)&&l>0){const u=Math.max(l,a),c=Math.floor(o/a)*a-u;this.flushBackBuffer(o,a,c)}if(re(s.frontBufferFlushThreshold)&&s.frontBufferFlushThreshold>0){const u=Math.max(s.maxBufferLength,s.frontBufferFlushThreshold),c=Math.max(u,a),d=Math.floor(o/a)*a+c;this.flushFrontBuffer(o,a,d)}}flushBackBuffer(e,n,r){const{details:i,sourceBuffer:s}=this;this.getSourceBufferTypes().forEach(a=>{const l=s[a];if(l){const u=Ze.getBuffered(l);if(u.length>0&&r>u.start(0)){if(this.hls.trigger(R.BACK_BUFFER_REACHED,{bufferEnd:r}),i!=null&&i.live)this.hls.trigger(R.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(l.ended&&u.end(u.length-1)-e<n*2){this.log(`Cannot flush ${a} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(R.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:a})}}})}flushFrontBuffer(e,n,r){const{sourceBuffer:i}=this;this.getSourceBufferTypes().forEach(o=>{const a=i[o];if(a){const l=Ze.getBuffered(a),u=l.length;if(u<2)return;const c=l.start(u-1),d=l.end(u-1);if(r>c||e>=c&&e<=d)return;if(a.ended&&e-d<2*n){this.log(`Cannot flush ${o} front buffer while SourceBuffer is in ended state`);return}this.hls.trigger(R.BUFFER_FLUSHING,{startOffset:c,endOffset:1/0,type:o})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:n,media:r,mediaSource:i}=this,s=e.fragments[0].start+e.totalduration,o=r.duration,a=re(i.duration)?i.duration:0;e.live&&n.config.liveDurationInfinity?(i.duration=1/0,this.updateSeekableRange(e)):(s>a&&s>o||!re(o))&&(this.log(`Updating Media Source duration to ${s.toFixed(3)}`),i.duration=s)}updateSeekableRange(e){const n=this.mediaSource,r=e.fragments;if(r.length&&e.live&&n!=null&&n.setLiveSeekableRange){const s=Math.max(0,r[0].start),o=Math.max(s,s+e.totalduration);this.log(`Media Source duration is set to ${n.duration}. Setting seekable range to ${s}-${o}.`),n.setLiveSeekableRange(s,o)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:n,pendingTracks:r}=this,i=Object.keys(r).length;if(i&&(!e||i===2||"audiovideo"in r)){this.createSourceBuffers(r),this.pendingTracks={};const s=this.getSourceBufferTypes();if(s.length)this.hls.trigger(R.BUFFER_CREATED,{tracks:this.tracks}),s.forEach(o=>{n.executeNext(o)});else{const o=new Error("could not create source buffer for media codec(s)");this.hls.trigger(R.ERROR,{type:he.MEDIA_ERROR,details:N.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:o,reason:o.message})}}}createSourceBuffers(e){const{sourceBuffer:n,mediaSource:r}=this;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(const i in e)if(!n[i]){const s=e[i];if(!s)throw Error(`source buffer exists for track ${i}, however track does not`);let o=s.levelCodec||s.codec;o&&i.slice(0,5)==="audio"&&(o=wh(o,this.appendSource));const a=`${s.container};codecs=${o}`;this.log(`creating sourceBuffer(${a})`);try{const l=n[i]=r.addSourceBuffer(a),u=i;this.addBufferListener(u,"updatestart",this._onSBUpdateStart),this.addBufferListener(u,"updateend",this._onSBUpdateEnd),this.addBufferListener(u,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(u,"bufferedchange",(c,d)=>{const f=d.removedRanges;f!=null&&f.length&&this.hls.trigger(R.BUFFER_FLUSHED,{type:i})}),this.tracks[i]={buffer:l,codec:o,container:s.container,levelCodec:s.levelCodec,metadata:s.metadata,id:s.id}}catch(l){this.error(`error while trying to add sourceBuffer: ${l.message}`),this.hls.trigger(R.ERROR,{type:he.MEDIA_ERROR,details:N.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:l,sourceBufferName:i,mimeType:a})}}}get mediaSrc(){var e;const n=((e=this.media)==null?void 0:e.firstChild)||this.media;return n==null?void 0:n.src}_onSBUpdateStart(e){const{operationQueue:n}=this;n.current(e).onStart()}_onSBUpdateEnd(e){var n;if(((n=this.mediaSource)==null?void 0:n.readyState)==="closed"){this.resetBuffer(e);return}const{operationQueue:r}=this;r.current(e).onComplete(),r.shiftAndExecuteNext(e)}_onSBUpdateError(e,n){var r;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(r=this.mediaSource)==null?void 0:r.readyState}`);this.error(`${i}`,n),this.hls.trigger(R.ERROR,{type:he.MEDIA_ERROR,details:N.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const s=this.operationQueue.current(e);s&&s.onError(i)}removeExecutor(e,n,r){const{media:i,mediaSource:s,operationQueue:o,sourceBuffer:a}=this,l=a[e];if(!i||!s||!l){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),o.shiftAndExecuteNext(e);return}const u=re(i.duration)?i.duration:1/0,c=re(s.duration)?s.duration:1/0,d=Math.max(0,n),f=Math.min(r,u,c);f>d&&(!l.ending||l.ended)?(l.ended=!1,this.log(`Removing [${d},${f}] from the ${e} SourceBuffer`),l.remove(d,f)):o.shiftAndExecuteNext(e)}appendExecutor(e,n){const r=this.sourceBuffer[n];if(!r){if(!this.pendingTracks[n])throw new Error(`Attempting to append to the ${n} SourceBuffer, but it does not exist`);return}r.ended=!1,r.appendBuffer(e)}blockBuffers(e,n=this.getSourceBufferTypes()){if(!n.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:r}=this,i=n.map(s=>r.appendBlocker(s));Promise.all(i).then(()=>{e(),n.forEach(s=>{const o=this.sourceBuffer[s];o!=null&&o.updating||r.shiftAndExecuteNext(s)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,n,r){const i=this.sourceBuffer[e];if(!i)return;const s=r.bind(this,e);this.listeners[e].push({event:n,listener:s}),i.addEventListener(n,s)}removeBufferListeners(e){const n=this.sourceBuffer[e];n&&this.listeners[e].forEach(r=>{n.removeEventListener(r.event,r.listener)})}}function gw(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach(n=>{t.removeChild(n)})}function lq(t,e){const n=self.document.createElement("source");n.type="video/mp4",n.src=e,t.appendChild(n)}const yw={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},gP=function(e){let n=e;return yw.hasOwnProperty(e)&&(n=yw[e]),String.fromCharCode(n)},$r=15,Bi=100,uq={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},cq={17:2,18:4,21:6,22:8,23:10,19:13,20:15},dq={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},fq={25:2,26:4,29:6,30:8,31:10,27:13,28:15},hq=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class pq{constructor(){this.time=null,this.verboseLevel=0}log(e,n){if(this.verboseLevel>=e){const r=typeof n=="function"?n():n;D.log(`${this.time} [${e}] ${r}`)}}}const co=function(e){const n=[];for(let r=0;r<e.length;r++)n.push(e[r].toString(16));return n};class yP{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const n=["foreground","underline","italics","background","flash"];for(let r=0;r<n.length;r++){const i=n[r];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class mq{constructor(){this.uchar=" ",this.penState=new yP}reset(){this.uchar=" ",this.penState.reset()}setChar(e,n){this.uchar=e,this.penState.copy(n)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class gq{constructor(e){this.chars=[],this.pos=0,this.currPenState=new yP,this.cueStartTime=null,this.logger=void 0;for(let n=0;n<Bi;n++)this.chars.push(new mq);this.logger=e}equals(e){for(let n=0;n<Bi;n++)if(!this.chars[n].equals(e.chars[n]))return!1;return!0}copy(e){for(let n=0;n<Bi;n++)this.chars[n].copy(e.chars[n])}isEmpty(){let e=!0;for(let n=0;n<Bi;n++)if(!this.chars[n].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Bi&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Bi)}moveCursor(e){const n=this.pos+e;if(e>1)for(let r=this.pos+1;r<n+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(n)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const n=gP(e);if(this.pos>=Bi){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1)}clearFromPos(e){let n;for(n=e;n<Bi;n++)this.chars[n].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let n=!0;for(let r=0;r<Bi;r++){const i=this.chars[r].uchar;i!==" "&&(n=!1),e.push(i)}return n?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class wg{constructor(e){this.rows=[],this.currRow=$r-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let n=0;n<$r;n++)this.rows.push(new gq(e));this.logger=e}reset(){for(let e=0;e<$r;e++)this.rows[e].clear();this.currRow=$r-1}equals(e){let n=!0;for(let r=0;r<$r;r++)if(!this.rows[r].equals(e.rows[r])){n=!1;break}return n}copy(e){for(let n=0;n<$r;n++)this.rows[n].copy(e.rows[n])}isEmpty(){let e=!0;for(let n=0;n<$r;n++)if(!this.rows[n].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let n=e.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(let a=0;a<$r;a++)this.rows[a].clear();const s=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){const a=o.rows[s].cueStartTime,l=this.logger.time;if(a!==null&&l!==null&&a<l)for(let u=0;u<this.nrRollUpRows;u++)this.rows[n-this.nrRollUpRows+u+1].copy(o.rows[s+u])}}this.currRow=n;const r=this.rows[this.currRow];if(e.indent!==null){const s=e.indent,o=Math.max(s-1,0);r.setCursor(e.indent),e.color=r.chars[o].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(e,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const n=[];let r="",i=-1;for(let s=0;s<$r;s++){const o=this.rows[s].getTextString();o&&(i=s+1,e?n.push("Row "+i+": '"+o+"'"):n.push(o.trim()))}return n.length>0&&(e?r="["+n.join(" | ")+"]":r=n.join(`
`)),r}getTextAndFormat(){return this.rows}}class vw{constructor(e,n,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new wg(r),this.nonDisplayedMemory=new wg(r),this.lastOutputScreen=new wg(r),this.currRollUpRow=this.displayedMemory.rows[$r-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[$r-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);const n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>n+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const n={flash:!1};if(n.underline=e%2===1,n.italics=e>=46,n.italics)n.foreground="white";else{const r=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];n.foreground=i[r]}this.logger.log(2,"MIDROW: "+JSON.stringify(n)),this.writeScreen.setPen(n)}outputDataUpdate(e=!1){const n=this.logger.time;n!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=n:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:n),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class xw{constructor(e,n,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=Ew(),this.logger=void 0;const i=this.logger=new pq;this.channels=[null,new vw(e,n,i),new vw(e+1,r,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,n){this.channels[e].setHandler(n)}addData(e,n){let r,i,s,o=!1;this.logger.time=e;for(let a=0;a<n.length;a+=2)if(i=n[a]&127,s=n[a+1]&127,!(i===0&&s===0)){if(this.logger.log(3,"["+co([n[a],n[a+1]])+"] -> ("+co([i,s])+")"),r=this.parseCmd(i,s),r||(r=this.parseMidrow(i,s)),r||(r=this.parsePAC(i,s)),r||(r=this.parseBackgroundAttributes(i,s)),!r&&(o=this.parseChars(i,s),o)){const l=this.currentChannel;l&&l>0?this.channels[l].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!r&&!o&&this.logger.log(2,"Couldn't parse cleaned data "+co([i,s])+" orig: "+co([n[a],n[a+1]]))}}parseCmd(e,n){const{cmdHistory:r}=this,i=(e===20||e===28||e===21||e===29)&&n>=32&&n<=47,s=(e===23||e===31)&&n>=33&&n<=35;if(!(i||s))return!1;if(Sw(e,n,r))return fa(null,null,r),this.logger.log(3,"Repeated command ("+co([e,n])+") is dropped"),!0;const o=e===20||e===21||e===23?1:2,a=this.channels[o];return e===20||e===21||e===28||e===29?n===32?a.ccRCL():n===33?a.ccBS():n===34?a.ccAOF():n===35?a.ccAON():n===36?a.ccDER():n===37?a.ccRU(2):n===38?a.ccRU(3):n===39?a.ccRU(4):n===40?a.ccFON():n===41?a.ccRDC():n===42?a.ccTR():n===43?a.ccRTD():n===44?a.ccEDM():n===45?a.ccCR():n===46?a.ccENM():n===47&&a.ccEOC():a.ccTO(n-32),fa(e,n,r),this.currentChannel=o,!0}parseMidrow(e,n){let r=0;if((e===17||e===25)&&n>=32&&n<=47){if(e===17?r=1:r=2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[r];return i?(i.ccMIDROW(n),this.logger.log(3,"MIDROW ("+co([e,n])+")"),!0):!1}return!1}parsePAC(e,n){let r;const i=this.cmdHistory,s=(e>=17&&e<=23||e>=25&&e<=31)&&n>=64&&n<=127,o=(e===16||e===24)&&n>=64&&n<=95;if(!(s||o))return!1;if(Sw(e,n,i))return fa(null,null,i),!0;const a=e<=23?1:2;n>=64&&n<=95?r=a===1?uq[e]:dq[e]:r=a===1?cq[e]:fq[e];const l=this.channels[a];return l?(l.setPAC(this.interpretPAC(r,n)),fa(e,n,i),this.currentChannel=a,!0):!1}interpretPAC(e,n){let r;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return n>95?r=n-96:r=n-64,i.underline=(r&1)===1,r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((r-16)/2)*4,i}parseChars(e,n){let r,i=null,s=null;if(e>=25?(r=2,s=e-8):(r=1,s=e),s>=17&&s<=19){let o;s===17?o=n+80:s===18?o=n+112:o=n+144,this.logger.log(2,"Special char '"+gP(o)+"' in channel "+r),i=[o]}else e>=32&&e<=127&&(i=n===0?[e]:[e,n]);if(i){const o=co(i);this.logger.log(3,"Char codes =  "+o.join(",")),fa(e,n,this.cmdHistory)}return i}parseBackgroundAttributes(e,n){const r=(e===16||e===24)&&n>=32&&n<=47,i=(e===23||e===31)&&n>=45&&n<=47;if(!(r||i))return!1;let s;const o={};e===16||e===24?(s=Math.floor((n-32)/2),o.background=hq[s],n%2===1&&(o.background=o.background+"_semi")):n===45?o.background="transparent":(o.foreground="black",n===47&&(o.underline=!0));const a=e<=23?1:2;return this.channels[a].setBkgData(o),fa(e,n,this.cmdHistory),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const n=this.channels[e];n&&n.reset()}this.cmdHistory=Ew()}cueSplitAtTime(e){for(let n=0;n<this.channels.length;n++){const r=this.channels[n];r&&r.cueSplitAtTime(e)}}}function fa(t,e,n){n.a=t,n.b=e}function Sw(t,e,n){return n.a===t&&n.b===e}function Ew(){return{a:null,b:null}}class Hd{constructor(e,n){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=n}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,n,r){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=n,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var BS=function(){if(ll!=null&&ll.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function n(a,l){if(typeof l!="string"||!Array.isArray(a))return!1;const u=l.toLowerCase();return~a.indexOf(u)?u:!1}function r(a){return n(t,a)}function i(a){return n(e,a)}function s(a,...l){let u=1;for(;u<arguments.length;u++){const c=arguments[u];for(const d in c)a[d]=c[d]}return a}function o(a,l,u){const c=this,d={enumerable:!0};c.hasBeenReset=!1;let f="",m=!1,h=a,p=l,v=u,y=null,g="",x=!0,b="auto",E="start",T=50,w="middle",_=50,k="middle";Object.defineProperty(c,"id",s({},d,{get:function(){return f},set:function(L){f=""+L}})),Object.defineProperty(c,"pauseOnExit",s({},d,{get:function(){return m},set:function(L){m=!!L}})),Object.defineProperty(c,"startTime",s({},d,{get:function(){return h},set:function(L){if(typeof L!="number")throw new TypeError("Start time must be set to a number.");h=L,this.hasBeenReset=!0}})),Object.defineProperty(c,"endTime",s({},d,{get:function(){return p},set:function(L){if(typeof L!="number")throw new TypeError("End time must be set to a number.");p=L,this.hasBeenReset=!0}})),Object.defineProperty(c,"text",s({},d,{get:function(){return v},set:function(L){v=""+L,this.hasBeenReset=!0}})),Object.defineProperty(c,"region",s({},d,{get:function(){return y},set:function(L){y=L,this.hasBeenReset=!0}})),Object.defineProperty(c,"vertical",s({},d,{get:function(){return g},set:function(L){const P=r(L);if(P===!1)throw new SyntaxError("An invalid or illegal string was specified.");g=P,this.hasBeenReset=!0}})),Object.defineProperty(c,"snapToLines",s({},d,{get:function(){return x},set:function(L){x=!!L,this.hasBeenReset=!0}})),Object.defineProperty(c,"line",s({},d,{get:function(){return b},set:function(L){if(typeof L!="number"&&L!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");b=L,this.hasBeenReset=!0}})),Object.defineProperty(c,"lineAlign",s({},d,{get:function(){return E},set:function(L){const P=i(L);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");E=P,this.hasBeenReset=!0}})),Object.defineProperty(c,"position",s({},d,{get:function(){return T},set:function(L){if(L<0||L>100)throw new Error("Position must be between 0 and 100.");T=L,this.hasBeenReset=!0}})),Object.defineProperty(c,"positionAlign",s({},d,{get:function(){return w},set:function(L){const P=i(L);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");w=P,this.hasBeenReset=!0}})),Object.defineProperty(c,"size",s({},d,{get:function(){return _},set:function(L){if(L<0||L>100)throw new Error("Size must be between 0 and 100.");_=L,this.hasBeenReset=!0}})),Object.defineProperty(c,"align",s({},d,{get:function(){return k},set:function(L){const P=i(L);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");k=P,this.hasBeenReset=!0}})),c.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o}();class yq{decode(e,n){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function vP(t){function e(r,i,s,o){return(r|0)*3600+(i|0)*60+(s|0)+parseFloat(o||0)}const n=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?e(n[2],n[3],0,n[4]):e(n[1],n[2],n[3],n[4]):null}class vq{constructor(){this.values=Object.create(null)}set(e,n){!this.get(e)&&n!==""&&(this.values[e]=n)}get(e,n,r){return r?this.has(e)?this.values[e]:n[r]:this.has(e)?this.values[e]:n}has(e){return e in this.values}alt(e,n,r){for(let i=0;i<r.length;++i)if(n===r[i]){this.set(e,n);break}}integer(e,n){/^-?\d+$/.test(n)&&this.set(e,parseInt(n,10))}percent(e,n){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(n)){const r=parseFloat(n);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function xP(t,e,n,r){const i=r?t.split(r):[t];for(const s in i){if(typeof i[s]!="string")continue;const o=i[s].split(n);if(o.length!==2)continue;const a=o[0],l=o[1];e(a,l)}}const Iy=new BS(0,0,""),zd=Iy.align==="middle"?"middle":"center";function xq(t,e,n){const r=t;function i(){const a=vP(t);if(a===null)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),a}function s(a,l){const u=new vq;xP(a,function(f,m){let h;switch(f){case"region":for(let p=n.length-1;p>=0;p--)if(n[p].id===m){u.set(f,n[p].region);break}break;case"vertical":u.alt(f,m,["rl","lr"]);break;case"line":h=m.split(","),u.integer(f,h[0]),u.percent(f,h[0])&&u.set("snapToLines",!1),u.alt(f,h[0],["auto"]),h.length===2&&u.alt("lineAlign",h[1],["start",zd,"end"]);break;case"position":h=m.split(","),u.percent(f,h[0]),h.length===2&&u.alt("positionAlign",h[1],["start",zd,"end","line-left","line-right","auto"]);break;case"size":u.percent(f,m);break;case"align":u.alt(f,m,["start",zd,"end","left","right"]);break}},/:/,/\s/),l.region=u.get("region",null),l.vertical=u.get("vertical","");let c=u.get("line","auto");c==="auto"&&Iy.line===-1&&(c=-1),l.line=c,l.lineAlign=u.get("lineAlign","start"),l.snapToLines=u.get("snapToLines",!0),l.size=u.get("size",100),l.align=u.get("align",zd);let d=u.get("position","auto");d==="auto"&&Iy.position===50&&(d=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=d}function o(){t=t.replace(/^\s+/,"")}if(o(),e.startTime=i(),o(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);t=t.slice(3),o(),e.endTime=i(),o(),s(t,e)}function SP(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class Sq{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new yq,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));function r(){let s=n.buffer,o=0;for(s=SP(s);o<s.length&&s[o]!=="\r"&&s[o]!==`
`;)++o;const a=s.slice(0,o);return s[o]==="\r"&&++o,s[o]===`
`&&++o,n.buffer=s.slice(o),a}function i(s){xP(s,function(o,a){},/:/)}try{let s="";if(n.state==="INITIAL"){if(!/\r\n|\n/.test(n.buffer))return this;s=r();const a=s.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(a!=null&&a[0]))throw new Error("Malformed WebVTT signature.");n.state="HEADER"}let o=!1;for(;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:s=r(),n.state){case"HEADER":/:/.test(s)?i(s):s||(n.state="ID");continue;case"NOTE":s||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){n.state="NOTE";break}if(!s)continue;if(n.cue=new BS(0,0,""),n.state="CUE",s.indexOf("-->")===-1){n.cue.id=s;continue}case"CUE":if(!n.cue){n.state="BADCUE";continue}try{xq(s,n.cue,n.regionList)}catch{n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":{const a=s.indexOf("-->")!==-1;if(!s||a&&(o=!0)){n.oncue&&n.cue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}if(n.cue===null)continue;n.cue.text&&(n.cue.text+=`
`),n.cue.text+=s}continue;case"BADCUE":s||(n.state="ID")}}}catch{n.state==="CUETEXT"&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state=n.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(n){e.onparsingerror&&e.onparsingerror(n)}return e.onflush&&e.onflush(),this}}const Eq=/\r\n|\n\r|\n|\r/g,Rg=function(e,n,r=0){return e.slice(r,r+n.length)===n},bq=function(e){let n=parseInt(e.slice(-3));const r=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!re(n)||!re(r)||!re(i)||!re(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return n+=1e3*r,n+=60*1e3*i,n+=60*60*1e3*s,n},Ag=function(e){let n=5381,r=e.length;for(;r;)n=n*33^e.charCodeAt(--r);return(n>>>0).toString()};function US(t,e,n){return Ag(t.toString())+Ag(e.toString())+Ag(n)}const Tq=function(e,n,r){let i=e[n],s=e[i.prevCC];if(!s||!s.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(o=s)!=null&&o.new;){var o;e.ccOffset+=i.start-s.start,i.new=!1,i=s,s=e[i.prevCC]}e.presentationOffset=r};function wq(t,e,n,r,i,s,o){const a=new Sq,l=Ei(new Uint8Array(t)).trim().replace(Eq,`
`).split(`
`),u=[],c=e?V7(e.baseTime,e.timescale):0;let d="00:00.000",f=0,m=0,h,p=!0;a.oncue=function(v){const y=n[r];let g=n.ccOffset;const x=(f-c)/9e4;if(y!=null&&y.new&&(m!==void 0?g=n.ccOffset=y.start:Tq(n,r,x)),x){if(!e){h=new Error("Missing initPTS for VTT MPEGTS");return}g=x-n.presentationOffset}const b=v.endTime-v.startTime,E=cr((v.startTime+g-m)*9e4,i*9e4)/9e4;v.startTime=Math.max(E,0),v.endTime=Math.max(E+b,0);const T=v.text.trim();v.text=decodeURIComponent(encodeURIComponent(T)),v.id||(v.id=US(v.startTime,v.endTime,T)),v.endTime>0&&u.push(v)},a.onparsingerror=function(v){h=v},a.onflush=function(){if(h){o(h);return}s(u)},l.forEach(v=>{if(p)if(Rg(v,"X-TIMESTAMP-MAP=")){p=!1,v.slice(16).split(",").forEach(y=>{Rg(y,"LOCAL:")?d=y.slice(6):Rg(y,"MPEGTS:")&&(f=parseInt(y.slice(7)))});try{m=bq(d)/1e3}catch(y){h=y}return}else v===""&&(p=!1);a.parse(v+`
`)}),a.flush()}const _g="stpp.ttml.im1t",EP=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,bP=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Rq={left:"start",center:"center",right:"end",start:"start",end:"end"};function bw(t,e,n,r){const i=xe(new Uint8Array(t),["mdat"]);if(i.length===0){r(new Error("Could not parse IMSC1 mdat"));return}const s=i.map(a=>Ei(a)),o=z7(e.baseTime,1,e.timescale);try{s.forEach(a=>n(Aq(a,o)))}catch(a){r(a)}}function Aq(t,e){const i=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(s).reduce((d,f)=>(d[f]=i.getAttribute(`ttp:${f}`)||s[f],d),{}),a=i.getAttribute("xml:space")!=="preserve",l=Tw(Cg(i,"styling","style")),u=Tw(Cg(i,"layout","region")),c=Cg(i,"body","[begin]");return[].map.call(c,d=>{const f=TP(d,a);if(!f||!d.hasAttribute("begin"))return null;const m=kg(d.getAttribute("begin"),o),h=kg(d.getAttribute("dur"),o);let p=kg(d.getAttribute("end"),o);if(m===null)throw ww(d);if(p===null){if(h===null)throw ww(d);p=m+h}const v=new BS(m-e,p-e,f);v.id=US(v.startTime,v.endTime,v.text);const y=u[d.getAttribute("region")],g=l[d.getAttribute("style")],x=_q(y,g,l),{textAlign:b}=x;if(b){const E=Rq[b];E&&(v.lineAlign=E),v.align=b}return Mt(v,x),v}).filter(d=>d!==null)}function Cg(t,e,n){const r=t.getElementsByTagName(e)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function Tw(t){return t.reduce((e,n)=>{const r=n.getAttribute("xml:id");return r&&(e[r]=n),e},{})}function TP(t,e){return[].slice.call(t.childNodes).reduce((n,r,i)=>{var s;return r.nodeName==="br"&&i?n+`
`:(s=r.childNodes)!=null&&s.length?TP(r,e):e?n+r.textContent.trim().replace(/\s+/g," "):n+r.textContent},"")}function _q(t,e,n){const r="http://www.w3.org/ns/ttml#styling";let i=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return o&&n.hasOwnProperty(o)&&(i=n[o]),s.reduce((a,l)=>{const u=Lg(e,r,l)||Lg(t,r,l)||Lg(i,r,l);return u&&(a[l]=u),a},{})}function Lg(t,e,n){return t&&t.hasAttributeNS(e,n)?t.getAttributeNS(e,n):null}function ww(t){return new Error(`Could not parse ttml timestamp ${t}`)}function kg(t,e){if(!t)return null;let n=vP(t);return n===null&&(EP.test(t)?n=Cq(t,e):bP.test(t)&&(n=Lq(t,e))),n}function Cq(t,e){const n=EP.exec(t),r=(n[4]|0)+(n[5]|0)/e.subFrameRate;return(n[1]|0)*3600+(n[2]|0)*60+(n[3]|0)+r/e.frameRate}function Lq(t,e){const n=bP.exec(t),r=Number(n[1]);switch(n[2]){case"h":return r*3600;case"m":return r*60;case"ms":return r*1e3;case"f":return r/e.frameRate;case"t":return r/e.tickRate}return r}class kq{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Aw(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(R.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(R.FRAG_LOADING,this.onFragLoading,this),e.on(R.FRAG_LOADED,this.onFragLoaded,this),e.on(R.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(R.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(R.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(R.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(R.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(R.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(R.FRAG_LOADING,this.onFragLoading,this),e.off(R.FRAG_LOADED,this.onFragLoaded,this),e.off(R.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(R.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(R.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(R.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(R.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new Hd(this,"textTrack1"),n=new Hd(this,"textTrack2"),r=new Hd(this,"textTrack3"),i=new Hd(this,"textTrack4");this.cea608Parser1=new xw(1,e,n),this.cea608Parser2=new xw(3,r,i)}}addCues(e,n,r,i,s){let o=!1;for(let a=s.length;a--;){const l=s[a],u=Pq(l[0],l[1],n,r);if(u>=0&&(l[0]=Math.min(l[0],n),l[1]=Math.max(l[1],r),o=!0,u/(r-n)>.5))return}if(o||s.push([n,r]),this.config.renderTextTracksNatively){const a=this.captionsTracks[e];this.Cues.newCue(a,n,r,i)}else{const a=this.Cues.newCue(null,n,r,i);this.hls.trigger(R.CUES_PARSED,{type:"captions",cues:a,track:e})}}onInitPtsFound(e,{frag:n,id:r,initPTS:i,timescale:s}){const{unparsedVttFrags:o}=this;r==="main"&&(this.initPTS[n.cc]={baseTime:i,timescale:s}),o.length&&(this.unparsedVttFrags=[],o.forEach(a=>{this.onFragLoaded(R.FRAG_LOADED,a)}))}getExistingTrack(e,n){const{media:r}=this;if(r)for(let i=0;i<r.textTracks.length;i++){const s=r.textTracks[i];if(Rw(s,{name:e,lang:n,attrs:{}}))return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:n,captionsTracks:r,media:i}=this,{label:s,languageCode:o}=n[e],a=this.getExistingTrack(s,o);if(a)r[e]=a,Pa(r[e]),zk(r[e],i);else{const l=this.createTextTrack("captions",s,o);l&&(l[e]=!0,r[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const n=this.captionsProperties[e];if(!n)return;const r=n.label,i={_id:e,label:r,kind:"captions",default:n.media?!!n.media.default:!1,closedCaptions:n.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(R.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,n,r){const i=this.media;if(i)return i.addTextTrack(e,n,r)}onMediaAttaching(e,n){this.media=n.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(n=>{Pa(e[n]),delete e[n]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Aw(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const n=e.textTracks;if(n)for(let r=0;r<n.length;r++)Pa(n[r])}onSubtitleTracksUpdated(e,n){const r=n.subtitleTracks||[],i=r.some(s=>s.textCodec===_g);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(mP(this.tracks,r)){this.tracks=r;return}if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const o=this.media,a=o?Ef(o.textTracks):null;if(this.tracks.forEach((l,u)=>{let c;if(a){let d=null;for(let f=0;f<a.length;f++)if(a[f]&&Rw(a[f],l)){d=a[f],a[f]=null;break}d&&(c=d)}if(c)Pa(c);else{const d=wP(l);c=this.createTextTrack(d,l.name,l.lang),c&&(c.mode="disabled")}c&&this.textTracks.push(c)}),a!=null&&a.length){const l=a.filter(u=>u!==null).map(u=>u.label);l.length&&D.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const o=this.tracks.map(a=>({label:a.name,kind:a.type.toLowerCase(),default:a.default,subtitleTrack:a}));this.hls.trigger(R.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:o})}}}onManifestLoaded(e,n){this.config.enableCEA708Captions&&n.captions&&n.captions.forEach(r=>{const i=/(?:CC|SERVICE)([1-4])/.exec(r.instreamId);if(!i)return;const s=`textTrack${i[1]}`,o=this.captionsProperties[s];o&&(o.label=r.name,r.lang&&(o.languageCode=r.lang),o.media=r)})}closedCaptionsForLevel(e){const n=this.hls.levels[e.level];return n==null?void 0:n.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,n){this.initCea608Parsers();const{cea608Parser1:r,cea608Parser2:i,lastCc:s,lastSn:o,lastPartIndex:a}=this;if(!(!this.enabled||!r||!i)&&n.frag.type===ce.MAIN){var l,u;const{cc:c,sn:d}=n.frag,f=(l=n==null||(u=n.part)==null?void 0:u.index)!=null?l:-1;d===o+1||d===o&&f===a+1||c===s||(r.reset(),i.reset()),this.lastCc=c,this.lastSn=d,this.lastPartIndex=f}}onFragLoaded(e,n){const{frag:r,payload:i}=n;if(r.type===ce.SUBTITLE)if(i.byteLength){const s=r.decryptdata,o="stats"in n;if(s==null||!s.encrypted||o){const a=this.tracks[r.level],l=this.vttCCs;l[r.cc]||(l[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),a&&a.textCodec===_g?this._parseIMSC1(r,i):this._parseVTTs(n)}}else this.hls.trigger(R.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,n){const r=this.hls;bw(n,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),r.trigger(R.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{D.log(`Failed to parse IMSC1: ${i}`),r.trigger(R.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var n;const{frag:r,payload:i}=e,{initPTS:s,unparsedVttFrags:o}=this,a=s.length-1;if(!s[r.cc]&&a===-1){o.push(e);return}const l=this.hls,u=(n=r.initSegment)!=null&&n.data?Ar(r.initSegment.data,new Uint8Array(i)):i;wq(u,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,c=>{this._appendCues(c,r.level),l.trigger(R.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},c=>{const d=c.message==="Missing initPTS for VTT MPEGTS";d?o.push(e):this._fallbackToIMSC1(r,i),D.log(`Failed to parse VTT cue: ${c}`),!(d&&a>r.cc)&&l.trigger(R.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:c})})}_fallbackToIMSC1(e,n){const r=this.tracks[e.level];r.textCodec||bw(n,this.initPTS[e.cc],()=>{r.textCodec=_g,this._parseIMSC1(e,n)},()=>{r.textCodec="wvtt"})}_appendCues(e,n){const r=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[n];if(!i||i.mode==="disabled")return;e.forEach(s=>Vk(i,s))}else{const i=this.tracks[n];if(!i)return;const s=i.default?"default":"subtitles"+n;r.trigger(R.CUES_PARSED,{type:"subtitles",cues:e,track:s})}}onFragDecrypted(e,n){const{frag:r}=n;r.type===ce.SUBTITLE&&this.onFragLoaded(R.FRAG_LOADED,n)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,n){this.initCea608Parsers();const{cea608Parser1:r,cea608Parser2:i}=this;if(!this.enabled||!r||!i)return;const{frag:s,samples:o}=n;if(!(s.type===ce.MAIN&&this.closedCaptionsForLevel(s)==="NONE"))for(let a=0;a<o.length;a++){const l=o[a].bytes;if(l){const u=this.extractCea608Data(l);r.addData(o[a].pts,u[0]),i.addData(o[a].pts,u[1])}}}onBufferFlushing(e,{startOffset:n,endOffset:r,endOffsetSubtitles:i,type:s}){const{media:o}=this;if(!(!o||o.currentTime<r)){if(!s||s==="video"){const{captionsTracks:a}=this;Object.keys(a).forEach(l=>Ry(a[l],n,r))}if(this.config.renderTextTracksNatively&&n===0&&i!==void 0){const{textTracks:a}=this;Object.keys(a).forEach(l=>Ry(a[l],n,i))}}}extractCea608Data(e){const n=[[],[]],r=e[0]&31;let i=2;for(let s=0;s<r;s++){const o=e[i++],a=127&e[i++],l=127&e[i++];if(a===0&&l===0)continue;if((4&o)!==0){const c=3&o;(c===0||c===1)&&(n[c].push(a),n[c].push(l))}}return n}}function wP(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function Rw(t,e){return!!t&&t.kind===wP(e)&&Py(e,t)}function Pq(t,e,n,r){return Math.min(e,r)-Math.max(t,n)}function Aw(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class jS{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(R.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(R.MANIFEST_PARSED,this.onManifestParsed,this),e.on(R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(R.BUFFER_CODECS,this.onBufferCodecs,this),e.on(R.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(R.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(R.MANIFEST_PARSED,this.onManifestParsed,this),e.off(R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(R.BUFFER_CODECS,this.onBufferCodecs,this),e.off(R.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,n){const r=this.hls.levels[n.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,n){this.media=n.media instanceof HTMLVideoElement?n.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,n){const r=this.hls;this.restrictedLevels=[],this.firstLevel=n.firstLevel,r.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onLevelsUpdated(e,n){this.timer&&re(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,n){this.hls.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const n=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&D.log(`Setting autoLevelCapping to ${r}: ${e[r].height}p@${e[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),n.autoLevelCapping=r,n.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=n.autoLevelCapping}}}getMaxLevel(e){const n=this.hls.levels;if(!n.length)return-1;const r=n.filter((i,s)=>this.isLevelAllowed(i)&&s<=e);return this.clientRect=null,jS.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,n={width:0,height:0};if(e){const r=e.getBoundingClientRect();n.width=r.width,n.height=r.height,!n.width&&!n.height&&(n.width=r.right-r.left||e.width||0,n.height=r.bottom-r.top||e.height||0)}return this.clientRect=n,n}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(r=>e.bitrate===r.bitrate&&e.width===r.width&&e.height===r.height)}static getMaxLevelByMediaSize(e,n,r){if(!(e!=null&&e.length))return-1;const i=(a,l)=>l?a.width!==l.width||a.height!==l.height:!0;let s=e.length-1;const o=Math.max(n,r);for(let a=0;a<e.length;a+=1){const l=e[a];if((l.width>=o||l.height>=o)&&i(l,e[a+1])){s=a;break}}return s}}class Iq{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(R.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(R.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,n){const r=this.hls.config;if(r.capLevelOnFPSDrop){const i=n.media instanceof self.HTMLVideoElement?n.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}checkFPS(e,n,r){const i=performance.now();if(n){if(this.lastTime){const s=i-this.lastTime,o=r-this.lastDroppedFrames,a=n-this.lastDecodedFrames,l=1e3*o/s,u=this.hls;if(u.trigger(R.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:r}),l>0&&o>u.config.fpsDroppedMonitoringThreshold*a){let c=u.currentLevel;D.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=c)&&(c=c-1,u.trigger(R.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=n}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const n=e.getVideoPlaybackQuality();this.checkFPS(e,n.totalVideoFrames,n.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const Vd="[eme]";class Ha{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=Ha.CDMCleanupPromise?[Ha.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=D.debug.bind(D,Vd),this.log=D.log.bind(D,Vd),this.warn=D.warn.bind(D,Vd),this.error=D.error.bind(D,Vd),this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(R.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(R.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(R.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(R.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(R.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(R.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:n,widevineLicenseUrl:r}=this.config,i=n[e];if(i)return i.licenseUrl;if(e===lt.WIDEVINE&&r)return r;throw new Error(`no license server URL configured for key-system "${e}"`)}getServerCertificateUrl(e){const{drmSystems:n}=this.config,r=n[e];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const n=this.hls.levels,r=(o,a,l)=>!!o&&l.indexOf(o)===a,i=n.map(o=>o.audioCodec).filter(r),s=n.map(o=>o.videoCodec).filter(r);return i.length+s.length===0&&s.push("avc1.42e01e"),new Promise((o,a)=>{const l=u=>{const c=u.shift();this.getMediaKeysPromise(c,i,s).then(d=>o({keySystem:c,mediaKeys:d})).catch(d=>{u.length?l(u):d instanceof sr?a(d):a(new sr({type:he.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};l(e)})}requestMediaKeySystemAccess(e,n){const{requestMediaKeySystemAccessFunc:r}=this.config;if(typeof r!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${r}`;return kk===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return r(e,n)}getMediaKeysPromise(e,n,r){const i=z9(e,n,r,this.config.drmSystemOptions),s=this.keySystemAccessPromises[e];let o=s==null?void 0:s.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(i)}`),o=this.requestMediaKeySystemAccess(e,i);const a=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),o.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const u=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),a.mediaKeys=l.createMediaKeys().then(c=>(this.log(`Media-keys created for "${e}"`),u.then(d=>d?this.setMediaKeysServerCertificate(c,e,d):c))),a.mediaKeys.catch(c=>{this.error(`Failed to create media-keys for "${e}"}: ${c}`)}),a.mediaKeys})}return o.then(()=>s.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:n,mediaKeys:r}){this.log(`Creating key-system session "${n}" keyId: ${si.hexDump(e.keyId||[])}`);const i=r.createSession(),s={decryptdata:e,keySystem:n,mediaKeys:r,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const n=e.decryptdata;if(n.pssh){const r=this.createMediaKeySessionContext(e),i=this.getKeyIdString(n),s="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(r,s,n.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return si.hexDump(e.keyId)}updateKeySession(e,n){var r;const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${si.hexDump(((r=e.decryptdata)==null?void 0:r.keyId)||[])}
      } (data length: ${n&&n.byteLength})`),i.update(n)}selectKeySystemFormat(e){const n=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((n,r)=>{const i=fg(this.config),s=e.map(P1).filter(o=>!!o&&i.indexOf(o)!==-1);return this.getKeySystemSelectionPromise(s).then(({keySystem:o})=>{const a=I1(o);a?n(a):r(new Error(`Unable to find format for key-system "${o}"`))}).catch(r)})}loadKey(e){const n=e.keyInfo.decryptdata,r=this.getKeyIdString(n),i=`(keyId: ${r} format: "${n.keyFormat}" method: ${n.method} uri: ${n.uri})`;this.log(`Starting session for key ${i}`);let s=this.keyIdToKeySessionPromise[r];return s||(s=this.keyIdToKeySessionPromise[r]=this.getKeySystemForKeyPromise(n).then(({keySystem:o,mediaKeys:a})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(o,a).then(()=>{this.throwIfDestroyed();const l=this.createMediaKeySessionContext({keySystem:o,mediaKeys:a,decryptdata:n});return this.generateRequestWithPreferredKeySession(l,"cenc",n.pssh,"playlist-key")}))),s.catch(o=>this.handleError(o))),s}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof sr?this.hls.trigger(R.ERROR,e.data):this.hls.trigger(R.ERROR,{type:he.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const n=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[n];if(!r){const i=P1(e.keyFormat),s=i?[i]:fg(this.config);return this.attemptKeySystemAccess(s)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=fg(this.config)),e.length===0)throw new sr({type:he.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}_onMediaEncrypted(e){const{initDataType:n,initData:r}=e;if(this.debug(`"${e.type}" event: init data type: "${n}"`),r===null)return;let i,s;if(n==="sinf"&&this.config.drmSystems[lt.FAIRPLAY]){const c=$t(new Uint8Array(r));try{const d=AS(JSON.parse(c).sinf),f=$k(new Uint8Array(d));if(!f)return;i=f.subarray(8,24),s=lt.FAIRPLAY}catch{this.warn('Failed to parse sinf "encrypted" event message initData');return}}else{const c=pK(r);if(c===null)return;c.version===0&&c.systemId===Lk.WIDEVINE&&c.data&&(i=c.data.subarray(8,24)),s=H9(c.systemId)}if(!s||!i)return;const o=si.hexDump(i),{keyIdToKeySessionPromise:a,mediaKeySessions:l}=this;let u=a[o];for(let c=0;c<l.length;c++){const d=l[c],f=d.decryptdata;if(f.pssh||!f.keyId)continue;const m=si.hexDump(f.keyId);if(o===m||f.uri.replace(/-/g,"").indexOf(o)!==-1){u=a[m],delete a[m],f.pssh=new Uint8Array(r),f.keyId=i,u=a[o]=u.then(()=>this.generateRequestWithPreferredKeySession(d,n,r,"encrypted-event-key-match"));break}}u||(u=a[o]=this.getKeySystemSelectionPromise([s]).then(({keySystem:c,mediaKeys:d})=>{var f;this.throwIfDestroyed();const m=new rc("ISO-23001-7",o,(f=I1(c))!=null?f:"");return m.pssh=new Uint8Array(r),m.keyId=i,this.attemptSetMediaKeys(c,d).then(()=>{this.throwIfDestroyed();const h=this.createMediaKeySessionContext({decryptdata:m,keySystem:c,mediaKeys:d});return this.generateRequestWithPreferredKeySession(h,n,r,"encrypted-event-no-match")})})),u.catch(c=>this.handleError(c))}_onWaitingForKey(e){this.log(`"${e.type}" event`)}attemptSetMediaKeys(e,n){const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(r).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(n)});return this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),r.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>r.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(e,n,r,i){var s,o;const a=(s=this.config.drmSystems)==null||(o=s[e.keySystem])==null?void 0:o.generateRequest;if(a)try{const h=a.call(this.hls,n,r,e);if(!h)throw new Error("Invalid response from configured generateRequest filter");n=h.initDataType,r=e.decryptdata.pssh=h.initData?new Uint8Array(h.initData):null}catch(h){var l;if(this.warn(h.message),(l=this.hls)!=null&&l.config.debug)throw h}if(r===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const u=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${u} (init data type: ${n} length: ${r?r.byteLength:null})`);const c=new $S,d=e._onmessage=h=>{const p=e.mediaKeysSession;if(!p){c.emit("error",new Error("invalid state"));return}const{messageType:v,message:y}=h;this.log(`"${v}" message event for session "${p.sessionId}" message size: ${y.byteLength}`),v==="license-request"||v==="license-renewal"?this.renewLicense(e,y).catch(g=>{this.handleError(g),c.emit("error",g)}):v==="license-release"?e.keySystem===lt.FAIRPLAY&&(this.updateKeySession(e,Ty("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${v}"`)},f=e._onkeystatuseschange=h=>{if(!e.mediaKeysSession){c.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const v=e.keyStatus;c.emit("keyStatus",v),v==="expired"&&(this.warn(`${e.keySystem} expired for key ${u}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",d),e.mediaKeysSession.addEventListener("keystatuseschange",f);const m=new Promise((h,p)=>{c.on("error",p),c.on("keyStatus",v=>{v.startsWith("usable")?h():v==="output-restricted"?p(new sr({type:he.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):v==="internal-error"?p(new sr({type:he.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${v}"`)):v==="expired"?p(new Error("key expired while generating request")):this.warn(`unhandled key status change "${v}"`)})});return e.mediaKeysSession.generateRequest(n,r).then(()=>{var h;this.log(`Request generated for key-session "${(h=e.mediaKeysSession)==null?void 0:h.sessionId}" keyId: ${u}`)}).catch(h=>{throw new sr({type:he.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_NO_SESSION,error:h,fatal:!1},`Error generating key-session request: ${h}`)}).then(()=>m).catch(h=>{throw c.removeAllListeners(),this.removeSession(e),h}).then(()=>(c.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((n,r)=>{this.log(`key status change "${n}" for keyStatuses keyId: ${si.hexDump("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r))} session keyId: ${si.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=n})}fetchServerCertificate(e){const n=this.config,r=n.loader,i=new r(n),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching server certificate for "${e}"`),new Promise((o,a)=>{const l={responseType:"arraybuffer",url:s},u=n.certLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,m,h,p)=>{o(f.data)},onError:(f,m,h,p)=>{a(new sr({type:he.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:h,response:Xt({url:l.url,data:void 0},f)},`"${e}" certificate request failed (${s}). Status: ${f.code} (${f.text})`))},onTimeout:(f,m,h)=>{a(new sr({type:he.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:h,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(f,m,h)=>{a(new Error("aborted"))}};i.load(l,c,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,n,r){return new Promise((i,s)=>{e.setServerCertificate(r).then(o=>{this.log(`setServerCertificate ${o?"success":"not supported by CDM"} (${r==null?void 0:r.byteLength}) on "${n}"`),i(e)}).catch(o=>{s(new sr({type:he.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:o,fatal:!0},o.message))})})}renewLicense(e,n){return this.requestLicense(e,new Uint8Array(n)).then(r=>this.updateKeySession(e,new Uint8Array(r)).catch(i=>{throw new sr({type:he.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:i,fatal:!0},i.message)}))}unpackPlayReadyKeyMessage(e,n){const r=String.fromCharCode.apply(null,new Uint16Array(n.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),n;const i=new DOMParser().parseFromString(r,"application/xml"),s=i.querySelectorAll("HttpHeader");if(s.length>0){let c;for(let d=0,f=s.length;d<f;d++){var o,a;c=s[d];const m=(o=c.querySelector("name"))==null?void 0:o.textContent,h=(a=c.querySelector("value"))==null?void 0:a.textContent;m&&h&&e.setRequestHeader(m,h)}}const l=i.querySelector("Challenge"),u=l==null?void 0:l.textContent;if(!u)throw new Error("Cannot find <Challenge> in key message");return Ty(atob(u))}setupLicenseXHR(e,n,r,i){const s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!r.decryptdata)throw new Error("Key removed");return s.call(this.hls,e,n,r,i)}).catch(o=>{if(!r.decryptdata)throw o;return e.open("POST",n,!0),s.call(this.hls,e,n,r,i)}).then(o=>(e.readyState||e.open("POST",n,!0),{xhr:e,licenseChallenge:o||i})):(e.open("POST",n,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,n){const r=this.config.keyLoadPolicy.default;return new Promise((i,s)=>{const o=this.getLicenseServerUrl(e.keySystem);this.log(`Sending license request to URL: ${o}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(a.readyState===4)if(a.status===200){this._requestLicenseFailureCount=0;let l=a.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const u=this.config.licenseResponseCallback;if(u)try{l=u.call(this.hls,a,o,e)}catch(c){this.error(c)}i(l)}else{const l=r.errorRetry,u=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>u||a.status>=400&&a.status<500)s(new sr({type:he.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:o,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${o}). Status: ${a.status} (${a.statusText})`));else{const c=u-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${c} attempts left`),this.requestLicense(e,n).then(i,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,o,e,n).then(({xhr:l,licenseChallenge:u})=>{e.keySystem==lt.PLAYREADY&&(u=this.unpackPlayReadyKeyMessage(l,u)),l.send(u)})})}onMediaAttached(e,n){if(!this.config.emeEnabled)return;const r=n.media;this.media=r,r.addEventListener("encrypted",this.onMediaEncrypted),r.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,n=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},rc.clearKeyUriToKeyIdMap();const r=n.length;Ha.CDMCleanupPromise=Promise.all(n.map(i=>this.removeSession(i)).concat(e==null?void 0:e.setMediaKeys(null).catch(i=>{this.log(`Could not clear media keys: ${i}`)}))).then(()=>{r&&(this.log("finished closing key sessions and clearing media keys"),n.length=0)}).catch(i=>{this.log(`Could not close sessions and clear media keys: ${i}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:n}){if(!(!n||!this.config.emeEnabled)&&!this.keyFormatPromise){const r=n.reduce((i,s)=>(i.indexOf(s.keyFormat)===-1&&i.push(s.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)}}removeSession(e){const{mediaKeysSession:n,licenseXhr:r}=e;if(n){this.log(`Remove licenses and keys and close session ${n.sessionId}`),e._onmessage&&(n.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(n.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);return i>-1&&this.mediaKeySessions.splice(i,1),n.remove().catch(s=>{this.log(`Could not remove session: ${s}`)}).then(()=>n.close()).catch(s=>{this.log(`Could not close session: ${s}`)})}}}Ha.CDMCleanupPromise=void 0;class sr extends Error{constructor(e,n){super(n),this.data=void 0,e.error||(e.error=new Error(n)),this.data=e,e.err=e.error}}var gn;(function(t){t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.MUXED="av",t.INIT="i",t.CAPTION="c",t.TIMED_TEXT="tt",t.KEY="k",t.OTHER="o"})(gn||(gn={}));var Dy;(function(t){t.DASH="d",t.HLS="h",t.SMOOTH="s",t.OTHER="o"})(Dy||(Dy={}));var ko;(function(t){t.OBJECT="CMCD-Object",t.REQUEST="CMCD-Request",t.SESSION="CMCD-Session",t.STATUS="CMCD-Status"})(ko||(ko={}));const Dq={[ko.OBJECT]:["br","d","ot","tb"],[ko.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[ko.SESSION]:["cid","pr","sf","sid","st","v"],[ko.STATUS]:["bs","rtp"]};class dl{constructor(e,n){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map(r=>r instanceof dl?r:new dl(r))),this.value=e,this.params=n}}class RP{constructor(e){this.description=void 0,this.description=e}}const Oq="Dict";function Mq(t){return Array.isArray(t)?JSON.stringify(t):t instanceof Map?"Map{}":t instanceof Set?"Set{}":typeof t=="object"?JSON.stringify(t):String(t)}function Nq(t,e,n,r){return new Error(`failed to ${t} "${Mq(e)}" as ${n}`,{cause:r})}const _w="Bare Item",Fq="Boolean",$q="Byte Sequence",Bq="Decimal",Uq="Integer";function jq(t){return t<-999999999999999||999999999999999<t}const Hq=/[\x00-\x1f\x7f]+/,zq="Token",Vq="Key";function Ri(t,e,n){return Nq("serialize",t,e,n)}function Gq(t){if(typeof t!="boolean")throw Ri(t,Fq);return t?"?1":"?0"}function Wq(t){return btoa(String.fromCharCode(...t))}function Kq(t){if(ArrayBuffer.isView(t)===!1)throw Ri(t,$q);return`:${Wq(t)}:`}function AP(t){if(jq(t))throw Ri(t,Uq);return t.toString()}function qq(t){return`@${AP(t.getTime()/1e3)}`}function _P(t,e){if(t<0)return-_P(-t,e);const n=Math.pow(10,e);if(Math.abs(t*n%1-.5)<Number.EPSILON){const i=Math.floor(t*n);return(i%2===0?i:i+1)/n}else return Math.round(t*n)/n}function Yq(t){const e=_P(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Ri(t,Bq);const n=e.toString();return n.includes(".")?n:`${n}.0`}const Xq="String";function Qq(t){if(Hq.test(t))throw Ri(t,Xq);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function Jq(t){return t.description||t.toString().slice(7,-1)}function Cw(t){const e=Jq(t);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Ri(e,zq);return e}function Oy(t){switch(typeof t){case"number":if(!re(t))throw Ri(t,_w);return Number.isInteger(t)?AP(t):Yq(t);case"string":return Qq(t);case"symbol":return Cw(t);case"boolean":return Gq(t);case"object":if(t instanceof Date)return qq(t);if(t instanceof Uint8Array)return Kq(t);if(t instanceof RP)return Cw(t);default:throw Ri(t,_w)}}function My(t){if(/^[a-z*][a-z0-9\-_.*]*$/.test(t)===!1)throw Ri(t,Vq);return t}function HS(t){return t==null?"":Object.entries(t).map(([e,n])=>n===!0?`;${My(e)}`:`;${My(e)}=${Oy(n)}`).join("")}function CP(t){return t instanceof dl?`${Oy(t.value)}${HS(t.params)}`:Oy(t)}function Zq(t){return`(${t.value.map(CP).join(" ")})${HS(t.params)}`}function eY(t,e={whitespace:!0}){if(typeof t!="object")throw Ri(t,Oq);const n=t instanceof Map?t.entries():Object.entries(t),r=e!=null&&e.whitespace?" ":"";return Array.from(n).map(([i,s])=>{s instanceof dl||(s=new dl(s));let o=My(i);return s.value===!0?o+=HS(s.params):(o+="=",Array.isArray(s.value)?o+=Zq(s):o+=CP(s)),o}).join(`,${r}`)}function tY(t,e){return eY(t,e)}const nY=t=>t==="ot"||t==="sf"||t==="st",rY=t=>typeof t=="number"?re(t):t!=null&&t!==""&&t!==!1;function iY(t,e){const n=new URL(t),r=new URL(e);if(n.origin!==r.origin)return t;const i=n.pathname.split("/").slice(1),s=r.pathname.split("/").slice(1,-1);for(;i[0]===s[0];)i.shift(),s.shift();for(;s.length;)s.shift(),i.unshift("..");return i.join("/")}function sY(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),n=e.toString();return URL.revokeObjectURL(e),n.slice(n.lastIndexOf("/")+1)}catch{let n=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const s=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(i=="x"?s:s&3|8).toString(16)})}}}const Af=t=>Math.round(t),oY=(t,e)=>(e!=null&&e.baseUrl&&(t=iY(t,e.baseUrl)),encodeURIComponent(t)),Gd=t=>Af(t/100)*100,aY={br:Af,d:Af,bl:Gd,dl:Gd,mtp:Gd,nor:oY,rtp:Gd,tb:Af};function lY(t,e){const n={};if(t==null||typeof t!="object")return n;const r=Object.keys(t).sort(),i=Mt({},aY,e==null?void 0:e.formatters),s=e==null?void 0:e.filter;return r.forEach(o=>{if(s!=null&&s(o))return;let a=t[o];const l=i[o];l&&(a=l(a,e)),!(o==="v"&&a===1)&&(o=="pr"&&a===1||rY(a)&&(nY(o)&&typeof a=="string"&&(a=new RP(a)),n[o]=a))}),n}function LP(t,e={}){return t?tY(lY(t,e),Mt({whitespace:!1},e)):""}function uY(t,e={}){if(!t)return{};const n=Object.entries(t),r=Object.entries(Dq).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),i=n.reduce((s,o)=>{var a,l;const[u,c]=o,d=((a=r.find(f=>f[1].includes(u)))==null?void 0:a[0])||ko.REQUEST;return(l=s[d])!=null||(s[d]={}),s[d][u]=c,s},{});return Object.entries(i).reduce((s,[o,a])=>(s[o]=LP(a,e),s),{})}function cY(t,e,n){return Mt(t,uY(e,n))}const dY="CMCD";function fY(t,e={}){if(!t)return"";const n=LP(t,e);return`${dY}=${encodeURIComponent(n)}`}const Lw=/CMCD=[^&#]+/;function hY(t,e,n){const r=fY(e,n);if(!r)return t;if(Lw.test(t))return t.replace(Lw,r);const i=t.includes("?")?"&":"?";return`${t}${i}${r}`}class pY{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:gn.MANIFEST,su:!this.initialized})}catch(s){D.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=i=>{try{const s=i.frag,o=this.hls.levels[s.level],a=this.getObjectType(s),l={d:s.duration*1e3,ot:a};(a===gn.VIDEO||a===gn.AUDIO||a==gn.MUXED)&&(l.br=o.bitrate/1e3,l.tb=this.getTopBandwidth(a)/1e3,l.bl=this.getBufferLength(a)),this.apply(i,l)}catch(s){D.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const n=this.config=e.config,{cmcd:r}=n;r!=null&&(n.pLoader=this.createPlaylistLoader(),n.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||sY(),this.cid=r.contentId,this.useHeaders=r.useHeaders===!0,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(R.MEDIA_DETACHED,this.onMediaDetached,this),e.on(R.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(R.MEDIA_DETACHED,this.onMediaDetached,this),e.off(R.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,n){var r,i;this.audioBuffer=(r=n.tracks.audio)==null?void 0:r.buffer,this.videoBuffer=(i=n.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:Dy.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,n={}){Mt(n,this.createData());const r=n.ot===gn.INIT||n.ot===gn.VIDEO||n.ot===gn.MUXED;this.starved&&r&&(n.bs=!0,n.su=!0,this.starved=!1),n.su==null&&(n.su=this.buffering);const{includeKeys:i}=this;i&&(n=Object.keys(n).reduce((s,o)=>(i.includes(o)&&(s[o]=n[o]),s),{})),this.useHeaders?(e.headers||(e.headers={}),cY(e.headers,n)):e.url=hY(e.url,n)}getObjectType(e){const{type:n}=e;if(n==="subtitle")return gn.TIMED_TEXT;if(e.sn==="initSegment")return gn.INIT;if(n==="audio")return gn.AUDIO;if(n==="main")return this.hls.audioTracks.length?gn.VIDEO:gn.MUXED}getTopBandwidth(e){let n=0,r;const i=this.hls;if(e===gn.AUDIO)r=i.audioTracks;else{const s=i.maxAutoLevel,o=s>-1?s+1:i.levels.length;r=i.levels.slice(0,o)}for(const s of r)s.bitrate>n&&(n=s.bitrate);return n>0?n:NaN}getBufferLength(e){const n=this.hls.media,r=e===gn.AUDIO?this.audioBuffer:this.videoBuffer;return!r||!n?NaN:Ze.bufferInfo(r,n.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,n=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new r(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,o,a){n(s),this.loader.load(s,o,a)}}}createFragmentLoader(){const{fLoader:e}=this.config,n=this.applyFragmentData,r=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new r(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,o,a){n(s),this.loader.load(s,o,a)}}}}const mY=3e5;class gY{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=D.log.bind(D,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(R.MANIFEST_PARSED,this.onManifestParsed,this),e.on(R.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(R.MANIFEST_PARSED,this.onManifestParsed,this),e.off(R.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const n=this.levels;n&&(this.levels=n.filter(r=>r!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,n){const{contentSteering:r}=n;r!==null&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,n){this.audioTracks=n.audioTracks,this.subtitleTracks=n.subtitleTracks}onError(e,n){const{errorAction:r}=n;if((r==null?void 0:r.action)===rn.SendAlternateToPenaltyBox&&r.flags===Fr.MoveAllAlternatesMatchingHost){const i=this.levels;let s=this.pathwayPriority,o=this.pathwayId;if(n.context){const{groupId:a,pathwayId:l,type:u}=n.context;a&&i?o=this.getPathwayForGroupId(a,u,o):l&&(o=l)}o in this.penalizedPathways||(this.penalizedPathways[o]=performance.now()),!s&&i&&(s=i.reduce((a,l)=>(a.indexOf(l.pathwayId)===-1&&a.push(l.pathwayId),a),[])),s&&s.length>1&&(this.updatePathwayPriority(s),r.resolved=this.pathwayId!==o),r.resolved||D.warn(`Could not resolve ${n.details} ("${n.error.message}") with content-steering for Pathway: ${o} levels: ${i&&i.length} priorities: ${JSON.stringify(s)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let n=this.getLevelsForPathway(this.pathwayId);if(n.length===0){const r=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),n=this.getLevelsForPathway(r),this.pathwayId=r}return n.length!==e.length?(this.log(`Found ${n.length}/${e.length} levels in Pathway "${this.pathwayId}"`),n):e}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(n=>e===n.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let n;const r=this.penalizedPathways,i=performance.now();Object.keys(r).forEach(s=>{i-r[s]>mY&&delete r[s]});for(let s=0;s<e.length;s++){const o=e[s];if(o in r)continue;if(o===this.pathwayId)return;const a=this.hls.nextLoadLevel,l=this.hls.levels[a];if(n=this.getLevelsForPathway(o),n.length>0){this.log(`Setting Pathway to "${o}"`),this.pathwayId=o,qk(n),this.hls.trigger(R.LEVELS_UPDATED,{levels:n});const u=this.hls.levels[a];l&&u&&this.levels&&(u.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&u.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${u.bitrate}`),this.hls.nextLoadLevel=a);break}}}getPathwayForGroupId(e,n,r){const i=this.getLevelsForPathway(r).concat(this.levels||[]);for(let s=0;s<i.length;s++)if(n===ke.AUDIO_TRACK&&i[s].hasAudioGroup(e)||n===ke.SUBTITLE_TRACK&&i[s].hasSubtitleGroup(e))return i[s].pathwayId;return r}clonePathways(e){const n=this.levels;if(!n)return;const r={},i={};e.forEach(s=>{const{ID:o,"BASE-ID":a,"URI-REPLACEMENT":l}=s;if(n.some(c=>c.pathwayId===o))return;const u=this.getLevelsForPathway(a).map(c=>{const d=new ct(c.attrs);d["PATHWAY-ID"]=o;const f=d.AUDIO&&`${d.AUDIO}_clone_${o}`,m=d.SUBTITLES&&`${d.SUBTITLES}_clone_${o}`;f&&(r[d.AUDIO]=f,d.AUDIO=f),m&&(i[d.SUBTITLES]=m,d.SUBTITLES=m);const h=kP(c.uri,d["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),p=new ul({attrs:d,audioCodec:c.audioCodec,bitrate:c.bitrate,height:c.height,name:c.name,url:h,videoCodec:c.videoCodec,width:c.width});if(c.audioGroups)for(let v=1;v<c.audioGroups.length;v++)p.addGroupId("audio",`${c.audioGroups[v]}_clone_${o}`);if(c.subtitleGroups)for(let v=1;v<c.subtitleGroups.length;v++)p.addGroupId("text",`${c.subtitleGroups[v]}_clone_${o}`);return p});n.push(...u),kw(this.audioTracks,r,l,o),kw(this.subtitleTracks,i,l,o)})}loadSteeringManifest(e){const n=this.hls.config,r=n.loader;this.loader&&this.loader.destroy(),this.loader=new r(n);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const c=(this.hls.bandwidthEstimate||n.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+c)}const s={responseType:"json",url:i.href},o=n.steeringManifestLoadPolicy.default,a=o.errorRetry||o.timeoutRetry||{},l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},u={onSuccess:(c,d,f,m)=>{this.log(`Loaded steering manifest: "${i}"`);const h=c.data;if(h.VERSION!==1){this.log(`Steering VERSION ${h.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=h.TTL;const{"RELOAD-URI":p,"PATHWAY-CLONES":v,"PATHWAY-PRIORITY":y}=h;if(p)try{this.uri=new self.URL(p,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${p}`);return}this.scheduleRefresh(this.uri||f.url),v&&this.clonePathways(v);const g={steeringManifest:h,url:i.toString()};this.hls.trigger(R.STEERING_MANIFEST_LOADED,g),y&&this.updatePathwayPriority(y)},onError:(c,d,f,m)=>{if(this.log(`Error loading steering manifest: ${c.code} ${c.text} (${d.url})`),this.stopLoad(),c.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let h=this.timeToLoad*1e3;if(c.code===429){const p=this.loader;if(typeof(p==null?void 0:p.getResponseHeader)=="function"){const v=p.getResponseHeader("Retry-After");v&&(h=parseFloat(v)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,h)},onTimeout:(c,d,f)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(s,l,u)}scheduleRefresh(e,n=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var r;const i=(r=this.hls)==null?void 0:r.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},n)}}function kw(t,e,n,r){t&&Object.keys(e).forEach(i=>{const s=t.filter(o=>o.groupId===i).map(o=>{const a=Mt({},o);return a.details=void 0,a.attrs=new ct(a.attrs),a.url=a.attrs.URI=kP(o.url,o.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),a.groupId=a.attrs["GROUP-ID"]=e[i],a.attrs["PATHWAY-ID"]=r,a});t.push(...s)})}function kP(t,e,n,r){const{HOST:i,PARAMS:s,[n]:o}=r;let a;e&&(a=o==null?void 0:o[e],a&&(t=a));const l=new self.URL(t);return i&&!a&&(l.host=i),s&&Object.keys(s).sort().forEach(u=>{u&&l.searchParams.set(u,s[u])}),l.href}const yY=/^age:\s*[\d.]+\s*$/im;class PP{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Jp,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null,this.stats=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,n,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=n,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:e,context:n}=this;if(!e||!n)return;const r=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!this.stats.aborted)return s(r,n.url)}).catch(o=>(r.open("GET",n.url,!0),s(r,n.url))).then(()=>{this.stats.aborted||this.openAndSendXhr(r,n,e)}).catch(o=>{this.callbacks.onError({code:r.status,text:o.message},n,r,i)}):this.openAndSendXhr(r,n,e)}openAndSendXhr(e,n,r){e.readyState||e.open("GET",n.url,!0);const i=n.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:o}=r.loadPolicy;if(i)for(const a in i)e.setRequestHeader(a,i[a]);n.rangeEnd&&e.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=n.responseType,self.clearTimeout(this.requestTimeout),r.timeout=s&&re(s)?s:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:n,stats:r}=this;if(!e||!n)return;const i=n.readyState,s=this.config;if(!r.aborted&&i>=2&&(r.loading.first===0&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),n.onreadystatechange=null,n.onprogress=null;const o=n.status,a=n.responseType!=="text";if(o>=200&&o<300&&(a&&n.response||n.responseText!==null)){r.loading.end=Math.max(self.performance.now(),r.loading.first);const l=a?n.response:n.responseText,u=n.responseType==="arraybuffer"?l.byteLength:l.length;if(r.loaded=r.total=u,r.bwEstimate=r.total*8e3/(r.loading.end-r.loading.first),!this.callbacks)return;const c=this.callbacks.onProgress;if(c&&c(r,e,l,n),!this.callbacks)return;const d={url:n.responseURL,data:l,code:o};this.callbacks.onSuccess(d,r,e,n)}else{const l=s.loadPolicy.errorRetry,u=r.retry,c={url:e.url,data:void 0,code:o};_h(l,u,!1,c)?this.retry(l):(D.error(`${o} while loading ${e.url}`),this.callbacks.onError({code:o,text:n.statusText},e,n,r))}}}loadtimeout(){var e;const n=(e=this.config)==null?void 0:e.loadPolicy.timeoutRetry,r=this.stats.retry;if(_h(n,r,!0))this.retry(n);else{var i;D.warn(`timeout while loading ${(i=this.context)==null?void 0:i.url}`);const s=this.callbacks;s&&(this.abortInternal(),s.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:n,stats:r}=this;this.retryDelay=LS(e,r.retry),r.retry++,D.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${n==null?void 0:n.url}, retrying ${r.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total)}getCacheAge(){let e=null;if(this.loader&&yY.test(this.loader.getAllResponseHeaders())){const n=this.loader.getResponseHeader("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function vY(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const xY=/(\d+)-(\d+)\/(\d+)/;class Pw{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||TY,this.controller=new self.AbortController,this.stats=new Jp}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,n,r){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const s=SY(e,this.controller.signal),o=r.onProgress,a=e.responseType==="arraybuffer",l=a?"byteLength":"length",{maxTimeToFirstByteMs:u,maxLoadTimeMs:c}=n.loadPolicy;this.context=e,this.config=n,this.callbacks=r,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),n.timeout=u&&re(u)?u:c,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),r.onTimeout(i,e,this.response)},n.timeout),self.fetch(this.request).then(d=>{this.response=this.loader=d;const f=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),n.timeout=c,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),r.onTimeout(i,e,this.response)},c-(f-i.loading.start)),!d.ok){const{status:m,statusText:h}=d;throw new wY(h||"fetch, bad network response",m,d)}return i.loading.first=f,i.total=bY(d.headers)||i.total,o&&re(n.highWaterMark)?this.loadProgressively(d,i,e,n.highWaterMark,o):a?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{const f=this.response;if(!f)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const m=d[l];m&&(i.loaded=i.total=m);const h={url:f.url,data:d,code:f.status};o&&!re(n.highWaterMark)&&o(i,e,d,f),r.onSuccess(h,i,e,f)}).catch(d=>{if(self.clearTimeout(this.requestTimeout),i.aborted)return;const f=d&&d.code||0,m=d?d.message:null;r.onError({code:f,text:m},e,d?d.details:null,i)})}getCacheAge(){let e=null;if(this.response){const n=this.response.headers.get("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,n,r,i=0,s){const o=new Jk,a=e.body.getReader(),l=()=>a.read().then(u=>{if(u.done)return o.dataLength&&s(n,r,o.flush(),e),Promise.resolve(new ArrayBuffer(0));const c=u.value,d=c.length;return n.loaded+=d,d<i||o.dataLength?(o.push(c),o.dataLength>=i&&s(n,r,o.flush(),e)):s(n,r,c,e),l()}).catch(()=>Promise.reject());return l()}}function SY(t,e){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Mt({},t.headers))};return t.rangeEnd&&n.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),n}function EY(t){const e=xY.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function bY(t){const e=t.get("Content-Range");if(e){const r=EY(e);if(re(r))return r}const n=t.get("Content-Length");if(n)return parseInt(n)}function TY(t,e){return new self.Request(t.url,e)}class wY extends Error{constructor(e,n,r){super(e),this.code=void 0,this.details=void 0,this.code=n,this.details=r}}const RY=/\s/,AY={newCue(t,e,n,r){const i=[];let s,o,a,l,u;const c=self.VTTCue||self.TextTrackCue;for(let f=0;f<r.rows.length;f++)if(s=r.rows[f],a=!0,l=0,u="",!s.isEmpty()){var d;for(let p=0;p<s.chars.length;p++)RY.test(s.chars[p].uchar)&&a?l++:(u+=s.chars[p].uchar,a=!1);s.cueStartTime=e,e===n&&(n+=1e-4),l>=16?l--:l++;const m=SP(u.trim()),h=US(e,n,m);t!=null&&(d=t.cues)!=null&&d.getCueById(h)||(o=new c(e,n,m),o.id=h,o.line=f+1,o.align="left",o.position=10+Math.min(80,Math.floor(l*8/32)*10),i.push(o))}return t&&i.length&&(i.sort((f,m)=>f.line==="auto"||m.line==="auto"?0:f.line>8&&m.line>8?m.line-f.line:f.line-m.line),i.forEach(f=>Vk(t,f))),i}},_Y={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},IP=Xt(Xt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:PP,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:r7,bufferController:aq,capLevelController:jS,errorController:GK,fpsController:Iq,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:kk,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:_Y},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},CY()),{},{subtitleStreamController:rq,subtitleTrackController:sq,timelineController:kq,audioStreamController:tq,audioTrackController:nq,emeController:Ha,cmcdController:pY,contentSteeringController:gY});function CY(){return{cueHandler:AY,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function LY(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=Ny(t),r=["manifest","level","frag"],i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return r.forEach(s=>{const o=`${s==="level"?"playlist":s}LoadPolicy`,a=e[o]===void 0,l=[];i.forEach(u=>{const c=`${s}Loading${u}`,d=e[c];if(d!==void 0&&a){l.push(c);const f=n[o].default;switch(e[o]={default:f},u){case"TimeOut":f.maxLoadTimeMs=d,f.maxTimeToFirstByteMs=d;break;case"MaxRetry":f.errorRetry.maxNumRetry=d,f.timeoutRetry.maxNumRetry=d;break;case"RetryDelay":f.errorRetry.retryDelayMs=d,f.timeoutRetry.retryDelayMs=d;break;case"MaxRetryTimeout":f.errorRetry.maxRetryDelayMs=d,f.timeoutRetry.maxRetryDelayMs=d;break}}}),l.length&&D.warn(`hls.js config: "${l.join('", "')}" setting(s) are deprecated, use "${o}": ${JSON.stringify(e[o])}`)}),Xt(Xt({},n),e)}function Ny(t){return t&&typeof t=="object"?Array.isArray(t)?t.map(Ny):Object.keys(t).reduce((e,n)=>(e[n]=Ny(t[n]),e),{}):t}function kY(t){const e=t.loader;e!==Pw&&e!==PP?(D.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):vY()&&(t.loader=Pw,t.progressive=!0,t.enableSoftwareAES=!0,D.log("[config]: Progressive streaming enabled, using FetchLoader"))}let Pg;class PY extends kS{constructor(e,n){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=n,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(R.LEVEL_LOADED,this.onLevelLoaded,this),e.on(R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(R.FRAG_BUFFERED,this.onFragBuffered,this),e.on(R.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(R.LEVEL_LOADED,this.onLevelLoaded,this),e.off(R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(R.FRAG_BUFFERED,this.onFragBuffered,this),e.off(R.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(n=>{n.loadError=0,n.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,n){this.resetLevels()}onManifestLoaded(e,n){const r=this.hls.config.preferManagedMediaSource,i=[],s={},o={};let a=!1,l=!1,u=!1;n.levels.forEach(c=>{var d,f;const m=c.attrs;let{audioCodec:h,videoCodec:p}=c;((d=h)==null?void 0:d.indexOf("mp4a.40.34"))!==-1&&(Pg||(Pg=/chrome|firefox/i.test(navigator.userAgent)),Pg&&(c.audioCodec=h=void 0)),h&&(c.audioCodec=h=wh(h,r)),((f=p)==null?void 0:f.indexOf("avc1"))===0&&(p=c.videoCodec=SK(p));const{width:v,height:y,unknownCodecs:g}=c;if(a||(a=!!(v&&y)),l||(l=!!p),u||(u=!!h),g!=null&&g.length||h&&!gg(h,"audio",r)||p&&!gg(p,"video",r))return;const{CODECS:x,"FRAME-RATE":b,"HDCP-LEVEL":E,"PATHWAY-ID":T,RESOLUTION:w,"VIDEO-RANGE":_}=m,L=`${`${T||"."}-`}${c.bitrate}-${w}-${b}-${x}-${_}-${E}`;if(s[L])if(s[L].uri!==c.url&&!c.attrs["PATHWAY-ID"]){const P=o[L]+=1;c.attrs["PATHWAY-ID"]=new Array(P+1).join(".");const H=new ul(c);s[L]=H,i.push(H)}else s[L].addGroupId("audio",m.AUDIO),s[L].addGroupId("text",m.SUBTITLES);else{const P=new ul(c);s[L]=P,o[L]=1,i.push(P)}}),this.filterAndSortMediaOptions(i,n,a,l,u)}filterAndSortMediaOptions(e,n,r,i,s){let o=[],a=[],l=e;if((r||i)&&s&&(l=l.filter(({videoCodec:h,videoRange:p,width:v,height:y})=>(!!h||!!(v&&y))&&DK(p))),l.length===0){Promise.resolve().then(()=>{if(this.hls){n.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(n.levels[0].attrs)}`);const h=new Error("no level with compatible codecs found in manifest");this.hls.trigger(R.ERROR,{type:he.MEDIA_ERROR,details:N.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:n.url,error:h,reason:h.message})}});return}if(n.audioTracks){const{preferManagedMediaSource:h}=this.hls.config;o=n.audioTracks.filter(p=>!p.audioCodec||gg(p.audioCodec,"audio",h)),Iw(o)}n.subtitles&&(a=n.subtitles,Iw(a));const u=l.slice(0);l.sort((h,p)=>{if(h.attrs["HDCP-LEVEL"]!==p.attrs["HDCP-LEVEL"])return(h.attrs["HDCP-LEVEL"]||"")>(p.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&h.height!==p.height)return h.height-p.height;if(h.frameRate!==p.frameRate)return h.frameRate-p.frameRate;if(h.videoRange!==p.videoRange)return Rh.indexOf(h.videoRange)-Rh.indexOf(p.videoRange);if(h.videoCodec!==p.videoCodec){const v=F1(h.videoCodec),y=F1(p.videoCodec);if(v!==y)return y-v}if(h.uri===p.uri&&h.codecSet!==p.codecSet){const v=Th(h.codecSet),y=Th(p.codecSet);if(v!==y)return y-v}return h.averageBitrate!==p.averageBitrate?h.averageBitrate-p.averageBitrate:0});let c=u[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==u.length)){for(let h=0;h<u.length;h++)if(u[h].pathwayId===l[0].pathwayId){c=u[h];break}}this._levels=l;for(let h=0;h<l.length;h++)if(l[h]===c){var d;this._firstLevel=h;const p=c.bitrate,v=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${p}`),((d=this.hls.userConfig)==null?void 0:d.abrEwmaDefaultEstimate)===void 0){const y=Math.min(p,this.hls.config.abrEwmaDefaultEstimateMax);y>v&&v===IP.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=y)}break}const f=s&&!i,m={levels:l,audioTracks:o,subtitleTracks:a,sessionData:n.sessionData,sessionKeys:n.sessionKeys,firstLevel:this._firstLevel,stats:n.stats,audio:s,video:i,altAudio:!f&&o.some(h=>!!h.url)};this.hls.trigger(R.MANIFEST_PARSED,m),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const n=this._levels;if(n.length===0)return;if(e<0||e>=n.length){const c=new Error("invalid level idx"),d=e<0;if(this.hls.trigger(R.ERROR,{type:he.OTHER_ERROR,details:N.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:c,reason:c.message}),d)return;e=Math.min(e,n.length-1)}const r=this.currentLevelIndex,i=this.currentLevel,s=i?i.attrs["PATHWAY-ID"]:void 0,o=n[e],a=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,r===e&&o.details&&i&&s===a)return;this.log(`Switching to level ${e} (${o.height?o.height+"p ":""}${o.videoRange?o.videoRange+" ":""}${o.codecSet?o.codecSet+" ":""}@${o.bitrate})${a?" with Pathway "+a:""} from level ${r}${s?" with Pathway "+s:""}`);const l={level:e,attrs:o.attrs,details:o.details,bitrate:o.bitrate,averageBitrate:o.averageBitrate,maxBitrate:o.maxBitrate,realBitrate:o.realBitrate,width:o.width,height:o.height,codecSet:o.codecSet,audioCodec:o.audioCodec,videoCodec:o.videoCodec,audioGroups:o.audioGroups,subtitleGroups:o.subtitleGroups,loaded:o.loaded,loadError:o.loadError,fragmentError:o.fragmentError,name:o.name,id:o.id,uri:o.uri,url:o.url,urlId:0,audioGroupIds:o.audioGroupIds,textGroupIds:o.textGroupIds};this.hls.trigger(R.LEVEL_SWITCHING,l);const u=o.details;if(!u||u.live){const c=this.switchParams(o.uri,i==null?void 0:i.details);this.loadPlaylist(c)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,n){n.fatal||!n.context||n.context.type===ke.LEVEL&&n.context.level===this.level&&this.checkRetry(n)}onFragBuffered(e,{frag:n}){if(n!==void 0&&n.type===ce.MAIN){const r=n.elementaryStreams;if(!Object.keys(r).some(s=>!!r[s]))return;const i=this._levels[n.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,n){var r;const{level:i,details:s}=n,o=this._levels[i];if(!o){var a;this.warn(`Invalid level index ${i}`),(a=n.deliveryDirectives)!=null&&a.skip&&(s.deltaUpdateFailed=!0);return}i===this.currentLevelIndex?(o.fragmentError===0&&(o.loadError=0),this.playlistLoaded(i,n,o.details)):(r=n.deliveryDirectives)!=null&&r.skip&&(s.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const n=this.currentLevelIndex,r=this.currentLevel;if(r&&this.shouldLoadPlaylist(r)){let i=r.uri;if(e)try{i=e.addDirectives(i)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}const s=r.attrs["PATHWAY-ID"];this.log(`Loading level index ${n}${(e==null?void 0:e.msn)!==void 0?" at sn "+e.msn+" part "+e.part:""} with${s?" Pathway "+s:""} ${i}`),this.clearTimer(),this.hls.trigger(R.LEVEL_LOADING,{url:i,level:n,pathwayId:r.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var n;const r=this._levels.filter((i,s)=>s!==e?!0:(this.steering&&this.steering.removeLevel(i),i===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,i.details&&i.details.fragments.forEach(o=>o.level=-1)),!1));qk(r),this._levels=r,this.currentLevelIndex>-1&&(n=this.currentLevel)!=null&&n.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(R.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,{levels:n}){this._levels=n}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:n,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==n&&(this._maxAutoLevel=n,this.hls.trigger(R.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:n,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function Iw(t){const e={};t.forEach(n=>{const r=n.groupId||"";n.id=e[r]=e[r]||0,e[r]++})}class IY{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const r in this.keyUriToKeyInfo){const i=this.keyUriToKeyInfo[r].loader;if(i){var n;if(e&&e!==((n=i.context)==null?void 0:n.frag.type))return;i.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e];(n.mediaKeySessionContext||n.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e].loader;n&&n.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,n=N.KEY_LOAD_ERROR,r,i,s){return new ji({type:he.NETWORK_ERROR,details:n,fatal:!1,frag:e,response:s,error:r,networkDetails:i})}loadClear(e,n){if(this.emeController&&this.config.emeEnabled){const{sn:r,cc:i}=e;for(let s=0;s<n.length;s++){const o=n[s];if(i<=o.cc&&(r==="initSegment"||o.sn==="initSegment"||r<o.sn)){this.emeController.selectKeySystemFormat(o).then(a=>{o.setKeyFormat(a)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then(n=>this.loadInternal(e,n)):this.loadInternal(e)}loadInternal(e,n){var r,i;n&&e.setKeyFormat(n);const s=e.decryptdata;if(!s){const u=new Error(n?`Expected frag.decryptdata to be defined after setting format ${n}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,N.KEY_LOAD_ERROR,u))}const o=s.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,N.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${o}"`)));let a=this.keyUriToKeyInfo[o];if((r=a)!=null&&r.decryptdata.key)return s.key=a.decryptdata.key,Promise.resolve({frag:e,keyInfo:a});if((i=a)!=null&&i.keyLoadPromise){var l;switch((l=a.mediaKeySessionContext)==null?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return a.keyLoadPromise.then(u=>(s.key=u.keyInfo.decryptdata.key,{frag:e,keyInfo:a}))}}switch(a=this.keyUriToKeyInfo[o]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return s.keyFormat==="identity"?this.loadKeyHTTP(a,e):this.loadKeyEME(a,e);case"AES-128":return this.loadKeyHTTP(a,e);default:return Promise.reject(this.createKeyLoadError(e,N.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(e,n){const r={frag:n,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const i=this.emeController.loadKey(r);if(i)return(e.keyLoadPromise=i.then(s=>(e.mediaKeySessionContext=s,r))).catch(s=>{throw e.keyLoadPromise=null,s})}return Promise.resolve(r)}loadKeyHTTP(e,n){const r=this.config,i=r.loader,s=new i(r);return n.keyLoader=e.loader=s,e.keyLoadPromise=new Promise((o,a)=>{const l={keyInfo:e,frag:n,responseType:"arraybuffer",url:e.decryptdata.uri},u=r.keyLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,m,h,p)=>{const{frag:v,keyInfo:y,url:g}=h;if(!v.decryptdata||y!==this.keyUriToKeyInfo[g])return a(this.createKeyLoadError(v,N.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),p));y.decryptdata.key=v.decryptdata.key=new Uint8Array(f.data),v.keyLoader=null,y.loader=null,o({frag:v,keyInfo:y})},onError:(f,m,h,p)=>{this.resetLoader(m),a(this.createKeyLoadError(n,N.KEY_LOAD_ERROR,new Error(`HTTP Error ${f.code} loading key ${f.text}`),h,Xt({url:l.url,data:void 0},f)))},onTimeout:(f,m,h)=>{this.resetLoader(m),a(this.createKeyLoadError(n,N.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),h))},onAbort:(f,m,h)=>{this.resetLoader(m),a(this.createKeyLoadError(n,N.INTERNAL_ABORTED,new Error("key loading aborted"),h))}};s.load(l,c,d)})}resetLoader(e){const{frag:n,keyInfo:r,url:i}=e,s=r.loader;n.keyLoader===s&&(n.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[i],s&&s.destroy()}}function DP(){return self.SourceBuffer||self.WebKitSourceBuffer}function OP(){if(!Tl())return!1;const e=DP();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function DY(){if(!OP())return!1;const t=Tl();return typeof(t==null?void 0:t.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>t.isTypeSupported(ic(e,"video")))||["mp4a.40.2","fLaC"].some(e=>t.isTypeSupported(ic(e,"audio"))))}function OY(){var t;const e=DP();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}const MY=250,_f=2,NY=.1,FY=.05;class $Y{constructor(e,n,r,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=n,this.fragmentTracker=r,this.hls=i}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,n){const{config:r,media:i,stalled:s}=this;if(i===null)return;const{currentTime:o,seeking:a}=i,l=this.seeking&&!a,u=!this.seeking&&a;if(this.seeking=a,o!==e){if(this.moved=!0,a||(this.nudgeRetry=0),s!==null){if(this.stallReported){const v=self.performance.now()-s;D.warn(`playback not stuck anymore @${o}, after ${Math.round(v)}ms`),this.stallReported=!1}this.stalled=null}return}if(u||l){this.stalled=null;return}if(i.paused&&!a||i.ended||i.playbackRate===0||!Ze.getBuffered(i).length){this.nudgeRetry=0;return}const c=Ze.bufferInfo(i,o,0),d=c.nextStart||0;if(a){const v=c.len>_f,y=!d||n&&n.start<=o||d-o>_f&&!this.fragmentTracker.getPartialFragment(o);if(v||y)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var f;if(!(c.len>0)&&!d)return;const y=Math.max(d,c.start||0)-o,g=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,b=(g==null||(f=g.details)==null?void 0:f.live)?g.details.targetduration*2:_f,E=this.fragmentTracker.getPartialFragment(o);if(y>0&&(y<=b||E)){i.paused||this._trySkipBufferHole(E);return}}const m=self.performance.now();if(s===null){this.stalled=m;return}const h=m-s;if(!a&&h>=MY&&(this._reportStall(c),!this.media))return;const p=Ze.bufferInfo(i,o,r.maxBufferHole);this._tryFixBufferStall(p,h)}_tryFixBufferStall(e,n){const{config:r,fragmentTracker:i,media:s}=this;if(s===null)return;const o=s.currentTime,a=i.getPartialFragment(o);a&&(this._trySkipBufferHole(a)||!this.media)||(e.len>r.maxBufferHole||e.nextStart&&e.nextStart-o<r.maxBufferHole)&&n>r.highBufferWatchdogPeriod*1e3&&(D.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:n,media:r,stallReported:i}=this;if(!i&&r){this.stallReported=!0;const s=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${JSON.stringify(e)})`);D.warn(s.message),n.trigger(R.ERROR,{type:he.MEDIA_ERROR,details:N.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:e.len})}}_trySkipBufferHole(e){const{config:n,hls:r,media:i}=this;if(i===null)return 0;const s=i.currentTime,o=Ze.bufferInfo(i,s,0),a=s<o.start?o.start:o.nextStart;if(a){const l=o.len<=n.maxBufferHole,u=o.len>0&&o.len<1&&i.readyState<3,c=a-s;if(c>0&&(l||u)){if(c>n.maxBufferHole){const{fragmentTracker:f}=this;let m=!1;if(s===0){const h=f.getAppendedFrag(0,ce.MAIN);h&&a<h.end&&(m=!0)}if(!m){const h=e||f.getAppendedFrag(s,ce.MAIN);if(h){let p=!1,v=h.end;for(;v<a;){const y=f.getPartialFragment(v);if(y)v+=y.duration;else{p=!0;break}}if(p)return 0}}}const d=Math.max(a+FY,s+NY);if(D.warn(`skipping hole, adjusting currentTime from ${s} to ${d}`),this.moved=!0,this.stalled=null,i.currentTime=d,e&&!e.gap){const f=new Error(`fragment loaded with buffer holes, seeking from ${s} to ${d}`);r.trigger(R.ERROR,{type:he.MEDIA_ERROR,details:N.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:f,reason:f.message,frag:e})}return d}}return 0}_tryNudgeBuffer(){const{config:e,hls:n,media:r,nudgeRetry:i}=this;if(r===null)return;const s=r.currentTime;if(this.nudgeRetry++,i<e.nudgeMaxRetry){const o=s+(i+1)*e.nudgeOffset,a=new Error(`Nudging 'currentTime' from ${s} to ${o}`);D.warn(a.message),r.currentTime=o,n.trigger(R.ERROR,{type:he.MEDIA_ERROR,details:N.BUFFER_NUDGE_ON_STALL,error:a,fatal:!1})}else{const o=new Error(`Playhead still not moving while enough data buffered @${s} after ${e.nudgeMaxRetry} nudges`);D.error(o.message),n.trigger(R.ERROR,{type:he.MEDIA_ERROR,details:N.BUFFER_STALLED_ERROR,error:o,fatal:!0})}}}const BY=100;class UY extends DS{constructor(e,n,r){super(e,n,r,"[stream-controller]",ce.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.MANIFEST_PARSED,this.onManifestParsed,this),e.on(R.LEVEL_LOADING,this.onLevelLoading,this),e.on(R.LEVEL_LOADED,this.onLevelLoaded,this),e.on(R.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(R.ERROR,this.onError,this),e.on(R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(R.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(R.BUFFER_CREATED,this.onBufferCreated,this),e.on(R.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(R.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.MANIFEST_PARSED,this.onManifestParsed,this),e.off(R.LEVEL_LOADED,this.onLevelLoaded,this),e.off(R.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(R.ERROR,this.onError,this),e.off(R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(R.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(R.BUFFER_CREATED,this.onBufferCreated,this),e.off(R.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(R.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:n,hls:r}=this;if(this.stopLoad(),this.setInterval(BY),this.level=-1,!this.startFragRequested){let i=r.startLevel;i===-1&&(r.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=r.firstAutoLevel),r.nextLoadLevel=i,this.level=r.loadLevel,this.loadedmetadata=!1}n>0&&e===-1&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=G.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=G.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case G.WAITING_LEVEL:{const{levels:n,level:r}=this,i=n==null?void 0:n[r],s=i==null?void 0:i.details;if(s&&(!s.live||this.levelLastLoaded===i)){if(this.waitForCdnTuneIn(s))break;this.state=G.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=G.IDLE;break}break}case G.FRAG_LOADING_WAITING_RETRY:{var e;const n=self.performance.now(),r=this.retryDate;if(!r||n>=r||(e=this.media)!=null&&e.seeking){const{levels:i,level:s}=this,o=i==null?void 0:i[s];this.resetStartWhenNotLoaded(o||null),this.state=G.IDLE}}break}this.state===G.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:n,levels:r,media:i}=this;if(n===null||!i&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const s=e.nextLoadLevel;if(!(r!=null&&r[s]))return;const o=r[s],a=this.getMainFwdBufferInfo();if(a===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(a,l)){const p={};this.altAudio&&(p.type="video"),this.hls.trigger(R.BUFFER_EOS,p),this.state=G.ENDED;return}e.loadLevel!==s&&e.manualLevel===-1&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=e.nextLoadLevel=s;const u=o.details;if(!u||this.state===G.WAITING_LEVEL||u.live&&this.levelLastLoaded!==o){this.level=s,this.state=G.WAITING_LEVEL;return}const c=a.len,d=this.getMaxBufferLength(o.maxBitrate);if(c>=d)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const f=this.backtrackFragment?this.backtrackFragment.start:a.end;let m=this.getNextFragment(f,u);if(this.couldBacktrack&&!this.fragPrevious&&m&&m.sn!=="initSegment"&&this.fragmentTracker.getState(m)!==Wt.OK){var h;const v=((h=this.backtrackFragment)!=null?h:m).sn-u.startSN,y=u.fragments[v-1];y&&m.cc===y.cc&&(m=y,this.fragmentTracker.removeFragment(y))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(m&&this.isLoopLoading(m,f)){if(!m.gap){const v=this.audioOnly&&!this.altAudio?ze.AUDIO:ze.VIDEO,y=(v===ze.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;y&&this.afterBufferFlushed(y,v,ce.MAIN)}m=this.getNextFragmentLoopLoading(m,u,a,ce.MAIN,d)}m&&(m.initSegment&&!m.initSegment.data&&!this.bitrateTest&&(m=m.initSegment),this.loadFragment(m,o,f))}loadFragment(e,n,r){const i=this.fragmentTracker.getState(e);this.fragCurrent=e,i===Wt.NOT_LOADED||i===Wt.PARTIAL?e.sn==="initSegment"?this._loadInitSegment(e,n):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,n)):(this.startFragRequested=!0,super.loadFragment(e,n,r)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,ce.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:n}=this;if(n!=null&&n.readyState){let r;const i=this.getAppendedFrag(n.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const s=this.getLevelDetails();if(s!=null&&s.live){const a=this.getMainFwdBufferInfo();if(!a||a.len<s.targetduration*2)return}if(!n.paused&&e){const a=this.hls.nextLoadLevel,l=e[a],u=this.fragLastKbps;u&&this.fragCurrent?r=this.fragCurrent.duration*l.maxBitrate/(1e3*u)+1:r=0}else r=0;const o=this.getBufferedFrag(n.currentTime+r);if(o){const a=this.followingBufferedFrag(o);if(a){this.abortCurrentFrag();const l=a.maxStartPTS?a.maxStartPTS:a.start,u=a.duration,c=Math.max(o.end,l+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,u*(this.couldBacktrack?.5:.125)),u*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case G.KEY_LOADING:case G.FRAG_LOADING:case G.FRAG_LOADING_WAITING_RETRY:case G.PARSING:case G.PARSED:this.state=G.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,n){super.flushMainBuffer(e,n,this.altAudio?"video":null)}onMediaAttached(e,n){super.onMediaAttached(e,n);const r=n.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),r.addEventListener("playing",this.onvplaying),r.addEventListener("seeked",this.onvseeked),this.gapController=new $Y(this.config,r,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,n=e?e.currentTime:null;re(n)&&this.log(`Media seeked to ${n.toFixed(3)}`);const r=this.getMainFwdBufferInfo();if(r===null||r.len===0){this.warn(`Main forward buffer length on "seeked" event ${r?r.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(R.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,n){let r=!1,i=!1;n.levels.forEach(s=>{const o=s.audioCodec;o&&(r=r||o.indexOf("mp4a.40.2")!==-1,i=i||o.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=r&&i&&!OY(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=n.levels,this.startFragRequested=!1}onLevelLoading(e,n){const{levels:r}=this;if(!r||this.state!==G.IDLE)return;const i=r[n.level];(!i.details||i.details.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(i.details))&&(this.state=G.WAITING_LEVEL)}onLevelLoaded(e,n){var r;const{levels:i}=this,s=n.level,o=n.details,a=o.totalduration;if(!i){this.warn(`Levels were reset while loading level ${s}`);return}this.log(`Level ${s} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${a}`);const l=i[s],u=this.fragCurrent;u&&(this.state===G.FRAG_LOADING||this.state===G.FRAG_LOADING_WAITING_RETRY)&&u.level!==n.level&&u.loader&&this.abortCurrentFrag();let c=0;if(o.live||(r=l.details)!=null&&r.live){var d;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;c=this.alignPlaylists(o,l.details,(d=this.levelLastLoaded)==null?void 0:d.details)}if(l.details=o,this.levelLastLoaded=l,this.hls.trigger(R.LEVEL_UPDATED,{details:o,level:s}),this.state===G.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=G.IDLE}this.startFragRequested?o.live&&this.synchronizeToLiveEdge(o):this.setStartPosition(o,c),this.tick()}_handleFragmentLoadProgress(e){var n;const{frag:r,part:i,payload:s}=e,{levels:o}=this;if(!o){this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const a=o[r.level],l=a.details;if(!l){this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),this.fragmentTracker.removeFragment(r);return}const u=a.videoCodec,c=l.PTSKnown||!l.live,d=(n=r.initSegment)==null?void 0:n.data,f=this._getAudioCodec(a),m=this.transmuxer=this.transmuxer||new pP(this.hls,ce.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),h=i?i.index:-1,p=h!==-1,v=new PS(r.level,r.sn,r.stats.chunkCount,s.byteLength,h,p),y=this.initPTS[r.cc];m.push(s,d,f,u,r,i,l.totalduration,c,v,y)}onAudioTrackSwitching(e,n){const r=this.altAudio;if(!!!n.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const o=this.fragCurrent;o&&(this.log("Switching to main audio track, cancel main fragment load"),o.abortRequests(),this.fragmentTracker.removeFragment(o)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const s=this.hls;r&&(s.trigger(R.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),s.trigger(R.AUDIO_TRACK_SWITCHED,n)}}onAudioTrackSwitched(e,n){const r=n.id,i=!!this.hls.audioTracks[r].url;if(i){const s=this.videoBuffer;s&&this.mediaBuffer!==s&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=i,this.tick()}onBufferCreated(e,n){const r=n.tracks;let i,s,o=!1;for(const a in r){const l=r[a];if(l.id==="main"){if(s=a,i=l,a==="video"){const u=r[a];u&&(this.videoBuffer=u.buffer)}}else o=!0}o&&i?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,n){const{frag:r,part:i}=n;if(r&&r.type!==ce.MAIN)return;if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),this.state===G.PARSED&&(this.state=G.IDLE);return}const s=i?i.stats:r.stats;this.fragLastKbps=Math.round(8*s.total/(s.buffering.end-s.loading.first)),r.sn!=="initSegment"&&(this.fragPrevious=r),this.fragBufferedComplete(r,i)}onError(e,n){var r;if(n.fatal){this.state=G.ERROR;return}switch(n.details){case N.FRAG_GAP:case N.FRAG_PARSING_ERROR:case N.FRAG_DECRYPT_ERROR:case N.FRAG_LOAD_ERROR:case N.FRAG_LOAD_TIMEOUT:case N.KEY_LOAD_ERROR:case N.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ce.MAIN,n);break;case N.LEVEL_LOAD_ERROR:case N.LEVEL_LOAD_TIMEOUT:case N.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===G.WAITING_LEVEL&&((r=n.context)==null?void 0:r.type)===ke.LEVEL&&(this.state=G.IDLE);break;case N.BUFFER_APPEND_ERROR:case N.BUFFER_FULL_ERROR:if(!n.parent||n.parent!=="main")return;if(n.details===N.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(n)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case N.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}checkBuffer(){const{media:e,gapController:n}=this;if(!(!e||!n||!e.readyState)){if(this.loadedmetadata||!Ze.getBuffered(e).length){const r=this.state!==G.IDLE?this.fragCurrent:null;n.poll(this.lastCurrentTime,r)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=G.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:n}){if(n!==ze.AUDIO||this.audioOnly&&!this.altAudio){const r=(n===ze.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(r,n,ce.MAIN),this.tick()}}onLevelsUpdated(e,n){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=n.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const n=e.currentTime;let r=this.startPosition;if(r>=0&&n<r){if(e.seeking){this.log(`could not seek to ${r}, already seeking at ${n}`);return}const i=Ze.getBuffered(e),o=(i.length?i.start(0):0)-r;o>0&&(o<this.config.maxBufferHole||o<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${o} to match buffer start`),r+=o,this.startPosition=r),this.log(`seek to target start position ${r} from current time ${n}`),e.currentTime=r}}_getAudioCodec(e){let n=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&n&&(this.log("Swapping audio codec"),n.indexOf("mp4a.40.5")!==-1?n="mp4a.40.2":n="mp4a.40.5"),n}_loadBitrateTestFrag(e,n){e.bitrateTest=!0,this._doFragLoad(e,n).then(r=>{const{hls:i}=this;if(!r||this.fragContextChanged(e))return;n.fragmentError=0,this.state=G.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const s=e.stats;s.parsing.start=s.parsing.end=s.buffering.start=s.buffering.end=self.performance.now(),i.trigger(R.FRAG_LOADED,r),e.bitrateTest=!1})}_handleTransmuxComplete(e){var n;const r="main",{hls:i}=this,{remuxResult:s,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:u,level:c}=a,{video:d,text:f,id3:m,initSegment:h}=s,{details:p}=c,v=this.altAudio?void 0:s.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=G.PARSING,h){if(h!=null&&h.tracks){const x=l.initSegment||l;this._bufferInitSegment(c,h.tracks,x,o),i.trigger(R.FRAG_PARSING_INIT_SEGMENT,{frag:x,id:r,tracks:h.tracks})}const y=h.initPTS,g=h.timescale;re(y)&&(this.initPTS[l.cc]={baseTime:y,timescale:g},i.trigger(R.INIT_PTS_FOUND,{frag:l,id:r,initPTS:y,timescale:g}))}if(d&&p&&l.sn!=="initSegment"){const y=p.fragments[l.sn-1-p.startSN],g=l.sn===p.startSN,x=!y||l.cc>y.cc;if(s.independent!==!1){const{startPTS:b,endPTS:E,startDTS:T,endDTS:w}=d;if(u)u.elementaryStreams[d.type]={startPTS:b,endPTS:E,startDTS:T,endDTS:w};else if(d.firstKeyFrame&&d.independent&&o.id===1&&!x&&(this.couldBacktrack=!0),d.dropped&&d.independent){const _=this.getMainFwdBufferInfo(),k=(_?_.end:this.getLoadPosition())+this.config.maxBufferHole,L=d.firstKeyFramePTS?d.firstKeyFramePTS:b;if(!g&&k<L-this.config.maxBufferHole&&!x){this.backtrack(l);return}else x&&(l.gap=!0);l.setElementaryStreamInfo(d.type,l.start,E,l.start,w,!0)}else g&&b>_f&&(l.gap=!0);l.setElementaryStreamInfo(d.type,b,E,T,w),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(d,l,u,o,g||x)}else if(g||x)l.gap=!0;else{this.backtrack(l);return}}if(v){const{startPTS:y,endPTS:g,startDTS:x,endDTS:b}=v;u&&(u.elementaryStreams[ze.AUDIO]={startPTS:y,endPTS:g,startDTS:x,endDTS:b}),l.setElementaryStreamInfo(ze.AUDIO,y,g,x,b),this.bufferFragmentData(v,l,u,o)}if(p&&m!=null&&(n=m.samples)!=null&&n.length){const y={id:r,frag:l,details:p,samples:m.samples};i.trigger(R.FRAG_PARSING_METADATA,y)}if(p&&f){const y={id:r,frag:l,details:p,samples:f.samples};i.trigger(R.FRAG_PARSING_USERDATA,y)}}_bufferInitSegment(e,n,r,i){if(this.state!==G.PARSING)return;this.audioOnly=!!n.audio&&!n.video,this.altAudio&&!this.audioOnly&&delete n.audio;const{audio:s,video:o,audiovideo:a}=n;if(s){let l=e.audioCodec;const u=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(l&&(l.indexOf("mp4a.40.5")!==-1?l="mp4a.40.2":l="mp4a.40.5"),s.metadata.channelCount!==1&&u.indexOf("firefox")===-1&&(l="mp4a.40.5")),l&&l.indexOf("mp4a.40.5")!==-1&&u.indexOf("android")!==-1&&s.container!=="audio/mpeg"&&(l="mp4a.40.2",this.log(`Android: force audio codec to ${l}`)),e.audioCodec&&e.audioCodec!==l&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${l}"`),s.levelCodec=l,s.id="main",this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${l||""}/${e.audioCodec||""}/${s.codec}]`)}o&&(o.levelCodec=e.videoCodec,o.id="main",this.log(`Init video buffer, container:${o.container}, codecs[level/parsed]=[${e.videoCodec||""}/${o.codec}]`)),a&&this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.codecs}/${a.codec}]`),this.hls.trigger(R.BUFFER_CODECS,n),Object.keys(n).forEach(l=>{const c=n[l].initSegment;c!=null&&c.byteLength&&this.hls.trigger(R.BUFFER_APPENDING,{type:l,data:c,frag:r,part:null,chunkMeta:i,parent:r.type})}),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,ce.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=G.IDLE}checkFragmentChanged(){const e=this.media;let n=null;if(e&&e.readyState>1&&e.seeking===!1){const r=e.currentTime;if(Ze.isBuffered(e,r)?n=this.getAppendedFrag(r):Ze.isBuffered(e,r+.1)&&(n=this.getAppendedFrag(r+.1)),n){this.backtrackFragment=null;const i=this.fragPlaying,s=n.level;(!i||n.sn!==i.sn||i.level!==s)&&(this.fragPlaying=n,this.hls.trigger(R.FRAG_CHANGED,{frag:n}),(!i||i.level!==s)&&this.hls.trigger(R.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const n=e.currentTime,r=this.currentFrag;if(r&&re(n)&&re(r.programDateTime)){const i=r.programDateTime+(n-r.start)*1e3;return new Date(i)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Po{static get version(){return"1.5.7"}static isMSESupported(){return OP()}static isSupported(){return DY()}static getMediaSource(){return Tl()}static get Events(){return R}static get ErrorTypes(){return he}static get ErrorDetails(){return N}static get DefaultConfig(){return Po.defaultConfig?Po.defaultConfig:IP}static set DefaultConfig(e){Po.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new $S,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,I9(e.debug||!1,"Hls instance");const n=this.config=LY(Po.DefaultConfig,e);this.userConfig=e,n.progressive&&kY(n);const{abrController:r,bufferController:i,capLevelController:s,errorController:o,fpsController:a}=n,l=new o(this),u=this.abrController=new r(this),c=this.bufferController=new i(this),d=this.capLevelController=new s(this),f=new a(this),m=new RK(this),h=new kK(this),p=n.contentSteeringController,v=p?new p(this):null,y=this.levelController=new PY(this,v),g=new s7(this),x=new IY(this.config),b=this.streamController=new UY(this,g,x);d.setStreamController(b),f.setStreamController(b);const E=[m,y,b];v&&E.splice(1,0,v),this.networkControllers=E;const T=[u,c,d,f,h,g];this.audioTrackController=this.createController(n.audioTrackController,E);const w=n.audioStreamController;w&&E.push(new w(this,g,x)),this.subtitleTrackController=this.createController(n.subtitleTrackController,E);const _=n.subtitleStreamController;_&&E.push(new _(this,g,x)),this.createController(n.timelineController,T),x.emeController=this.emeController=this.createController(n.emeController,T),this.cmcdController=this.createController(n.cmcdController,T),this.latencyController=this.createController(PK,T),this.coreComponents=T,E.push(l);const k=l.onErrorOut;typeof k=="function"&&this.on(R.ERROR,k,l)}createController(e,n){if(e){const r=new e(this);return n&&n.push(r),r}return null}on(e,n,r=this){this._emitter.on(e,n,r)}once(e,n,r=this){this._emitter.once(e,n,r)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,n,r=this,i){this._emitter.off(e,n,r,i)}listeners(e){return this._emitter.listeners(e)}emit(e,n,r){return this._emitter.emit(e,n,r)}trigger(e,n){if(this.config.debug)return this.emit(e,e,n);try{return this.emit(e,e,n)}catch(r){if(D.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),!this.triggeringException){this.triggeringException=!0;const i=e===R.ERROR;this.trigger(R.ERROR,{type:he.OTHER_ERROR,details:N.INTERNAL_EXCEPTION,fatal:i,event:e,error:r}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){D.log("destroy"),this.trigger(R.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(n=>n.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(n=>n.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){D.log("attachMedia"),this._media=e,this.trigger(R.MEDIA_ATTACHING,{media:e})}detachMedia(){D.log("detachMedia"),this.trigger(R.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const n=this.media,r=this.url,i=this.url=RS.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,D.log(`loadSource:${i}`),n&&r&&(r!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(n)),this.trigger(R.MANIFEST_LOADING,{url:e})}startLoad(e=-1){D.log(`startLoad(${e})`),this.started=!0,this.networkControllers.forEach(n=>{n.startLoad(e)})}stopLoad(){D.log("stopLoad"),this.started=!1,this.networkControllers.forEach(e=>{e.stopLoad()})}resumeBuffering(){this.started&&this.networkControllers.forEach(e=>{"fragmentLoader"in e&&e.startLoad(-1)})}pauseBuffering(){this.networkControllers.forEach(e=>{"fragmentLoader"in e&&e.stopLoad()})}swapAudioCodec(){D.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){D.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){D.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){D.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){D.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){D.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){D.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const n=!!e;n!==this.config.capLevelToPlayerSize&&(n?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=n)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(D.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){IK(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:n}}=this;if(!e)return 0;const r=e.length;for(let i=0;i<r;i++)if(e[i].maxBitrate>=n)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:n,maxHdcpLevel:r}=this;let i;if(n===-1&&e!=null&&e.length?i=e.length-1:i=n,r)for(let s=i;s--;){const o=e[s].attrs["HDCP-LEVEL"];if(o&&o<=r)return s}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var n;return(n=this.audioTrackController)==null?void 0:n.setAudioOption(e)}setSubtitleOption(e){var n;return(n=this.subtitleTrackController)==null||n.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const n=this.audioTrackController;n&&(n.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const n=this.subtitleTrackController;n&&(n.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const n=this.subtitleTrackController;n&&(n.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Po.defaultConfig=void 0;function ee(t,e,n){return(e=HY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jY(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HY(t){var e=jY(t,"string");return typeof e=="symbol"?e:String(e)}function zY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function VY(t,e,n){return e&&Dw(t.prototype,e),n&&Dw(t,n),t}function GY(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ow(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ow(Object(n),!0).forEach(function(r){GY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ow(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Nw={addCSS:!0,thumbWidth:15,watch:!0};function WY(t,e){return(function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(t,e)}function KY(t,e){if(t&&e){var n=new Event(e,{bubbles:!0});t.dispatchEvent(n)}}var Bc=function(t){return t!=null?t.constructor:null},zS=function(t,e){return!!(t&&e&&t instanceof e)},MP=function(t){return t==null},NP=function(t){return Bc(t)===Object},qY=function(t){return Bc(t)===Number&&!Number.isNaN(t)},FP=function(t){return Bc(t)===String},YY=function(t){return Bc(t)===Boolean},XY=function(t){return Bc(t)===Function},$P=function(t){return Array.isArray(t)},BP=function(t){return zS(t,NodeList)},QY=function(t){return zS(t,Element)},JY=function(t){return zS(t,Event)},ZY=function(t){return MP(t)||(FP(t)||$P(t)||BP(t))&&!t.length||NP(t)&&!Object.keys(t).length},hn={nullOrUndefined:MP,object:NP,number:qY,string:FP,boolean:YY,function:XY,array:$P,nodeList:BP,element:QY,event:JY,empty:ZY};function eX(t){var e="".concat(t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function tX(t,e){if(1>e){var n=eX(e);return parseFloat(t.toFixed(n))}return Math.round(t/e)*e}var nX=function(){function t(e,n){zY(this,t),hn.element(e)?this.element=e:hn.string(e)&&(this.element=document.querySelector(e)),hn.element(this.element)&&hn.empty(this.element.rangeTouch)&&(this.config=Mw({},Nw,{},n),this.init())}return VY(t,[{key:"init",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var n=this,r=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(i){n.element[r](i,function(s){return n.set(s)},!1)})}},{key:"get",value:function(e){if(!t.enabled||!hn.event(e))return null;var n,r=e.target,i=e.changedTouches[0],s=parseFloat(r.getAttribute("min"))||0,o=parseFloat(r.getAttribute("max"))||100,a=parseFloat(r.getAttribute("step"))||1,l=r.getBoundingClientRect(),u=100/l.width*(this.config.thumbWidth/2)/100;return 0>(n=100/l.width*(i.clientX-l.left))?n=0:100<n&&(n=100),50>n?n-=(100-2*n)*u:50<n&&(n+=2*(n-50)*u),s+tX(n/100*(o-s),a)}},{key:"set",value:function(e){t.enabled&&hn.event(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),KY(e.target,e.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(e){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},r=null;if(hn.empty(e)||hn.string(e)?r=Array.from(document.querySelectorAll(hn.string(e)?e:'input[type="range"]')):hn.element(e)?r=[e]:hn.nodeList(e)?r=Array.from(e):hn.array(e)&&(r=e.filter(hn.element)),hn.empty(r))return null;var i=Mw({},Nw,{},n);if(hn.string(e)&&i.watch){var s=new MutationObserver(function(o){Array.from(o).forEach(function(a){Array.from(a.addedNodes).forEach(function(l){hn.element(l)&&WY(l,e)&&new t(l,i)})})});s.observe(document.body,{childList:!0,subtree:!0})}return r.map(function(o){return new t(o,n)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),t}();const Uc=t=>t!=null?t.constructor:null,ss=(t,e)=>!!(t&&e&&t instanceof e),VS=t=>t==null,UP=t=>Uc(t)===Object,rX=t=>Uc(t)===Number&&!Number.isNaN(t),em=t=>Uc(t)===String,iX=t=>Uc(t)===Boolean,jP=t=>typeof t=="function",HP=t=>Array.isArray(t),sX=t=>ss(t,WeakMap),zP=t=>ss(t,NodeList),oX=t=>Uc(t)===Text,aX=t=>ss(t,Event),lX=t=>ss(t,KeyboardEvent),uX=t=>ss(t,window.TextTrackCue)||ss(t,window.VTTCue),cX=t=>ss(t,TextTrack)||!VS(t)&&em(t.kind),dX=t=>ss(t,Promise)&&jP(t.then),fX=t=>t!==null&&typeof t=="object"&&t.nodeType===1&&typeof t.style=="object"&&typeof t.ownerDocument=="object",VP=t=>VS(t)||(em(t)||HP(t)||zP(t))&&!t.length||UP(t)&&!Object.keys(t).length,hX=t=>{if(ss(t,window.URL))return!0;if(!em(t))return!1;let e=t;t.startsWith("http://")&&t.startsWith("https://")||(e=`http://${t}`);try{return!VP(new URL(e).hostname)}catch{return!1}};var C={nullOrUndefined:VS,object:UP,number:rX,string:em,boolean:iX,function:jP,array:HP,weakMap:sX,nodeList:zP,element:fX,textNode:oX,event:aX,keyboardEvent:lX,cue:uX,track:cX,promise:dX,url:hX,empty:VP};const Fy=(()=>{const t=document.createElement("span"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n=Object.keys(e).find(r=>t.style[r]!==void 0);return!!C.string(n)&&e[n]})();function GP(t,e){setTimeout(()=>{try{t.hidden=!0,t.offsetHeight,t.hidden=!1}catch{}},e)}const pX=!!window.document.documentMode,mX=/Edge/g.test(navigator.userAgent),gX="WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),yX=/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,vX=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,xX=/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1;var Kt={isIE:pX,isEdge:mX,isWebKit:gX,isIPhone:yX,isIPadOS:vX,isIos:xX};function SX(t){return JSON.parse(JSON.stringify(t))}function WP(t,e){return e.split(".").reduce((n,r)=>n&&n[r],t)}function bt(t={},...e){if(!e.length)return t;const n=e.shift();return C.object(n)?(Object.keys(n).forEach(r=>{C.object(n[r])?(Object.keys(t).includes(r)||Object.assign(t,{[r]:{}}),bt(t[r],n[r])):Object.assign(t,{[r]:n[r]})}),bt(t,...e)):t}function KP(t,e){const n=t.length?t:[t];Array.from(n).reverse().forEach((r,i)=>{const s=i>0?e.cloneNode(!0):e,o=r.parentNode,a=r.nextSibling;s.appendChild(r),a?o.insertBefore(s,a):o.appendChild(s)})}function $y(t,e){C.element(t)&&!C.empty(e)&&Object.entries(e).filter(([,n])=>!C.nullOrUndefined(n)).forEach(([n,r])=>t.setAttribute(n,r))}function pe(t,e,n){const r=document.createElement(t);return C.object(e)&&$y(r,e),C.string(n)&&(r.innerText=n),r}function EX(t,e){C.element(t)&&C.element(e)&&e.parentNode.insertBefore(t,e.nextSibling)}function Fw(t,e,n,r){C.element(e)&&e.appendChild(pe(t,n,r))}function Yi(t){C.nodeList(t)||C.array(t)?Array.from(t).forEach(Yi):C.element(t)&&C.element(t.parentNode)&&t.parentNode.removeChild(t)}function Cf(t){if(!C.element(t))return;let{length:e}=t.childNodes;for(;e>0;)t.removeChild(t.lastChild),e-=1}function Ph(t,e){return C.element(e)&&C.element(e.parentNode)&&C.element(t)?(e.parentNode.replaceChild(t,e),t):null}function ii(t,e){if(!C.string(t)||C.empty(t))return{};const n={},r=bt({},e);return t.split(",").forEach(i=>{const s=i.trim(),o=s.replace(".",""),a=s.replace(/[[\]]/g,"").split("="),[l]=a,u=a.length>1?a[1].replace(/["']/g,""):"";switch(s.charAt(0)){case".":C.string(r.class)?n.class=`${r.class} ${o}`:n.class=o;break;case"#":n.id=s.replace("#","");break;case"[":n[l]=u}}),bt(r,n)}function fo(t,e){if(!C.element(t))return;let n=e;C.boolean(n)||(n=!t.hidden),t.hidden=n}function je(t,e,n){if(C.nodeList(t))return Array.from(t).map(r=>je(r,e,n));if(C.element(t)){let r="toggle";return n!==void 0&&(r=n?"add":"remove"),t.classList[r](e),t.classList.contains(e)}return!1}function Ih(t,e){return C.element(t)&&t.classList.contains(e)}function Io(t,e){const{prototype:n}=Element;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(t,e)}function bX(t,e){const{prototype:n}=Element;return(n.closest||function(){let r=this;do{if(Io.matches(r,e))return r;r=r.parentElement||r.parentNode}while(r!==null&&r.nodeType===1);return null}).call(t,e)}function sc(t){return this.elements.container.querySelectorAll(t)}function Ft(t){return this.elements.container.querySelector(t)}function Ig(t=null,e=!1){C.element(t)&&t.focus({preventScroll:!0,focusVisible:e})}const $w={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},wt={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(t,e){const n=wt[t]||e!=="html5";return{api:n,ui:n&&wt.rangeInput}},pip:!(Kt.isIPhone||!C.function(pe("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||pe("video").disablePictureInPicture)),airplay:C.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(t){if(C.empty(t))return!1;const[e]=t.split("/");let n=t;if(!this.isHTML5||e!==this.type)return!1;Object.keys($w).includes(n)&&(n+=`; codecs="${$w[t]}"`);try{return!!(n&&this.media.canPlayType(n).replace(/no/,""))}catch{return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const t=document.createElement("input");return t.type="range",t.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:Fy!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},TX=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get:()=>(t=!0,null)});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t})();function oc(t,e,n,r=!1,i=!0,s=!1){if(!t||!("addEventListener"in t)||C.empty(e)||!C.function(n))return;const o=e.split(" ");let a=s;TX&&(a={passive:i,capture:s}),o.forEach(l=>{this&&this.eventListeners&&r&&this.eventListeners.push({element:t,type:l,callback:n,options:a}),t[r?"addEventListener":"removeEventListener"](l,n,a)})}function Ie(t,e="",n,r=!0,i=!1){oc.call(this,t,e,n,!0,r,i)}function tm(t,e="",n,r=!0,i=!1){oc.call(this,t,e,n,!1,r,i)}function GS(t,e="",n,r=!0,i=!1){const s=(...o)=>{tm(t,e,s,r,i),n.apply(this,o)};oc.call(this,t,e,s,!0,r,i)}function me(t,e="",n=!1,r={}){if(!C.element(t)||C.empty(e))return;const i=new CustomEvent(e,{bubbles:n,detail:{...r,plyr:this}});t.dispatchEvent(i)}function wX(){this&&this.eventListeners&&(this.eventListeners.forEach(t=>{const{element:e,type:n,callback:r,options:i}=t;e.removeEventListener(n,r,i)}),this.eventListeners=[])}function RX(){return new Promise(t=>this.ready?setTimeout(t,0):Ie.call(this,this.elements.container,"ready",t)).then(()=>{})}function ci(t){C.promise(t)&&t.then(null,()=>{})}function By(t){return C.array(t)?t.filter((e,n)=>t.indexOf(e)===n):t}function qP(t,e){return C.array(t)&&t.length?t.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n):null}function YP(t){return!(!window||!window.CSS)&&window.CSS.supports(t)}const Bw=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((t,[e,n])=>({...t,[e/n]:[e,n]}),{});function XP(t){return C.array(t)||C.string(t)&&t.includes(":")?(C.array(t)?t:t.split(":")).map(Number).every(C.number):!1}function Dh(t){if(!C.array(t)||!t.every(C.number))return null;const[e,n]=t,r=(s,o)=>o===0?s:r(o,s%o),i=r(e,n);return[e/i,n/i]}function WS(t){const e=r=>XP(r)?r.split(":").map(Number):null;let n=e(t);if(n===null&&(n=e(this.config.ratio)),n===null&&!C.empty(this.embed)&&C.array(this.embed.ratio)&&({ratio:n}=this.embed),n===null&&this.isHTML5){const{videoWidth:r,videoHeight:i}=this.media;n=[r,i]}return Dh(n)}function fl(t){if(!this.isVideo)return{};const{wrapper:e}=this.elements,n=WS.call(this,t);if(!C.array(n))return{};const[r,i]=Dh(n),s=100/r*i;if(YP(`aspect-ratio: ${r}/${i}`)?e.style.aspectRatio=`${r}/${i}`:e.style.paddingBottom=`${s}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const o=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),a=(o-s)/(o/50);this.fullscreen.active?e.style.paddingBottom=null:this.media.style.transform=`translateY(-${a}%)`}else this.isHTML5&&e.classList.add(this.config.classNames.videoFixedRatio);return{padding:s,ratio:n}}function QP(t,e,n=.05){const r=t/e,i=qP(Object.keys(Bw),r);return Math.abs(i-r)<=n?Bw[i]:[t,e]}function AX(){return[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)]}const Os={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(t=>{const e=t.getAttribute("type");return!!C.empty(e)||wt.mime.call(this,e)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:Os.getSources.call(this).map(t=>Number(t.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const t=this;t.options.speed=t.config.speed.options,C.empty(this.config.ratio)||fl.call(t),Object.defineProperty(t.media,"quality",{get(){const e=Os.getSources.call(t).find(n=>n.getAttribute("src")===t.source);return e&&Number(e.getAttribute("size"))},set(e){if(t.quality!==e){if(t.config.quality.forced&&C.function(t.config.quality.onChange))t.config.quality.onChange(e);else{const n=Os.getSources.call(t).find(l=>Number(l.getAttribute("size"))===e);if(!n)return;const{currentTime:r,paused:i,preload:s,readyState:o,playbackRate:a}=t.media;t.media.src=n.getAttribute("src"),(s!=="none"||o)&&(t.once("loadedmetadata",()=>{t.speed=a,t.currentTime=r,i||ci(t.play())}),t.media.load())}me.call(t,t.media,"qualitychange",!1,{quality:e})}}})},cancelRequests(){this.isHTML5&&(Yi(Os.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function _X(t){return`${t}-${Math.floor(1e4*Math.random())}`}function Uy(t,...e){return C.empty(t)?t:t.toString().replace(/{(\d+)}/g,(n,r)=>e[r].toString())}function CX(t,e){return t===0||e===0||Number.isNaN(t)||Number.isNaN(e)?0:(t/e*100).toFixed(2)}const Ru=(t="",e="",n="")=>t.replace(new RegExp(e.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),n.toString()),JP=(t="")=>t.toString().replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());function LX(t=""){let e=t.toString();return e=Ru(e,"-"," "),e=Ru(e,"_"," "),e=JP(e),Ru(e," ","")}function kX(t=""){let e=t.toString();return e=LX(e),e.charAt(0).toLowerCase()+e.slice(1)}function PX(t){const e=document.createDocumentFragment(),n=document.createElement("div");return e.appendChild(n),n.innerHTML=t,e.firstChild.innerText}function IX(t){const e=document.createElement("div");return e.appendChild(t),e.innerHTML}const Uw={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Vt={get(t="",e={}){if(C.empty(t)||C.empty(e))return"";let n=WP(e.i18n,t);if(C.empty(n))return Object.keys(Uw).includes(t)?Uw[t]:"";const r={"{seektime}":e.seekTime,"{title}":e.title};return Object.entries(r).forEach(([i,s])=>{n=Ru(n,i,s)}),n}};class ac{constructor(e){ee(this,"get",n=>{if(!ac.supported||!this.enabled)return null;const r=window.localStorage.getItem(this.key);if(C.empty(r))return null;const i=JSON.parse(r);return C.string(n)&&n.length?i[n]:i}),ee(this,"set",n=>{if(!ac.supported||!this.enabled||!C.object(n))return;let r=this.get();C.empty(r)&&(r={}),bt(r,n);try{window.localStorage.setItem(this.key,JSON.stringify(r))}catch{}}),this.enabled=e.config.storage.enabled,this.key=e.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}}function jc(t,e="text"){return new Promise((n,r)=>{try{const i=new XMLHttpRequest;if(!("withCredentials"in i))return;i.addEventListener("load",()=>{if(e==="text")try{n(JSON.parse(i.responseText))}catch{n(i.responseText)}else n(i.response)}),i.addEventListener("error",()=>{throw new Error(i.status)}),i.open("GET",t,!0),i.responseType=e,i.send()}catch(i){r(i)}})}function ZP(t,e){if(!C.string(t))return;const n="cache",r=C.string(e);let i=!1;const s=()=>document.getElementById(e)!==null,o=(a,l)=>{a.innerHTML=l,r&&s()||document.body.insertAdjacentElement("afterbegin",a)};if(!r||!s()){const a=ac.supported,l=document.createElement("div");if(l.setAttribute("hidden",""),r&&l.setAttribute("id",e),a){const u=window.localStorage.getItem(`${n}-${e}`);if(i=u!==null,i){const c=JSON.parse(u);o(l,c.content)}}jc(t).then(u=>{if(!C.empty(u)){if(a)try{window.localStorage.setItem(`${n}-${e}`,JSON.stringify({content:u}))}catch{}o(l,u)}}).catch(()=>{})}}const eI=t=>Math.trunc(t/60/60%60,10),DX=t=>Math.trunc(t/60%60,10),OX=t=>Math.trunc(t%60,10);function nm(t=0,e=!1,n=!1){if(!C.number(t))return nm(void 0,e,n);const r=a=>`0${a}`.slice(-2);let i=eI(t);const s=DX(t),o=OX(t);return i=e||i>0?`${i}:`:"",`${n&&t>0?"-":""}${i}${r(s)}:${r(o)}`}const J={getIconUrl(){const t=new URL(this.config.iconUrl,window.location),e=window.location.host?window.location.host:window.top.location.host,n=t.host!==e||Kt.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:n}},findElements(){try{return this.elements.controls=Ft.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:sc.call(this,this.config.selectors.buttons.play),pause:Ft.call(this,this.config.selectors.buttons.pause),restart:Ft.call(this,this.config.selectors.buttons.restart),rewind:Ft.call(this,this.config.selectors.buttons.rewind),fastForward:Ft.call(this,this.config.selectors.buttons.fastForward),mute:Ft.call(this,this.config.selectors.buttons.mute),pip:Ft.call(this,this.config.selectors.buttons.pip),airplay:Ft.call(this,this.config.selectors.buttons.airplay),settings:Ft.call(this,this.config.selectors.buttons.settings),captions:Ft.call(this,this.config.selectors.buttons.captions),fullscreen:Ft.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=Ft.call(this,this.config.selectors.progress),this.elements.inputs={seek:Ft.call(this,this.config.selectors.inputs.seek),volume:Ft.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:Ft.call(this,this.config.selectors.display.buffer),currentTime:Ft.call(this,this.config.selectors.display.currentTime),duration:Ft.call(this,this.config.selectors.display.duration)},C.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(t){return this.debug.warn("It looks like there is a problem with your custom controls HTML",t),this.toggleNativeControls(!0),!1}},createIcon(t,e){const n="http://www.w3.org/2000/svg",r=J.getIconUrl.call(this),i=`${r.cors?"":r.url}#${this.config.iconPrefix}`,s=document.createElementNS(n,"svg");$y(s,bt(e,{"aria-hidden":"true",focusable:"false"}));const o=document.createElementNS(n,"use"),a=`${i}-${t}`;return"href"in o&&o.setAttributeNS("http://www.w3.org/1999/xlink","href",a),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a),s.appendChild(o),s},createLabel(t,e={}){const n=Vt.get(t,this.config);return pe("span",{...e,class:[e.class,this.config.classNames.hidden].filter(Boolean).join(" ")},n)},createBadge(t){if(C.empty(t))return null;const e=pe("span",{class:this.config.classNames.menu.value});return e.appendChild(pe("span",{class:this.config.classNames.menu.badge},t)),e},createButton(t,e){const n=bt({},e);let r=kX(t);const i={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(o=>{Object.keys(n).includes(o)&&(i[o]=n[o],delete n[o])}),i.element!=="button"||Object.keys(n).includes("type")||(n.type="button"),Object.keys(n).includes("class")?n.class.split(" ").some(o=>o===this.config.classNames.control)||bt(n,{class:`${n.class} ${this.config.classNames.control}`}):n.class=this.config.classNames.control,t){case"play":i.toggle=!0,i.label="play",i.labelPressed="pause",i.icon="play",i.iconPressed="pause";break;case"mute":i.toggle=!0,i.label="mute",i.labelPressed="unmute",i.icon="volume",i.iconPressed="muted";break;case"captions":i.toggle=!0,i.label="enableCaptions",i.labelPressed="disableCaptions",i.icon="captions-off",i.iconPressed="captions-on";break;case"fullscreen":i.toggle=!0,i.label="enterFullscreen",i.labelPressed="exitFullscreen",i.icon="enter-fullscreen",i.iconPressed="exit-fullscreen";break;case"play-large":n.class+=` ${this.config.classNames.control}--overlaid`,r="play",i.label="play",i.icon="play";break;default:C.empty(i.label)&&(i.label=r),C.empty(i.icon)&&(i.icon=t)}const s=pe(i.element);return i.toggle?(s.appendChild(J.createIcon.call(this,i.iconPressed,{class:"icon--pressed"})),s.appendChild(J.createIcon.call(this,i.icon,{class:"icon--not-pressed"})),s.appendChild(J.createLabel.call(this,i.labelPressed,{class:"label--pressed"})),s.appendChild(J.createLabel.call(this,i.label,{class:"label--not-pressed"}))):(s.appendChild(J.createIcon.call(this,i.icon)),s.appendChild(J.createLabel.call(this,i.label))),bt(n,ii(this.config.selectors.buttons[r],n)),$y(s,n),r==="play"?(C.array(this.elements.buttons[r])||(this.elements.buttons[r]=[]),this.elements.buttons[r].push(s)):this.elements.buttons[r]=s,s},createRange(t,e){const n=pe("input",bt(ii(this.config.selectors.inputs[t]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Vt.get(t,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},e));return this.elements.inputs[t]=n,J.updateRangeFill.call(this,n),nX.setup(n),n},createProgress(t,e){const n=pe("progress",bt(ii(this.config.selectors.display[t]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},e));if(t!=="volume"){n.appendChild(pe("span",null,"0"));const r={played:"played",buffer:"buffered"}[t],i=r?Vt.get(r,this.config):"";n.innerText=`% ${i.toLowerCase()}`}return this.elements.display[t]=n,n},createTime(t,e){const n=ii(this.config.selectors.display[t],e),r=pe("div",bt(n,{class:`${n.class?n.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":Vt.get(t,this.config),role:"timer"}),"00:00");return this.elements.display[t]=r,r},bindMenuItemShortcuts(t,e){Ie.call(this,t,"keydown keyup",n=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(n.key)||(n.preventDefault(),n.stopPropagation(),n.type==="keydown"))return;const r=Io(t,'[role="menuitemradio"]');if(!r&&[" ","ArrowRight"].includes(n.key))J.showMenuPanel.call(this,e,!0);else{let i;n.key!==" "&&(n.key==="ArrowDown"||r&&n.key==="ArrowRight"?(i=t.nextElementSibling,C.element(i)||(i=t.parentNode.firstElementChild)):(i=t.previousElementSibling,C.element(i)||(i=t.parentNode.lastElementChild)),Ig.call(this,i,!0))}},!1),Ie.call(this,t,"keyup",n=>{n.key==="Return"&&J.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:t,list:e,type:n,title:r,badge:i=null,checked:s=!1}){const o=ii(this.config.selectors.inputs[n]),a=pe("button",bt(o,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${o.class?o.class:""}`.trim(),"aria-checked":s,value:t})),l=pe("span");l.innerHTML=r,C.element(i)&&l.appendChild(i),a.appendChild(l),Object.defineProperty(a,"checked",{enumerable:!0,get:()=>a.getAttribute("aria-checked")==="true",set(u){u&&Array.from(a.parentNode.children).filter(c=>Io(c,'[role="menuitemradio"]')).forEach(c=>c.setAttribute("aria-checked","false")),a.setAttribute("aria-checked",u?"true":"false")}}),this.listeners.bind(a,"click keyup",u=>{if(!C.keyboardEvent(u)||u.key===" "){switch(u.preventDefault(),u.stopPropagation(),a.checked=!0,n){case"language":this.currentTrack=Number(t);break;case"quality":this.quality=t;break;case"speed":this.speed=parseFloat(t)}J.showMenuPanel.call(this,"home",C.keyboardEvent(u))}},n,!1),J.bindMenuItemShortcuts.call(this,a,n),e.appendChild(a)},formatTime(t=0,e=!1){return C.number(t)?nm(t,eI(this.duration)>0,e):t},updateTimeDisplay(t=null,e=0,n=!1){C.element(t)&&C.number(e)&&(t.innerText=J.formatTime(e,n))},updateVolume(){this.supported.ui&&(C.element(this.elements.inputs.volume)&&J.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),C.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(t,e=0){C.element(t)&&(t.value=e,J.updateRangeFill.call(this,t))},updateProgress(t){if(!this.supported.ui||!C.event(t))return;let e=0;const n=(r,i)=>{const s=C.number(i)?i:0,o=C.element(r)?r:this.elements.display.buffer;if(C.element(o)){o.value=s;const a=o.getElementsByTagName("span")[0];C.element(a)&&(a.childNodes[0].nodeValue=s)}};if(t)switch(t.type){case"timeupdate":case"seeking":case"seeked":e=CX(this.currentTime,this.duration),t.type==="timeupdate"&&J.setRange.call(this,this.elements.inputs.seek,e);break;case"playing":case"progress":n(this.elements.display.buffer,100*this.buffered)}},updateRangeFill(t){const e=C.event(t)?t.target:t;if(C.element(e)&&e.getAttribute("type")==="range"){if(Io(e,this.config.selectors.inputs.seek)){e.setAttribute("aria-valuenow",this.currentTime);const n=J.formatTime(this.currentTime),r=J.formatTime(this.duration),i=Vt.get("seekLabel",this.config);e.setAttribute("aria-valuetext",i.replace("{currentTime}",n).replace("{duration}",r))}else if(Io(e,this.config.selectors.inputs.volume)){const n=100*e.value;e.setAttribute("aria-valuenow",n),e.setAttribute("aria-valuetext",`${n.toFixed(1)}%`)}else e.setAttribute("aria-valuenow",e.value);(Kt.isWebKit||Kt.isIPadOS)&&e.style.setProperty("--value",e.value/e.max*100+"%")}},updateSeekTooltip(t){var e,n;if(!this.config.tooltips.seek||!C.element(this.elements.inputs.seek)||!C.element(this.elements.display.seekTooltip)||this.duration===0)return;const r=this.elements.display.seekTooltip,i=`${this.config.classNames.tooltip}--visible`,s=c=>je(r,i,c);if(this.touch)return void s(!1);let o=0;const a=this.elements.progress.getBoundingClientRect();if(C.event(t))o=100/a.width*(t.pageX-a.left);else{if(!Ih(r,i))return;o=parseFloat(r.style.left,10)}o<0?o=0:o>100&&(o=100);const l=this.duration/100*o;r.innerText=J.formatTime(l);const u=(e=this.config.markers)===null||e===void 0||(n=e.points)===null||n===void 0?void 0:n.find(({time:c})=>c===Math.round(l));u&&r.insertAdjacentHTML("afterbegin",`${u.label}<br>`),r.style.left=`${o}%`,C.event(t)&&["mouseenter","mouseleave"].includes(t.type)&&s(t.type==="mouseenter")},timeUpdate(t){const e=!C.element(this.elements.display.duration)&&this.config.invertTime;J.updateTimeDisplay.call(this,this.elements.display.currentTime,e?this.duration-this.currentTime:this.currentTime,e),t&&t.type==="timeupdate"&&this.media.seeking||J.updateProgress.call(this,t)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return fo(this.elements.display.currentTime,!0),void fo(this.elements.progress,!0);C.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const t=C.element(this.elements.display.duration);!t&&this.config.displayDuration&&this.paused&&J.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),t&&J.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&J.setMarkers.call(this),J.updateSeekTooltip.call(this)},toggleMenuButton(t,e){fo(this.elements.settings.buttons[t],!e)},updateSetting(t,e,n){const r=this.elements.settings.panels[t];let i=null,s=e;if(t==="captions")i=this.currentTrack;else{if(i=C.empty(n)?this[t]:n,C.empty(i)&&(i=this.config[t].default),!C.empty(this.options[t])&&!this.options[t].includes(i))return void this.debug.warn(`Unsupported value of '${i}' for ${t}`);if(!this.config[t].options.includes(i))return void this.debug.warn(`Disabled value of '${i}' for ${t}`)}if(C.element(s)||(s=r&&r.querySelector('[role="menu"]')),!C.element(s))return;this.elements.settings.buttons[t].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=J.getLabel.call(this,t,i);const o=s&&s.querySelector(`[value="${i}"]`);C.element(o)&&(o.checked=!0)},getLabel(t,e){switch(t){case"speed":return e===1?Vt.get("normal",this.config):`${e}&times;`;case"quality":if(C.number(e)){const n=Vt.get(`qualityLabel.${e}`,this.config);return n.length?n:`${e}p`}return JP(e);case"captions":return Me.getLabel.call(this);default:return null}},setQualityMenu(t){if(!C.element(this.elements.settings.panels.quality))return;const e="quality",n=this.elements.settings.panels.quality.querySelector('[role="menu"]');C.array(t)&&(this.options.quality=By(t).filter(s=>this.config.quality.options.includes(s)));const r=!C.empty(this.options.quality)&&this.options.quality.length>1;if(J.toggleMenuButton.call(this,e,r),Cf(n),J.checkMenu.call(this),!r)return;const i=s=>{const o=Vt.get(`qualityBadge.${s}`,this.config);return o.length?J.createBadge.call(this,o):null};this.options.quality.sort((s,o)=>{const a=this.config.quality.options;return a.indexOf(s)>a.indexOf(o)?1:-1}).forEach(s=>{J.createMenuItem.call(this,{value:s,list:n,type:e,title:J.getLabel.call(this,"quality",s),badge:i(s)})}),J.updateSetting.call(this,e,n)},setCaptionsMenu(){if(!C.element(this.elements.settings.panels.captions))return;const t="captions",e=this.elements.settings.panels.captions.querySelector('[role="menu"]'),n=Me.getTracks.call(this),r=!!n.length;if(J.toggleMenuButton.call(this,t,r),Cf(e),J.checkMenu.call(this),!r)return;const i=n.map((s,o)=>({value:o,checked:this.captions.toggled&&this.currentTrack===o,title:Me.getLabel.call(this,s),badge:s.language&&J.createBadge.call(this,s.language.toUpperCase()),list:e,type:"language"}));i.unshift({value:-1,checked:!this.captions.toggled,title:Vt.get("disabled",this.config),list:e,type:"language"}),i.forEach(J.createMenuItem.bind(this)),J.updateSetting.call(this,t,e)},setSpeedMenu(){if(!C.element(this.elements.settings.panels.speed))return;const t="speed",e=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(r=>r>=this.minimumSpeed&&r<=this.maximumSpeed);const n=!C.empty(this.options.speed)&&this.options.speed.length>1;J.toggleMenuButton.call(this,t,n),Cf(e),J.checkMenu.call(this),n&&(this.options.speed.forEach(r=>{J.createMenuItem.call(this,{value:r,list:e,type:t,title:J.getLabel.call(this,"speed",r)})}),J.updateSetting.call(this,t,e))},checkMenu(){const{buttons:t}=this.elements.settings,e=!C.empty(t)&&Object.values(t).some(n=>!n.hidden);fo(this.elements.settings.menu,!e)},focusFirstMenuItem(t,e=!1){if(this.elements.settings.popup.hidden)return;let n=t;C.element(n)||(n=Object.values(this.elements.settings.panels).find(i=>!i.hidden));const r=n.querySelector('[role^="menuitem"]');Ig.call(this,r,e)},toggleMenu(t){const{popup:e}=this.elements.settings,n=this.elements.buttons.settings;if(!C.element(e)||!C.element(n))return;const{hidden:r}=e;let i=r;if(C.boolean(t))i=t;else if(C.keyboardEvent(t)&&t.key==="Escape")i=!1;else if(C.event(t)){const s=C.function(t.composedPath)?t.composedPath()[0]:t.target,o=e.contains(s);if(o||!o&&t.target!==n&&i)return}n.setAttribute("aria-expanded",i),fo(e,!i),je(this.elements.container,this.config.classNames.menu.open,i),i&&C.keyboardEvent(t)?J.focusFirstMenuItem.call(this,null,!0):i||r||Ig.call(this,n,C.keyboardEvent(t))},getMenuSize(t){const e=t.cloneNode(!0);e.style.position="absolute",e.style.opacity=0,e.removeAttribute("hidden"),t.parentNode.appendChild(e);const n=e.scrollWidth,r=e.scrollHeight;return Yi(e),{width:n,height:r}},showMenuPanel(t="",e=!1){const n=this.elements.container.querySelector(`#plyr-settings-${this.id}-${t}`);if(!C.element(n))return;const r=n.parentNode,i=Array.from(r.children).find(s=>!s.hidden);if(wt.transitions&&!wt.reducedMotion){r.style.width=`${i.scrollWidth}px`,r.style.height=`${i.scrollHeight}px`;const s=J.getMenuSize.call(this,n),o=a=>{a.target===r&&["width","height"].includes(a.propertyName)&&(r.style.width="",r.style.height="",tm.call(this,r,Fy,o))};Ie.call(this,r,Fy,o),r.style.width=`${s.width}px`,r.style.height=`${s.height}px`}fo(i,!0),fo(n,!1),J.focusFirstMenuItem.call(this,n,e)},setDownloadUrl(){const t=this.elements.buttons.download;C.element(t)&&t.setAttribute("href",this.download)},create(t){const{bindMenuItemShortcuts:e,createButton:n,createProgress:r,createRange:i,createTime:s,setQualityMenu:o,setSpeedMenu:a,showMenuPanel:l}=J;this.elements.controls=null,C.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(n.call(this,"play-large"));const u=pe("div",ii(this.config.selectors.controls.wrapper));this.elements.controls=u;const c={class:"plyr__controls__item"};return By(C.array(this.config.controls)?this.config.controls:[]).forEach(d=>{if(d==="restart"&&u.appendChild(n.call(this,"restart",c)),d==="rewind"&&u.appendChild(n.call(this,"rewind",c)),d==="play"&&u.appendChild(n.call(this,"play",c)),d==="fast-forward"&&u.appendChild(n.call(this,"fast-forward",c)),d==="progress"){const f=pe("div",{class:`${c.class} plyr__progress__container`}),m=pe("div",ii(this.config.selectors.progress));if(m.appendChild(i.call(this,"seek",{id:`plyr-seek-${t.id}`})),m.appendChild(r.call(this,"buffer")),this.config.tooltips.seek){const h=pe("span",{class:this.config.classNames.tooltip},"00:00");m.appendChild(h),this.elements.display.seekTooltip=h}this.elements.progress=m,f.appendChild(this.elements.progress),u.appendChild(f)}if(d==="current-time"&&u.appendChild(s.call(this,"currentTime",c)),d==="duration"&&u.appendChild(s.call(this,"duration",c)),d==="mute"||d==="volume"){let{volume:f}=this.elements;if(C.element(f)&&u.contains(f)||(f=pe("div",bt({},c,{class:`${c.class} plyr__volume`.trim()})),this.elements.volume=f,u.appendChild(f)),d==="mute"&&f.appendChild(n.call(this,"mute")),d==="volume"&&!Kt.isIos&&!Kt.isIPadOS){const m={max:1,step:.05,value:this.config.volume};f.appendChild(i.call(this,"volume",bt(m,{id:`plyr-volume-${t.id}`})))}}if(d==="captions"&&u.appendChild(n.call(this,"captions",c)),d==="settings"&&!C.empty(this.config.settings)){const f=pe("div",bt({},c,{class:`${c.class} plyr__menu`.trim(),hidden:""}));f.appendChild(n.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${t.id}`,"aria-expanded":!1}));const m=pe("div",{class:"plyr__menu__container",id:`plyr-settings-${t.id}`,hidden:""}),h=pe("div"),p=pe("div",{id:`plyr-settings-${t.id}-home`}),v=pe("div",{role:"menu"});p.appendChild(v),h.appendChild(p),this.elements.settings.panels.home=p,this.config.settings.forEach(y=>{const g=pe("button",bt(ii(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));e.call(this,g,y),Ie.call(this,g,"click",()=>{l.call(this,y,!1)});const x=pe("span",null,Vt.get(y,this.config)),b=pe("span",{class:this.config.classNames.menu.value});b.innerHTML=t[y],x.appendChild(b),g.appendChild(x),v.appendChild(g);const E=pe("div",{id:`plyr-settings-${t.id}-${y}`,hidden:""}),T=pe("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});T.appendChild(pe("span",{"aria-hidden":!0},Vt.get(y,this.config))),T.appendChild(pe("span",{class:this.config.classNames.hidden},Vt.get("menuBack",this.config))),Ie.call(this,E,"keydown",w=>{w.key==="ArrowLeft"&&(w.preventDefault(),w.stopPropagation(),l.call(this,"home",!0))},!1),Ie.call(this,T,"click",()=>{l.call(this,"home",!1)}),E.appendChild(T),E.appendChild(pe("div",{role:"menu"})),h.appendChild(E),this.elements.settings.buttons[y]=g,this.elements.settings.panels[y]=E}),m.appendChild(h),f.appendChild(m),u.appendChild(f),this.elements.settings.popup=m,this.elements.settings.menu=f}if(d==="pip"&&wt.pip&&u.appendChild(n.call(this,"pip",c)),d==="airplay"&&wt.airplay&&u.appendChild(n.call(this,"airplay",c)),d==="download"){const f=bt({},c,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(f.download="");const{download:m}=this.config.urls;!C.url(m)&&this.isEmbed&&bt(f,{icon:`logo-${this.provider}`,label:this.provider}),u.appendChild(n.call(this,"download",f))}d==="fullscreen"&&u.appendChild(n.call(this,"fullscreen",c))}),this.isHTML5&&o.call(this,Os.getQualityOptions.call(this)),a.call(this),u},inject(){if(this.config.loadSprite){const i=J.getIconUrl.call(this);i.cors&&ZP(i.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let t=null;this.elements.controls=null;const e={id:this.id,seektime:this.config.seekTime,title:this.config.title};let n=!0;C.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,e)),this.config.controls||(this.config.controls=[]),C.element(this.config.controls)||C.string(this.config.controls)?t=this.config.controls:(t=J.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:Me.getLabel.call(this)}),n=!1);let r;if(n&&C.string(this.config.controls)&&(t=(i=>{let s=i;return Object.entries(e).forEach(([o,a])=>{s=Ru(s,`{${o}}`,a)}),s})(t)),C.string(this.config.selectors.controls.container)&&(r=document.querySelector(this.config.selectors.controls.container)),C.element(r)||(r=this.elements.container),r[C.element(t)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",t),C.element(this.elements.controls)||J.findElements.call(this),!C.empty(this.elements.buttons)){const i=s=>{const o=this.config.classNames.controlPressed;s.setAttribute("aria-pressed","false"),Object.defineProperty(s,"pressed",{configurable:!0,enumerable:!0,get:()=>Ih(s,o),set(a=!1){je(s,o,a),s.setAttribute("aria-pressed",a?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(s=>{C.array(s)||C.nodeList(s)?Array.from(s).filter(Boolean).forEach(i):i(s)})}if(Kt.isEdge&&GP(r),this.config.tooltips.controls){const{classNames:i,selectors:s}=this.config,o=`${s.controls.wrapper} ${s.labels} .${i.hidden}`,a=sc.call(this,o);Array.from(a).forEach(l=>{je(l,this.config.classNames.hidden,!1),je(l,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch{}},setMarkers(){var t,e;if(!this.duration||this.elements.markers)return;const n=(t=this.config.markers)===null||t===void 0||(e=t.points)===null||e===void 0?void 0:e.filter(({time:l})=>l>0&&l<this.duration);if(n==null||!n.length)return;const r=document.createDocumentFragment(),i=document.createDocumentFragment();let s=null;const o=`${this.config.classNames.tooltip}--visible`,a=l=>je(s,o,l);n.forEach(l=>{const u=pe("span",{class:this.config.classNames.marker},""),c=l.time/this.duration*100+"%";s&&(u.addEventListener("mouseenter",()=>{l.label||(s.style.left=c,s.innerHTML=l.label,a(!0))}),u.addEventListener("mouseleave",()=>{a(!1)})),u.addEventListener("click",()=>{this.currentTime=l.time}),u.style.left=c,i.appendChild(u)}),r.appendChild(i),this.config.tooltips.seek||(s=pe("span",{class:this.config.classNames.tooltip},""),r.appendChild(s)),this.elements.markers={points:i,tip:s},this.elements.progress.appendChild(r)}};function tI(t,e=!0){let n=t;if(e){const r=document.createElement("a");r.href=n,n=r.href}try{return new URL(n)}catch{return null}}function nI(t){const e=new URLSearchParams;return C.object(t)&&Object.entries(t).forEach(([n,r])=>{e.set(n,r)}),e}const Me={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!wt.textTracks)return void(C.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&J.setCaptionsMenu.call(this));if(C.element(this.elements.captions)||(this.elements.captions=pe("div",ii(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),EX(this.elements.captions,this.elements.wrapper)),Kt.isIE&&window.URL){const r=this.media.querySelectorAll("track");Array.from(r).forEach(i=>{const s=i.getAttribute("src"),o=tI(s);o!==null&&o.hostname!==window.location.href.hostname&&["http:","https:"].includes(o.protocol)&&jc(s,"blob").then(a=>{i.setAttribute("src",window.URL.createObjectURL(a))}).catch(()=>{Yi(i)})})}const t=By((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(r=>r.split("-")[0]));let e=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();e==="auto"&&([e]=t);let n=this.storage.get("captions");if(C.boolean(n)||({active:n}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:n,language:e,languages:t}),this.isHTML5){const r=this.config.captions.update?"addtrack removetrack":"removetrack";Ie.call(this,this.media.textTracks,r,Me.update.bind(this))}setTimeout(Me.update.bind(this),0)},update(){const t=Me.getTracks.call(this,!0),{active:e,language:n,meta:r,currentTrackNode:i}=this.captions,s=!!t.find(o=>o.language===n);this.isHTML5&&this.isVideo&&t.filter(o=>!r.get(o)).forEach(o=>{this.debug.log("Track added",o),r.set(o,{default:o.mode==="showing"}),o.mode==="showing"&&(o.mode="hidden"),Ie.call(this,o,"cuechange",()=>Me.updateCues.call(this))}),(s&&this.language!==n||!t.includes(i))&&(Me.setLanguage.call(this,n),Me.toggle.call(this,e&&s)),this.elements&&je(this.elements.container,this.config.classNames.captions.enabled,!C.empty(t)),C.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&J.setCaptionsMenu.call(this)},toggle(t,e=!0){if(!this.supported.ui)return;const{toggled:n}=this.captions,r=this.config.classNames.captions.active,i=C.nullOrUndefined(t)?!n:t;if(i!==n){if(e||(this.captions.active=i,this.storage.set({captions:i})),!this.language&&i&&!e){const s=Me.getTracks.call(this),o=Me.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=o.language,void Me.set.call(this,s.indexOf(o))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=i),je(this.elements.container,r,i),this.captions.toggled=i,J.updateSetting.call(this,"captions"),me.call(this,this.media,i?"captionsenabled":"captionsdisabled")}setTimeout(()=>{i&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(t,e=!0){const n=Me.getTracks.call(this);if(t!==-1)if(C.number(t))if(t in n){if(this.captions.currentTrack!==t){this.captions.currentTrack=t;const r=n[t],{language:i}=r||{};this.captions.currentTrackNode=r,J.updateSetting.call(this,"captions"),e||(this.captions.language=i,this.storage.set({language:i})),this.isVimeo&&this.embed.enableTextTrack(i),me.call(this,this.media,"languagechange")}Me.toggle.call(this,!0,e),this.isHTML5&&this.isVideo&&Me.updateCues.call(this)}else this.debug.warn("Track not found",t);else this.debug.warn("Invalid caption argument",t);else Me.toggle.call(this,!1,e)},setLanguage(t,e=!0){if(!C.string(t))return void this.debug.warn("Invalid language argument",t);const n=t.toLowerCase();this.captions.language=n;const r=Me.getTracks.call(this),i=Me.findTrack.call(this,[n]);Me.set.call(this,r.indexOf(i),e)},getTracks(t=!1){return Array.from((this.media||{}).textTracks||[]).filter(e=>!this.isHTML5||t||this.captions.meta.has(e)).filter(e=>["captions","subtitles"].includes(e.kind))},findTrack(t,e=!1){const n=Me.getTracks.call(this),r=o=>Number((this.captions.meta.get(o)||{}).default),i=Array.from(n).sort((o,a)=>r(a)-r(o));let s;return t.every(o=>(s=i.find(a=>a.language===o),!s)),s||(e?i[0]:void 0)},getCurrentTrack(){return Me.getTracks.call(this)[this.currentTrack]},getLabel(t){let e=t;return!C.track(e)&&wt.textTracks&&this.captions.toggled&&(e=Me.getCurrentTrack.call(this)),C.track(e)?C.empty(e.label)?C.empty(e.language)?Vt.get("enabled",this.config):t.language.toUpperCase():e.label:Vt.get("disabled",this.config)},updateCues(t){if(!this.supported.ui)return;if(!C.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!C.nullOrUndefined(t)&&!Array.isArray(t))return void this.debug.warn("updateCues: Invalid input",t);let e=t;if(!e){const r=Me.getCurrentTrack.call(this);e=Array.from((r||{}).activeCues||[]).map(i=>i.getCueAsHTML()).map(IX)}const n=e.map(r=>r.trim()).join(`
`);if(n!==this.elements.captions.innerHTML){Cf(this.elements.captions);const r=pe("span",ii(this.config.selectors.caption));r.innerHTML=n,this.elements.captions.appendChild(r),me.call(this,this.media,"cuechange")}}},rI={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},Dg={active:"picture-in-picture",inactive:"inline"},Ls={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Og={audio:"audio",video:"video"};function MX(t){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(t)?Ls.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(t)?Ls.vimeo:null}const Mg=()=>{};class NX{constructor(e=!1){this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):Mg}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):Mg}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):Mg}}class Br{constructor(e){ee(this,"onChange",()=>{if(!this.supported)return;const n=this.player.elements.buttons.fullscreen;C.element(n)&&(n.pressed=this.active);const r=this.target===this.player.media?this.target:this.player.elements.container;me.call(this.player,r,this.active?"enterfullscreen":"exitfullscreen",!0)}),ee(this,"toggleFallback",(n=!1)=>{if(n?this.scrollPosition={x:window.scrollX??0,y:window.scrollY??0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=n?"hidden":"",je(this.target,this.player.config.classNames.fullscreen.fallback,n),Kt.isIos){let r=document.head.querySelector('meta[name="viewport"]');const i="viewport-fit=cover";r||(r=document.createElement("meta"),r.setAttribute("name","viewport"));const s=C.string(r.content)&&r.content.includes(i);n?(this.cleanupViewport=!s,s||(r.content+=`,${i}`)):this.cleanupViewport&&(r.content=r.content.split(",").filter(o=>o.trim()!==i).join(","))}this.onChange()}),ee(this,"trapFocus",n=>{if(Kt.isIos||Kt.isIPadOS||!this.active||n.key!=="Tab")return;const r=document.activeElement,i=sc.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[s]=i,o=i[i.length-1];r!==o||n.shiftKey?r===s&&n.shiftKey&&(o.focus(),n.preventDefault()):(s.focus(),n.preventDefault())}),ee(this,"update",()=>{if(this.supported){let n;n=this.forceFallback?"Fallback (forced)":Br.nativeSupported?"Native":"Fallback",this.player.debug.log(`${n} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");je(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),ee(this,"enter",()=>{this.supported&&(Kt.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!Br.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?C.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),ee(this,"exit",()=>{if(this.supported)if(Kt.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),ci(this.player.play());else if(!Br.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!C.empty(this.prefix)){const n=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${n}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),ee(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=e,this.prefix=Br.prefix,this.property=Br.property,this.scrollPosition={x:0,y:0},this.forceFallback=e.config.fullscreen.fallback==="force",this.player.elements.fullscreen=e.config.fullscreen.container&&bX(this.player.elements.container,e.config.fullscreen.container),Ie.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),Ie.call(this.player,this.player.elements.container,"dblclick",n=>{C.element(this.player.elements.controls)&&this.player.elements.controls.contains(n.target)||this.player.listeners.proxy(n,this.toggle,"fullscreen")}),Ie.call(this,this.player.elements.container,"keydown",n=>this.trapFocus(n)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return Br.nativeSupported&&!this.forceFallback}static get prefix(){if(C.function(document.exitFullscreen))return"";let e="";return["webkit","moz","ms"].some(n=>!(!C.function(document[`${n}ExitFullscreen`])&&!C.function(document[`${n}CancelFullScreen`]))&&(e=n,!0)),e}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,Br.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||Br.nativeSupported||!Kt.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!Br.nativeSupported||this.forceFallback)return Ih(this.target,this.player.config.classNames.fullscreen.fallback);const e=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}get target(){return Kt.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen??this.player.elements.container}}function Lf(t,e=1){return new Promise((n,r)=>{const i=new Image,s=()=>{delete i.onload,delete i.onerror,(i.naturalWidth>=e?n:r)(i)};Object.assign(i,{onload:s,onerror:s,src:t})})}const Xe={addStyleHook(){je(this.elements.container,this.config.selectors.container.replace(".",""),!0),je(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(t=!1){t&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void Xe.toggleNativeControls.call(this,!0);C.element(this.elements.controls)||(J.inject.call(this),this.listeners.controls()),Xe.toggleNativeControls.call(this),this.isHTML5&&Me.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,J.updateVolume.call(this),J.timeUpdate.call(this),J.durationUpdate.call(this),Xe.checkPlaying.call(this),je(this.elements.container,this.config.classNames.pip.supported,wt.pip&&this.isHTML5&&this.isVideo),je(this.elements.container,this.config.classNames.airplay.supported,wt.airplay&&this.isHTML5),je(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{me.call(this,this.media,"ready")},0),Xe.setTitle.call(this),this.poster&&Xe.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&J.durationUpdate.call(this),this.config.mediaMetadata&&J.setMediaMetadata.call(this)},setTitle(){let t=Vt.get("play",this.config);if(C.string(this.config.title)&&!C.empty(this.config.title)&&(t+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(e=>{e.setAttribute("aria-label",t)}),this.isEmbed){const e=Ft.call(this,"iframe");if(!C.element(e))return;const n=C.empty(this.config.title)?"video":this.config.title,r=Vt.get("frameTitle",this.config);e.setAttribute("title",r.replace("{title}",n))}},togglePoster(t){je(this.elements.container,this.config.classNames.posterEnabled,t)},setPoster(t,e=!0){return e&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",t),this.elements.poster.removeAttribute("hidden"),RX.call(this).then(()=>Lf(t)).catch(n=>{throw t===this.poster&&Xe.togglePoster.call(this,!1),n}).then(()=>{if(t!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${t}')`,backgroundSize:""}),Xe.togglePoster.call(this,!0),t)))},checkPlaying(t){je(this.elements.container,this.config.classNames.playing,this.playing),je(this.elements.container,this.config.classNames.paused,this.paused),je(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(e=>{Object.assign(e,{pressed:this.playing}),e.setAttribute("aria-label",Vt.get(this.playing?"pause":"play",this.config))}),C.event(t)&&t.type==="timeupdate"||Xe.toggleControls.call(this)},checkLoading(t){this.loading=["stalled","waiting"].includes(t.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{je(this.elements.container,this.config.classNames.loading,this.loading),Xe.toggleControls.call(this)},this.loading?250:0)},toggleControls(t){const{controls:e}=this.elements;if(e&&this.config.hideControls){const n=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(!!(t||this.loading||this.paused||e.pressed||e.hover||n))}},migrateStyles(){Object.values({...this.media.style}).filter(t=>!C.empty(t)&&C.string(t)&&t.startsWith("--plyr")).forEach(t=>{this.elements.container.style.setProperty(t,this.media.style.getPropertyValue(t)),this.media.style.removeProperty(t)}),C.empty(this.media.style)&&this.media.removeAttribute("style")}};class FX{constructor(e){ee(this,"firstTouch",()=>{const{player:n}=this,{elements:r}=n;n.touch=!0,je(r.container,n.config.classNames.isTouch,!0)}),ee(this,"global",(n=!0)=>{const{player:r}=this;r.config.keyboard.global&&oc.call(r,window,"keydown keyup",this.handleKey,n,!1),oc.call(r,document.body,"click",this.toggleMenu,n),GS.call(r,document.body,"touchstart",this.firstTouch)}),ee(this,"container",()=>{const{player:n}=this,{config:r,elements:i,timers:s}=n;!r.keyboard.global&&r.keyboard.focused&&Ie.call(n,i.container,"keydown keyup",this.handleKey,!1),Ie.call(n,i.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",l=>{const{controls:u}=i;u&&l.type==="enterfullscreen"&&(u.pressed=!1,u.hover=!1);let c=0;["touchstart","touchmove","mousemove"].includes(l.type)&&(Xe.toggleControls.call(n,!0),c=n.touch?3e3:2e3),clearTimeout(s.controls),s.controls=setTimeout(()=>Xe.toggleControls.call(n,!1),c)});const o=()=>{if(!n.isVimeo||n.config.vimeo.premium)return;const l=i.wrapper,{active:u}=n.fullscreen,[c,d]=WS.call(n),f=YP(`aspect-ratio: ${c} / ${d}`);if(!u)return void(f?(l.style.width=null,l.style.height=null):(l.style.maxWidth=null,l.style.margin=null));const[m,h]=AX(),p=m/h>c/d;f?(l.style.width=p?"auto":"100%",l.style.height=p?"100%":"auto"):(l.style.maxWidth=p?h/d*c+"px":null,l.style.margin=p?"0 auto":null)},a=()=>{clearTimeout(s.resized),s.resized=setTimeout(o,50)};Ie.call(n,i.container,"enterfullscreen exitfullscreen",l=>{const{target:u}=n.fullscreen;u===i.container&&(!n.isEmbed&&C.empty(n.config.ratio)||(o(),(l.type==="enterfullscreen"?Ie:tm).call(n,window,"resize",a)))})}),ee(this,"media",()=>{const{player:n}=this,{elements:r}=n;if(Ie.call(n,n.media,"timeupdate seeking seeked",s=>J.timeUpdate.call(n,s)),Ie.call(n,n.media,"durationchange loadeddata loadedmetadata",s=>J.durationUpdate.call(n,s)),Ie.call(n,n.media,"ended",()=>{n.isHTML5&&n.isVideo&&n.config.resetOnEnd&&(n.restart(),n.pause())}),Ie.call(n,n.media,"progress playing seeking seeked",s=>J.updateProgress.call(n,s)),Ie.call(n,n.media,"volumechange",s=>J.updateVolume.call(n,s)),Ie.call(n,n.media,"playing play pause ended emptied timeupdate",s=>Xe.checkPlaying.call(n,s)),Ie.call(n,n.media,"waiting canplay seeked playing",s=>Xe.checkLoading.call(n,s)),n.supported.ui&&n.config.clickToPlay&&!n.isAudio){const s=Ft.call(n,`.${n.config.classNames.video}`);if(!C.element(s))return;Ie.call(n,r.container,"click",o=>{([r.container,s].includes(o.target)||s.contains(o.target))&&(n.touch&&n.config.hideControls||(n.ended?(this.proxy(o,n.restart,"restart"),this.proxy(o,()=>{ci(n.play())},"play")):this.proxy(o,()=>{ci(n.togglePlay())},"play")))})}n.supported.ui&&n.config.disableContextMenu&&Ie.call(n,r.wrapper,"contextmenu",s=>{s.preventDefault()},!1),Ie.call(n,n.media,"volumechange",()=>{n.storage.set({volume:n.volume,muted:n.muted})}),Ie.call(n,n.media,"ratechange",()=>{J.updateSetting.call(n,"speed"),n.storage.set({speed:n.speed})}),Ie.call(n,n.media,"qualitychange",s=>{J.updateSetting.call(n,"quality",null,s.detail.quality)}),Ie.call(n,n.media,"ready qualitychange",()=>{J.setDownloadUrl.call(n)});const i=n.config.events.concat(["keyup","keydown"]).join(" ");Ie.call(n,n.media,i,s=>{let{detail:o={}}=s;s.type==="error"&&(o=n.media.error),me.call(n,r.container,s.type,!0,o)})}),ee(this,"proxy",(n,r,i)=>{const{player:s}=this,o=s.config.listeners[i];let a=!0;C.function(o)&&(a=o.call(s,n)),a!==!1&&C.function(r)&&r.call(s,n)}),ee(this,"bind",(n,r,i,s,o=!0)=>{const{player:a}=this,l=a.config.listeners[s],u=C.function(l);Ie.call(a,n,r,c=>this.proxy(c,i,s),o&&!u)}),ee(this,"controls",()=>{const{player:n}=this,{elements:r}=n,i=Kt.isIE?"change":"input";if(r.buttons.play&&Array.from(r.buttons.play).forEach(s=>{this.bind(s,"click",()=>{ci(n.togglePlay())},"play")}),this.bind(r.buttons.restart,"click",n.restart,"restart"),this.bind(r.buttons.rewind,"click",()=>{n.lastSeekTime=Date.now(),n.rewind()},"rewind"),this.bind(r.buttons.fastForward,"click",()=>{n.lastSeekTime=Date.now(),n.forward()},"fastForward"),this.bind(r.buttons.mute,"click",()=>{n.muted=!n.muted},"mute"),this.bind(r.buttons.captions,"click",()=>n.toggleCaptions()),this.bind(r.buttons.download,"click",()=>{me.call(n,n.media,"download")},"download"),this.bind(r.buttons.fullscreen,"click",()=>{n.fullscreen.toggle()},"fullscreen"),this.bind(r.buttons.pip,"click",()=>{n.pip="toggle"},"pip"),this.bind(r.buttons.airplay,"click",n.airplay,"airplay"),this.bind(r.buttons.settings,"click",s=>{s.stopPropagation(),s.preventDefault(),J.toggleMenu.call(n,s)},null,!1),this.bind(r.buttons.settings,"keyup",s=>{[" ","Enter"].includes(s.key)&&(s.key!=="Enter"?(s.preventDefault(),s.stopPropagation(),J.toggleMenu.call(n,s)):J.focusFirstMenuItem.call(n,null,!0))},null,!1),this.bind(r.settings.menu,"keydown",s=>{s.key==="Escape"&&J.toggleMenu.call(n,s)}),this.bind(r.inputs.seek,"mousedown mousemove",s=>{const o=r.progress.getBoundingClientRect(),a=100/o.width*(s.pageX-o.left);s.currentTarget.setAttribute("seek-value",a)}),this.bind(r.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",s=>{const o=s.currentTarget,a="play-on-seeked";if(C.keyboardEvent(s)&&!["ArrowLeft","ArrowRight"].includes(s.key))return;n.lastSeekTime=Date.now();const l=o.hasAttribute(a),u=["mouseup","touchend","keyup"].includes(s.type);l&&u?(o.removeAttribute(a),ci(n.play())):!u&&n.playing&&(o.setAttribute(a,""),n.pause())}),Kt.isIos){const s=sc.call(n,'input[type="range"]');Array.from(s).forEach(o=>this.bind(o,i,a=>GP(a.target)))}this.bind(r.inputs.seek,i,s=>{const o=s.currentTarget;let a=o.getAttribute("seek-value");C.empty(a)&&(a=o.value),o.removeAttribute("seek-value"),n.currentTime=a/o.max*n.duration},"seek"),this.bind(r.progress,"mouseenter mouseleave mousemove",s=>J.updateSeekTooltip.call(n,s)),this.bind(r.progress,"mousemove touchmove",s=>{const{previewThumbnails:o}=n;o&&o.loaded&&o.startMove(s)}),this.bind(r.progress,"mouseleave touchend click",()=>{const{previewThumbnails:s}=n;s&&s.loaded&&s.endMove(!1,!0)}),this.bind(r.progress,"mousedown touchstart",s=>{const{previewThumbnails:o}=n;o&&o.loaded&&o.startScrubbing(s)}),this.bind(r.progress,"mouseup touchend",s=>{const{previewThumbnails:o}=n;o&&o.loaded&&o.endScrubbing(s)}),Kt.isWebKit&&Array.from(sc.call(n,'input[type="range"]')).forEach(s=>{this.bind(s,"input",o=>J.updateRangeFill.call(n,o.target))}),n.config.toggleInvert&&!C.element(r.display.duration)&&this.bind(r.display.currentTime,"click",()=>{n.currentTime!==0&&(n.config.invertTime=!n.config.invertTime,J.timeUpdate.call(n))}),this.bind(r.inputs.volume,i,s=>{n.volume=s.target.value},"volume"),this.bind(r.controls,"mouseenter mouseleave",s=>{r.controls.hover=!n.touch&&s.type==="mouseenter"}),r.fullscreen&&Array.from(r.fullscreen.children).filter(s=>!s.contains(r.container)).forEach(s=>{this.bind(s,"mouseenter mouseleave",o=>{r.controls&&(r.controls.hover=!n.touch&&o.type==="mouseenter")})}),this.bind(r.controls,"mousedown mouseup touchstart touchend touchcancel",s=>{r.controls.pressed=["mousedown","touchstart"].includes(s.type)}),this.bind(r.controls,"focusin",()=>{const{config:s,timers:o}=n;je(r.controls,s.classNames.noTransition,!0),Xe.toggleControls.call(n,!0),setTimeout(()=>{je(r.controls,s.classNames.noTransition,!1)},0);const a=this.touch?3e3:4e3;clearTimeout(o.controls),o.controls=setTimeout(()=>Xe.toggleControls.call(n,!1),a)}),this.bind(r.inputs.volume,"wheel",s=>{const o=s.webkitDirectionInvertedFromDevice,[a,l]=[s.deltaX,-s.deltaY].map(d=>o?-d:d),u=Math.sign(Math.abs(a)>Math.abs(l)?a:l);n.increaseVolume(u/50);const{volume:c}=n.media;(u===1&&c<1||u===-1&&c>0)&&s.preventDefault()},"volume",!1)}),this.player=e,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(e){const{player:n}=this,{elements:r}=n,{key:i,type:s,altKey:o,ctrlKey:a,metaKey:l,shiftKey:u}=e,c=s==="keydown",d=c&&i===this.lastKey;if(!(o||a||l||u)&&i){if(c){const m=document.activeElement;if(C.element(m)){const{editable:h}=n.config.selectors,{seek:p}=r.inputs;if(m!==p&&Io(m,h)||e.key===" "&&Io(m,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(i)&&(e.preventDefault(),e.stopPropagation()),i){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d||(f=parseInt(i,10),n.currentTime=n.duration/10*f);break;case" ":case"k":d||ci(n.togglePlay());break;case"ArrowUp":n.increaseVolume(.1);break;case"ArrowDown":n.decreaseVolume(.1);break;case"m":d||(n.muted=!n.muted);break;case"ArrowRight":n.forward();break;case"ArrowLeft":n.rewind();break;case"f":n.fullscreen.toggle();break;case"c":d||n.toggleCaptions();break;case"l":n.loop=!n.loop}i==="Escape"&&!n.fullscreen.usingNative&&n.fullscreen.active&&n.fullscreen.toggle(),this.lastKey=i}else this.lastKey=null;var f}}toggleMenu(e){J.toggleMenu.call(this.player,e)}}function $X(t,e){return t(e={exports:{}},e.exports),e.exports}var BX=$X(function(t,e){t.exports=function(){var n=function(){},r={},i={},s={};function o(f,m){f=f.push?f:[f];var h,p,v,y=[],g=f.length,x=g;for(h=function(b,E){E.length&&y.push(b),--x||m(y)};g--;)p=f[g],(v=i[p])?h(p,v):(s[p]=s[p]||[]).push(h)}function a(f,m){if(f){var h=s[f];if(i[f]=m,h)for(;h.length;)h[0](f,m),h.splice(0,1)}}function l(f,m){f.call&&(f={success:f}),m.length?(f.error||n)(m):(f.success||n)(f)}function u(f,m,h,p){var v,y,g=document,x=h.async,b=(h.numRetries||0)+1,E=h.before||n,T=f.replace(/[\?|#].*$/,""),w=f.replace(/^(css|img)!/,"");p=p||0,/(^css!|\.css$)/.test(T)?((y=g.createElement("link")).rel="stylesheet",y.href=w,(v="hideFocus"in y)&&y.relList&&(v=0,y.rel="preload",y.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(T)?(y=g.createElement("img")).src=w:((y=g.createElement("script")).src=f,y.async=x===void 0||x),y.onload=y.onerror=y.onbeforeload=function(_){var k=_.type[0];if(v)try{y.sheet.cssText.length||(k="e")}catch(L){L.code!=18&&(k="e")}if(k=="e"){if((p+=1)<b)return u(f,m,h,p)}else if(y.rel=="preload"&&y.as=="style")return y.rel="stylesheet";m(f,k,_.defaultPrevented)},E(f,y)!==!1&&g.head.appendChild(y)}function c(f,m,h){var p,v,y=(f=f.push?f:[f]).length,g=y,x=[];for(p=function(b,E,T){if(E=="e"&&x.push(b),E=="b"){if(!T)return;x.push(b)}--y||m(x)},v=0;v<g;v++)u(f[v],p,h)}function d(f,m,h){var p,v;if(m&&m.trim&&(p=m),v=(p?h:m)||{},p){if(p in r)throw"LoadJS";r[p]=!0}function y(g,x){c(f,function(b){l(v,b),g&&l({success:g,error:x},b),a(p,b)},v)}if(v.returnPromise)return new Promise(y);y()}return d.ready=function(f,m){return o(f,function(h){l(m,h)}),d},d.done=function(f){a(f,[])},d.reset=function(){r={},i={},s={}},d.isDefined=function(f){return f in r},d}()});function KS(t){return new Promise((e,n)=>{BX(t,{success:e,error:n})})}function UX(t){return C.empty(t)?null:C.number(Number(t))?t:t.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:t}function jX(t){const e=t.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return e&&e.length===5?e[4]:null}function Yl(t){t&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===t&&(this.media.paused=!t,me.call(this,this.media,t?"play":"pause"))}const jy={setup(){const t=this;je(t.elements.wrapper,t.config.classNames.embed,!0),t.options.speed=t.config.speed.options,fl.call(t),C.object(window.Vimeo)?jy.ready.call(t):KS(t.config.urls.vimeo.sdk).then(()=>{jy.ready.call(t)}).catch(e=>{t.debug.warn("Vimeo SDK (player.js) failed to load",e)})},ready(){const t=this,e=t.config.vimeo,{premium:n,referrerPolicy:r,...i}=e;let s=t.media.getAttribute("src"),o="";C.empty(s)?(s=t.media.getAttribute(t.config.attributes.embed.id),o=t.media.getAttribute(t.config.attributes.embed.hash)):o=jX(s);const a=o?{h:o}:{};n&&Object.assign(i,{controls:!1,sidedock:!1});const l=nI({loop:t.config.loop.active,autoplay:t.autoplay,muted:t.muted,gesture:"media",playsinline:t.config.playsinline,...a,...i}),u=UX(s),c=pe("iframe"),d=Uy(t.config.urls.vimeo.iframe,u,l);if(c.setAttribute("src",d),c.setAttribute("allowfullscreen",""),c.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),C.empty(r)||c.setAttribute("referrerPolicy",r),n||!e.customControls)c.setAttribute("data-poster",t.poster),t.media=Ph(c,t.media);else{const g=pe("div",{class:t.config.classNames.embedContainer,"data-poster":t.poster});g.appendChild(c),t.media=Ph(g,t.media)}e.customControls||jc(Uy(t.config.urls.vimeo.api,d)).then(g=>{!C.empty(g)&&g.thumbnail_url&&Xe.setPoster.call(t,g.thumbnail_url).catch(()=>{})}),t.embed=new window.Vimeo.Player(c,{autopause:t.config.autopause,muted:t.muted}),t.media.paused=!0,t.media.currentTime=0,t.supported.ui&&t.embed.disableTextTrack(),t.media.play=()=>(Yl.call(t,!0),t.embed.play()),t.media.pause=()=>(Yl.call(t,!1),t.embed.pause()),t.media.stop=()=>{t.pause(),t.currentTime=0};let{currentTime:f}=t.media;Object.defineProperty(t.media,"currentTime",{get:()=>f,set(g){const{embed:x,media:b,paused:E,volume:T}=t,w=E&&!x.hasPlayed;b.seeking=!0,me.call(t,b,"seeking"),Promise.resolve(w&&x.setVolume(0)).then(()=>x.setCurrentTime(g)).then(()=>w&&x.pause()).then(()=>w&&x.setVolume(T)).catch(()=>{})}});let m=t.config.speed.selected;Object.defineProperty(t.media,"playbackRate",{get:()=>m,set(g){t.embed.setPlaybackRate(g).then(()=>{m=g,me.call(t,t.media,"ratechange")}).catch(()=>{t.options.speed=[1]})}});let{volume:h}=t.config;Object.defineProperty(t.media,"volume",{get:()=>h,set(g){t.embed.setVolume(g).then(()=>{h=g,me.call(t,t.media,"volumechange")})}});let{muted:p}=t.config;Object.defineProperty(t.media,"muted",{get:()=>p,set(g){const x=!!C.boolean(g)&&g;t.embed.setMuted(!!x||t.config.muted).then(()=>{p=x,me.call(t,t.media,"volumechange")})}});let v,{loop:y}=t.config;Object.defineProperty(t.media,"loop",{get:()=>y,set(g){const x=C.boolean(g)?g:t.config.loop.active;t.embed.setLoop(x).then(()=>{y=x})}}),t.embed.getVideoUrl().then(g=>{v=g,J.setDownloadUrl.call(t)}).catch(g=>{this.debug.warn(g)}),Object.defineProperty(t.media,"currentSrc",{get:()=>v}),Object.defineProperty(t.media,"ended",{get:()=>t.currentTime===t.duration}),Promise.all([t.embed.getVideoWidth(),t.embed.getVideoHeight()]).then(g=>{const[x,b]=g;t.embed.ratio=QP(x,b),fl.call(this)}),t.embed.setAutopause(t.config.autopause).then(g=>{t.config.autopause=g}),t.embed.getVideoTitle().then(g=>{t.config.title=g,Xe.setTitle.call(this)}),t.embed.getCurrentTime().then(g=>{f=g,me.call(t,t.media,"timeupdate")}),t.embed.getDuration().then(g=>{t.media.duration=g,me.call(t,t.media,"durationchange")}),t.embed.getTextTracks().then(g=>{t.media.textTracks=g,Me.setup.call(t)}),t.embed.on("cuechange",({cues:g=[]})=>{const x=g.map(b=>PX(b.text));Me.updateCues.call(t,x)}),t.embed.on("loaded",()=>{t.embed.getPaused().then(g=>{Yl.call(t,!g),g||me.call(t,t.media,"playing")}),C.element(t.embed.element)&&t.supported.ui&&t.embed.element.setAttribute("tabindex",-1)}),t.embed.on("bufferstart",()=>{me.call(t,t.media,"waiting")}),t.embed.on("bufferend",()=>{me.call(t,t.media,"playing")}),t.embed.on("play",()=>{Yl.call(t,!0),me.call(t,t.media,"playing")}),t.embed.on("pause",()=>{Yl.call(t,!1)}),t.embed.on("timeupdate",g=>{t.media.seeking=!1,f=g.seconds,me.call(t,t.media,"timeupdate")}),t.embed.on("progress",g=>{t.media.buffered=g.percent,me.call(t,t.media,"progress"),parseInt(g.percent,10)===1&&me.call(t,t.media,"canplaythrough"),t.embed.getDuration().then(x=>{x!==t.media.duration&&(t.media.duration=x,me.call(t,t.media,"durationchange"))})}),t.embed.on("seeked",()=>{t.media.seeking=!1,me.call(t,t.media,"seeked")}),t.embed.on("ended",()=>{t.media.paused=!0,me.call(t,t.media,"ended")}),t.embed.on("error",g=>{t.media.error=g,me.call(t,t.media,"error")}),e.customControls&&setTimeout(()=>Xe.build.call(t),0)}};function HX(t){return C.empty(t)?null:t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:t}function Xl(t){t&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===t&&(this.media.paused=!t,me.call(this,this.media,t?"play":"pause"))}function zX(t){return t.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}const kf={setup(){if(je(this.elements.wrapper,this.config.classNames.embed,!0),C.object(window.YT)&&C.function(window.YT.Player))kf.ready.call(this);else{const t=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{C.function(t)&&t(),kf.ready.call(this)},KS(this.config.urls.youtube.sdk).catch(e=>{this.debug.warn("YouTube API failed to load",e)})}},getTitle(t){jc(Uy(this.config.urls.youtube.api,t)).then(e=>{if(C.object(e)){const{title:n,height:r,width:i}=e;this.config.title=n,Xe.setTitle.call(this),this.embed.ratio=QP(i,r)}fl.call(this)}).catch(()=>{fl.call(this)})},ready(){const t=this,e=t.config.youtube,n=t.media&&t.media.getAttribute("id");if(!C.empty(n)&&n.startsWith("youtube-"))return;let r=t.media.getAttribute("src");C.empty(r)&&(r=t.media.getAttribute(this.config.attributes.embed.id));const i=HX(r),s=pe("div",{id:_X(t.provider),"data-poster":e.customControls?t.poster:void 0});if(t.media=Ph(s,t.media),e.customControls){const o=a=>`https://i.ytimg.com/vi/${i}/${a}default.jpg`;Lf(o("maxres"),121).catch(()=>Lf(o("sd"),121)).catch(()=>Lf(o("hq"))).then(a=>Xe.setPoster.call(t,a.src)).then(a=>{a.includes("maxres")||(t.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}t.embed=new window.YT.Player(t.media,{videoId:i,host:zX(e),playerVars:bt({},{autoplay:t.config.autoplay?1:0,hl:t.config.hl,controls:t.supported.ui&&e.customControls?0:1,disablekb:1,playsinline:t.config.playsinline&&!t.config.fullscreen.iosNative?1:0,cc_load_policy:t.captions.active?1:0,cc_lang_pref:t.config.captions.language,widget_referrer:window?window.location.href:null},e),events:{onError(o){if(!t.media.error){const a=o.data,l={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[a]||"An unknown error occurred";t.media.error={code:a,message:l},me.call(t,t.media,"error")}},onPlaybackRateChange(o){const a=o.target;t.media.playbackRate=a.getPlaybackRate(),me.call(t,t.media,"ratechange")},onReady(o){if(C.function(t.media.play))return;const a=o.target;kf.getTitle.call(t,i),t.media.play=()=>{Xl.call(t,!0),a.playVideo()},t.media.pause=()=>{Xl.call(t,!1),a.pauseVideo()},t.media.stop=()=>{a.stopVideo()},t.media.duration=a.getDuration(),t.media.paused=!0,t.media.currentTime=0,Object.defineProperty(t.media,"currentTime",{get:()=>Number(a.getCurrentTime()),set(d){t.paused&&!t.embed.hasPlayed&&t.embed.mute(),t.media.seeking=!0,me.call(t,t.media,"seeking"),a.seekTo(d)}}),Object.defineProperty(t.media,"playbackRate",{get:()=>a.getPlaybackRate(),set(d){a.setPlaybackRate(d)}});let{volume:l}=t.config;Object.defineProperty(t.media,"volume",{get:()=>l,set(d){l=d,a.setVolume(100*l),me.call(t,t.media,"volumechange")}});let{muted:u}=t.config;Object.defineProperty(t.media,"muted",{get:()=>u,set(d){const f=C.boolean(d)?d:u;u=f,a[f?"mute":"unMute"](),a.setVolume(100*l),me.call(t,t.media,"volumechange")}}),Object.defineProperty(t.media,"currentSrc",{get:()=>a.getVideoUrl()}),Object.defineProperty(t.media,"ended",{get:()=>t.currentTime===t.duration});const c=a.getAvailablePlaybackRates();t.options.speed=c.filter(d=>t.config.speed.options.includes(d)),t.supported.ui&&e.customControls&&t.media.setAttribute("tabindex",-1),me.call(t,t.media,"timeupdate"),me.call(t,t.media,"durationchange"),clearInterval(t.timers.buffering),t.timers.buffering=setInterval(()=>{t.media.buffered=a.getVideoLoadedFraction(),(t.media.lastBuffered===null||t.media.lastBuffered<t.media.buffered)&&me.call(t,t.media,"progress"),t.media.lastBuffered=t.media.buffered,t.media.buffered===1&&(clearInterval(t.timers.buffering),me.call(t,t.media,"canplaythrough"))},200),e.customControls&&setTimeout(()=>Xe.build.call(t),50)},onStateChange(o){const a=o.target;switch(clearInterval(t.timers.playing),t.media.seeking&&[1,2].includes(o.data)&&(t.media.seeking=!1,me.call(t,t.media,"seeked")),o.data){case-1:me.call(t,t.media,"timeupdate"),t.media.buffered=a.getVideoLoadedFraction(),me.call(t,t.media,"progress");break;case 0:Xl.call(t,!1),t.media.loop?(a.stopVideo(),a.playVideo()):me.call(t,t.media,"ended");break;case 1:e.customControls&&!t.config.autoplay&&t.media.paused&&!t.embed.hasPlayed?t.media.pause():(Xl.call(t,!0),me.call(t,t.media,"playing"),t.timers.playing=setInterval(()=>{me.call(t,t.media,"timeupdate")},50),t.media.duration!==a.getDuration()&&(t.media.duration=a.getDuration(),me.call(t,t.media,"durationchange")));break;case 2:t.muted||t.embed.unMute(),Xl.call(t,!1);break;case 3:me.call(t,t.media,"waiting")}me.call(t,t.elements.container,"statechange",!1,{code:o.data})}}})}},iI={setup(){this.media?(je(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),je(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&je(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=pe("div",{class:this.config.classNames.video}),KP(this.media,this.elements.wrapper),this.elements.poster=pe("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?Os.setup.call(this):this.isYouTube?kf.setup.call(this):this.isVimeo&&jy.setup.call(this)):this.debug.warn("No media element found!")}};class VX{constructor(e){ee(this,"load",()=>{this.enabled&&(C.object(window.google)&&C.object(window.google.ima)?this.ready():KS(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),ee(this,"ready",()=>{var n;this.enabled||((n=this).manager&&n.manager.destroy(),n.elements.displayContainer&&n.elements.displayContainer.destroy(),n.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),ee(this,"setupIMA",()=>{this.elements.container=pe("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,n=>this.onAdsManagerLoaded(n),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,n=>this.onAdError(n),!1),this.requestAds()}),ee(this,"requestAds",()=>{const{container:n}=this.player.elements;try{const r=new google.ima.AdsRequest;r.adTagUrl=this.tagUrl,r.linearAdSlotWidth=n.offsetWidth,r.linearAdSlotHeight=n.offsetHeight,r.nonLinearAdSlotWidth=n.offsetWidth,r.nonLinearAdSlotHeight=n.offsetHeight,r.forceNonLinearFullSlot=!1,r.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(r)}catch(r){this.onAdError(r)}}),ee(this,"pollCountdown",(n=!1)=>{if(!n)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const r=nm(Math.max(this.manager.getRemainingTime(),0)),i=`${Vt.get("advertisement",this.player.config)} - ${r}`;this.elements.container.setAttribute("data-badge-text",i)},100)}),ee(this,"onAdsManagerLoaded",n=>{if(!this.enabled)return;const r=new google.ima.AdsRenderingSettings;r.restoreCustomPlaybackStateOnAdBreakComplete=!0,r.enablePreloading=!0,this.manager=n.getAdsManager(this.player,r),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,i=>this.onAdError(i)),Object.keys(google.ima.AdEvent.Type).forEach(i=>{this.manager.addEventListener(google.ima.AdEvent.Type[i],s=>this.onAdEvent(s))}),this.trigger("loaded")}),ee(this,"addCuePoints",()=>{C.empty(this.cuePoints)||this.cuePoints.forEach(n=>{if(n!==0&&n!==-1&&n<this.player.duration){const r=this.player.elements.progress;if(C.element(r)){const i=100/this.player.duration*n,s=pe("span",{class:this.player.config.classNames.cues});s.style.left=`${i.toString()}%`,r.appendChild(s)}}})}),ee(this,"onAdEvent",n=>{const{container:r}=this.player.elements,i=n.getAd(),s=n.getAdData();switch((o=>{me.call(this.player,this.player.media,`ads${o.replace(/_/g,"").toLowerCase()}`)})(n.type),n.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),i.isLinear()||(i.width=r.offsetWidth,i.height=r.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:s.adError&&this.player.debug.warn(`Non-fatal ad error: ${s.adError.getMessage()}`)}}),ee(this,"onAdError",n=>{this.cancel(),this.player.debug.warn("Ads error",n)}),ee(this,"listeners",()=>{const{container:n}=this.player.elements;let r;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{r=this.player.currentTime}),this.player.on("seeked",()=>{const i=this.player.currentTime;C.empty(this.cuePoints)||this.cuePoints.forEach((s,o)=>{r<s&&s<i&&(this.manager.discardAdBreak(),this.cuePoints.splice(o,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(n.offsetWidth,n.offsetHeight,google.ima.ViewMode.NORMAL)})}),ee(this,"play",()=>{const{container:n}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(n.offsetWidth,n.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(r){this.onAdError(r)}}).catch(()=>{})}),ee(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,ci(this.player.media.play())}),ee(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),ee(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),ee(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(n=>{this.on("loaded",n),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),ee(this,"trigger",(n,...r)=>{const i=this.events[n];C.array(i)&&i.forEach(s=>{C.function(s)&&s.apply(this,r)})}),ee(this,"on",(n,r)=>(C.array(this.events[n])||(this.events[n]=[]),this.events[n].push(r),this)),ee(this,"startSafetyTimer",(n,r)=>{this.player.debug.log(`Safety timer invoked from: ${r}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},n)}),ee(this,"clearSafetyTimer",n=>{C.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${n}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=e,this.config=e.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((n,r)=>{this.on("loaded",n),this.on("error",r)}),this.load()}get enabled(){const{config:e}=this;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!C.empty(e.publisherId)||C.url(e.tagUrl))}get tagUrl(){const{config:e}=this;return C.url(e.tagUrl)?e.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${nI({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId})}`}}function sI(t=0,e=0,n=255){return Math.min(Math.max(t,e),n)}const GX=t=>{const e=[];return t.split(/\r\n\r\n|\n\n|\r\r/).forEach(n=>{const r={};n.split(/\r\n|\n|\r/).forEach(i=>{if(C.number(r.startTime)){if(!C.empty(i.trim())&&C.empty(r.text)){const s=i.trim().split("#xywh=");[r.text]=s,s[1]&&([r.x,r.y,r.w,r.h]=s[1].split(","))}}else{const s=i.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);s&&(r.startTime=60*Number(s[1]||0)*60+60*Number(s[2])+Number(s[3])+ +`0.${s[4]}`,r.endTime=60*Number(s[6]||0)*60+60*Number(s[7])+Number(s[8])+ +`0.${s[9]}`)}}),r.text&&e.push(r)}),e},jw=(t,e)=>{const n={};return t>e.width/e.height?(n.width=e.width,n.height=1/t*e.width):(n.height=e.height,n.width=t*e.height),n};class Hy{constructor(e){ee(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),ee(this,"getThumbnails",()=>new Promise(n=>{const{src:r}=this.player.config.previewThumbnails;if(C.empty(r))throw new Error("Missing previewThumbnails.src config attribute");const i=()=>{this.thumbnails.sort((s,o)=>s.height-o.height),this.player.debug.log("Preview thumbnails",this.thumbnails),n()};if(C.function(r))r(s=>{this.thumbnails=s,i()});else{const s=(C.string(r)?[r]:r).map(o=>this.getThumbnail(o));Promise.all(s).then(i)}})),ee(this,"getThumbnail",n=>new Promise(r=>{jc(n).then(i=>{const s={frames:GX(i),height:null,urlPrefix:""};s.frames[0].text.startsWith("/")||s.frames[0].text.startsWith("http://")||s.frames[0].text.startsWith("https://")||(s.urlPrefix=n.substring(0,n.lastIndexOf("/")+1));const o=new Image;o.onload=()=>{s.height=o.naturalHeight,s.width=o.naturalWidth,this.thumbnails.push(s),r()},o.src=s.urlPrefix+s.frames[0].text})})),ee(this,"startMove",n=>{if(this.loaded&&C.event(n)&&["touchmove","mousemove"].includes(n.type)&&this.player.media.duration){if(n.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var r,i;const s=this.player.elements.progress.getBoundingClientRect(),o=100/s.width*(n.pageX-s.left);this.seekTime=this.player.media.duration*(o/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=n.pageX,this.elements.thumb.time.innerText=nm(this.seekTime);const a=(r=this.player.config.markers)===null||r===void 0||(i=r.points)===null||i===void 0?void 0:i.find(({time:l})=>l===Math.round(this.seekTime));a&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${a.label}<br>`)}this.showImageAtCurrentTime()}}),ee(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),ee(this,"startScrubbing",n=>{(C.nullOrUndefined(n.button)||n.button===!1||n.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),ee(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):GS.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),ee(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),ee(this,"render",()=>{this.elements.thumb.container=pe("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=pe("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const n=pe("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=pe("span",{},"00:00"),n.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(n),C.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=pe("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),ee(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),ee(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const n=this.thumbnails[0].frames.findIndex(s=>this.seekTime>=s.startTime&&this.seekTime<=s.endTime),r=n>=0;let i=0;this.mouseDown||this.toggleThumbContainer(r),r&&(this.thumbnails.forEach((s,o)=>{this.loadedImages.includes(s.frames[n].text)&&(i=o)}),n!==this.showingThumb&&(this.showingThumb=n,this.loadImage(i)))}),ee(this,"loadImage",(n=0)=>{const r=this.showingThumb,i=this.thumbnails[n],{urlPrefix:s}=i,o=i.frames[r],a=i.frames[r].text,l=s+a;if(this.currentImageElement&&this.currentImageElement.dataset.filename===a)this.showImage(this.currentImageElement,o,n,r,a,!1),this.currentImageElement.dataset.index=r,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const u=new Image;u.src=l,u.dataset.index=r,u.dataset.filename=a,this.showingThumbFilename=a,this.player.debug.log(`Loading image: ${l}`),u.onload=()=>this.showImage(u,o,n,r,a,!0),this.loadingImage=u,this.removeOldImages(u)}}),ee(this,"showImage",(n,r,i,s,o,a=!0)=>{this.player.debug.log(`Showing thumb: ${o}. num: ${s}. qual: ${i}. newimg: ${a}`),this.setImageSizeAndOffset(n,r),a&&(this.currentImageContainer.appendChild(n),this.currentImageElement=n,this.loadedImages.includes(o)||this.loadedImages.push(o)),this.preloadNearby(s,!0).then(this.preloadNearby(s,!1)).then(this.getHigherQuality(i,n,r,o))}),ee(this,"removeOldImages",n=>{Array.from(this.currentImageContainer.children).forEach(r=>{if(r.tagName.toLowerCase()!=="img")return;const i=this.usingSprites?500:1e3;if(r.dataset.index!==n.dataset.index&&!r.dataset.deleting){r.dataset.deleting=!0;const{currentImageContainer:s}=this;setTimeout(()=>{s.removeChild(r),this.player.debug.log(`Removing thumb: ${r.dataset.filename}`)},i)}})}),ee(this,"preloadNearby",(n,r=!0)=>new Promise(i=>{setTimeout(()=>{const s=this.thumbnails[0].frames[n].text;if(this.showingThumbFilename===s){let o;o=r?this.thumbnails[0].frames.slice(n):this.thumbnails[0].frames.slice(0,n).reverse();let a=!1;o.forEach(l=>{const u=l.text;if(u!==s&&!this.loadedImages.includes(u)){a=!0,this.player.debug.log(`Preloading thumb filename: ${u}`);const{urlPrefix:c}=this.thumbnails[0],d=c+u,f=new Image;f.src=d,f.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${u}`),this.loadedImages.includes(u)||this.loadedImages.push(u),i()}}}),a||i()}},300)})),ee(this,"getHigherQuality",(n,r,i,s)=>{if(n<this.thumbnails.length-1){let o=r.naturalHeight;this.usingSprites&&(o=i.h),o<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===s&&(this.player.debug.log(`Showing higher quality thumb for: ${s}`),this.loadImage(n+1))},300)}}),ee(this,"toggleThumbContainer",(n=!1,r=!1)=>{const i=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(i,n),!n&&r&&(this.showingThumb=null,this.showingThumbFilename=null)}),ee(this,"toggleScrubbingContainer",(n=!1)=>{const r=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(r,n),n||(this.showingThumb=null,this.showingThumbFilename=null)}),ee(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),ee(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:n}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(n.clientHeight>20&&n.clientWidth<20){const r=Math.floor(n.clientHeight*this.thumbAspectRatio);n.style.width=`${r}px`}else if(n.clientHeight<20&&n.clientWidth>20){const r=Math.floor(n.clientWidth/this.thumbAspectRatio);n.style.height=`${r}px`}}else{const r=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);n.style.height=`${this.thumbContainerHeight}px`,n.style.width=`${r}px`}this.setThumbContainerPos()}),ee(this,"setThumbContainerPos",()=>{const n=this.player.elements.progress.getBoundingClientRect(),r=this.player.elements.container.getBoundingClientRect(),{container:i}=this.elements.thumb,s=r.left-n.left+10,o=r.right-n.left-i.clientWidth-10,a=this.mousePosX-n.left-i.clientWidth/2,l=sI(a,s,o);i.style.left=`${l}px`,i.style.setProperty("--preview-arrow-offset",a-l+"px")}),ee(this,"setScrubbingContainerSize",()=>{const{width:n,height:r}=jw(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${n}px`,this.elements.scrubbing.container.style.height=`${r}px`}),ee(this,"setImageSizeAndOffset",(n,r)=>{if(!this.usingSprites)return;const i=this.thumbContainerHeight/r.h;n.style.height=n.naturalHeight*i+"px",n.style.width=n.naturalWidth*i+"px",n.style.left=`-${r.x*i}px`,n.style.top=`-${r.y*i}px`}),this.player=e,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:e}=jw(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return e}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}const zy={insertElements(t,e){C.string(e)?Fw(t,this.media,{src:e}):C.array(e)&&e.forEach(n=>{Fw(t,this.media,n)})},change(t){WP(t,"sources.length")?(Os.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],Yi(this.media),this.media=null,C.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:e,type:n}=t,[{provider:r=Ls.html5,src:i}]=e,s=r==="html5"?n:"div",o=r==="html5"?{}:{src:i};Object.assign(this,{provider:r,type:n,supported:wt.check(n,r,this.config.playsinline),media:pe(s,o)}),this.elements.container.appendChild(this.media),C.boolean(t.autoplay)&&(this.config.autoplay=t.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),C.empty(t.poster)||(this.poster=t.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),Xe.addStyleHook.call(this),this.isHTML5&&zy.insertElements.call(this,"source",e),this.config.title=t.title,iI.setup.call(this),this.isHTML5&&Object.keys(t).includes("tracks")&&zy.insertElements.call(this,"track",t.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Xe.build.call(this),this.isHTML5&&this.media.load(),C.empty(t.previewThumbnails)||(Object.assign(this.config.previewThumbnails,t.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Hy(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class lc{constructor(e,n){if(ee(this,"play",()=>C.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>ci(this.media.play())),this.media.play()):null),ee(this,"pause",()=>this.playing&&C.function(this.media.pause)?this.media.pause():null),ee(this,"togglePlay",a=>(C.boolean(a)?a:!this.playing)?this.play():this.pause()),ee(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):C.function(this.media.stop)&&this.media.stop()}),ee(this,"restart",()=>{this.currentTime=0}),ee(this,"rewind",a=>{this.currentTime-=C.number(a)?a:this.config.seekTime}),ee(this,"forward",a=>{this.currentTime+=C.number(a)?a:this.config.seekTime}),ee(this,"increaseVolume",a=>{const l=this.media.muted?0:this.volume;this.volume=l+(C.number(a)?a:0)}),ee(this,"decreaseVolume",a=>{this.increaseVolume(-a)}),ee(this,"airplay",()=>{wt.airplay&&this.media.webkitShowPlaybackTargetPicker()}),ee(this,"toggleControls",a=>{if(this.supported.ui&&!this.isAudio){const l=Ih(this.elements.container,this.config.classNames.hideControls),u=a===void 0?void 0:!a,c=je(this.elements.container,this.config.classNames.hideControls,u);if(c&&C.array(this.config.controls)&&this.config.controls.includes("settings")&&!C.empty(this.config.settings)&&J.toggleMenu.call(this,!1),c!==l){const d=c?"controlshidden":"controlsshown";me.call(this,this.media,d)}return!c}return!1}),ee(this,"on",(a,l)=>{Ie.call(this,this.elements.container,a,l)}),ee(this,"once",(a,l)=>{GS.call(this,this.elements.container,a,l)}),ee(this,"off",(a,l)=>{tm(this.elements.container,a,l)}),ee(this,"destroy",(a,l=!1)=>{if(!this.ready)return;const u=()=>{document.body.style.overflow="",this.embed=null,l?(Object.keys(this.elements).length&&(Yi(this.elements.buttons.play),Yi(this.elements.captions),Yi(this.elements.controls),Yi(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),C.function(a)&&a()):(wX.call(this),Os.cancelRequests.call(this),Ph(this.elements.original,this.elements.container),me.call(this,this.elements.original,"destroyed",!0),C.function(a)&&a.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(Xe.toggleNativeControls.call(this,!0),u()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&C.function(this.embed.destroy)&&this.embed.destroy(),u()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(u),setTimeout(u,200))}),ee(this,"supports",a=>wt.mime.call(this,a)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=wt.touch,this.media=e,C.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||C.nodeList(this.media)||C.array(this.media))&&(this.media=this.media[0]),this.config=bt({},rI,lc.defaults,n||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch{return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new NX(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",wt),C.nullOrUndefined(this.media)||!C.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!wt.check().api)return void this.debug.error("Setup failed: no support");const r=this.media.cloneNode(!0);r.autoplay=!1,this.elements.original=r;const i=this.media.tagName.toLowerCase();let s=null,o=null;switch(i){case"div":if(s=this.media.querySelector("iframe"),C.element(s)){if(o=tI(s.getAttribute("src")),this.provider=MX(o.toString()),this.elements.container=this.media,this.media=s,this.elements.container.className="",o.search.length){const a=["1","true"];a.includes(o.searchParams.get("autoplay"))&&(this.config.autoplay=!0),a.includes(o.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=a.includes(o.searchParams.get("playsinline")),this.config.youtube.hl=o.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(C.empty(this.provider)||!Object.values(Ls).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=Og.video;break;case"video":case"audio":this.type=i,this.provider=Ls.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=wt.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new FX(this),this.storage=new ac(this),this.media.plyr=this,C.element(this.elements.container)||(this.elements.container=pe("div"),KP(this.media,this.elements.container)),Xe.migrateStyles.call(this),Xe.addStyleHook.call(this),iI.setup.call(this),this.config.debug&&Ie.call(this,this.elements.container,this.config.events.join(" "),a=>{this.debug.log(`event: ${a.type}`)}),this.fullscreen=new Br(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Xe.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new VX(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>ci(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Hy(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===Ls.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===Ls.youtube}get isVimeo(){return this.provider===Ls.vimeo}get isVideo(){return this.type===Og.video}get isAudio(){return this.type===Og.audio}get playing(){return!!(this.ready&&!this.paused&&!this.ended)}get paused(){return!!this.media.paused}get stopped(){return!!(this.paused&&this.currentTime===0)}get ended(){return!!this.media.ended}set currentTime(e){if(!this.duration)return;const n=C.number(e)&&e>0;this.media.currentTime=n?Math.min(e,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:e}=this.media;return C.number(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}get seeking(){return!!this.media.seeking}get duration(){const e=parseFloat(this.config.duration),n=(this.media||{}).duration,r=C.number(n)&&n!==1/0?n:0;return e||r}set volume(e){let n=e;C.string(n)&&(n=Number(n)),C.number(n)||(n=this.storage.get("volume")),C.number(n)||({volume:n}=this.config),n>1&&(n=1),n<0&&(n=0),this.config.volume=n,this.media.volume=n,!C.empty(e)&&this.muted&&n>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(e){let n=e;C.boolean(n)||(n=this.storage.get("muted")),C.boolean(n)||(n=this.config.muted),this.config.muted=n,this.media.muted=n}get muted(){return!!this.media.muted}get hasAudio(){return!this.isHTML5||!!this.isAudio||!!this.media.mozHasAudio||!!this.media.webkitAudioDecodedByteCount||!!(this.media.audioTracks&&this.media.audioTracks.length)}set speed(e){let n=null;C.number(e)&&(n=e),C.number(n)||(n=this.storage.get("speed")),C.number(n)||(n=this.config.speed.selected);const{minimumSpeed:r,maximumSpeed:i}=this;n=sI(n,r,i),this.config.speed.selected=n,setTimeout(()=>{this.media&&(this.media.playbackRate=n)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(e){const n=this.config.quality,r=this.options.quality;if(!r.length)return;let i=[!C.empty(e)&&Number(e),this.storage.get("quality"),n.selected,n.default].find(C.number),s=!0;if(!r.includes(i)){const o=qP(r,i);this.debug.warn(`Unsupported quality option: ${i}, using ${o} instead`),i=o,s=!1}n.selected=i,this.media.quality=i,s&&this.storage.set({quality:i})}get quality(){return this.media.quality}set loop(e){const n=C.boolean(e)?e:this.config.loop.active;this.config.loop.active=n,this.media.loop=n}get loop(){return!!this.media.loop}set source(e){zy.change.call(this,e)}get source(){return this.media.currentSrc}get download(){const{download:e}=this.config.urls;return C.url(e)?e:this.source}set download(e){C.url(e)&&(this.config.urls.download=e,J.setDownloadUrl.call(this))}set poster(e){this.isVideo?Xe.setPoster.call(this,e,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const e=Dh(WS.call(this));return C.array(e)?e.join(":"):e}set ratio(e){this.isVideo?C.string(e)&&XP(e)?(this.config.ratio=Dh(e),fl.call(this)):this.debug.error(`Invalid aspect ratio specified (${e})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(e){this.config.autoplay=C.boolean(e)?e:this.config.autoplay}get autoplay(){return!!this.config.autoplay}toggleCaptions(e){Me.toggle.call(this,e,!1)}set currentTrack(e){Me.set.call(this,e,!1),Me.setup.call(this)}get currentTrack(){const{toggled:e,currentTrack:n}=this.captions;return e?n:-1}set language(e){Me.setLanguage.call(this,e,!1)}get language(){return(Me.getCurrentTrack.call(this)||{}).language}set pip(e){if(!wt.pip)return;const n=C.boolean(e)?e:!this.pip;C.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(n?Dg.active:Dg.inactive),C.function(this.media.requestPictureInPicture)&&(!this.pip&&n?this.media.requestPictureInPicture():this.pip&&!n&&document.exitPictureInPicture())}get pip(){return wt.pip?C.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===Dg.active:null}setPreviewThumbnails(e){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,e),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Hy(this))}static supported(e,n){return wt.check(e,n)}static loadSprite(e,n){return ZP(e,n)}static setup(e,n={}){let r=null;return C.string(e)?r=Array.from(document.querySelectorAll(e)):C.nodeList(e)?r=Array.from(e):C.array(e)&&(r=e.filter(C.element)),C.empty(r)?null:r.map(i=>new lc(i,n))}}lc.defaults=SX(rI);function WX(t,e,n,r,i){document.querySelectorAll("button[data-plyr=play],.plyr__poster").forEach(h=>{h.addEventListener("click",u)}),e.on("new_video_state",c),e.on("new_video_state_check_all_ready",d);const s={canPlayIsActive:!0,counterReq:0,isAllReady:{},clicked:!1};let o;function a(){e.emit("change_video_state",{state:"pause",time:n.currentTime,name:r.username})}function l(h){s.canPlayIsActive&&e.emit("collect_can_play",{id:h.id})}async function u(h){var v,y,g;if(((v=h==null?void 0:h.target)==null?void 0:v.getAttribute("data-plyr"))!=="play"&&((y=h==null?void 0:h.target)==null?void 0:y.className)!=="plyr__poster")return;s.clicked&&setTimeout(()=>{s.clicked=!1},1e3),s.clicked=!0,s.canPlayIsActive&&(t.removeEventListener("canplay",o),s.canPlayIsActive=!1);let p=n.paused?"pause":"play";((g=h==null?void 0:h.target)==null?void 0:g.className)==="plyr__poster"&&(await new Promise(x=>setTimeout(x,100)),p=n.playing?"play":"pause"),f(),t.addEventListener("waiting",a),e.emit("change_video_state",{state:p,time:n.currentTime,id:`${e.id}${s.counterReq++}`,name:r.username}),p=="play"&&n.pause()}function c(h){i(`The user ${h.name} has requested to ${h.state} the video at this minute [${(h.time/60).toFixed(1)}]`,Yv),f(),n.currentTime=h.time,n.pause(),t.removeEventListener("waiting",a),h.state=="play"?(t.removeEventListener("canplay",o),s.canPlayIsActive=!0,o=function(){l(h)},t.addEventListener("canplay",o)):(m(),setTimeout(()=>{t.addEventListener("waiting",a)},1e3))}function d(h){s.isAllReady.id||(s.isAllReady={id:h.id,count:0}),s.isAllReady.id!==h.id&&(s.isAllReady={id:h.id,count:0}),s.isAllReady.count+=1,s.isAllReady.count>=h.users&&(s.canPlayIsActive=!1,m(),t.removeEventListener("canplay",o),n.play(),setTimeout(()=>{t.addEventListener("waiting",a)},1e3))}function f(){document.querySelectorAll(".plyr__controls,.plyr__control").forEach(h=>{h.style.display="none"})}function m(){document.querySelectorAll(".plyr__controls,.plyr__control").forEach(h=>{h.style.display="flex"})}return()=>{t.removeEventListener("waiting",a),t.removeEventListener("canplay",o),document.querySelectorAll("button[data-plyr=play],.plyr__poster").forEach(h=>{console.log(h),h.removeEventListener("click",u)}),e.off("new_video_state",c),e.off("new_video_state_check_all_ready",d)}}function KX({url:t,mediaType:e,subtitles:n,socket:r,user:i}){return A.useEffect(()=>{const s=document.getElementById("roomPlayer");if(!s)return;const o={controls:["play-large","rewind","play","fast-forward","progress","current-time","mute","volume","captions","settings","fullscreen"]};s.innerHTML="",n.forEach((c,d)=>{const f=document.createElement("track");f.src=c,f.kind="subtitles",f.srclang=`_${d}_`,f.label=`track${d}`,s.appendChild(f)});let a=new Po;e==0?(a.loadSource(t),a.attachMedia(s)):s.src=t;const l=new lc(s,o);let u;return l.on("ready",()=>{console.log(r),u=WX(s,r,l,i,Ec)}),()=>{l.destroy(),a.destroy(),s.innerHTML="",u()}},[t]),S.jsx(S.Fragment,{children:S.jsxs("div",{className:"container_x "+Gi.contaner,children:[S.jsx("div",{id:"playerCon",className:Gi.player,children:S.jsx("video",{id:"roomPlayer"})}),S.jsxs("div",{className:Gi.playerDesk,children:[S.jsx("p",{style:{color:"#ffc107"}}),S.jsxs("p",{children:["playing: ",S.jsx(qt,{download:!0,to:t,children:t})]})]})]})})}const ks=({message:t,loading:e,error:n})=>S.jsxs(S.Fragment,{children:[S.jsx("h3",{className:n?my.error:"",children:t}),e&&S.jsx(AW,{sx:{padding:"1rem"},color:"inherit"})]}),qX=({guest:t})=>{const e=qs(m=>m.user),{data:n,joinRoom:r,connected:i,socket:s}=qs(m=>m.room),[o,a]=A.useState(S.jsx(ks,{loading:!0,message:"Connecting to the room server"})),l=ax(),[u,c]=A.useState(null),d=us();function f(){const m=Sf(ON,{timeout:1e4,port:4e3,reconnection:!1,reconnectionAttempts:0}),h=setTimeout(()=>{console.log("connection timeout"),a(S.jsx(ks,{error:!0,message:"You Couldn't connected to the room server."})),m.close(),l(X0())},1e4);c(h),m.on("connect",()=>{h&&clearTimeout(h),l(tB({connected:!0,socket:m})),a(S.jsx(ks,{loading:!0,message:"Checking if you are authinticated."})),x9({socket:m,user:e,guest:t,data:n},a,Ec,l,d)})}return A.useEffect(()=>()=>{u&&clearTimeout(u)},[d,u]),A.useEffect(()=>(f(),()=>{l(X0()),c(null),a(S.jsx(ks,{loading:!0,message:"Connecting to the room server"}))}),[d]),S.jsxs(S.Fragment,{children:[!r&&S.jsx(C1,{loadingInner:o}),r&&!(n!=null&&n.url)&&S.jsx(C1,{loadingInner:S.jsx(ks,{message:"Currently, the room owner hasn't added anything yet."})}),r&&(n==null?void 0:n.url)&&S.jsxs(S.Fragment,{children:[S.jsx(pW,{password:n.password,roomId:n.roomId}),S.jsx(KX,{user:e,socket:s,url:n.url,mediaType:n.mediaType,subtitles:n.subtitles})]})]})},Hw=({guest:t})=>(qs(e=>e.room),S.jsx(S.Fragment,{children:S.jsx(qX,{guest:t})}));Ee.defaults.withCredentials=!0;const YX=rN([{errorElement:S.jsx(HV,{}),id:"main_loader",loader:cz,children:[{path:"/",element:S.jsx(uz,{}),children:[{index:!0,element:S.jsx(bH,{}),loader:TH},{path:"movie",children:[{index:!0,element:S.jsx(fV,{}),loader:hV},{path:"top",element:S.jsx(SV,{}),loader:EV},{path:"nowplaying",element:S.jsx(wV,{}),loader:RV},{path:"trending",element:S.jsx(CV,{}),loader:LV},{path:":id",element:S.jsx(h1,{type:"movie"}),loader:IG}]},{path:"tv",children:[{index:!0,element:S.jsx(gV,{}),loader:yV},{path:"top",element:S.jsx(IV,{}),loader:DV},{path:"trending",element:S.jsx(NV,{}),loader:FV},{path:":id/:season/:episode",element:S.jsx(h1,{type:"tv"}),loader:DG}]},{path:"search",element:S.jsx(zV,{}),loader:VV},{path:"user",element:S.jsx(sW,{}),children:[{path:"fav",element:S.jsx(tW,{}),loader:nW},{path:"con",element:S.jsx(oW,{}),loader:aW},{path:"logout",loader:cW},{path:"room",element:S.jsx(Hw,{guest:!1})},{path:"room/guest",element:S.jsx(Hw,{guest:!0})}]}]},{path:"/auth",element:S.jsx(dW,{}),children:[{path:"signin",element:S.jsx(XG,{}),action:QG},{path:"signup",element:S.jsx(ZG,{}),action:eW}]}]}]);function XX(){return S.jsx(S.Fragment,{children:S.jsx(dN,{router:YX})})}Ng.createRoot(document.getElementById("root")).render(S.jsx(YF,{store:qp,children:S.jsx(d2,{children:S.jsx(XX,{})})}));
